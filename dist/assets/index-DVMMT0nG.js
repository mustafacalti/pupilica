(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Xk(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var hm={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function Zk(){if(Sv)return Ql;Sv=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var g in o)g!=="key"&&(l[g]=o[g])}else l=o;return o=l.ref,{$$typeof:a,type:s,key:h,ref:o!==void 0?o:null,props:l}}return Ql.Fragment=e,Ql.jsx=t,Ql.jsxs=t,Ql}var wv;function Wk(){return wv||(wv=1,hm.exports=Zk()),hm.exports}var u=Wk(),fm={exports:{}},Xl={},mm={exports:{}},gm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function Jk(){return Av||(Av=1,(function(a){function e(X,he){var me=X.length;X.push(he);e:for(;0<me;){var Me=me-1>>>1,D=X[Me];if(0<o(D,he))X[Me]=he,X[me]=D,me=Me;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var he=X[0],me=X.pop();if(me!==he){X[0]=me;e:for(var Me=0,D=X.length,z=D>>>1;Me<z;){var W=2*(Me+1)-1,Q=X[W],ce=W+1,be=X[ce];if(0>o(Q,me))ce<D&&0>o(be,Q)?(X[Me]=be,X[ce]=me,Me=ce):(X[Me]=Q,X[W]=me,Me=W);else if(ce<D&&0>o(be,me))X[Me]=be,X[ce]=me,Me=ce;else break e}}return he}function o(X,he){var me=X.sortIndex-he.sortIndex;return me!==0?me:X.id-he.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;a.unstable_now=function(){return l.now()}}else{var h=Date,g=h.now();a.unstable_now=function(){return h.now()-g}}var p=[],y=[],x=1,T=null,w=3,M=!1,F=!1,B=!1,U=!1,K=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function Se(X){for(var he=t(y);he!==null;){if(he.callback===null)s(y);else if(he.startTime<=X)s(y),he.sortIndex=he.expirationTime,e(p,he);else break;he=t(y)}}function Te(X){if(B=!1,Se(X),!F)if(t(p)!==null)F=!0,xe||(xe=!0,V());else{var he=t(y);he!==null&&de(Te,he.startTime-X)}}var xe=!1,R=-1,A=5,N=-1;function j(){return U?!0:!(a.unstable_now()-N<A)}function O(){if(U=!1,xe){var X=a.unstable_now();N=X;var he=!0;try{e:{F=!1,B&&(B=!1,ee(R),R=-1),M=!0;var me=w;try{t:{for(Se(X),T=t(p);T!==null&&!(T.expirationTime>X&&j());){var Me=T.callback;if(typeof Me=="function"){T.callback=null,w=T.priorityLevel;var D=Me(T.expirationTime<=X);if(X=a.unstable_now(),typeof D=="function"){T.callback=D,Se(X),he=!0;break t}T===t(p)&&s(p),Se(X)}else s(p);T=t(p)}if(T!==null)he=!0;else{var z=t(y);z!==null&&de(Te,z.startTime-X),he=!1}}break e}finally{T=null,w=me,M=!1}he=void 0}}finally{he?V():xe=!1}}}var V;if(typeof ne=="function")V=function(){ne(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,lt=C.port2;C.port1.onmessage=O,V=function(){lt.postMessage(null)}}else V=function(){K(O,0)};function de(X,he){R=K(function(){X(a.unstable_now())},he)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(X){X.callback=null},a.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<X?Math.floor(1e3/X):5},a.unstable_getCurrentPriorityLevel=function(){return w},a.unstable_next=function(X){switch(w){case 1:case 2:case 3:var he=3;break;default:he=w}var me=w;w=he;try{return X()}finally{w=me}},a.unstable_requestPaint=function(){U=!0},a.unstable_runWithPriority=function(X,he){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var me=w;w=X;try{return he()}finally{w=me}},a.unstable_scheduleCallback=function(X,he,me){var Me=a.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Me+me:Me):me=Me,X){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=me+D,X={id:x++,callback:he,priorityLevel:X,startTime:me,expirationTime:D,sortIndex:-1},me>Me?(X.sortIndex=me,e(y,X),t(p)===null&&X===t(y)&&(B?(ee(R),R=-1):B=!0,de(Te,me-Me))):(X.sortIndex=D,e(p,X),F||M||(F=!0,xe||(xe=!0,V()))),X},a.unstable_shouldYield=j,a.unstable_wrapCallback=function(X){var he=w;return function(){var me=w;w=he;try{return X.apply(this,arguments)}finally{w=me}}}})(gm)),gm}var Rv;function e1(){return Rv||(Rv=1,mm.exports=Jk()),mm.exports}var pm={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function t1(){if(Nv)return ot;Nv=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),T=Symbol.iterator;function w(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,B={};function U(D,z,W){this.props=D,this.context=z,this.refs=B,this.updater=W||M}U.prototype.isReactComponent={},U.prototype.setState=function(D,z){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,z,"setState")},U.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function K(){}K.prototype=U.prototype;function ee(D,z,W){this.props=D,this.context=z,this.refs=B,this.updater=W||M}var ne=ee.prototype=new K;ne.constructor=ee,F(ne,U.prototype),ne.isPureReactComponent=!0;var Se=Array.isArray,Te={H:null,A:null,T:null,S:null,V:null},xe=Object.prototype.hasOwnProperty;function R(D,z,W,Q,ce,be){return W=be.ref,{$$typeof:a,type:D,key:z,ref:W!==void 0?W:null,props:be}}function A(D,z){return R(D.type,z,void 0,void 0,void 0,D.props)}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===a}function j(D){var z={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(W){return z[W]})}var O=/\/+/g;function V(D,z){return typeof D=="object"&&D!==null&&D.key!=null?j(""+D.key):z.toString(36)}function C(){}function lt(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(C,C):(D.status="pending",D.then(function(z){D.status==="pending"&&(D.status="fulfilled",D.value=z)},function(z){D.status==="pending"&&(D.status="rejected",D.reason=z)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function de(D,z,W,Q,ce){var be=typeof D;(be==="undefined"||be==="boolean")&&(D=null);var Ae=!1;if(D===null)Ae=!0;else switch(be){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(D.$$typeof){case a:case e:Ae=!0;break;case x:return Ae=D._init,de(Ae(D._payload),z,W,Q,ce)}}if(Ae)return ce=ce(D),Ae=Q===""?"."+V(D,0):Q,Se(ce)?(W="",Ae!=null&&(W=Ae.replace(O,"$&/")+"/"),de(ce,z,W,"",function(De){return De})):ce!=null&&(N(ce)&&(ce=A(ce,W+(ce.key==null||D&&D.key===ce.key?"":(""+ce.key).replace(O,"$&/")+"/")+Ae)),z.push(ce)),1;Ae=0;var fe=Q===""?".":Q+":";if(Se(D))for(var ue=0;ue<D.length;ue++)Q=D[ue],be=fe+V(Q,ue),Ae+=de(Q,z,W,be,ce);else if(ue=w(D),typeof ue=="function")for(D=ue.call(D),ue=0;!(Q=D.next()).done;)Q=Q.value,be=fe+V(Q,ue++),Ae+=de(Q,z,W,be,ce);else if(be==="object"){if(typeof D.then=="function")return de(lt(D),z,W,Q,ce);throw z=String(D),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function X(D,z,W){if(D==null)return D;var Q=[],ce=0;return de(D,Q,"","",function(be){return z.call(W,be,ce++)}),Q}function he(D){if(D._status===-1){var z=D._result;z=z(),z.then(function(W){(D._status===0||D._status===-1)&&(D._status=1,D._result=W)},function(W){(D._status===0||D._status===-1)&&(D._status=2,D._result=W)}),D._status===-1&&(D._status=0,D._result=z)}if(D._status===1)return D._result.default;throw D._result}var me=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)};function Me(){}return ot.Children={map:X,forEach:function(D,z,W){X(D,function(){z.apply(this,arguments)},W)},count:function(D){var z=0;return X(D,function(){z++}),z},toArray:function(D){return X(D,function(z){return z})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ot.Component=U,ot.Fragment=t,ot.Profiler=o,ot.PureComponent=ee,ot.StrictMode=s,ot.Suspense=p,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Te,ot.__COMPILER_RUNTIME={__proto__:null,c:function(D){return Te.H.useMemoCache(D)}},ot.cache=function(D){return function(){return D.apply(null,arguments)}},ot.cloneElement=function(D,z,W){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var Q=F({},D.props),ce=D.key,be=void 0;if(z!=null)for(Ae in z.ref!==void 0&&(be=void 0),z.key!==void 0&&(ce=""+z.key),z)!xe.call(z,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&z.ref===void 0||(Q[Ae]=z[Ae]);var Ae=arguments.length-2;if(Ae===1)Q.children=W;else if(1<Ae){for(var fe=Array(Ae),ue=0;ue<Ae;ue++)fe[ue]=arguments[ue+2];Q.children=fe}return R(D.type,ce,void 0,void 0,be,Q)},ot.createContext=function(D){return D={$$typeof:h,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:l,_context:D},D},ot.createElement=function(D,z,W){var Q,ce={},be=null;if(z!=null)for(Q in z.key!==void 0&&(be=""+z.key),z)xe.call(z,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(ce[Q]=z[Q]);var Ae=arguments.length-2;if(Ae===1)ce.children=W;else if(1<Ae){for(var fe=Array(Ae),ue=0;ue<Ae;ue++)fe[ue]=arguments[ue+2];ce.children=fe}if(D&&D.defaultProps)for(Q in Ae=D.defaultProps,Ae)ce[Q]===void 0&&(ce[Q]=Ae[Q]);return R(D,be,void 0,void 0,null,ce)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(D){return{$$typeof:g,render:D}},ot.isValidElement=N,ot.lazy=function(D){return{$$typeof:x,_payload:{_status:-1,_result:D},_init:he}},ot.memo=function(D,z){return{$$typeof:y,type:D,compare:z===void 0?null:z}},ot.startTransition=function(D){var z=Te.T,W={};Te.T=W;try{var Q=D(),ce=Te.S;ce!==null&&ce(W,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(Me,me)}catch(be){me(be)}finally{Te.T=z}},ot.unstable_useCacheRefresh=function(){return Te.H.useCacheRefresh()},ot.use=function(D){return Te.H.use(D)},ot.useActionState=function(D,z,W){return Te.H.useActionState(D,z,W)},ot.useCallback=function(D,z){return Te.H.useCallback(D,z)},ot.useContext=function(D){return Te.H.useContext(D)},ot.useDebugValue=function(){},ot.useDeferredValue=function(D,z){return Te.H.useDeferredValue(D,z)},ot.useEffect=function(D,z,W){var Q=Te.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(D,z)},ot.useId=function(){return Te.H.useId()},ot.useImperativeHandle=function(D,z,W){return Te.H.useImperativeHandle(D,z,W)},ot.useInsertionEffect=function(D,z){return Te.H.useInsertionEffect(D,z)},ot.useLayoutEffect=function(D,z){return Te.H.useLayoutEffect(D,z)},ot.useMemo=function(D,z){return Te.H.useMemo(D,z)},ot.useOptimistic=function(D,z){return Te.H.useOptimistic(D,z)},ot.useReducer=function(D,z,W){return Te.H.useReducer(D,z,W)},ot.useRef=function(D){return Te.H.useRef(D)},ot.useState=function(D){return Te.H.useState(D)},ot.useSyncExternalStore=function(D,z,W){return Te.H.useSyncExternalStore(D,z,W)},ot.useTransition=function(){return Te.H.useTransition()},ot.version="19.1.1",ot}var Cv;function lg(){return Cv||(Cv=1,pm.exports=t1()),pm.exports}var ym={exports:{}},Yn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function n1(){if(Iv)return Yn;Iv=1;var a=lg();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,y,x){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:y,implementation:x}}var h=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return Yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Yn.createPortal=function(p,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,x)},Yn.flushSync=function(p){var y=h.T,x=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=y,s.p=x,s.d.f()}},Yn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},Yn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Yn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var x=y.as,T=g(x,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,M=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:w,fetchPriority:M}):x==="script"&&s.d.X(p,{crossOrigin:T,integrity:w,fetchPriority:M,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},Yn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=g(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},Yn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,T=g(x,y.crossOrigin);s.d.L(p,x,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},Yn.preloadModule=function(p,y){if(typeof p=="string")if(y){var x=g(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},Yn.requestFormReset=function(p){s.d.r(p)},Yn.unstable_batchedUpdates=function(p,y){return p(y)},Yn.useFormState=function(p,y,x){return h.H.useFormState(p,y,x)},Yn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Yn.version="19.1.1",Yn}var Dv;function r1(){if(Dv)return ym.exports;Dv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),ym.exports=n1(),ym.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function a1(){if(jv)return Xl;jv=1;var a=e1(),e=lg(),t=r1();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,i=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(i=r.return),n=r.return;while(n)}return r.tag===3?i:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function g(n){if(l(n)!==n)throw Error(s(188))}function p(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(s(188));return r!==n?null:n}for(var i=n,c=r;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){i=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return g(f),n;if(m===c)return g(f),r;m=m.sibling}throw Error(s(188))}if(i.return!==c.return)i=f,c=m;else{for(var _=!1,k=f.child;k;){if(k===i){_=!0,i=f,c=m;break}if(k===c){_=!0,c=f,i=m;break}k=k.sibling}if(!_){for(k=m.child;k;){if(k===i){_=!0,i=m,c=f;break}if(k===c){_=!0,c=m,i=f;break}k=k.sibling}if(!_)throw Error(s(189))}}if(i.alternate!==c)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?n:r}function y(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=y(n),r!==null)return r;n=n.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),ee=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=O&&n[O]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function lt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case F:return"Fragment";case U:return"Profiler";case B:return"StrictMode";case Te:return"Suspense";case xe:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case ne:return(n.displayName||"Context")+".Provider";case ee:return(n._context.displayName||"Context")+".Consumer";case Se:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return r=n.displayName||null,r!==null?r:lt(n.type)||"Memo";case A:r=n._payload,n=n._init;try{return lt(n(r))}catch{}}return null}var de=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Me=[],D=-1;function z(n){return{current:n}}function W(n){0>D||(n.current=Me[D],Me[D]=null,D--)}function Q(n,r){D++,Me[D]=n.current,n.current=r}var ce=z(null),be=z(null),Ae=z(null),fe=z(null);function ue(n,r){switch(Q(Ae,r),Q(be,n),Q(ce,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?J0(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=J0(r),n=ev(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(ce),Q(ce,n)}function De(){W(ce),W(be),W(Ae)}function ye(n){n.memoizedState!==null&&Q(fe,n);var r=ce.current,i=ev(r,n.type);r!==i&&(Q(be,n),Q(ce,i))}function oe(n){be.current===n&&(W(ce),W(be)),fe.current===n&&(W(fe),Fl._currentValue=me)}var He=Object.prototype.hasOwnProperty,it=a.unstable_scheduleCallback,Le=a.unstable_cancelCallback,ft=a.unstable_shouldYield,et=a.unstable_requestPaint,Ye=a.unstable_now,pt=a.unstable_getCurrentPriorityLevel,tt=a.unstable_ImmediatePriority,zt=a.unstable_UserBlockingPriority,$t=a.unstable_NormalPriority,rn=a.unstable_LowPriority,dn=a.unstable_IdlePriority,An=a.log,Pn=a.unstable_setDisableYieldValue,st=null,ut=null;function Kt(n){if(typeof An=="function"&&Pn(n),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(st,n)}catch{}}var Xt=Math.clz32?Math.clz32:dr,Kr=Math.log,Or=Math.LN2;function dr(n){return n>>>=0,n===0?32:31-(Kr(n)/Or|0)|0}var Vn=256,rr=4194304;function Rn(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Ue(n,r,i){var c=n.pendingLanes;if(c===0)return 0;var f=0,m=n.suspendedLanes,_=n.pingedLanes;n=n.warmLanes;var k=c&134217727;return k!==0?(c=k&~m,c!==0?f=Rn(c):(_&=k,_!==0?f=Rn(_):i||(i=k&~n,i!==0&&(f=Rn(i))))):(k=c&~m,k!==0?f=Rn(k):_!==0?f=Rn(_):i||(i=c&~n,i!==0&&(f=Rn(i)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,i=r&-r,m>=i||m===32&&(i&4194048)!==0)?r:f}function We(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function _t(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function It(){var n=Vn;return Vn<<=1,(Vn&4194048)===0&&(Vn=256),n}function Zt(){var n=rr;return rr<<=1,(rr&62914560)===0&&(rr=4194304),n}function Lt(n){for(var r=[],i=0;31>i;i++)r.push(n);return r}function le(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function _e(n,r,i,c,f,m){var _=n.pendingLanes;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=i,n.entangledLanes&=i,n.errorRecoveryDisabledLanes&=i,n.shellSuspendCounter=0;var k=n.entanglements,I=n.expirationTimes,q=n.hiddenUpdates;for(i=_&~i;0<i;){var te=31-Xt(i),se=1<<te;k[te]=0,I[te]=-1;var $=q[te];if($!==null)for(q[te]=null,te=0;te<$.length;te++){var Y=$[te];Y!==null&&(Y.lane&=-536870913)}i&=~se}c!==0&&qe(n,c,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(_&~r))}function qe(n,r,i){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-Xt(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|i&4194090}function Je(n,r){var i=n.entangledLanes|=r;for(n=n.entanglements;i;){var c=31-Xt(i),f=1<<c;f&r|n[c]&r&&(n[c]|=r),i&=~f}}function Z(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ee(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function ke(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:xv(n.type))}function Oe(n,r){var i=he.p;try{return he.p=n,r()}finally{he.p=i}}var Ce=Math.random().toString(36).slice(2),ve="__reactFiber$"+Ce,Ne="__reactProps$"+Ce,Pe="__reactContainer$"+Ce,Re="__reactEvents$"+Ce,Ge="__reactListeners$"+Ce,Tt="__reactHandles$"+Ce,qt="__reactResources$"+Ce,Wt="__reactMarker$"+Ce;function an(n){delete n[ve],delete n[Ne],delete n[Re],delete n[Ge],delete n[Tt]}function sn(n){var r=n[ve];if(r)return r;for(var i=n.parentNode;i;){if(r=i[Pe]||i[ve]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(n=av(n);n!==null;){if(i=n[ve])return i;n=av(n)}return r}n=i,i=n.parentNode}return null}function xn(n){if(n=n[ve]||n[Pe]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Nn(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function on(n){var r=n[qt];return r||(r=n[qt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ut(n){n[Wt]=!0}var Fe=new Set,ge={};function rt(n,r){$n(n,r),$n(n+"Capture",r)}function $n(n,r){for(ge[n]=r,n=0;n<r.length;n++)Fe.add(r[n])}var Yr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_a={},Qr={};function qc(n){return He.call(Qr,n)?!0:He.call(_a,n)?!1:Yr.test(n)?Qr[n]=!0:(_a[n]=!0,!1)}function es(n,r,i){if(qc(r))if(i===null)n.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+i)}}function Xr(n,r,i){if(i===null)n.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+i)}}function zn(n,r,i,c){if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttributeNS(r,i,""+c)}}var qs,$c;function Ta(n){if(qs===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);qs=r&&r[1]||"",$c=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qs+n+$c}var ji=!1;function Mi(n,r){if(!n||ji)return"";ji=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(Y){var $=Y}Reflect.construct(n,[],se)}else{try{se.call()}catch(Y){$=Y}n.call(se.prototype)}}else{try{throw Error()}catch(Y){$=Y}(se=n())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(Y){if(Y&&$&&typeof Y.stack=="string")return[Y.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),_=m[0],k=m[1];if(_&&k){var I=_.split(`
`),q=k.split(`
`);for(f=c=0;c<I.length&&!I[c].includes("DetermineComponentFrameRoot");)c++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(c===I.length||f===q.length)for(c=I.length-1,f=q.length-1;1<=c&&0<=f&&I[c]!==q[f];)f--;for(;1<=c&&0<=f;c--,f--)if(I[c]!==q[f]){if(c!==1||f!==1)do if(c--,f--,0>f||I[c]!==q[f]){var te=`
`+I[c].replace(" at new "," at ");return n.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",n.displayName)),te}while(1<=c&&0<=f);break}}}finally{ji=!1,Error.prepareStackTrace=i}return(i=n?n.displayName||n.name:"")?Ta(i):""}function Zo(n){switch(n.tag){case 26:case 27:case 5:return Ta(n.type);case 16:return Ta("Lazy");case 13:return Ta("Suspense");case 19:return Ta("SuspenseList");case 0:case 15:return Mi(n.type,!1);case 11:return Mi(n.type.render,!1);case 1:return Mi(n.type,!0);case 31:return Ta("Activity");default:return""}}function Oi(n){try{var r="";do r+=Zo(n),n=n.return;while(n);return r}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function Jn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Wo(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function gh(n){var r=Wo(n)?"checked":"value",i=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var f=i.get,m=i.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(_){c=""+_,m.call(this,_)}}),Object.defineProperty(n,r,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Pi(n){n._valueTracker||(n._valueTracker=gh(n))}function Jo(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var i=r.getValue(),c="";return n&&(c=Wo(n)?n.checked?"true":"false":n.value),n=c,n!==i?(r.setValue(n),!0):!1}function $s(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ph=/[\n"\\]/g;function hn(n){return n.replace(ph,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function hr(n,r,i,c,f,m,_,k){n.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?n.type=_:n.removeAttribute("type"),r!=null?_==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Jn(r)):n.value!==""+Jn(r)&&(n.value=""+Jn(r)):_!=="submit"&&_!=="reset"||n.removeAttribute("value"),r!=null?ts(n,_,Jn(r)):i!=null?ts(n,_,Jn(i)):c!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?n.name=""+Jn(k):n.removeAttribute("name")}function Ks(n,r,i,c,f,m,_,k){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),r!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;i=i!=null?""+Jn(i):"",r=r!=null?""+Jn(r):i,k||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=k?n.checked:!!c,n.defaultChecked=!!c,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(n.name=_)}function ts(n,r,i){r==="number"&&$s(n.ownerDocument)===n||n.defaultValue===""+i||(n.defaultValue=""+i)}function Ea(n,r,i,c){if(n=n.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<n.length;i++)f=r.hasOwnProperty("$"+n[i].value),n[i].selected!==f&&(n[i].selected=f),f&&c&&(n[i].defaultSelected=!0)}else{for(i=""+Jn(i),r=null,f=0;f<n.length;f++){if(n[f].value===i){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function Mt(n,r,i){if(r!=null&&(r=""+Jn(r),r!==n.value&&(n.value=r),i==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=i!=null?""+Jn(i):""}function Ys(n,r,i,c){if(r==null){if(c!=null){if(i!=null)throw Error(s(92));if(de(c)){if(1<c.length)throw Error(s(93));c=c[0]}i=c}i==null&&(i=""),r=i}i=Jn(r),n.defaultValue=i,c=n.textContent,c===i&&c!==""&&c!==null&&(n.value=c)}function br(n,r){if(r){var i=n.firstChild;if(i&&i===n.lastChild&&i.nodeType===3){i.nodeValue=r;return}}n.textContent=r}var Qs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kc(n,r,i){var c=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,i):typeof i!="number"||i===0||Qs.has(r)?r==="float"?n.cssFloat=i:n[r]=(""+i).trim():n[r]=i+"px"}function el(n,r,i){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&i[f]!==c&&Kc(n,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Kc(n,m,r[m])}function tl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vi(n){return vh.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var ka=null;function _r(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Sa=null,wa=null;function nl(n){var r=xn(n);if(r&&(n=r.stateNode)){var i=n[Ne]||null;e:switch(n=r.stateNode,r.type){case"input":if(hr(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=n;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+hn(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var c=i[r];if(c!==n&&c.form===n.form){var f=c[Ne]||null;if(!f)throw Error(s(90));hr(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<i.length;r++)c=i[r],c.form===n.form&&Jo(c)}break e;case"textarea":Mt(n,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&Ea(n,!!i.multiple,r,!1)}}}var Zr=!1;function Yc(n,r,i){if(Zr)return n(r,i);Zr=!0;try{var c=n(r);return c}finally{if(Zr=!1,(Sa!==null||wa!==null)&&(Bu(),Sa&&(r=Sa,n=wa,wa=Sa=null,nl(r),n)))for(r=0;r<n.length;r++)nl(n[r])}}function Xs(n,r){var i=n.stateNode;if(i===null)return null;var c=i[Ne]||null;if(c===null)return null;i=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(i&&typeof i!="function")throw Error(s(231,r,typeof i));return i}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Tr=!1;if(Pr)try{var Zs={};Object.defineProperty(Zs,"passive",{get:function(){Tr=!0}}),window.addEventListener("test",Zs,Zs),window.removeEventListener("test",Zs,Zs)}catch{Tr=!1}var Wr=null,ns=null,Aa=null;function rl(){if(Aa)return Aa;var n,r=ns,i=r.length,c,f="value"in Wr?Wr.value:Wr.textContent,m=f.length;for(n=0;n<i&&r[n]===f[n];n++);var _=i-n;for(c=1;c<=_&&r[i-c]===f[m-c];c++);return Aa=f.slice(n,1<c?1-c:void 0)}function Jr(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function ea(){return!0}function al(){return!1}function Cn(n){function r(i,c,f,m,_){this._reactName=i,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(i=n[k],this[k]=i?i(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?ea:al,this.isPropagationStopped=al,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ea)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ea)},persist:function(){},isPersistent:ea}),r}var Nt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zi=Cn(Nt),Ws=x({},Nt,{view:0,detail:0}),Qc=Cn(Ws),Li,Ui,ta,Js=x({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ni,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ta&&(ta&&n.type==="mousemove"?(Li=n.screenX-ta.screenX,Ui=n.screenY-ta.screenY):Ui=Li=0,ta=n),Li)},movementY:function(n){return"movementY"in n?n.movementY:Ui}}),Er=Cn(Js),Xc=x({},Js,{dataTransfer:0}),xh=Cn(Xc),ei=x({},Ws,{relatedTarget:0}),Bi=Cn(ei),sl=x({},Nt,{animationName:0,elapsedTime:0,pseudoElement:0}),Hi=Cn(sl),Zc=x({},Nt,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Gi=Cn(Zc),bh=x({},Nt,{data:0}),il=Cn(bh),ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ol(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Jc[n])?!!r[n]:!1}function ni(){return ol}var eu=x({},Ws,{key:function(n){if(n.key){var r=ti[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Jr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Wc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ni,charCode:function(n){return n.type==="keypress"?Jr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Jr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fi=Cn(eu),tu=x({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=Cn(tu),Ra=x({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ni}),nu=Cn(Ra),ru=x({},Nt,{propertyName:0,elapsedTime:0,pseudoElement:0}),au=Cn(ru),su=x({},Js,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),qi=Cn(su),er=x({},Nt,{newState:0,oldState:0}),iu=Cn(er),ou=[9,13,27,32],na=Pr&&"CompositionEvent"in window,d=null;Pr&&"documentMode"in document&&(d=document.documentMode);var v=Pr&&"TextEvent"in window&&!d,b=Pr&&(!na||d&&8<d&&11>=d),S=" ",H=!1;function J(n,r){switch(n){case"keyup":return ou.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pe(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Et=!1;function bn(n,r){switch(n){case"compositionend":return pe(r);case"keypress":return r.which!==32?null:(H=!0,S);case"textInput":return n=r.data,n===S&&H?null:n;default:return null}}function kt(n,r){if(Et)return n==="compositionend"||!na&&J(n,r)?(n=rl(),Aa=ns=Wr=null,Et=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return b&&r.locale!=="ko"?null:r.data;default:return null}}var In={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _n(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!In[n.type]:r==="textarea"}function Na(n,r,i,c){Sa?wa?wa.push(c):wa=[c]:Sa=c,r=Ku(r,"onChange"),0<r.length&&(i=new zi("onChange","change",null,i,c),n.push({event:i,listeners:r}))}var Ln=null,ra=null;function cl(n){Y0(n,0)}function lu(n){var r=Nn(n);if(Jo(r))return n}function gp(n,r){if(n==="change")return r}var pp=!1;if(Pr){var _h;if(Pr){var Th="oninput"in document;if(!Th){var yp=document.createElement("div");yp.setAttribute("oninput","return;"),Th=typeof yp.oninput=="function"}_h=Th}else _h=!1;pp=_h&&(!document.documentMode||9<document.documentMode)}function vp(){Ln&&(Ln.detachEvent("onpropertychange",xp),ra=Ln=null)}function xp(n){if(n.propertyName==="value"&&lu(ra)){var r=[];Na(r,ra,n,_r(n)),Yc(cl,r)}}function wE(n,r,i){n==="focusin"?(vp(),Ln=r,ra=i,Ln.attachEvent("onpropertychange",xp)):n==="focusout"&&vp()}function AE(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return lu(ra)}function RE(n,r){if(n==="click")return lu(r)}function NE(n,r){if(n==="input"||n==="change")return lu(r)}function CE(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var fr=typeof Object.is=="function"?Object.is:CE;function ul(n,r){if(fr(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var i=Object.keys(n),c=Object.keys(r);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var f=i[c];if(!He.call(r,f)||!fr(n[f],r[f]))return!1}return!0}function bp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _p(n,r){var i=bp(n);n=0;for(var c;i;){if(i.nodeType===3){if(c=n+i.textContent.length,n<=r&&c>=r)return{node:i,offset:r-n};n=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=bp(i)}}function Tp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Tp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Ep(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=$s(n.document);r instanceof n.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)n=r.contentWindow;else break;r=$s(n.document)}return r}function Eh(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var IE=Pr&&"documentMode"in document&&11>=document.documentMode,$i=null,kh=null,dl=null,Sh=!1;function kp(n,r,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Sh||$i==null||$i!==$s(c)||(c=$i,"selectionStart"in c&&Eh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),dl&&ul(dl,c)||(dl=c,c=Ku(kh,"onSelect"),0<c.length&&(r=new zi("onSelect","select",null,r,i),n.push({event:r,listeners:c}),r.target=$i)))}function ri(n,r){var i={};return i[n.toLowerCase()]=r.toLowerCase(),i["Webkit"+n]="webkit"+r,i["Moz"+n]="moz"+r,i}var Ki={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionrun:ri("Transition","TransitionRun"),transitionstart:ri("Transition","TransitionStart"),transitioncancel:ri("Transition","TransitionCancel"),transitionend:ri("Transition","TransitionEnd")},wh={},Sp={};Pr&&(Sp=document.createElement("div").style,"AnimationEvent"in window||(delete Ki.animationend.animation,delete Ki.animationiteration.animation,delete Ki.animationstart.animation),"TransitionEvent"in window||delete Ki.transitionend.transition);function ai(n){if(wh[n])return wh[n];if(!Ki[n])return n;var r=Ki[n],i;for(i in r)if(r.hasOwnProperty(i)&&i in Sp)return wh[n]=r[i];return n}var wp=ai("animationend"),Ap=ai("animationiteration"),Rp=ai("animationstart"),DE=ai("transitionrun"),jE=ai("transitionstart"),ME=ai("transitioncancel"),Np=ai("transitionend"),Cp=new Map,Ah="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ah.push("scrollEnd");function Vr(n,r){Cp.set(n,r),rt(r,[n])}var Ip=new WeakMap;function kr(n,r){if(typeof n=="object"&&n!==null){var i=Ip.get(n);return i!==void 0?i:(r={value:n,source:r,stack:Oi(r)},Ip.set(n,r),r)}return{value:n,source:r,stack:Oi(r)}}var Sr=[],Yi=0,Rh=0;function cu(){for(var n=Yi,r=Rh=Yi=0;r<n;){var i=Sr[r];Sr[r++]=null;var c=Sr[r];Sr[r++]=null;var f=Sr[r];Sr[r++]=null;var m=Sr[r];if(Sr[r++]=null,c!==null&&f!==null){var _=c.pending;_===null?f.next=f:(f.next=_.next,_.next=f),c.pending=f}m!==0&&Dp(i,f,m)}}function uu(n,r,i,c){Sr[Yi++]=n,Sr[Yi++]=r,Sr[Yi++]=i,Sr[Yi++]=c,Rh|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Nh(n,r,i,c){return uu(n,r,i,c),du(n)}function Qi(n,r){return uu(n,null,null,r),du(n)}function Dp(n,r,i){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i);for(var f=!1,m=n.return;m!==null;)m.childLanes|=i,c=m.alternate,c!==null&&(c.childLanes|=i),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&r!==null&&(f=31-Xt(i),n=m.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=i|536870912),m):null}function du(n){if(50<Pl)throw Pl=0,Pf=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Xi={};function OE(n,r,i,c){this.tag=n,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(n,r,i,c){return new OE(n,r,i,c)}function Ch(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Ca(n,r){var i=n.alternate;return i===null?(i=mr(n.tag,r,n.key,n.mode),i.elementType=n.elementType,i.type=n.type,i.stateNode=n.stateNode,i.alternate=n,n.alternate=i):(i.pendingProps=r,i.type=n.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=n.flags&65011712,i.childLanes=n.childLanes,i.lanes=n.lanes,i.child=n.child,i.memoizedProps=n.memoizedProps,i.memoizedState=n.memoizedState,i.updateQueue=n.updateQueue,r=n.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=n.sibling,i.index=n.index,i.ref=n.ref,i.refCleanup=n.refCleanup,i}function jp(n,r){n.flags&=65011714;var i=n.alternate;return i===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=i.childLanes,n.lanes=i.lanes,n.child=i.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=i.memoizedProps,n.memoizedState=i.memoizedState,n.updateQueue=i.updateQueue,n.type=i.type,r=i.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function hu(n,r,i,c,f,m){var _=0;if(c=n,typeof n=="function")Ch(n)&&(_=1);else if(typeof n=="string")_=Vk(n,i,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=mr(31,i,r,f),n.elementType=N,n.lanes=m,n;case F:return si(i.children,f,m,r);case B:_=8,f|=24;break;case U:return n=mr(12,i,r,f|2),n.elementType=U,n.lanes=m,n;case Te:return n=mr(13,i,r,f),n.elementType=Te,n.lanes=m,n;case xe:return n=mr(19,i,r,f),n.elementType=xe,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case K:case ne:_=10;break e;case ee:_=9;break e;case Se:_=11;break e;case R:_=14;break e;case A:_=16,c=null;break e}_=29,i=Error(s(130,n===null?"null":typeof n,"")),c=null}return r=mr(_,i,r,f),r.elementType=n,r.type=c,r.lanes=m,r}function si(n,r,i,c){return n=mr(7,n,c,r),n.lanes=i,n}function Ih(n,r,i){return n=mr(6,n,null,r),n.lanes=i,n}function Dh(n,r,i){return r=mr(4,n.children!==null?n.children:[],n.key,r),r.lanes=i,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Zi=[],Wi=0,fu=null,mu=0,wr=[],Ar=0,ii=null,Ia=1,Da="";function oi(n,r){Zi[Wi++]=mu,Zi[Wi++]=fu,fu=n,mu=r}function Mp(n,r,i){wr[Ar++]=Ia,wr[Ar++]=Da,wr[Ar++]=ii,ii=n;var c=Ia;n=Da;var f=32-Xt(c)-1;c&=~(1<<f),i+=1;var m=32-Xt(r)+f;if(30<m){var _=f-f%5;m=(c&(1<<_)-1).toString(32),c>>=_,f-=_,Ia=1<<32-Xt(r)+f|i<<f|c,Da=m+n}else Ia=1<<m|i<<f|c,Da=n}function jh(n){n.return!==null&&(oi(n,1),Mp(n,1,0))}function Mh(n){for(;n===fu;)fu=Zi[--Wi],Zi[Wi]=null,mu=Zi[--Wi],Zi[Wi]=null;for(;n===ii;)ii=wr[--Ar],wr[Ar]=null,Da=wr[--Ar],wr[Ar]=null,Ia=wr[--Ar],wr[Ar]=null}var tr=null,tn=null,Rt=!1,li=null,aa=!1,Oh=Error(s(519));function ci(n){var r=Error(s(418,""));throw ml(kr(r,n)),Oh}function Op(n){var r=n.stateNode,i=n.type,c=n.memoizedProps;switch(r[ve]=n,r[Ne]=c,i){case"dialog":gt("cancel",r),gt("close",r);break;case"iframe":case"object":case"embed":gt("load",r);break;case"video":case"audio":for(i=0;i<zl.length;i++)gt(zl[i],r);break;case"source":gt("error",r);break;case"img":case"image":case"link":gt("error",r),gt("load",r);break;case"details":gt("toggle",r);break;case"input":gt("invalid",r),Ks(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Pi(r);break;case"select":gt("invalid",r);break;case"textarea":gt("invalid",r),Ys(r,c.value,c.defaultValue,c.children),Pi(r)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||c.suppressHydrationWarning===!0||W0(r.textContent,i)?(c.popover!=null&&(gt("beforetoggle",r),gt("toggle",r)),c.onScroll!=null&&gt("scroll",r),c.onScrollEnd!=null&&gt("scrollend",r),c.onClick!=null&&(r.onclick=Yu),r=!0):r=!1,r||ci(n)}function Pp(n){for(tr=n.return;tr;)switch(tr.tag){case 5:case 13:aa=!1;return;case 27:case 3:aa=!0;return;default:tr=tr.return}}function hl(n){if(n!==tr)return!1;if(!Rt)return Pp(n),Rt=!0,!1;var r=n.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=n.type,i=!(i!=="form"&&i!=="button")||Wf(n.type,n.memoizedProps)),i=!i),i&&tn&&ci(n),Pp(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){tn=Lr(n.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++;n=n.nextSibling}tn=null}}else r===27?(r=tn,vs(n.type)?(n=nm,nm=null,tn=n):tn=r):tn=tr?Lr(n.stateNode.nextSibling):null;return!0}function fl(){tn=tr=null,Rt=!1}function Vp(){var n=li;return n!==null&&(ir===null?ir=n:ir.push.apply(ir,n),li=null),n}function ml(n){li===null?li=[n]:li.push(n)}var Ph=z(null),ui=null,ja=null;function rs(n,r,i){Q(Ph,r._currentValue),r._currentValue=i}function Ma(n){n._currentValue=Ph.current,W(Ph)}function Vh(n,r,i){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===i)break;n=n.return}}function zh(n,r,i,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var _=f.child;m=m.firstContext;e:for(;m!==null;){var k=m;m=f;for(var I=0;I<r.length;I++)if(k.context===r[I]){m.lanes|=i,k=m.alternate,k!==null&&(k.lanes|=i),Vh(m.return,i,n),c||(_=null);break e}m=k.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(s(341));_.lanes|=i,m=_.alternate,m!==null&&(m.lanes|=i),Vh(_,i,n),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===n){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function gl(n,r,i,c){n=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var k=f.type;fr(f.pendingProps.value,_.value)||(n!==null?n.push(k):n=[k])}}else if(f===fe.current){if(_=f.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Fl):n=[Fl])}f=f.return}n!==null&&zh(r,n,i,c),r.flags|=262144}function gu(n){for(n=n.firstContext;n!==null;){if(!fr(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function di(n){ui=n,ja=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Kn(n){return zp(ui,n)}function pu(n,r){return ui===null&&di(n),zp(n,r)}function zp(n,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},ja===null){if(n===null)throw Error(s(308));ja=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else ja=ja.next=r;return i}var PE=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(i,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(i){return i()})}},VE=a.unstable_scheduleCallback,zE=a.unstable_NormalPriority,Tn={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lh(){return{controller:new PE,data:new Map,refCount:0}}function pl(n){n.refCount--,n.refCount===0&&VE(zE,function(){n.controller.abort()})}var yl=null,Uh=0,Ji=0,eo=null;function LE(n,r){if(yl===null){var i=yl=[];Uh=0,Ji=Gf(),eo={status:"pending",value:void 0,then:function(c){i.push(c)}}}return Uh++,r.then(Lp,Lp),r}function Lp(){if(--Uh===0&&yl!==null){eo!==null&&(eo.status="fulfilled");var n=yl;yl=null,Ji=0,eo=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function UE(n,r){var i=[],c={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<i.length;f++)(0,i[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),c}var Up=X.S;X.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&LE(n,r),Up!==null&&Up(n,r)};var hi=z(null);function Bh(){var n=hi.current;return n!==null?n:Gt.pooledCache}function yu(n,r){r===null?Q(hi,hi.current):Q(hi,r.pool)}function Bp(){var n=Bh();return n===null?null:{parent:Tn._currentValue,pool:n}}var vl=Error(s(460)),Hp=Error(s(474)),vu=Error(s(542)),Hh={then:function(){}};function Gp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function xu(){}function Fp(n,r,i){switch(i=n[i],i===void 0?n.push(r):i!==r&&(r.then(xu,xu),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,$p(n),n;default:if(typeof r.status=="string")r.then(xu,xu);else{if(n=Gt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,$p(n),n}throw xl=r,vl}}var xl=null;function qp(){if(xl===null)throw Error(s(459));var n=xl;return xl=null,n}function $p(n){if(n===vl||n===vu)throw Error(s(483))}var as=!1;function Gh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Fh(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ss(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function is(n,r,i){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Dt&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=du(n),Dp(n,null,i),r}return uu(n,c,r,i),du(n)}function bl(n,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,i|=c,r.lanes=i,Je(n,i)}}function qh(n,r){var i=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var _={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=_:m=m.next=_,i=i.next}while(i!==null);m===null?f=m=r:m=m.next=r}else f=m=r;i={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},n.updateQueue=i;return}n=i.lastBaseUpdate,n===null?i.firstBaseUpdate=r:n.next=r,i.lastBaseUpdate=r}var $h=!1;function _l(){if($h){var n=eo;if(n!==null)throw n}}function Tl(n,r,i,c){$h=!1;var f=n.updateQueue;as=!1;var m=f.firstBaseUpdate,_=f.lastBaseUpdate,k=f.shared.pending;if(k!==null){f.shared.pending=null;var I=k,q=I.next;I.next=null,_===null?m=q:_.next=q,_=I;var te=n.alternate;te!==null&&(te=te.updateQueue,k=te.lastBaseUpdate,k!==_&&(k===null?te.firstBaseUpdate=q:k.next=q,te.lastBaseUpdate=I))}if(m!==null){var se=f.baseState;_=0,te=q=I=null,k=m;do{var $=k.lane&-536870913,Y=$!==k.lane;if(Y?(St&$)===$:(c&$)===$){$!==0&&$===Ji&&($h=!0),te!==null&&(te=te.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Ze=n,$e=k;$=r;var Vt=i;switch($e.tag){case 1:if(Ze=$e.payload,typeof Ze=="function"){se=Ze.call(Vt,se,$);break e}se=Ze;break e;case 3:Ze.flags=Ze.flags&-65537|128;case 0:if(Ze=$e.payload,$=typeof Ze=="function"?Ze.call(Vt,se,$):Ze,$==null)break e;se=x({},se,$);break e;case 2:as=!0}}$=k.callback,$!==null&&(n.flags|=64,Y&&(n.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[$]:Y.push($))}else Y={lane:$,tag:k.tag,payload:k.payload,callback:k.callback,next:null},te===null?(q=te=Y,I=se):te=te.next=Y,_|=$;if(k=k.next,k===null){if(k=f.shared.pending,k===null)break;Y=k,k=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);te===null&&(I=se),f.baseState=I,f.firstBaseUpdate=q,f.lastBaseUpdate=te,m===null&&(f.shared.lanes=0),ms|=_,n.lanes=_,n.memoizedState=se}}function Kp(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function Yp(n,r){var i=n.callbacks;if(i!==null)for(n.callbacks=null,n=0;n<i.length;n++)Kp(i[n],r)}var to=z(null),bu=z(0);function Qp(n,r){n=Ba,Q(bu,n),Q(to,r),Ba=n|r.baseLanes}function Kh(){Q(bu,Ba),Q(to,to.current)}function Yh(){Ba=bu.current,W(to),W(bu)}var os=0,ct=null,Ot=null,fn=null,_u=!1,no=!1,fi=!1,Tu=0,El=0,ro=null,BE=0;function ln(){throw Error(s(321))}function Qh(n,r){if(r===null)return!1;for(var i=0;i<r.length&&i<n.length;i++)if(!fr(n[i],r[i]))return!1;return!0}function Xh(n,r,i,c,f,m){return os=m,ct=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=n===null||n.memoizedState===null?Dy:jy,fi=!1,m=i(c,f),fi=!1,no&&(m=Zp(r,i,c,f)),Xp(n),m}function Xp(n){X.H=Ru;var r=Ot!==null&&Ot.next!==null;if(os=0,fn=Ot=ct=null,_u=!1,El=0,ro=null,r)throw Error(s(300));n===null||Dn||(n=n.dependencies,n!==null&&gu(n)&&(Dn=!0))}function Zp(n,r,i,c){ct=n;var f=0;do{if(no&&(ro=null),El=0,no=!1,25<=f)throw Error(s(301));if(f+=1,fn=Ot=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}X.H=YE,m=r(i,c)}while(no);return m}function HE(){var n=X.H,r=n.useState()[0];return r=typeof r.then=="function"?kl(r):r,n=n.useState()[0],(Ot!==null?Ot.memoizedState:null)!==n&&(ct.flags|=1024),r}function Zh(){var n=Tu!==0;return Tu=0,n}function Wh(n,r,i){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~i}function Jh(n){if(_u){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}_u=!1}os=0,fn=Ot=ct=null,no=!1,El=Tu=0,ro=null}function ar(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?ct.memoizedState=fn=n:fn=fn.next=n,fn}function mn(){if(Ot===null){var n=ct.alternate;n=n!==null?n.memoizedState:null}else n=Ot.next;var r=fn===null?ct.memoizedState:fn.next;if(r!==null)fn=r,Ot=n;else{if(n===null)throw ct.alternate===null?Error(s(467)):Error(s(310));Ot=n,n={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},fn===null?ct.memoizedState=fn=n:fn=fn.next=n}return fn}function ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(n){var r=El;return El+=1,ro===null&&(ro=[]),n=Fp(ro,n,r),r=ct,(fn===null?r.memoizedState:fn.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?Dy:jy),n}function Eu(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return kl(n);if(n.$$typeof===ne)return Kn(n)}throw Error(s(438,String(n)))}function tf(n){var r=null,i=ct.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var c=ct.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=ef(),ct.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(n),c=0;c<n;c++)i[c]=j;return r.index++,i}function Oa(n,r){return typeof r=="function"?r(n):r}function ku(n){var r=mn();return nf(r,Ot,n)}function nf(n,r,i){var c=n.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var f=n.baseQueue,m=c.pending;if(m!==null){if(f!==null){var _=f.next;f.next=m.next,m.next=_}r.baseQueue=f=m,c.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{r=f.next;var k=_=null,I=null,q=r,te=!1;do{var se=q.lane&-536870913;if(se!==q.lane?(St&se)===se:(os&se)===se){var $=q.revertLane;if($===0)I!==null&&(I=I.next={lane:0,revertLane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),se===Ji&&(te=!0);else if((os&$)===$){q=q.next,$===Ji&&(te=!0);continue}else se={lane:0,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(k=I=se,_=m):I=I.next=se,ct.lanes|=$,ms|=$;se=q.action,fi&&i(m,se),m=q.hasEagerState?q.eagerState:i(m,se)}else $={lane:se,revertLane:q.revertLane,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},I===null?(k=I=$,_=m):I=I.next=$,ct.lanes|=se,ms|=se;q=q.next}while(q!==null&&q!==r);if(I===null?_=m:I.next=k,!fr(m,n.memoizedState)&&(Dn=!0,te&&(i=eo,i!==null)))throw i;n.memoizedState=m,n.baseState=_,n.baseQueue=I,c.lastRenderedState=m}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function rf(n){var r=mn(),i=r.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=n;var c=i.dispatch,f=i.pending,m=r.memoizedState;if(f!==null){i.pending=null;var _=f=f.next;do m=n(m,_.action),_=_.next;while(_!==f);fr(m,r.memoizedState)||(Dn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),i.lastRenderedState=m}return[m,c]}function Wp(n,r,i){var c=ct,f=mn(),m=Rt;if(m){if(i===void 0)throw Error(s(407));i=i()}else i=r();var _=!fr((Ot||f).memoizedState,i);_&&(f.memoizedState=i,Dn=!0),f=f.queue;var k=ty.bind(null,c,f,n);if(Sl(2048,8,k,[n]),f.getSnapshot!==r||_||fn!==null&&fn.memoizedState.tag&1){if(c.flags|=2048,ao(9,Su(),ey.bind(null,c,f,i,r),null),Gt===null)throw Error(s(349));m||(os&124)!==0||Jp(c,r,i)}return i}function Jp(n,r,i){n.flags|=16384,n={getSnapshot:r,value:i},r=ct.updateQueue,r===null?(r=ef(),ct.updateQueue=r,r.stores=[n]):(i=r.stores,i===null?r.stores=[n]:i.push(n))}function ey(n,r,i,c){r.value=i,r.getSnapshot=c,ny(r)&&ry(n)}function ty(n,r,i){return i(function(){ny(r)&&ry(n)})}function ny(n){var r=n.getSnapshot;n=n.value;try{var i=r();return!fr(n,i)}catch{return!0}}function ry(n){var r=Qi(n,2);r!==null&&xr(r,n,2)}function af(n){var r=ar();if(typeof n=="function"){var i=n;if(n=i(),fi){Kt(!0);try{i()}finally{Kt(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:n},r}function ay(n,r,i,c){return n.baseState=i,nf(n,Ot,typeof c=="function"?c:Oa)}function GE(n,r,i,c,f){if(Au(n))throw Error(s(485));if(n=r.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};X.T!==null?i(!0):m.isTransition=!1,c(m),i=r.pending,i===null?(m.next=r.pending=m,sy(r,m)):(m.next=i.next,r.pending=i.next=m)}}function sy(n,r){var i=r.action,c=r.payload,f=n.state;if(r.isTransition){var m=X.T,_={};X.T=_;try{var k=i(f,c),I=X.S;I!==null&&I(_,k),iy(n,r,k)}catch(q){sf(n,r,q)}finally{X.T=m}}else try{m=i(f,c),iy(n,r,m)}catch(q){sf(n,r,q)}}function iy(n,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){oy(n,r,c)},function(c){return sf(n,r,c)}):oy(n,r,i)}function oy(n,r,i){r.status="fulfilled",r.value=i,ly(r),n.state=i,r=n.pending,r!==null&&(i=r.next,i===r?n.pending=null:(i=i.next,r.next=i,sy(n,i)))}function sf(n,r,i){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=i,ly(r),r=r.next;while(r!==c)}n.action=null}function ly(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function cy(n,r){return r}function uy(n,r){if(Rt){var i=Gt.formState;if(i!==null){e:{var c=ct;if(Rt){if(tn){t:{for(var f=tn,m=aa;f.nodeType!==8;){if(!m){f=null;break t}if(f=Lr(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){tn=Lr(f.nextSibling),c=f.data==="F!";break e}}ci(c)}c=!1}c&&(r=i[0])}}return i=ar(),i.memoizedState=i.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cy,lastRenderedState:r},i.queue=c,i=Ny.bind(null,ct,c),c.dispatch=i,c=af(!1),m=df.bind(null,ct,!1,c.queue),c=ar(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,i=GE.bind(null,ct,f,m,i),f.dispatch=i,c.memoizedState=n,[r,i,!1]}function dy(n){var r=mn();return hy(r,Ot,n)}function hy(n,r,i){if(r=nf(n,r,cy)[0],n=ku(Oa)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=kl(r)}catch(_){throw _===vl?vu:_}else c=r;r=mn();var f=r.queue,m=f.dispatch;return i!==r.memoizedState&&(ct.flags|=2048,ao(9,Su(),FE.bind(null,f,i),null)),[c,m,n]}function FE(n,r){n.action=r}function fy(n){var r=mn(),i=Ot;if(i!==null)return hy(r,i,n);mn(),r=r.memoizedState,i=mn();var c=i.queue.dispatch;return i.memoizedState=n,[r,c,!1]}function ao(n,r,i,c){return n={tag:n,create:i,deps:c,inst:r,next:null},r=ct.updateQueue,r===null&&(r=ef(),ct.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=n.next=n:(c=i.next,i.next=n,n.next=c,r.lastEffect=n),n}function Su(){return{destroy:void 0,resource:void 0}}function my(){return mn().memoizedState}function wu(n,r,i,c){var f=ar();c=c===void 0?null:c,ct.flags|=n,f.memoizedState=ao(1|r,Su(),i,c)}function Sl(n,r,i,c){var f=mn();c=c===void 0?null:c;var m=f.memoizedState.inst;Ot!==null&&c!==null&&Qh(c,Ot.memoizedState.deps)?f.memoizedState=ao(r,m,i,c):(ct.flags|=n,f.memoizedState=ao(1|r,m,i,c))}function gy(n,r){wu(8390656,8,n,r)}function py(n,r){Sl(2048,8,n,r)}function yy(n,r){return Sl(4,2,n,r)}function vy(n,r){return Sl(4,4,n,r)}function xy(n,r){if(typeof r=="function"){n=n();var i=r(n);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function by(n,r,i){i=i!=null?i.concat([n]):null,Sl(4,4,xy.bind(null,r,n),i)}function of(){}function _y(n,r){var i=mn();r=r===void 0?null:r;var c=i.memoizedState;return r!==null&&Qh(r,c[1])?c[0]:(i.memoizedState=[n,r],n)}function Ty(n,r){var i=mn();r=r===void 0?null:r;var c=i.memoizedState;if(r!==null&&Qh(r,c[1]))return c[0];if(c=n(),fi){Kt(!0);try{n()}finally{Kt(!1)}}return i.memoizedState=[c,r],c}function lf(n,r,i){return i===void 0||(os&1073741824)!==0?n.memoizedState=r:(n.memoizedState=i,n=S0(),ct.lanes|=n,ms|=n,i)}function Ey(n,r,i,c){return fr(i,r)?i:to.current!==null?(n=lf(n,i,c),fr(n,r)||(Dn=!0),n):(os&42)===0?(Dn=!0,n.memoizedState=i):(n=S0(),ct.lanes|=n,ms|=n,r)}function ky(n,r,i,c,f){var m=he.p;he.p=m!==0&&8>m?m:8;var _=X.T,k={};X.T=k,df(n,!1,r,i);try{var I=f(),q=X.S;if(q!==null&&q(k,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var te=UE(I,c);wl(n,r,te,vr(n))}else wl(n,r,c,vr(n))}catch(se){wl(n,r,{then:function(){},status:"rejected",reason:se},vr())}finally{he.p=m,X.T=_}}function qE(){}function cf(n,r,i,c){if(n.tag!==5)throw Error(s(476));var f=Sy(n).queue;ky(n,f,r,me,i===null?qE:function(){return wy(n),i(c)})}function Sy(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:me},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:i},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function wy(n){var r=Sy(n).next.queue;wl(n,r,{},vr())}function uf(){return Kn(Fl)}function Ay(){return mn().memoizedState}function Ry(){return mn().memoizedState}function $E(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var i=vr();n=ss(i);var c=is(r,n,i);c!==null&&(xr(c,r,i),bl(c,r,i)),r={cache:Lh()},n.payload=r;return}r=r.return}}function KE(n,r,i){var c=vr();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Au(n)?Cy(r,i):(i=Nh(n,r,i,c),i!==null&&(xr(i,n,c),Iy(i,r,c)))}function Ny(n,r,i){var c=vr();wl(n,r,i,c)}function wl(n,r,i,c){var f={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Au(n))Cy(r,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var _=r.lastRenderedState,k=m(_,i);if(f.hasEagerState=!0,f.eagerState=k,fr(k,_))return uu(n,r,f,0),Gt===null&&cu(),!1}catch{}finally{}if(i=Nh(n,r,f,c),i!==null)return xr(i,n,c),Iy(i,r,c),!0}return!1}function df(n,r,i,c){if(c={lane:2,revertLane:Gf(),action:c,hasEagerState:!1,eagerState:null,next:null},Au(n)){if(r)throw Error(s(479))}else r=Nh(n,i,c,2),r!==null&&xr(r,n,2)}function Au(n){var r=n.alternate;return n===ct||r!==null&&r===ct}function Cy(n,r){no=_u=!0;var i=n.pending;i===null?r.next=r:(r.next=i.next,i.next=r),n.pending=r}function Iy(n,r,i){if((i&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,i|=c,r.lanes=i,Je(n,i)}}var Ru={readContext:Kn,use:Eu,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln},Dy={readContext:Kn,use:Eu,useCallback:function(n,r){return ar().memoizedState=[n,r===void 0?null:r],n},useContext:Kn,useEffect:gy,useImperativeHandle:function(n,r,i){i=i!=null?i.concat([n]):null,wu(4194308,4,xy.bind(null,r,n),i)},useLayoutEffect:function(n,r){return wu(4194308,4,n,r)},useInsertionEffect:function(n,r){wu(4,2,n,r)},useMemo:function(n,r){var i=ar();r=r===void 0?null:r;var c=n();if(fi){Kt(!0);try{n()}finally{Kt(!1)}}return i.memoizedState=[c,r],c},useReducer:function(n,r,i){var c=ar();if(i!==void 0){var f=i(r);if(fi){Kt(!0);try{i(r)}finally{Kt(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=KE.bind(null,ct,n),[c.memoizedState,n]},useRef:function(n){var r=ar();return n={current:n},r.memoizedState=n},useState:function(n){n=af(n);var r=n.queue,i=Ny.bind(null,ct,r);return r.dispatch=i,[n.memoizedState,i]},useDebugValue:of,useDeferredValue:function(n,r){var i=ar();return lf(i,n,r)},useTransition:function(){var n=af(!1);return n=ky.bind(null,ct,n.queue,!0,!1),ar().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,i){var c=ct,f=ar();if(Rt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=r(),Gt===null)throw Error(s(349));(St&124)!==0||Jp(c,r,i)}f.memoizedState=i;var m={value:i,getSnapshot:r};return f.queue=m,gy(ty.bind(null,c,m,n),[n]),c.flags|=2048,ao(9,Su(),ey.bind(null,c,m,i,r),null),i},useId:function(){var n=ar(),r=Gt.identifierPrefix;if(Rt){var i=Da,c=Ia;i=(c&~(1<<32-Xt(c)-1)).toString(32)+i,r="«"+r+"R"+i,i=Tu++,0<i&&(r+="H"+i.toString(32)),r+="»"}else i=BE++,r="«"+r+"r"+i.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:uf,useFormState:uy,useActionState:uy,useOptimistic:function(n){var r=ar();r.memoizedState=r.baseState=n;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=df.bind(null,ct,!0,i),i.dispatch=r,[n,r]},useMemoCache:tf,useCacheRefresh:function(){return ar().memoizedState=$E.bind(null,ct)}},jy={readContext:Kn,use:Eu,useCallback:_y,useContext:Kn,useEffect:py,useImperativeHandle:by,useInsertionEffect:yy,useLayoutEffect:vy,useMemo:Ty,useReducer:ku,useRef:my,useState:function(){return ku(Oa)},useDebugValue:of,useDeferredValue:function(n,r){var i=mn();return Ey(i,Ot.memoizedState,n,r)},useTransition:function(){var n=ku(Oa)[0],r=mn().memoizedState;return[typeof n=="boolean"?n:kl(n),r]},useSyncExternalStore:Wp,useId:Ay,useHostTransitionStatus:uf,useFormState:dy,useActionState:dy,useOptimistic:function(n,r){var i=mn();return ay(i,Ot,n,r)},useMemoCache:tf,useCacheRefresh:Ry},YE={readContext:Kn,use:Eu,useCallback:_y,useContext:Kn,useEffect:py,useImperativeHandle:by,useInsertionEffect:yy,useLayoutEffect:vy,useMemo:Ty,useReducer:rf,useRef:my,useState:function(){return rf(Oa)},useDebugValue:of,useDeferredValue:function(n,r){var i=mn();return Ot===null?lf(i,n,r):Ey(i,Ot.memoizedState,n,r)},useTransition:function(){var n=rf(Oa)[0],r=mn().memoizedState;return[typeof n=="boolean"?n:kl(n),r]},useSyncExternalStore:Wp,useId:Ay,useHostTransitionStatus:uf,useFormState:fy,useActionState:fy,useOptimistic:function(n,r){var i=mn();return Ot!==null?ay(i,Ot,n,r):(i.baseState=n,[n,i.queue.dispatch])},useMemoCache:tf,useCacheRefresh:Ry},so=null,Al=0;function Nu(n){var r=Al;return Al+=1,so===null&&(so=[]),Fp(so,n,r)}function Rl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Cu(n,r){throw r.$$typeof===T?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function My(n){var r=n._init;return r(n._payload)}function Oy(n){function r(L,P){if(n){var G=L.deletions;G===null?(L.deletions=[P],L.flags|=16):G.push(P)}}function i(L,P){if(!n)return null;for(;P!==null;)r(L,P),P=P.sibling;return null}function c(L){for(var P=new Map;L!==null;)L.key!==null?P.set(L.key,L):P.set(L.index,L),L=L.sibling;return P}function f(L,P){return L=Ca(L,P),L.index=0,L.sibling=null,L}function m(L,P,G){return L.index=G,n?(G=L.alternate,G!==null?(G=G.index,G<P?(L.flags|=67108866,P):G):(L.flags|=67108866,P)):(L.flags|=1048576,P)}function _(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function k(L,P,G,re){return P===null||P.tag!==6?(P=Ih(G,L.mode,re),P.return=L,P):(P=f(P,G),P.return=L,P)}function I(L,P,G,re){var je=G.type;return je===F?te(L,P,G.props.children,re,G.key):P!==null&&(P.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===A&&My(je)===P.type)?(P=f(P,G.props),Rl(P,G),P.return=L,P):(P=hu(G.type,G.key,G.props,null,L.mode,re),Rl(P,G),P.return=L,P)}function q(L,P,G,re){return P===null||P.tag!==4||P.stateNode.containerInfo!==G.containerInfo||P.stateNode.implementation!==G.implementation?(P=Dh(G,L.mode,re),P.return=L,P):(P=f(P,G.children||[]),P.return=L,P)}function te(L,P,G,re,je){return P===null||P.tag!==7?(P=si(G,L.mode,re,je),P.return=L,P):(P=f(P,G),P.return=L,P)}function se(L,P,G){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Ih(""+P,L.mode,G),P.return=L,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case w:return G=hu(P.type,P.key,P.props,null,L.mode,G),Rl(G,P),G.return=L,G;case M:return P=Dh(P,L.mode,G),P.return=L,P;case A:var re=P._init;return P=re(P._payload),se(L,P,G)}if(de(P)||V(P))return P=si(P,L.mode,G,null),P.return=L,P;if(typeof P.then=="function")return se(L,Nu(P),G);if(P.$$typeof===ne)return se(L,pu(L,P),G);Cu(L,P)}return null}function $(L,P,G,re){var je=P!==null?P.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return je!==null?null:k(L,P,""+G,re);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===je?I(L,P,G,re):null;case M:return G.key===je?q(L,P,G,re):null;case A:return je=G._init,G=je(G._payload),$(L,P,G,re)}if(de(G)||V(G))return je!==null?null:te(L,P,G,re,null);if(typeof G.then=="function")return $(L,P,Nu(G),re);if(G.$$typeof===ne)return $(L,P,pu(L,G),re);Cu(L,G)}return null}function Y(L,P,G,re,je){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return L=L.get(G)||null,k(P,L,""+re,je);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case w:return L=L.get(re.key===null?G:re.key)||null,I(P,L,re,je);case M:return L=L.get(re.key===null?G:re.key)||null,q(P,L,re,je);case A:var dt=re._init;return re=dt(re._payload),Y(L,P,G,re,je)}if(de(re)||V(re))return L=L.get(G)||null,te(P,L,re,je,null);if(typeof re.then=="function")return Y(L,P,G,Nu(re),je);if(re.$$typeof===ne)return Y(L,P,G,pu(P,re),je);Cu(P,re)}return null}function Ze(L,P,G,re){for(var je=null,dt=null,ze=P,Ke=P=0,Mn=null;ze!==null&&Ke<G.length;Ke++){ze.index>Ke?(Mn=ze,ze=null):Mn=ze.sibling;var At=$(L,ze,G[Ke],re);if(At===null){ze===null&&(ze=Mn);break}n&&ze&&At.alternate===null&&r(L,ze),P=m(At,P,Ke),dt===null?je=At:dt.sibling=At,dt=At,ze=Mn}if(Ke===G.length)return i(L,ze),Rt&&oi(L,Ke),je;if(ze===null){for(;Ke<G.length;Ke++)ze=se(L,G[Ke],re),ze!==null&&(P=m(ze,P,Ke),dt===null?je=ze:dt.sibling=ze,dt=ze);return Rt&&oi(L,Ke),je}for(ze=c(ze);Ke<G.length;Ke++)Mn=Y(ze,L,Ke,G[Ke],re),Mn!==null&&(n&&Mn.alternate!==null&&ze.delete(Mn.key===null?Ke:Mn.key),P=m(Mn,P,Ke),dt===null?je=Mn:dt.sibling=Mn,dt=Mn);return n&&ze.forEach(function(Es){return r(L,Es)}),Rt&&oi(L,Ke),je}function $e(L,P,G,re){if(G==null)throw Error(s(151));for(var je=null,dt=null,ze=P,Ke=P=0,Mn=null,At=G.next();ze!==null&&!At.done;Ke++,At=G.next()){ze.index>Ke?(Mn=ze,ze=null):Mn=ze.sibling;var Es=$(L,ze,At.value,re);if(Es===null){ze===null&&(ze=Mn);break}n&&ze&&Es.alternate===null&&r(L,ze),P=m(Es,P,Ke),dt===null?je=Es:dt.sibling=Es,dt=Es,ze=Mn}if(At.done)return i(L,ze),Rt&&oi(L,Ke),je;if(ze===null){for(;!At.done;Ke++,At=G.next())At=se(L,At.value,re),At!==null&&(P=m(At,P,Ke),dt===null?je=At:dt.sibling=At,dt=At);return Rt&&oi(L,Ke),je}for(ze=c(ze);!At.done;Ke++,At=G.next())At=Y(ze,L,Ke,At.value,re),At!==null&&(n&&At.alternate!==null&&ze.delete(At.key===null?Ke:At.key),P=m(At,P,Ke),dt===null?je=At:dt.sibling=At,dt=At);return n&&ze.forEach(function(Qk){return r(L,Qk)}),Rt&&oi(L,Ke),je}function Vt(L,P,G,re){if(typeof G=="object"&&G!==null&&G.type===F&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var je=G.key;P!==null;){if(P.key===je){if(je=G.type,je===F){if(P.tag===7){i(L,P.sibling),re=f(P,G.props.children),re.return=L,L=re;break e}}else if(P.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===A&&My(je)===P.type){i(L,P.sibling),re=f(P,G.props),Rl(re,G),re.return=L,L=re;break e}i(L,P);break}else r(L,P);P=P.sibling}G.type===F?(re=si(G.props.children,L.mode,re,G.key),re.return=L,L=re):(re=hu(G.type,G.key,G.props,null,L.mode,re),Rl(re,G),re.return=L,L=re)}return _(L);case M:e:{for(je=G.key;P!==null;){if(P.key===je)if(P.tag===4&&P.stateNode.containerInfo===G.containerInfo&&P.stateNode.implementation===G.implementation){i(L,P.sibling),re=f(P,G.children||[]),re.return=L,L=re;break e}else{i(L,P);break}else r(L,P);P=P.sibling}re=Dh(G,L.mode,re),re.return=L,L=re}return _(L);case A:return je=G._init,G=je(G._payload),Vt(L,P,G,re)}if(de(G))return Ze(L,P,G,re);if(V(G)){if(je=V(G),typeof je!="function")throw Error(s(150));return G=je.call(G),$e(L,P,G,re)}if(typeof G.then=="function")return Vt(L,P,Nu(G),re);if(G.$$typeof===ne)return Vt(L,P,pu(L,G),re);Cu(L,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,P!==null&&P.tag===6?(i(L,P.sibling),re=f(P,G),re.return=L,L=re):(i(L,P),re=Ih(G,L.mode,re),re.return=L,L=re),_(L)):i(L,P)}return function(L,P,G,re){try{Al=0;var je=Vt(L,P,G,re);return so=null,je}catch(ze){if(ze===vl||ze===vu)throw ze;var dt=mr(29,ze,null,L.mode);return dt.lanes=re,dt.return=L,dt}finally{}}}var io=Oy(!0),Py=Oy(!1),Rr=z(null),sa=null;function ls(n){var r=n.alternate;Q(En,En.current&1),Q(Rr,n),sa===null&&(r===null||to.current!==null||r.memoizedState!==null)&&(sa=n)}function Vy(n){if(n.tag===22){if(Q(En,En.current),Q(Rr,n),sa===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(sa=n)}}else cs()}function cs(){Q(En,En.current),Q(Rr,Rr.current)}function Pa(n){W(Rr),sa===n&&(sa=null),W(En)}var En=z(0);function Iu(n){for(var r=n;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||tm(i)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function hf(n,r,i,c){r=n.memoizedState,i=i(c,r),i=i==null?r:x({},r,i),n.memoizedState=i,n.lanes===0&&(n.updateQueue.baseState=i)}var ff={enqueueSetState:function(n,r,i){n=n._reactInternals;var c=vr(),f=ss(c);f.payload=r,i!=null&&(f.callback=i),r=is(n,f,c),r!==null&&(xr(r,n,c),bl(r,n,c))},enqueueReplaceState:function(n,r,i){n=n._reactInternals;var c=vr(),f=ss(c);f.tag=1,f.payload=r,i!=null&&(f.callback=i),r=is(n,f,c),r!==null&&(xr(r,n,c),bl(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var i=vr(),c=ss(i);c.tag=2,r!=null&&(c.callback=r),r=is(n,c,i),r!==null&&(xr(r,n,i),bl(r,n,i))}};function zy(n,r,i,c,f,m,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,m,_):r.prototype&&r.prototype.isPureReactComponent?!ul(i,c)||!ul(f,m):!0}function Ly(n,r,i,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,c),r.state!==n&&ff.enqueueReplaceState(r,r.state,null)}function mi(n,r){var i=r;if("ref"in r){i={};for(var c in r)c!=="ref"&&(i[c]=r[c])}if(n=n.defaultProps){i===r&&(i=x({},i));for(var f in n)i[f]===void 0&&(i[f]=n[f])}return i}var Du=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Uy(n){Du(n)}function By(n){console.error(n)}function Hy(n){Du(n)}function ju(n,r){try{var i=n.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Gy(n,r,i){try{var c=n.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function mf(n,r,i){return i=ss(i),i.tag=3,i.payload={element:null},i.callback=function(){ju(n,r)},i}function Fy(n){return n=ss(n),n.tag=3,n}function qy(n,r,i,c){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;n.payload=function(){return f(m)},n.callback=function(){Gy(r,i,c)}}var _=i.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(n.callback=function(){Gy(r,i,c),typeof f!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var k=c.stack;this.componentDidCatch(c.value,{componentStack:k!==null?k:""})})}function QE(n,r,i,c,f){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=i.alternate,r!==null&&gl(r,i,f,!0),i=Rr.current,i!==null){switch(i.tag){case 13:return sa===null?zf():i.alternate===null&&nn===0&&(nn=3),i.flags&=-257,i.flags|=65536,i.lanes=f,c===Hh?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([c]):r.add(c),Uf(n,c,f)),!1;case 22:return i.flags|=65536,c===Hh?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([c]):i.add(c)),Uf(n,c,f)),!1}throw Error(s(435,i.tag))}return Uf(n,c,f),zf(),!1}if(Rt)return r=Rr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Oh&&(n=Error(s(422),{cause:c}),ml(kr(n,i)))):(c!==Oh&&(r=Error(s(423),{cause:c}),ml(kr(r,i))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=kr(c,i),f=mf(n.stateNode,c,f),qh(n,f),nn!==4&&(nn=2)),!1;var m=Error(s(520),{cause:c});if(m=kr(m,i),Ol===null?Ol=[m]:Ol.push(m),nn!==4&&(nn=2),r===null)return!0;c=kr(c,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,n=f&-f,i.lanes|=n,n=mf(i.stateNode,c,n),qh(i,n),!1;case 1:if(r=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(gs===null||!gs.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=Fy(f),qy(f,n,i,c),qh(i,f),!1}i=i.return}while(i!==null);return!1}var $y=Error(s(461)),Dn=!1;function Un(n,r,i,c){r.child=n===null?Py(r,null,i,c):io(r,n.child,i,c)}function Ky(n,r,i,c,f){i=i.render;var m=r.ref;if("ref"in c){var _={};for(var k in c)k!=="ref"&&(_[k]=c[k])}else _=c;return di(r),c=Xh(n,r,i,_,m,f),k=Zh(),n!==null&&!Dn?(Wh(n,r,f),Va(n,r,f)):(Rt&&k&&jh(r),r.flags|=1,Un(n,r,c,f),r.child)}function Yy(n,r,i,c,f){if(n===null){var m=i.type;return typeof m=="function"&&!Ch(m)&&m.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=m,Qy(n,r,m,c,f)):(n=hu(i.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(m=n.child,!Tf(n,f)){var _=m.memoizedProps;if(i=i.compare,i=i!==null?i:ul,i(_,c)&&n.ref===r.ref)return Va(n,r,f)}return r.flags|=1,n=Ca(m,c),n.ref=r.ref,n.return=r,r.child=n}function Qy(n,r,i,c,f){if(n!==null){var m=n.memoizedProps;if(ul(m,c)&&n.ref===r.ref)if(Dn=!1,r.pendingProps=c=m,Tf(n,f))(n.flags&131072)!==0&&(Dn=!0);else return r.lanes=n.lanes,Va(n,r,f)}return gf(n,r,i,c,f)}function Xy(n,r,i){var c=r.pendingProps,f=c.children,m=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=m!==null?m.baseLanes|i:i,n!==null){for(f=r.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~c}else r.childLanes=0,r.child=null;return Zy(n,r,c,i)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&yu(r,m!==null?m.cachePool:null),m!==null?Qp(r,m):Kh(),Vy(r);else return r.lanes=r.childLanes=536870912,Zy(n,r,m!==null?m.baseLanes|i:i,i)}else m!==null?(yu(r,m.cachePool),Qp(r,m),cs(),r.memoizedState=null):(n!==null&&yu(r,null),Kh(),cs());return Un(n,r,f,i),r.child}function Zy(n,r,i,c){var f=Bh();return f=f===null?null:{parent:Tn._currentValue,pool:f},r.memoizedState={baseLanes:i,cachePool:f},n!==null&&yu(r,null),Kh(),Vy(r),n!==null&&gl(n,r,c,!0),null}function Mu(n,r){var i=r.ref;if(i===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(n===null||n.ref!==i)&&(r.flags|=4194816)}}function gf(n,r,i,c,f){return di(r),i=Xh(n,r,i,c,void 0,f),c=Zh(),n!==null&&!Dn?(Wh(n,r,f),Va(n,r,f)):(Rt&&c&&jh(r),r.flags|=1,Un(n,r,i,f),r.child)}function Wy(n,r,i,c,f,m){return di(r),r.updateQueue=null,i=Zp(r,c,i,f),Xp(n),c=Zh(),n!==null&&!Dn?(Wh(n,r,m),Va(n,r,m)):(Rt&&c&&jh(r),r.flags|=1,Un(n,r,i,m),r.child)}function Jy(n,r,i,c,f){if(di(r),r.stateNode===null){var m=Xi,_=i.contextType;typeof _=="object"&&_!==null&&(m=Kn(_)),m=new i(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=ff,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Gh(r),_=i.contextType,m.context=typeof _=="object"&&_!==null?Kn(_):Xi,m.state=r.memoizedState,_=i.getDerivedStateFromProps,typeof _=="function"&&(hf(r,i,_,c),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&ff.enqueueReplaceState(m,m.state,null),Tl(r,c,m,f),_l(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){m=r.stateNode;var k=r.memoizedProps,I=mi(i,k);m.props=I;var q=m.context,te=i.contextType;_=Xi,typeof te=="object"&&te!==null&&(_=Kn(te));var se=i.getDerivedStateFromProps;te=typeof se=="function"||typeof m.getSnapshotBeforeUpdate=="function",k=r.pendingProps!==k,te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(k||q!==_)&&Ly(r,m,c,_),as=!1;var $=r.memoizedState;m.state=$,Tl(r,c,m,f),_l(),q=r.memoizedState,k||$!==q||as?(typeof se=="function"&&(hf(r,i,se,c),q=r.memoizedState),(I=as||zy(r,i,I,c,$,q,_))?(te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=q),m.props=c,m.state=q,m.context=_,c=I):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,Fh(n,r),_=r.memoizedProps,te=mi(i,_),m.props=te,se=r.pendingProps,$=m.context,q=i.contextType,I=Xi,typeof q=="object"&&q!==null&&(I=Kn(q)),k=i.getDerivedStateFromProps,(q=typeof k=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==se||$!==I)&&Ly(r,m,c,I),as=!1,$=r.memoizedState,m.state=$,Tl(r,c,m,f),_l();var Y=r.memoizedState;_!==se||$!==Y||as||n!==null&&n.dependencies!==null&&gu(n.dependencies)?(typeof k=="function"&&(hf(r,i,k,c),Y=r.memoizedState),(te=as||zy(r,i,te,c,$,Y,I)||n!==null&&n.dependencies!==null&&gu(n.dependencies))?(q||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,Y,I),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,Y,I)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Y),m.props=c,m.state=Y,m.context=I,c=te):(typeof m.componentDidUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===n.memoizedProps&&$===n.memoizedState||(r.flags|=1024),c=!1)}return m=c,Mu(n,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,n!==null&&c?(r.child=io(r,n.child,null,f),r.child=io(r,null,i,f)):Un(n,r,i,f),r.memoizedState=m.state,n=r.child):n=Va(n,r,f),n}function e0(n,r,i,c){return fl(),r.flags|=256,Un(n,r,i,c),r.child}var pf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yf(n){return{baseLanes:n,cachePool:Bp()}}function vf(n,r,i){return n=n!==null?n.childLanes&~i:0,r&&(n|=Nr),n}function t0(n,r,i){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,_;if((_=m)||(_=n!==null&&n.memoizedState===null?!1:(En.current&2)!==0),_&&(f=!0,r.flags&=-129),_=(r.flags&32)!==0,r.flags&=-33,n===null){if(Rt){if(f?ls(r):cs(),Rt){var k=tn,I;if(I=k){e:{for(I=k,k=aa;I.nodeType!==8;){if(!k){k=null;break e}if(I=Lr(I.nextSibling),I===null){k=null;break e}}k=I}k!==null?(r.memoizedState={dehydrated:k,treeContext:ii!==null?{id:Ia,overflow:Da}:null,retryLane:536870912,hydrationErrors:null},I=mr(18,null,null,0),I.stateNode=k,I.return=r,r.child=I,tr=r,tn=null,I=!0):I=!1}I||ci(r)}if(k=r.memoizedState,k!==null&&(k=k.dehydrated,k!==null))return tm(k)?r.lanes=32:r.lanes=536870912,null;Pa(r)}return k=c.children,c=c.fallback,f?(cs(),f=r.mode,k=Ou({mode:"hidden",children:k},f),c=si(c,f,i,null),k.return=r,c.return=r,k.sibling=c,r.child=k,f=r.child,f.memoizedState=yf(i),f.childLanes=vf(n,_,i),r.memoizedState=pf,c):(ls(r),xf(r,k))}if(I=n.memoizedState,I!==null&&(k=I.dehydrated,k!==null)){if(m)r.flags&256?(ls(r),r.flags&=-257,r=bf(n,r,i)):r.memoizedState!==null?(cs(),r.child=n.child,r.flags|=128,r=null):(cs(),f=c.fallback,k=r.mode,c=Ou({mode:"visible",children:c.children},k),f=si(f,k,i,null),f.flags|=2,c.return=r,f.return=r,c.sibling=f,r.child=c,io(r,n.child,null,i),c=r.child,c.memoizedState=yf(i),c.childLanes=vf(n,_,i),r.memoizedState=pf,r=f);else if(ls(r),tm(k)){if(_=k.nextSibling&&k.nextSibling.dataset,_)var q=_.dgst;_=q,c=Error(s(419)),c.stack="",c.digest=_,ml({value:c,source:null,stack:null}),r=bf(n,r,i)}else if(Dn||gl(n,r,i,!1),_=(i&n.childLanes)!==0,Dn||_){if(_=Gt,_!==null&&(c=i&-i,c=(c&42)!==0?1:Z(c),c=(c&(_.suspendedLanes|i))!==0?0:c,c!==0&&c!==I.retryLane))throw I.retryLane=c,Qi(n,c),xr(_,n,c),$y;k.data==="$?"||zf(),r=bf(n,r,i)}else k.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=I.treeContext,tn=Lr(k.nextSibling),tr=r,Rt=!0,li=null,aa=!1,n!==null&&(wr[Ar++]=Ia,wr[Ar++]=Da,wr[Ar++]=ii,Ia=n.id,Da=n.overflow,ii=r),r=xf(r,c.children),r.flags|=4096);return r}return f?(cs(),f=c.fallback,k=r.mode,I=n.child,q=I.sibling,c=Ca(I,{mode:"hidden",children:c.children}),c.subtreeFlags=I.subtreeFlags&65011712,q!==null?f=Ca(q,f):(f=si(f,k,i,null),f.flags|=2),f.return=r,c.return=r,c.sibling=f,r.child=c,c=f,f=r.child,k=n.child.memoizedState,k===null?k=yf(i):(I=k.cachePool,I!==null?(q=Tn._currentValue,I=I.parent!==q?{parent:q,pool:q}:I):I=Bp(),k={baseLanes:k.baseLanes|i,cachePool:I}),f.memoizedState=k,f.childLanes=vf(n,_,i),r.memoizedState=pf,c):(ls(r),i=n.child,n=i.sibling,i=Ca(i,{mode:"visible",children:c.children}),i.return=r,i.sibling=null,n!==null&&(_=r.deletions,_===null?(r.deletions=[n],r.flags|=16):_.push(n)),r.child=i,r.memoizedState=null,i)}function xf(n,r){return r=Ou({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Ou(n,r){return n=mr(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function bf(n,r,i){return io(r,n.child,null,i),n=xf(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function n0(n,r,i){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Vh(n.return,r,i)}function _f(n,r,i,c,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=i,m.tailMode=f)}function r0(n,r,i){var c=r.pendingProps,f=c.revealOrder,m=c.tail;if(Un(n,r,c.children,i),c=En.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&n0(n,i,r);else if(n.tag===19)n0(n,i,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(Q(En,c),f){case"forwards":for(i=r.child,f=null;i!==null;)n=i.alternate,n!==null&&Iu(n)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),_f(r,!1,f,i,m);break;case"backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Iu(n)===null){r.child=f;break}n=f.sibling,f.sibling=i,i=f,f=n}_f(r,!0,i,null,m);break;case"together":_f(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Va(n,r,i){if(n!==null&&(r.dependencies=n.dependencies),ms|=r.lanes,(i&r.childLanes)===0)if(n!==null){if(gl(n,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,i=Ca(n,n.pendingProps),r.child=i,i.return=r;n.sibling!==null;)n=n.sibling,i=i.sibling=Ca(n,n.pendingProps),i.return=r;i.sibling=null}return r.child}function Tf(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&gu(n)))}function XE(n,r,i){switch(r.tag){case 3:ue(r,r.stateNode.containerInfo),rs(r,Tn,n.memoizedState.cache),fl();break;case 27:case 5:ye(r);break;case 4:ue(r,r.stateNode.containerInfo);break;case 10:rs(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(ls(r),r.flags|=128,null):(i&r.child.childLanes)!==0?t0(n,r,i):(ls(r),n=Va(n,r,i),n!==null?n.sibling:null);ls(r);break;case 19:var f=(n.flags&128)!==0;if(c=(i&r.childLanes)!==0,c||(gl(n,r,i,!1),c=(i&r.childLanes)!==0),f){if(c)return r0(n,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Q(En,En.current),c)break;return null;case 22:case 23:return r.lanes=0,Xy(n,r,i);case 24:rs(r,Tn,n.memoizedState.cache)}return Va(n,r,i)}function a0(n,r,i){if(n!==null)if(n.memoizedProps!==r.pendingProps)Dn=!0;else{if(!Tf(n,i)&&(r.flags&128)===0)return Dn=!1,XE(n,r,i);Dn=(n.flags&131072)!==0}else Dn=!1,Rt&&(r.flags&1048576)!==0&&Mp(r,mu,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var c=r.elementType,f=c._init;if(c=f(c._payload),r.type=c,typeof c=="function")Ch(c)?(n=mi(c,n),r.tag=1,r=Jy(null,r,c,n,i)):(r.tag=0,r=gf(null,r,c,n,i));else{if(c!=null){if(f=c.$$typeof,f===Se){r.tag=11,r=Ky(null,r,c,n,i);break e}else if(f===R){r.tag=14,r=Yy(null,r,c,n,i);break e}}throw r=lt(c)||c,Error(s(306,r,""))}}return r;case 0:return gf(n,r,r.type,r.pendingProps,i);case 1:return c=r.type,f=mi(c,r.pendingProps),Jy(n,r,c,f,i);case 3:e:{if(ue(r,r.stateNode.containerInfo),n===null)throw Error(s(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,Fh(n,r),Tl(r,c,null,i);var _=r.memoizedState;if(c=_.cache,rs(r,Tn,c),c!==m.cache&&zh(r,[Tn],i,!0),_l(),c=_.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:_.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=e0(n,r,c,i);break e}else if(c!==f){f=kr(Error(s(424)),r),ml(f),r=e0(n,r,c,i);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(tn=Lr(n.firstChild),tr=r,Rt=!0,li=null,aa=!0,i=Py(r,null,c,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(fl(),c===f){r=Va(n,r,i);break e}Un(n,r,c,i)}r=r.child}return r;case 26:return Mu(n,r),n===null?(i=lv(r.type,null,r.pendingProps,null))?r.memoizedState=i:Rt||(i=r.type,n=r.pendingProps,c=Qu(Ae.current).createElement(i),c[ve]=r,c[Ne]=n,Hn(c,i,n),Ut(c),r.stateNode=c):r.memoizedState=lv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return ye(r),n===null&&Rt&&(c=r.stateNode=sv(r.type,r.pendingProps,Ae.current),tr=r,aa=!0,f=tn,vs(r.type)?(nm=f,tn=Lr(c.firstChild)):tn=f),Un(n,r,r.pendingProps.children,i),Mu(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&Rt&&((f=c=tn)&&(c=kk(c,r.type,r.pendingProps,aa),c!==null?(r.stateNode=c,tr=r,tn=Lr(c.firstChild),aa=!1,f=!0):f=!1),f||ci(r)),ye(r),f=r.type,m=r.pendingProps,_=n!==null?n.memoizedProps:null,c=m.children,Wf(f,m)?c=null:_!==null&&Wf(f,_)&&(r.flags|=32),r.memoizedState!==null&&(f=Xh(n,r,HE,null,null,i),Fl._currentValue=f),Mu(n,r),Un(n,r,c,i),r.child;case 6:return n===null&&Rt&&((n=i=tn)&&(i=Sk(i,r.pendingProps,aa),i!==null?(r.stateNode=i,tr=r,tn=null,n=!0):n=!1),n||ci(r)),null;case 13:return t0(n,r,i);case 4:return ue(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=io(r,null,c,i):Un(n,r,c,i),r.child;case 11:return Ky(n,r,r.type,r.pendingProps,i);case 7:return Un(n,r,r.pendingProps,i),r.child;case 8:return Un(n,r,r.pendingProps.children,i),r.child;case 12:return Un(n,r,r.pendingProps.children,i),r.child;case 10:return c=r.pendingProps,rs(r,r.type,c.value),Un(n,r,c.children,i),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,di(r),f=Kn(f),c=c(f),r.flags|=1,Un(n,r,c,i),r.child;case 14:return Yy(n,r,r.type,r.pendingProps,i);case 15:return Qy(n,r,r.type,r.pendingProps,i);case 19:return r0(n,r,i);case 31:return c=r.pendingProps,i=r.mode,c={mode:c.mode,children:c.children},n===null?(i=Ou(c,i),i.ref=r.ref,r.child=i,i.return=r,r=i):(i=Ca(n.child,c),i.ref=r.ref,r.child=i,i.return=r,r=i),r;case 22:return Xy(n,r,i);case 24:return di(r),c=Kn(Tn),n===null?(f=Bh(),f===null&&(f=Gt,m=Lh(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),r.memoizedState={parent:c,cache:f},Gh(r),rs(r,Tn,f)):((n.lanes&i)!==0&&(Fh(n,r),Tl(r,null,null,i),_l()),f=n.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),rs(r,Tn,c)):(c=m.cache,rs(r,Tn,c),c!==f.cache&&zh(r,[Tn],i,!0))),Un(n,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function za(n){n.flags|=4}function s0(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!fv(r)){if(r=Rr.current,r!==null&&((St&4194048)===St?sa!==null:(St&62914560)!==St&&(St&536870912)===0||r!==sa))throw xl=Hh,Hp;n.flags|=8192}}function Pu(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Zt():536870912,n.lanes|=r,uo|=r)}function Nl(n,r){if(!Rt)switch(n.tailMode){case"hidden":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?n.tail=null:i.sibling=null;break;case"collapsed":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Jt(n){var r=n.alternate!==null&&n.alternate.child===n.child,i=0,c=0;if(r)for(var f=n.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=i,r}function ZE(n,r,i){var c=r.pendingProps;switch(Mh(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(r),null;case 1:return Jt(r),null;case 3:return i=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),Ma(Tn),De(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(hl(r)?za(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Vp())),Jt(r),null;case 26:return i=r.memoizedState,n===null?(za(r),i!==null?(Jt(r),s0(r,i)):(Jt(r),r.flags&=-16777217)):i?i!==n.memoizedState?(za(r),Jt(r),s0(r,i)):(Jt(r),r.flags&=-16777217):(n.memoizedProps!==c&&za(r),Jt(r),r.flags&=-16777217),null;case 27:oe(r),i=Ae.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==c&&za(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}n=ce.current,hl(r)?Op(r):(n=sv(f,c,i),r.stateNode=n,za(r))}return Jt(r),null;case 5:if(oe(r),i=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&za(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Jt(r),null}if(n=ce.current,hl(r))Op(r);else{switch(f=Qu(Ae.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(i,{is:c.is}):f.createElement(i)}}n[ve]=r,n[Ne]=c;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(Hn(n,i,c),i){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&za(r)}}return Jt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&za(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(n=Ae.current,hl(r)){if(n=r.stateNode,i=r.memoizedProps,c=null,f=tr,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[ve]=r,n=!!(n.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||W0(n.nodeValue,i)),n||ci(r)}else n=Qu(n).createTextNode(c),n[ve]=r,r.stateNode=n}return Jt(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=hl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[ve]=r}else fl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Jt(r),f=!1}else f=Vp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Pa(r),r):(Pa(r),null)}if(Pa(r),(r.flags&128)!==0)return r.lanes=i,r;if(i=c!==null,n=n!==null&&n.memoizedState!==null,i){c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)}return i!==n&&i&&(r.child.flags|=8192),Pu(r,r.updateQueue),Jt(r),null;case 4:return De(),n===null&&Kf(r.stateNode.containerInfo),Jt(r),null;case 10:return Ma(r.type),Jt(r),null;case 19:if(W(En),f=r.memoizedState,f===null)return Jt(r),null;if(c=(r.flags&128)!==0,m=f.rendering,m===null)if(c)Nl(f,!1);else{if(nn!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(m=Iu(n),m!==null){for(r.flags|=128,Nl(f,!1),n=m.updateQueue,r.updateQueue=n,Pu(r,n),r.subtreeFlags=0,n=i,i=r.child;i!==null;)jp(i,n),i=i.sibling;return Q(En,En.current&1|2),r.child}n=n.sibling}f.tail!==null&&Ye()>Lu&&(r.flags|=128,c=!0,Nl(f,!1),r.lanes=4194304)}else{if(!c)if(n=Iu(m),n!==null){if(r.flags|=128,c=!0,n=n.updateQueue,r.updateQueue=n,Pu(r,n),Nl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Rt)return Jt(r),null}else 2*Ye()-f.renderingStartTime>Lu&&i!==536870912&&(r.flags|=128,c=!0,Nl(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(n=f.last,n!==null?n.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Ye(),r.sibling=null,n=En.current,Q(En,c?n&1|2:n&1),r):(Jt(r),null);case 22:case 23:return Pa(r),Yh(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(i&536870912)!==0&&(r.flags&128)===0&&(Jt(r),r.subtreeFlags&6&&(r.flags|=8192)):Jt(r),i=r.updateQueue,i!==null&&Pu(r,i.retryQueue),i=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==i&&(r.flags|=2048),n!==null&&W(hi),null;case 24:return i=null,n!==null&&(i=n.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),Ma(Tn),Jt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function WE(n,r){switch(Mh(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return Ma(Tn),De(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return oe(r),null;case 13:if(Pa(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));fl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return W(En),null;case 4:return De(),null;case 10:return Ma(r.type),null;case 22:case 23:return Pa(r),Yh(),n!==null&&W(hi),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return Ma(Tn),null;case 25:return null;default:return null}}function i0(n,r){switch(Mh(r),r.tag){case 3:Ma(Tn),De();break;case 26:case 27:case 5:oe(r);break;case 4:De();break;case 13:Pa(r);break;case 19:W(En);break;case 10:Ma(r.type);break;case 22:case 23:Pa(r),Yh(),n!==null&&W(hi);break;case 24:Ma(Tn)}}function Cl(n,r){try{var i=r.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var f=c.next;i=f;do{if((i.tag&n)===n){c=void 0;var m=i.create,_=i.inst;c=m(),_.destroy=c}i=i.next}while(i!==f)}}catch(k){Bt(r,r.return,k)}}function us(n,r,i){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&n)===n){var _=c.inst,k=_.destroy;if(k!==void 0){_.destroy=void 0,f=r;var I=i,q=k;try{q()}catch(te){Bt(f,I,te)}}}c=c.next}while(c!==m)}}catch(te){Bt(r,r.return,te)}}function o0(n){var r=n.updateQueue;if(r!==null){var i=n.stateNode;try{Yp(r,i)}catch(c){Bt(n,n.return,c)}}}function l0(n,r,i){i.props=mi(n.type,n.memoizedProps),i.state=n.memoizedState;try{i.componentWillUnmount()}catch(c){Bt(n,r,c)}}function Il(n,r){try{var i=n.ref;if(i!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof i=="function"?n.refCleanup=i(c):i.current=c}}catch(f){Bt(n,r,f)}}function ia(n,r){var i=n.ref,c=n.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(f){Bt(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Bt(n,r,f)}else i.current=null}function c0(n){var r=n.type,i=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(f){Bt(n,n.return,f)}}function Ef(n,r,i){try{var c=n.stateNode;xk(c,n.type,i,r),c[Ne]=r}catch(f){Bt(n,n.return,f)}}function u0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&vs(n.type)||n.tag===4}function kf(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||u0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&vs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Sf(n,r,i){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(n,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(n),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Yu));else if(c!==4&&(c===27&&vs(n.type)&&(i=n.stateNode,r=null),n=n.child,n!==null))for(Sf(n,r,i),n=n.sibling;n!==null;)Sf(n,r,i),n=n.sibling}function Vu(n,r,i){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?i.insertBefore(n,r):i.appendChild(n);else if(c!==4&&(c===27&&vs(n.type)&&(i=n.stateNode),n=n.child,n!==null))for(Vu(n,r,i),n=n.sibling;n!==null;)Vu(n,r,i),n=n.sibling}function d0(n){var r=n.stateNode,i=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Hn(r,c,i),r[ve]=n,r[Ne]=i}catch(m){Bt(n,n.return,m)}}var La=!1,cn=!1,wf=!1,h0=typeof WeakSet=="function"?WeakSet:Set,jn=null;function JE(n,r){if(n=n.containerInfo,Xf=td,n=Ep(n),Eh(n)){if("selectionStart"in n)var i={start:n.selectionStart,end:n.selectionEnd};else e:{i=(i=n.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var _=0,k=-1,I=-1,q=0,te=0,se=n,$=null;t:for(;;){for(var Y;se!==i||f!==0&&se.nodeType!==3||(k=_+f),se!==m||c!==0&&se.nodeType!==3||(I=_+c),se.nodeType===3&&(_+=se.nodeValue.length),(Y=se.firstChild)!==null;)$=se,se=Y;for(;;){if(se===n)break t;if($===i&&++q===f&&(k=_),$===m&&++te===c&&(I=_),(Y=se.nextSibling)!==null)break;se=$,$=se.parentNode}se=Y}i=k===-1||I===-1?null:{start:k,end:I}}else i=null}i=i||{start:0,end:0}}else i=null;for(Zf={focusedElem:n,selectionRange:i},td=!1,jn=r;jn!==null;)if(r=jn,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,jn=n;else for(;jn!==null;){switch(r=jn,m=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,i=r,f=m.memoizedProps,m=m.memoizedState,c=i.stateNode;try{var Ze=mi(i.type,f,i.elementType===i.type);n=c.getSnapshotBeforeUpdate(Ze,m),c.__reactInternalSnapshotBeforeUpdate=n}catch($e){Bt(i,i.return,$e)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,i=n.nodeType,i===9)em(n);else if(i===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":em(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,jn=n;break}jn=r.return}}function f0(n,r,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:ds(n,i),c&4&&Cl(5,i);break;case 1:if(ds(n,i),c&4)if(n=i.stateNode,r===null)try{n.componentDidMount()}catch(_){Bt(i,i.return,_)}else{var f=mi(i.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(_){Bt(i,i.return,_)}}c&64&&o0(i),c&512&&Il(i,i.return);break;case 3:if(ds(n,i),c&64&&(n=i.updateQueue,n!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{Yp(n,r)}catch(_){Bt(i,i.return,_)}}break;case 27:r===null&&c&4&&d0(i);case 26:case 5:ds(n,i),r===null&&c&4&&c0(i),c&512&&Il(i,i.return);break;case 12:ds(n,i);break;case 13:ds(n,i),c&4&&p0(n,i),c&64&&(n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(i=lk.bind(null,i),wk(n,i))));break;case 22:if(c=i.memoizedState!==null||La,!c){r=r!==null&&r.memoizedState!==null||cn,f=La;var m=cn;La=c,(cn=r)&&!m?hs(n,i,(i.subtreeFlags&8772)!==0):ds(n,i),La=f,cn=m}break;case 30:break;default:ds(n,i)}}function m0(n){var r=n.alternate;r!==null&&(n.alternate=null,m0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&an(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Yt=null,sr=!1;function Ua(n,r,i){for(i=i.child;i!==null;)g0(n,r,i),i=i.sibling}function g0(n,r,i){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(st,i)}catch{}switch(i.tag){case 26:cn||ia(i,r),Ua(n,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:cn||ia(i,r);var c=Yt,f=sr;vs(i.type)&&(Yt=i.stateNode,sr=!1),Ua(n,r,i),Ul(i.stateNode),Yt=c,sr=f;break;case 5:cn||ia(i,r);case 6:if(c=Yt,f=sr,Yt=null,Ua(n,r,i),Yt=c,sr=f,Yt!==null)if(sr)try{(Yt.nodeType===9?Yt.body:Yt.nodeName==="HTML"?Yt.ownerDocument.body:Yt).removeChild(i.stateNode)}catch(m){Bt(i,r,m)}else try{Yt.removeChild(i.stateNode)}catch(m){Bt(i,r,m)}break;case 18:Yt!==null&&(sr?(n=Yt,rv(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,i.stateNode),Yl(n)):rv(Yt,i.stateNode));break;case 4:c=Yt,f=sr,Yt=i.stateNode.containerInfo,sr=!0,Ua(n,r,i),Yt=c,sr=f;break;case 0:case 11:case 14:case 15:cn||us(2,i,r),cn||us(4,i,r),Ua(n,r,i);break;case 1:cn||(ia(i,r),c=i.stateNode,typeof c.componentWillUnmount=="function"&&l0(i,r,c)),Ua(n,r,i);break;case 21:Ua(n,r,i);break;case 22:cn=(c=cn)||i.memoizedState!==null,Ua(n,r,i),cn=c;break;default:Ua(n,r,i)}}function p0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Yl(n)}catch(i){Bt(r,r.return,i)}}function ek(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new h0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new h0),r;default:throw Error(s(435,n.tag))}}function Af(n,r){var i=ek(n);r.forEach(function(c){var f=ck.bind(null,n,c);i.has(c)||(i.add(c),c.then(f,f))})}function gr(n,r){var i=r.deletions;if(i!==null)for(var c=0;c<i.length;c++){var f=i[c],m=n,_=r,k=_;e:for(;k!==null;){switch(k.tag){case 27:if(vs(k.type)){Yt=k.stateNode,sr=!1;break e}break;case 5:Yt=k.stateNode,sr=!1;break e;case 3:case 4:Yt=k.stateNode.containerInfo,sr=!0;break e}k=k.return}if(Yt===null)throw Error(s(160));g0(m,_,f),Yt=null,sr=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)y0(r,n),r=r.sibling}var zr=null;function y0(n,r){var i=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:gr(r,n),pr(n),c&4&&(us(3,n,n.return),Cl(3,n),us(5,n,n.return));break;case 1:gr(r,n),pr(n),c&512&&(cn||i===null||ia(i,i.return)),c&64&&La&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(i=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var f=zr;if(gr(r,n),pr(n),c&512&&(cn||i===null||ia(i,i.return)),c&4){var m=i!==null?i.memoizedState:null;if(c=n.memoizedState,i===null)if(c===null)if(n.stateNode===null){e:{c=n.type,i=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Wt]||m[ve]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Hn(m,c,i),m[ve]=n,Ut(m),c=m;break e;case"link":var _=dv("link","href",f).get(c+(i.href||""));if(_){for(var k=0;k<_.length;k++)if(m=_[k],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){_.splice(k,1);break t}}m=f.createElement(c),Hn(m,c,i),f.head.appendChild(m);break;case"meta":if(_=dv("meta","content",f).get(c+(i.content||""))){for(k=0;k<_.length;k++)if(m=_[k],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){_.splice(k,1);break t}}m=f.createElement(c),Hn(m,c,i),f.head.appendChild(m);break;default:throw Error(s(468,c))}m[ve]=n,Ut(m),c=m}n.stateNode=c}else hv(f,n.type,n.stateNode);else n.stateNode=uv(f,c,n.memoizedProps);else m!==c?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,c===null?hv(f,n.type,n.stateNode):uv(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Ef(n,n.memoizedProps,i.memoizedProps)}break;case 27:gr(r,n),pr(n),c&512&&(cn||i===null||ia(i,i.return)),i!==null&&c&4&&Ef(n,n.memoizedProps,i.memoizedProps);break;case 5:if(gr(r,n),pr(n),c&512&&(cn||i===null||ia(i,i.return)),n.flags&32){f=n.stateNode;try{br(f,"")}catch(Y){Bt(n,n.return,Y)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Ef(n,f,i!==null?i.memoizedProps:f)),c&1024&&(wf=!0);break;case 6:if(gr(r,n),pr(n),c&4){if(n.stateNode===null)throw Error(s(162));c=n.memoizedProps,i=n.stateNode;try{i.nodeValue=c}catch(Y){Bt(n,n.return,Y)}}break;case 3:if(Wu=null,f=zr,zr=Xu(r.containerInfo),gr(r,n),zr=f,pr(n),c&4&&i!==null&&i.memoizedState.isDehydrated)try{Yl(r.containerInfo)}catch(Y){Bt(n,n.return,Y)}wf&&(wf=!1,v0(n));break;case 4:c=zr,zr=Xu(n.stateNode.containerInfo),gr(r,n),pr(n),zr=c;break;case 12:gr(r,n),pr(n);break;case 13:gr(r,n),pr(n),n.child.flags&8192&&n.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(jf=Ye()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Af(n,c)));break;case 22:f=n.memoizedState!==null;var I=i!==null&&i.memoizedState!==null,q=La,te=cn;if(La=q||f,cn=te||I,gr(r,n),cn=te,La=q,pr(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(i===null||I||La||cn||gi(n)),i=null,r=n;;){if(r.tag===5||r.tag===26){if(i===null){I=i=r;try{if(m=I.stateNode,f)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{k=I.stateNode;var se=I.memoizedProps.style,$=se!=null&&se.hasOwnProperty("display")?se.display:null;k.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Y){Bt(I,I.return,Y)}}}else if(r.tag===6){if(i===null){I=r;try{I.stateNode.nodeValue=f?"":I.memoizedProps}catch(Y){Bt(I,I.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Af(n,i))));break;case 19:gr(r,n),pr(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Af(n,c)));break;case 30:break;case 21:break;default:gr(r,n),pr(n)}}function pr(n){var r=n.flags;if(r&2){try{for(var i,c=n.return;c!==null;){if(u0(c)){i=c;break}c=c.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var f=i.stateNode,m=kf(n);Vu(n,m,f);break;case 5:var _=i.stateNode;i.flags&32&&(br(_,""),i.flags&=-33);var k=kf(n);Vu(n,k,_);break;case 3:case 4:var I=i.stateNode.containerInfo,q=kf(n);Sf(n,q,I);break;default:throw Error(s(161))}}catch(te){Bt(n,n.return,te)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function v0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;v0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function ds(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)f0(n,r.alternate,r),r=r.sibling}function gi(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:us(4,r,r.return),gi(r);break;case 1:ia(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&l0(r,r.return,i),gi(r);break;case 27:Ul(r.stateNode);case 26:case 5:ia(r,r.return),gi(r);break;case 22:r.memoizedState===null&&gi(r);break;case 30:gi(r);break;default:gi(r)}n=n.sibling}}function hs(n,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,m=r,_=m.flags;switch(m.tag){case 0:case 11:case 15:hs(f,m,i),Cl(4,m);break;case 1:if(hs(f,m,i),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){Bt(c,c.return,q)}if(c=m,f=c.updateQueue,f!==null){var k=c.stateNode;try{var I=f.shared.hiddenCallbacks;if(I!==null)for(f.shared.hiddenCallbacks=null,f=0;f<I.length;f++)Kp(I[f],k)}catch(q){Bt(c,c.return,q)}}i&&_&64&&o0(m),Il(m,m.return);break;case 27:d0(m);case 26:case 5:hs(f,m,i),i&&c===null&&_&4&&c0(m),Il(m,m.return);break;case 12:hs(f,m,i);break;case 13:hs(f,m,i),i&&_&4&&p0(f,m);break;case 22:m.memoizedState===null&&hs(f,m,i),Il(m,m.return);break;case 30:break;default:hs(f,m,i)}r=r.sibling}}function Rf(n,r){var i=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==i&&(n!=null&&n.refCount++,i!=null&&pl(i))}function Nf(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&pl(n))}function oa(n,r,i,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)x0(n,r,i,c),r=r.sibling}function x0(n,r,i,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:oa(n,r,i,c),f&2048&&Cl(9,r);break;case 1:oa(n,r,i,c);break;case 3:oa(n,r,i,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&pl(n)));break;case 12:if(f&2048){oa(n,r,i,c),n=r.stateNode;try{var m=r.memoizedProps,_=m.id,k=m.onPostCommit;typeof k=="function"&&k(_,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(I){Bt(r,r.return,I)}}else oa(n,r,i,c);break;case 13:oa(n,r,i,c);break;case 23:break;case 22:m=r.stateNode,_=r.alternate,r.memoizedState!==null?m._visibility&2?oa(n,r,i,c):Dl(n,r):m._visibility&2?oa(n,r,i,c):(m._visibility|=2,oo(n,r,i,c,(r.subtreeFlags&10256)!==0)),f&2048&&Rf(_,r);break;case 24:oa(n,r,i,c),f&2048&&Nf(r.alternate,r);break;default:oa(n,r,i,c)}}function oo(n,r,i,c,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=n,_=r,k=i,I=c,q=_.flags;switch(_.tag){case 0:case 11:case 15:oo(m,_,k,I,f),Cl(8,_);break;case 23:break;case 22:var te=_.stateNode;_.memoizedState!==null?te._visibility&2?oo(m,_,k,I,f):Dl(m,_):(te._visibility|=2,oo(m,_,k,I,f)),f&&q&2048&&Rf(_.alternate,_);break;case 24:oo(m,_,k,I,f),f&&q&2048&&Nf(_.alternate,_);break;default:oo(m,_,k,I,f)}r=r.sibling}}function Dl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=n,c=r,f=c.flags;switch(c.tag){case 22:Dl(i,c),f&2048&&Rf(c.alternate,c);break;case 24:Dl(i,c),f&2048&&Nf(c.alternate,c);break;default:Dl(i,c)}r=r.sibling}}var jl=8192;function lo(n){if(n.subtreeFlags&jl)for(n=n.child;n!==null;)b0(n),n=n.sibling}function b0(n){switch(n.tag){case 26:lo(n),n.flags&jl&&n.memoizedState!==null&&Lk(zr,n.memoizedState,n.memoizedProps);break;case 5:lo(n);break;case 3:case 4:var r=zr;zr=Xu(n.stateNode.containerInfo),lo(n),zr=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=jl,jl=16777216,lo(n),jl=r):lo(n));break;default:lo(n)}}function _0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Ml(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];jn=c,E0(c,n)}_0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)T0(n),n=n.sibling}function T0(n){switch(n.tag){case 0:case 11:case 15:Ml(n),n.flags&2048&&us(9,n,n.return);break;case 3:Ml(n);break;case 12:Ml(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,zu(n)):Ml(n);break;default:Ml(n)}}function zu(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];jn=c,E0(c,n)}_0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:us(8,r,r.return),zu(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,zu(r));break;default:zu(r)}n=n.sibling}}function E0(n,r){for(;jn!==null;){var i=jn;switch(i.tag){case 0:case 11:case 15:us(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:pl(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,jn=c;else e:for(i=n;jn!==null;){c=jn;var f=c.sibling,m=c.return;if(m0(c),c===i){jn=null;break e}if(f!==null){f.return=m,jn=f;break e}jn=m}}}var tk={getCacheForType:function(n){var r=Kn(Tn),i=r.data.get(n);return i===void 0&&(i=n(),r.data.set(n,i)),i}},nk=typeof WeakMap=="function"?WeakMap:Map,Dt=0,Gt=null,mt=null,St=0,jt=0,yr=null,fs=!1,co=!1,Cf=!1,Ba=0,nn=0,ms=0,pi=0,If=0,Nr=0,uo=0,Ol=null,ir=null,Df=!1,jf=0,Lu=1/0,Uu=null,gs=null,Bn=0,ps=null,ho=null,fo=0,Mf=0,Of=null,k0=null,Pl=0,Pf=null;function vr(){if((Dt&2)!==0&&St!==0)return St&-St;if(X.T!==null){var n=Ji;return n!==0?n:Gf()}return ke()}function S0(){Nr===0&&(Nr=(St&536870912)===0||Rt?It():536870912);var n=Rr.current;return n!==null&&(n.flags|=32),Nr}function xr(n,r,i){(n===Gt&&(jt===2||jt===9)||n.cancelPendingCommit!==null)&&(mo(n,0),ys(n,St,Nr,!1)),le(n,i),((Dt&2)===0||n!==Gt)&&(n===Gt&&((Dt&2)===0&&(pi|=i),nn===4&&ys(n,St,Nr,!1)),la(n))}function w0(n,r,i){if((Dt&6)!==0)throw Error(s(327));var c=!i&&(r&124)===0&&(r&n.expiredLanes)===0||We(n,r),f=c?sk(n,r):Lf(n,r,!0),m=c;do{if(f===0){co&&!c&&ys(n,r,0,!1);break}else{if(i=n.current.alternate,m&&!rk(i)){f=Lf(n,r,!1),m=!1;continue}if(f===2){if(m=r,n.errorRecoveryDisabledLanes&m)var _=0;else _=n.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){r=_;e:{var k=n;f=Ol;var I=k.current.memoizedState.isDehydrated;if(I&&(mo(k,_).flags|=256),_=Lf(k,_,!1),_!==2){if(Cf&&!I){k.errorRecoveryDisabledLanes|=m,pi|=m,f=4;break e}m=ir,ir=f,m!==null&&(ir===null?ir=m:ir.push.apply(ir,m))}f=_}if(m=!1,f!==2)continue}}if(f===1){mo(n,0),ys(n,r,0,!0);break}e:{switch(c=n,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:ys(c,r,Nr,!fs);break e;case 2:ir=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=jf+300-Ye(),10<f)){if(ys(c,r,Nr,!fs),Ue(c,0,!0)!==0)break e;c.timeoutHandle=tv(A0.bind(null,c,i,ir,Uu,Df,r,Nr,pi,uo,fs,m,2,-0,0),f);break e}A0(c,i,ir,Uu,Df,r,Nr,pi,uo,fs,m,0,-0,0)}}break}while(!0);la(n)}function A0(n,r,i,c,f,m,_,k,I,q,te,se,$,Y){if(n.timeoutHandle=-1,se=r.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(Gl={stylesheets:null,count:0,unsuspend:zk},b0(r),se=Uk(),se!==null)){n.cancelPendingCommit=se(M0.bind(null,n,r,m,i,c,f,_,k,I,te,1,$,Y)),ys(n,m,_,!q);return}M0(n,r,m,i,c,f,_,k,I)}function rk(n){for(var r=n;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var f=i[c],m=f.getSnapshot;f=f.value;try{if(!fr(m(),f))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ys(n,r,i,c){r&=~If,r&=~pi,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var m=31-Xt(f),_=1<<m;c[m]=-1,f&=~_}i!==0&&qe(n,i,r)}function Bu(){return(Dt&6)===0?(Vl(0),!1):!0}function Vf(){if(mt!==null){if(jt===0)var n=mt.return;else n=mt,ja=ui=null,Jh(n),so=null,Al=0,n=mt;for(;n!==null;)i0(n.alternate,n),n=n.return;mt=null}}function mo(n,r){var i=n.timeoutHandle;i!==-1&&(n.timeoutHandle=-1,_k(i)),i=n.cancelPendingCommit,i!==null&&(n.cancelPendingCommit=null,i()),Vf(),Gt=n,mt=i=Ca(n.current,null),St=r,jt=0,yr=null,fs=!1,co=We(n,r),Cf=!1,uo=Nr=If=pi=ms=nn=0,ir=Ol=null,Df=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-Xt(c),m=1<<f;r|=n[f],c&=~m}return Ba=r,cu(),i}function R0(n,r){ct=null,X.H=Ru,r===vl||r===vu?(r=qp(),jt=3):r===Hp?(r=qp(),jt=4):jt=r===$y?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,yr=r,mt===null&&(nn=1,ju(n,kr(r,n.current)))}function N0(){var n=X.H;return X.H=Ru,n===null?Ru:n}function C0(){var n=X.A;return X.A=tk,n}function zf(){nn=4,fs||(St&4194048)!==St&&Rr.current!==null||(co=!0),(ms&134217727)===0&&(pi&134217727)===0||Gt===null||ys(Gt,St,Nr,!1)}function Lf(n,r,i){var c=Dt;Dt|=2;var f=N0(),m=C0();(Gt!==n||St!==r)&&(Uu=null,mo(n,r)),r=!1;var _=nn;e:do try{if(jt!==0&&mt!==null){var k=mt,I=yr;switch(jt){case 8:Vf(),_=6;break e;case 3:case 2:case 9:case 6:Rr.current===null&&(r=!0);var q=jt;if(jt=0,yr=null,go(n,k,I,q),i&&co){_=0;break e}break;default:q=jt,jt=0,yr=null,go(n,k,I,q)}}ak(),_=nn;break}catch(te){R0(n,te)}while(!0);return r&&n.shellSuspendCounter++,ja=ui=null,Dt=c,X.H=f,X.A=m,mt===null&&(Gt=null,St=0,cu()),_}function ak(){for(;mt!==null;)I0(mt)}function sk(n,r){var i=Dt;Dt|=2;var c=N0(),f=C0();Gt!==n||St!==r?(Uu=null,Lu=Ye()+500,mo(n,r)):co=We(n,r);e:do try{if(jt!==0&&mt!==null){r=mt;var m=yr;t:switch(jt){case 1:jt=0,yr=null,go(n,r,m,1);break;case 2:case 9:if(Gp(m)){jt=0,yr=null,D0(r);break}r=function(){jt!==2&&jt!==9||Gt!==n||(jt=7),la(n)},m.then(r,r);break e;case 3:jt=7;break e;case 4:jt=5;break e;case 7:Gp(m)?(jt=0,yr=null,D0(r)):(jt=0,yr=null,go(n,r,m,7));break;case 5:var _=null;switch(mt.tag){case 26:_=mt.memoizedState;case 5:case 27:var k=mt;if(!_||fv(_)){jt=0,yr=null;var I=k.sibling;if(I!==null)mt=I;else{var q=k.return;q!==null?(mt=q,Hu(q)):mt=null}break t}}jt=0,yr=null,go(n,r,m,5);break;case 6:jt=0,yr=null,go(n,r,m,6);break;case 8:Vf(),nn=6;break e;default:throw Error(s(462))}}ik();break}catch(te){R0(n,te)}while(!0);return ja=ui=null,X.H=c,X.A=f,Dt=i,mt!==null?0:(Gt=null,St=0,cu(),nn)}function ik(){for(;mt!==null&&!ft();)I0(mt)}function I0(n){var r=a0(n.alternate,n,Ba);n.memoizedProps=n.pendingProps,r===null?Hu(n):mt=r}function D0(n){var r=n,i=r.alternate;switch(r.tag){case 15:case 0:r=Wy(i,r,r.pendingProps,r.type,void 0,St);break;case 11:r=Wy(i,r,r.pendingProps,r.type.render,r.ref,St);break;case 5:Jh(r);default:i0(i,r),r=mt=jp(r,Ba),r=a0(i,r,Ba)}n.memoizedProps=n.pendingProps,r===null?Hu(n):mt=r}function go(n,r,i,c){ja=ui=null,Jh(r),so=null,Al=0;var f=r.return;try{if(QE(n,f,r,i,St)){nn=1,ju(n,kr(i,n.current)),mt=null;return}}catch(m){if(f!==null)throw mt=f,m;nn=1,ju(n,kr(i,n.current)),mt=null;return}r.flags&32768?(Rt||c===1?n=!0:co||(St&536870912)!==0?n=!1:(fs=n=!0,(c===2||c===9||c===3||c===6)&&(c=Rr.current,c!==null&&c.tag===13&&(c.flags|=16384))),j0(r,n)):Hu(r)}function Hu(n){var r=n;do{if((r.flags&32768)!==0){j0(r,fs);return}n=r.return;var i=ZE(r.alternate,r,Ba);if(i!==null){mt=i;return}if(r=r.sibling,r!==null){mt=r;return}mt=r=n}while(r!==null);nn===0&&(nn=5)}function j0(n,r){do{var i=WE(n.alternate,n);if(i!==null){i.flags&=32767,mt=i;return}if(i=n.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(n=n.sibling,n!==null)){mt=n;return}mt=n=i}while(n!==null);nn=6,mt=null}function M0(n,r,i,c,f,m,_,k,I){n.cancelPendingCommit=null;do Gu();while(Bn!==0);if((Dt&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=Rh,_e(n,i,m,_,k,I),n===Gt&&(mt=Gt=null,St=0),ho=r,ps=n,fo=i,Mf=m,Of=f,k0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,uk($t,function(){return L0(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,f=he.p,he.p=2,_=Dt,Dt|=4;try{JE(n,r,i)}finally{Dt=_,he.p=f,X.T=c}}Bn=1,O0(),P0(),V0()}}function O0(){if(Bn===1){Bn=0;var n=ps,r=ho,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=X.T,X.T=null;var c=he.p;he.p=2;var f=Dt;Dt|=4;try{y0(r,n);var m=Zf,_=Ep(n.containerInfo),k=m.focusedElem,I=m.selectionRange;if(_!==k&&k&&k.ownerDocument&&Tp(k.ownerDocument.documentElement,k)){if(I!==null&&Eh(k)){var q=I.start,te=I.end;if(te===void 0&&(te=q),"selectionStart"in k)k.selectionStart=q,k.selectionEnd=Math.min(te,k.value.length);else{var se=k.ownerDocument||document,$=se&&se.defaultView||window;if($.getSelection){var Y=$.getSelection(),Ze=k.textContent.length,$e=Math.min(I.start,Ze),Vt=I.end===void 0?$e:Math.min(I.end,Ze);!Y.extend&&$e>Vt&&(_=Vt,Vt=$e,$e=_);var L=_p(k,$e),P=_p(k,Vt);if(L&&P&&(Y.rangeCount!==1||Y.anchorNode!==L.node||Y.anchorOffset!==L.offset||Y.focusNode!==P.node||Y.focusOffset!==P.offset)){var G=se.createRange();G.setStart(L.node,L.offset),Y.removeAllRanges(),$e>Vt?(Y.addRange(G),Y.extend(P.node,P.offset)):(G.setEnd(P.node,P.offset),Y.addRange(G))}}}}for(se=[],Y=k;Y=Y.parentNode;)Y.nodeType===1&&se.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<se.length;k++){var re=se[k];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}td=!!Xf,Zf=Xf=null}finally{Dt=f,he.p=c,X.T=i}}n.current=r,Bn=2}}function P0(){if(Bn===2){Bn=0;var n=ps,r=ho,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=X.T,X.T=null;var c=he.p;he.p=2;var f=Dt;Dt|=4;try{f0(n,r.alternate,r)}finally{Dt=f,he.p=c,X.T=i}}Bn=3}}function V0(){if(Bn===4||Bn===3){Bn=0,et();var n=ps,r=ho,i=fo,c=k0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Bn=5:(Bn=0,ho=ps=null,z0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(gs=null),Ee(i),r=r.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(st,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=X.T,f=he.p,he.p=2,X.T=null;try{for(var m=n.onRecoverableError,_=0;_<c.length;_++){var k=c[_];m(k.value,{componentStack:k.stack})}}finally{X.T=r,he.p=f}}(fo&3)!==0&&Gu(),la(n),f=n.pendingLanes,(i&4194090)!==0&&(f&42)!==0?n===Pf?Pl++:(Pl=0,Pf=n):Pl=0,Vl(0)}}function z0(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,pl(r)))}function Gu(n){return O0(),P0(),V0(),L0()}function L0(){if(Bn!==5)return!1;var n=ps,r=Mf;Mf=0;var i=Ee(fo),c=X.T,f=he.p;try{he.p=32>i?32:i,X.T=null,i=Of,Of=null;var m=ps,_=fo;if(Bn=0,ho=ps=null,fo=0,(Dt&6)!==0)throw Error(s(331));var k=Dt;if(Dt|=4,T0(m.current),x0(m,m.current,_,i),Dt=k,Vl(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(st,m)}catch{}return!0}finally{he.p=f,X.T=c,z0(n,r)}}function U0(n,r,i){r=kr(i,r),r=mf(n.stateNode,r,2),n=is(n,r,2),n!==null&&(le(n,2),la(n))}function Bt(n,r,i){if(n.tag===3)U0(n,n,i);else for(;r!==null;){if(r.tag===3){U0(r,n,i);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(gs===null||!gs.has(c))){n=kr(i,n),i=Fy(2),c=is(r,i,2),c!==null&&(qy(i,c,r,n),le(c,2),la(c));break}}r=r.return}}function Uf(n,r,i){var c=n.pingCache;if(c===null){c=n.pingCache=new nk;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(i)||(Cf=!0,f.add(i),n=ok.bind(null,n,r,i),r.then(n,n))}function ok(n,r,i){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&i,n.warmLanes&=~i,Gt===n&&(St&i)===i&&(nn===4||nn===3&&(St&62914560)===St&&300>Ye()-jf?(Dt&2)===0&&mo(n,0):If|=i,uo===St&&(uo=0)),la(n)}function B0(n,r){r===0&&(r=Zt()),n=Qi(n,r),n!==null&&(le(n,r),la(n))}function lk(n){var r=n.memoizedState,i=0;r!==null&&(i=r.retryLane),B0(n,i)}function ck(n,r){var i=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(i=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),B0(n,i)}function uk(n,r){return it(n,r)}var Fu=null,po=null,Bf=!1,qu=!1,Hf=!1,yi=0;function la(n){n!==po&&n.next===null&&(po===null?Fu=po=n:po=po.next=n),qu=!0,Bf||(Bf=!0,hk())}function Vl(n,r){if(!Hf&&qu){Hf=!0;do for(var i=!1,c=Fu;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var _=c.suspendedLanes,k=c.pingedLanes;m=(1<<31-Xt(42|n)+1)-1,m&=f&~(_&~k),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,q0(c,m))}else m=St,m=Ue(c,c===Gt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||We(c,m)||(i=!0,q0(c,m));c=c.next}while(i);Hf=!1}}function dk(){H0()}function H0(){qu=Bf=!1;var n=0;yi!==0&&(bk()&&(n=yi),yi=0);for(var r=Ye(),i=null,c=Fu;c!==null;){var f=c.next,m=G0(c,r);m===0?(c.next=null,i===null?Fu=f:i.next=f,f===null&&(po=i)):(i=c,(n!==0||(m&3)!==0)&&(qu=!0)),c=f}Vl(n)}function G0(n,r){for(var i=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var _=31-Xt(m),k=1<<_,I=f[_];I===-1?((k&i)===0||(k&c)!==0)&&(f[_]=_t(k,r)):I<=r&&(n.expiredLanes|=k),m&=~k}if(r=Gt,i=St,i=Ue(n,n===r?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,i===0||n===r&&(jt===2||jt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Le(c),n.callbackNode=null,n.callbackPriority=0;if((i&3)===0||We(n,i)){if(r=i&-i,r===n.callbackPriority)return r;switch(c!==null&&Le(c),Ee(i)){case 2:case 8:i=zt;break;case 32:i=$t;break;case 268435456:i=dn;break;default:i=$t}return c=F0.bind(null,n),i=it(i,c),n.callbackPriority=r,n.callbackNode=i,r}return c!==null&&c!==null&&Le(c),n.callbackPriority=2,n.callbackNode=null,2}function F0(n,r){if(Bn!==0&&Bn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var i=n.callbackNode;if(Gu()&&n.callbackNode!==i)return null;var c=St;return c=Ue(n,n===Gt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(w0(n,c,r),G0(n,Ye()),n.callbackNode!=null&&n.callbackNode===i?F0.bind(null,n):null)}function q0(n,r){if(Gu())return null;w0(n,r,!0)}function hk(){Tk(function(){(Dt&6)!==0?it(tt,dk):H0()})}function Gf(){return yi===0&&(yi=It()),yi}function $0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Vi(""+n)}function K0(n,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,n.id&&i.setAttribute("form",n.id),r.parentNode.insertBefore(i,r),n=new FormData(n),i.parentNode.removeChild(i),n}function fk(n,r,i,c,f){if(r==="submit"&&i&&i.stateNode===f){var m=$0((f[Ne]||null).action),_=c.submitter;_&&(r=(r=_[Ne]||null)?$0(r.formAction):_.getAttribute("formAction"),r!==null&&(m=r,_=null));var k=new zi("action","action",null,c,f);n.push({event:k,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(yi!==0){var I=_?K0(f,_):new FormData(f);cf(i,{pending:!0,data:I,method:f.method,action:m},null,I)}}else typeof m=="function"&&(k.preventDefault(),I=_?K0(f,_):new FormData(f),cf(i,{pending:!0,data:I,method:f.method,action:m},m,I))},currentTarget:f}]})}}for(var Ff=0;Ff<Ah.length;Ff++){var qf=Ah[Ff],mk=qf.toLowerCase(),gk=qf[0].toUpperCase()+qf.slice(1);Vr(mk,"on"+gk)}Vr(wp,"onAnimationEnd"),Vr(Ap,"onAnimationIteration"),Vr(Rp,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(DE,"onTransitionRun"),Vr(jE,"onTransitionStart"),Vr(ME,"onTransitionCancel"),Vr(Np,"onTransitionEnd"),$n("onMouseEnter",["mouseout","mouseover"]),$n("onMouseLeave",["mouseout","mouseover"]),$n("onPointerEnter",["pointerout","pointerover"]),$n("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pk=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function Y0(n,r){r=(r&4)!==0;for(var i=0;i<n.length;i++){var c=n[i],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var _=c.length-1;0<=_;_--){var k=c[_],I=k.instance,q=k.currentTarget;if(k=k.listener,I!==m&&f.isPropagationStopped())break e;m=k,f.currentTarget=q;try{m(f)}catch(te){Du(te)}f.currentTarget=null,m=I}else for(_=0;_<c.length;_++){if(k=c[_],I=k.instance,q=k.currentTarget,k=k.listener,I!==m&&f.isPropagationStopped())break e;m=k,f.currentTarget=q;try{m(f)}catch(te){Du(te)}f.currentTarget=null,m=I}}}}function gt(n,r){var i=r[Re];i===void 0&&(i=r[Re]=new Set);var c=n+"__bubble";i.has(c)||(Q0(r,n,2,!1),i.add(c))}function $f(n,r,i){var c=0;r&&(c|=4),Q0(i,n,c,r)}var $u="_reactListening"+Math.random().toString(36).slice(2);function Kf(n){if(!n[$u]){n[$u]=!0,Fe.forEach(function(i){i!=="selectionchange"&&(pk.has(i)||$f(i,!1,n),$f(i,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[$u]||(r[$u]=!0,$f("selectionchange",!1,r))}}function Q0(n,r,i,c){switch(xv(r)){case 2:var f=Gk;break;case 8:f=Fk;break;default:f=om}i=f.bind(null,r,i,n),f=void 0,!Tr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,i,{capture:!0,passive:f}):n.addEventListener(r,i,!0):f!==void 0?n.addEventListener(r,i,{passive:f}):n.addEventListener(r,i,!1)}function Yf(n,r,i,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var k=c.stateNode.containerInfo;if(k===f)break;if(_===4)for(_=c.return;_!==null;){var I=_.tag;if((I===3||I===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;k!==null;){if(_=sn(k),_===null)return;if(I=_.tag,I===5||I===6||I===26||I===27){c=m=_;continue e}k=k.parentNode}}c=c.return}Yc(function(){var q=m,te=_r(i),se=[];e:{var $=Cp.get(n);if($!==void 0){var Y=zi,Ze=n;switch(n){case"keypress":if(Jr(i)===0)break e;case"keydown":case"keyup":Y=Fi;break;case"focusin":Ze="focus",Y=Bi;break;case"focusout":Ze="blur",Y=Bi;break;case"beforeblur":case"afterblur":Y=Bi;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Er;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=xh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=nu;break;case wp:case Ap:case Rp:Y=Hi;break;case Np:Y=au;break;case"scroll":case"scrollend":Y=Qc;break;case"wheel":Y=qi;break;case"copy":case"cut":case"paste":Y=Gi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=ll;break;case"toggle":case"beforetoggle":Y=iu}var $e=(r&4)!==0,Vt=!$e&&(n==="scroll"||n==="scrollend"),L=$e?$!==null?$+"Capture":null:$;$e=[];for(var P=q,G;P!==null;){var re=P;if(G=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||G===null||L===null||(re=Xs(P,L),re!=null&&$e.push(Ll(P,re,G))),Vt)break;P=P.return}0<$e.length&&($=new Y($,Ze,null,i,te),se.push({event:$,listeners:$e}))}}if((r&7)===0){e:{if($=n==="mouseover"||n==="pointerover",Y=n==="mouseout"||n==="pointerout",$&&i!==ka&&(Ze=i.relatedTarget||i.fromElement)&&(sn(Ze)||Ze[Pe]))break e;if((Y||$)&&($=te.window===te?te:($=te.ownerDocument)?$.defaultView||$.parentWindow:window,Y?(Ze=i.relatedTarget||i.toElement,Y=q,Ze=Ze?sn(Ze):null,Ze!==null&&(Vt=l(Ze),$e=Ze.tag,Ze!==Vt||$e!==5&&$e!==27&&$e!==6)&&(Ze=null)):(Y=null,Ze=q),Y!==Ze)){if($e=Er,re="onMouseLeave",L="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&($e=ll,re="onPointerLeave",L="onPointerEnter",P="pointer"),Vt=Y==null?$:Nn(Y),G=Ze==null?$:Nn(Ze),$=new $e(re,P+"leave",Y,i,te),$.target=Vt,$.relatedTarget=G,re=null,sn(te)===q&&($e=new $e(L,P+"enter",Ze,i,te),$e.target=G,$e.relatedTarget=Vt,re=$e),Vt=re,Y&&Ze)t:{for($e=Y,L=Ze,P=0,G=$e;G;G=yo(G))P++;for(G=0,re=L;re;re=yo(re))G++;for(;0<P-G;)$e=yo($e),P--;for(;0<G-P;)L=yo(L),G--;for(;P--;){if($e===L||L!==null&&$e===L.alternate)break t;$e=yo($e),L=yo(L)}$e=null}else $e=null;Y!==null&&X0(se,$,Y,$e,!1),Ze!==null&&Vt!==null&&X0(se,Vt,Ze,$e,!0)}}e:{if($=q?Nn(q):window,Y=$.nodeName&&$.nodeName.toLowerCase(),Y==="select"||Y==="input"&&$.type==="file")var je=gp;else if(_n($))if(pp)je=NE;else{je=AE;var dt=wE}else Y=$.nodeName,!Y||Y.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?q&&tl(q.elementType)&&(je=gp):je=RE;if(je&&(je=je(n,q))){Na(se,je,i,te);break e}dt&&dt(n,$,q),n==="focusout"&&q&&$.type==="number"&&q.memoizedProps.value!=null&&ts($,"number",$.value)}switch(dt=q?Nn(q):window,n){case"focusin":(_n(dt)||dt.contentEditable==="true")&&($i=dt,kh=q,dl=null);break;case"focusout":dl=kh=$i=null;break;case"mousedown":Sh=!0;break;case"contextmenu":case"mouseup":case"dragend":Sh=!1,kp(se,i,te);break;case"selectionchange":if(IE)break;case"keydown":case"keyup":kp(se,i,te)}var ze;if(na)e:{switch(n){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Et?J(n,i)&&(Ke="onCompositionEnd"):n==="keydown"&&i.keyCode===229&&(Ke="onCompositionStart");Ke&&(b&&i.locale!=="ko"&&(Et||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Et&&(ze=rl()):(Wr=te,ns="value"in Wr?Wr.value:Wr.textContent,Et=!0)),dt=Ku(q,Ke),0<dt.length&&(Ke=new il(Ke,n,null,i,te),se.push({event:Ke,listeners:dt}),ze?Ke.data=ze:(ze=pe(i),ze!==null&&(Ke.data=ze)))),(ze=v?bn(n,i):kt(n,i))&&(Ke=Ku(q,"onBeforeInput"),0<Ke.length&&(dt=new il("onBeforeInput","beforeinput",null,i,te),se.push({event:dt,listeners:Ke}),dt.data=ze)),fk(se,n,q,i,te)}Y0(se,r)})}function Ll(n,r,i){return{instance:n,listener:r,currentTarget:i}}function Ku(n,r){for(var i=r+"Capture",c=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Xs(n,i),f!=null&&c.unshift(Ll(n,f,m)),f=Xs(n,r),f!=null&&c.push(Ll(n,f,m))),n.tag===3)return c;n=n.return}return[]}function yo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function X0(n,r,i,c,f){for(var m=r._reactName,_=[];i!==null&&i!==c;){var k=i,I=k.alternate,q=k.stateNode;if(k=k.tag,I!==null&&I===c)break;k!==5&&k!==26&&k!==27||q===null||(I=q,f?(q=Xs(i,m),q!=null&&_.unshift(Ll(i,q,I))):f||(q=Xs(i,m),q!=null&&_.push(Ll(i,q,I)))),i=i.return}_.length!==0&&n.push({event:r,listeners:_})}var yk=/\r\n?/g,vk=/\u0000|\uFFFD/g;function Z0(n){return(typeof n=="string"?n:""+n).replace(yk,`
`).replace(vk,"")}function W0(n,r){return r=Z0(r),Z0(n)===r}function Yu(){}function Pt(n,r,i,c,f,m){switch(i){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||br(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&br(n,""+c);break;case"className":Xr(n,"class",c);break;case"tabIndex":Xr(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Xr(n,i,c);break;case"style":el(n,c,m);break;case"data":if(r!=="object"){Xr(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||i!=="href")){n.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(i);break}c=Vi(""+c),n.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(r!=="input"&&Pt(n,r,"name",f.name,f,null),Pt(n,r,"formEncType",f.formEncType,f,null),Pt(n,r,"formMethod",f.formMethod,f,null),Pt(n,r,"formTarget",f.formTarget,f,null)):(Pt(n,r,"encType",f.encType,f,null),Pt(n,r,"method",f.method,f,null),Pt(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(i);break}c=Vi(""+c),n.setAttribute(i,c);break;case"onClick":c!=null&&(n.onclick=Yu);break;case"onScroll":c!=null&&gt("scroll",n);break;case"onScrollEnd":c!=null&&gt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=i}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}i=Vi(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(i,""+c):n.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(i,""):n.removeAttribute(i);break;case"capture":case"download":c===!0?n.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(i,c):n.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(i,c):n.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(i):n.setAttribute(i,c);break;case"popover":gt("beforetoggle",n),gt("toggle",n),es(n,"popover",c);break;case"xlinkActuate":zn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":zn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":zn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":zn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":zn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":zn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":zn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":zn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":zn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":es(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=yh.get(i)||i,es(n,i,c))}}function Qf(n,r,i,c,f,m){switch(i){case"style":el(n,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(s(60));n.innerHTML=i}}break;case"children":typeof c=="string"?br(n,c):(typeof c=="number"||typeof c=="bigint")&&br(n,""+c);break;case"onScroll":c!=null&&gt("scroll",n);break;case"onScrollEnd":c!=null&&gt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Yu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ge.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),r=i.slice(2,f?i.length-7:void 0),m=n[Ne]||null,m=m!=null?m[i]:null,typeof m=="function"&&n.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(i in n?n[i]=null:n.hasAttribute(i)&&n.removeAttribute(i)),n.addEventListener(r,c,f);break e}i in n?n[i]=c:c===!0?n.setAttribute(i,""):es(n,i,c)}}}function Hn(n,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gt("error",n),gt("load",n);var c=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var _=i[m];if(_!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Pt(n,r,m,_,i,null)}}f&&Pt(n,r,"srcSet",i.srcSet,i,null),c&&Pt(n,r,"src",i.src,i,null);return;case"input":gt("invalid",n);var k=m=_=f=null,I=null,q=null;for(c in i)if(i.hasOwnProperty(c)){var te=i[c];if(te!=null)switch(c){case"name":f=te;break;case"type":_=te;break;case"checked":I=te;break;case"defaultChecked":q=te;break;case"value":m=te;break;case"defaultValue":k=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,r));break;default:Pt(n,r,c,te,i,null)}}Ks(n,m,k,I,q,_,f,!1),Pi(n);return;case"select":gt("invalid",n),c=_=m=null;for(f in i)if(i.hasOwnProperty(f)&&(k=i[f],k!=null))switch(f){case"value":m=k;break;case"defaultValue":_=k;break;case"multiple":c=k;default:Pt(n,r,f,k,i,null)}r=m,i=_,n.multiple=!!c,r!=null?Ea(n,!!c,r,!1):i!=null&&Ea(n,!!c,i,!0);return;case"textarea":gt("invalid",n),m=f=c=null;for(_ in i)if(i.hasOwnProperty(_)&&(k=i[_],k!=null))switch(_){case"value":c=k;break;case"defaultValue":f=k;break;case"children":m=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(91));break;default:Pt(n,r,_,k,i,null)}Ys(n,c,f,m),Pi(n);return;case"option":for(I in i)if(i.hasOwnProperty(I)&&(c=i[I],c!=null))switch(I){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Pt(n,r,I,c,i,null)}return;case"dialog":gt("beforetoggle",n),gt("toggle",n),gt("cancel",n),gt("close",n);break;case"iframe":case"object":gt("load",n);break;case"video":case"audio":for(c=0;c<zl.length;c++)gt(zl[c],n);break;case"image":gt("error",n),gt("load",n);break;case"details":gt("toggle",n);break;case"embed":case"source":case"link":gt("error",n),gt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in i)if(i.hasOwnProperty(q)&&(c=i[q],c!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Pt(n,r,q,c,i,null)}return;default:if(tl(r)){for(te in i)i.hasOwnProperty(te)&&(c=i[te],c!==void 0&&Qf(n,r,te,c,i,void 0));return}}for(k in i)i.hasOwnProperty(k)&&(c=i[k],c!=null&&Pt(n,r,k,c,i,null))}function xk(n,r,i,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,_=null,k=null,I=null,q=null,te=null;for(Y in i){var se=i[Y];if(i.hasOwnProperty(Y)&&se!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":I=se;default:c.hasOwnProperty(Y)||Pt(n,r,Y,null,c,se)}}for(var $ in c){var Y=c[$];if(se=i[$],c.hasOwnProperty($)&&(Y!=null||se!=null))switch($){case"type":m=Y;break;case"name":f=Y;break;case"checked":q=Y;break;case"defaultChecked":te=Y;break;case"value":_=Y;break;case"defaultValue":k=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,r));break;default:Y!==se&&Pt(n,r,$,Y,c,se)}}hr(n,_,k,I,q,te,m,f);return;case"select":Y=_=k=$=null;for(m in i)if(I=i[m],i.hasOwnProperty(m)&&I!=null)switch(m){case"value":break;case"multiple":Y=I;default:c.hasOwnProperty(m)||Pt(n,r,m,null,c,I)}for(f in c)if(m=c[f],I=i[f],c.hasOwnProperty(f)&&(m!=null||I!=null))switch(f){case"value":$=m;break;case"defaultValue":k=m;break;case"multiple":_=m;default:m!==I&&Pt(n,r,f,m,c,I)}r=k,i=_,c=Y,$!=null?Ea(n,!!i,$,!1):!!c!=!!i&&(r!=null?Ea(n,!!i,r,!0):Ea(n,!!i,i?[]:"",!1));return;case"textarea":Y=$=null;for(k in i)if(f=i[k],i.hasOwnProperty(k)&&f!=null&&!c.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Pt(n,r,k,null,c,f)}for(_ in c)if(f=c[_],m=i[_],c.hasOwnProperty(_)&&(f!=null||m!=null))switch(_){case"value":$=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&Pt(n,r,_,f,c,m)}Mt(n,$,Y);return;case"option":for(var Ze in i)if($=i[Ze],i.hasOwnProperty(Ze)&&$!=null&&!c.hasOwnProperty(Ze))switch(Ze){case"selected":n.selected=!1;break;default:Pt(n,r,Ze,null,c,$)}for(I in c)if($=c[I],Y=i[I],c.hasOwnProperty(I)&&$!==Y&&($!=null||Y!=null))switch(I){case"selected":n.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Pt(n,r,I,$,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in i)$=i[$e],i.hasOwnProperty($e)&&$!=null&&!c.hasOwnProperty($e)&&Pt(n,r,$e,null,c,$);for(q in c)if($=c[q],Y=i[q],c.hasOwnProperty(q)&&$!==Y&&($!=null||Y!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:Pt(n,r,q,$,c,Y)}return;default:if(tl(r)){for(var Vt in i)$=i[Vt],i.hasOwnProperty(Vt)&&$!==void 0&&!c.hasOwnProperty(Vt)&&Qf(n,r,Vt,void 0,c,$);for(te in c)$=c[te],Y=i[te],!c.hasOwnProperty(te)||$===Y||$===void 0&&Y===void 0||Qf(n,r,te,$,c,Y);return}}for(var L in i)$=i[L],i.hasOwnProperty(L)&&$!=null&&!c.hasOwnProperty(L)&&Pt(n,r,L,null,c,$);for(se in c)$=c[se],Y=i[se],!c.hasOwnProperty(se)||$===Y||$==null&&Y==null||Pt(n,r,se,$,c,Y)}var Xf=null,Zf=null;function Qu(n){return n.nodeType===9?n:n.ownerDocument}function J0(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ev(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Wf(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Jf=null;function bk(){var n=window.event;return n&&n.type==="popstate"?n===Jf?!1:(Jf=n,!0):(Jf=null,!1)}var tv=typeof setTimeout=="function"?setTimeout:void 0,_k=typeof clearTimeout=="function"?clearTimeout:void 0,nv=typeof Promise=="function"?Promise:void 0,Tk=typeof queueMicrotask=="function"?queueMicrotask:typeof nv<"u"?function(n){return nv.resolve(null).then(n).catch(Ek)}:tv;function Ek(n){setTimeout(function(){throw n})}function vs(n){return n==="head"}function rv(n,r){var i=r,c=0,f=0;do{var m=i.nextSibling;if(n.removeChild(i),m&&m.nodeType===8)if(i=m.data,i==="/$"){if(0<c&&8>c){i=c;var _=n.ownerDocument;if(i&1&&Ul(_.documentElement),i&2&&Ul(_.body),i&4)for(i=_.head,Ul(i),_=i.firstChild;_;){var k=_.nextSibling,I=_.nodeName;_[Wt]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||i.removeChild(_),_=k}}if(f===0){n.removeChild(m),Yl(r);return}f--}else i==="$"||i==="$?"||i==="$!"?f++:c=i.charCodeAt(0)-48;else c=0;i=m}while(i);Yl(r)}function em(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":em(i),an(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}n.removeChild(i)}}function kk(n,r,i,c){for(;n.nodeType===1;){var f=i;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Wt])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=Lr(n.nextSibling),n===null)break}return null}function Sk(n,r,i){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Lr(n.nextSibling),n===null))return null;return n}function tm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function wk(n,r){var i=n.ownerDocument;if(n.data!=="$?"||i.readyState==="complete")r();else{var c=function(){r(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function Lr(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var nm=null;function av(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var i=n.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return n;r--}else i==="/$"&&r++}n=n.previousSibling}return null}function sv(n,r,i){switch(r=Qu(i),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Ul(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);an(n)}var Cr=new Map,iv=new Set;function Xu(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ha=he.d;he.d={f:Ak,r:Rk,D:Nk,C:Ck,L:Ik,m:Dk,X:Mk,S:jk,M:Ok};function Ak(){var n=Ha.f(),r=Bu();return n||r}function Rk(n){var r=xn(n);r!==null&&r.tag===5&&r.type==="form"?wy(r):Ha.r(n)}var vo=typeof document>"u"?null:document;function ov(n,r,i){var c=vo;if(c&&typeof r=="string"&&r){var f=hn(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),iv.has(f)||(iv.add(f),n={rel:n,crossOrigin:i,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),Hn(r,"link",n),Ut(r),c.head.appendChild(r)))}}function Nk(n){Ha.D(n),ov("dns-prefetch",n,null)}function Ck(n,r){Ha.C(n,r),ov("preconnect",n,r)}function Ik(n,r,i){Ha.L(n,r,i);var c=vo;if(c&&n&&r){var f='link[rel="preload"][as="'+hn(r)+'"]';r==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+hn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+hn(i.imageSizes)+'"]')):f+='[href="'+hn(n)+'"]';var m=f;switch(r){case"style":m=xo(n);break;case"script":m=bo(n)}Cr.has(m)||(n=x({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:n,as:r},i),Cr.set(m,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Bl(m))||r==="script"&&c.querySelector(Hl(m))||(r=c.createElement("link"),Hn(r,"link",n),Ut(r),c.head.appendChild(r)))}}function Dk(n,r){Ha.m(n,r);var i=vo;if(i&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+hn(c)+'"][href="'+hn(n)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=bo(n)}if(!Cr.has(m)&&(n=x({rel:"modulepreload",href:n},r),Cr.set(m,n),i.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Hl(m)))return}c=i.createElement("link"),Hn(c,"link",n),Ut(c),i.head.appendChild(c)}}}function jk(n,r,i){Ha.S(n,r,i);var c=vo;if(c&&n){var f=on(c).hoistableStyles,m=xo(n);r=r||"default";var _=f.get(m);if(!_){var k={loading:0,preload:null};if(_=c.querySelector(Bl(m)))k.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":r},i),(i=Cr.get(m))&&rm(n,i);var I=_=c.createElement("link");Ut(I),Hn(I,"link",n),I._p=new Promise(function(q,te){I.onload=q,I.onerror=te}),I.addEventListener("load",function(){k.loading|=1}),I.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Zu(_,r,c)}_={type:"stylesheet",instance:_,count:1,state:k},f.set(m,_)}}}function Mk(n,r){Ha.X(n,r);var i=vo;if(i&&n){var c=on(i).hoistableScripts,f=bo(n),m=c.get(f);m||(m=i.querySelector(Hl(f)),m||(n=x({src:n,async:!0},r),(r=Cr.get(f))&&am(n,r),m=i.createElement("script"),Ut(m),Hn(m,"link",n),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Ok(n,r){Ha.M(n,r);var i=vo;if(i&&n){var c=on(i).hoistableScripts,f=bo(n),m=c.get(f);m||(m=i.querySelector(Hl(f)),m||(n=x({src:n,async:!0,type:"module"},r),(r=Cr.get(f))&&am(n,r),m=i.createElement("script"),Ut(m),Hn(m,"link",n),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function lv(n,r,i,c){var f=(f=Ae.current)?Xu(f):null;if(!f)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=xo(i.href),i=on(f).hoistableStyles,c=i.get(r),c||(c={type:"style",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){n=xo(i.href);var m=on(f).hoistableStyles,_=m.get(n);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,_),(m=f.querySelector(Bl(n)))&&!m._p&&(_.instance=m,_.state.loading=5),Cr.has(n)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Cr.set(n,i),m||Pk(f,n,i,_.state))),r&&c===null)throw Error(s(528,""));return _}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=bo(i),i=on(f).hoistableScripts,c=i.get(r),c||(c={type:"script",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function xo(n){return'href="'+hn(n)+'"'}function Bl(n){return'link[rel="stylesheet"]['+n+"]"}function cv(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function Pk(n,r,i,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),Hn(r,"link",i),Ut(r),n.head.appendChild(r))}function bo(n){return'[src="'+hn(n)+'"]'}function Hl(n){return"script[async]"+n}function uv(n,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+hn(i.href)+'"]');if(c)return r.instance=c,Ut(c),c;var f=x({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ut(c),Hn(c,"style",f),Zu(c,i.precedence,n),r.instance=c;case"stylesheet":f=xo(i.href);var m=n.querySelector(Bl(f));if(m)return r.state.loading|=4,r.instance=m,Ut(m),m;c=cv(i),(f=Cr.get(f))&&rm(c,f),m=(n.ownerDocument||n).createElement("link"),Ut(m);var _=m;return _._p=new Promise(function(k,I){_.onload=k,_.onerror=I}),Hn(m,"link",c),r.state.loading|=4,Zu(m,i.precedence,n),r.instance=m;case"script":return m=bo(i.src),(f=n.querySelector(Hl(m)))?(r.instance=f,Ut(f),f):(c=i,(f=Cr.get(m))&&(c=x({},i),am(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ut(f),Hn(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Zu(c,i.precedence,n));return r.instance}function Zu(n,r,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,_=0;_<c.length;_++){var k=c[_];if(k.dataset.precedence===r)m=k;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(n,r.firstChild))}function rm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function am(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Wu=null;function dv(n,r,i){if(Wu===null){var c=new Map,f=Wu=new Map;f.set(i,c)}else f=Wu,c=f.get(i),c||(c=new Map,f.set(i,c));if(c.has(n))return c;for(c.set(n,null),i=i.getElementsByTagName(n),f=0;f<i.length;f++){var m=i[f];if(!(m[Wt]||m[ve]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(r)||"";_=n+_;var k=c.get(_);k?k.push(m):c.set(_,[m])}}return c}function hv(n,r,i){n=n.ownerDocument||n,n.head.insertBefore(i,r==="title"?n.querySelector("head > title"):null)}function Vk(n,r,i){if(i===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function fv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Gl=null;function zk(){}function Lk(n,r,i){if(Gl===null)throw Error(s(475));var c=Gl;if(r.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=xo(i.href),m=n.querySelector(Bl(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Ju.bind(c),n.then(c,c)),r.state.loading|=4,r.instance=m,Ut(m);return}m=n.ownerDocument||n,i=cv(i),(f=Cr.get(f))&&rm(i,f),m=m.createElement("link"),Ut(m);var _=m;_._p=new Promise(function(k,I){_.onload=k,_.onerror=I}),Hn(m,"link",i),r.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=Ju.bind(c),n.addEventListener("load",r),n.addEventListener("error",r))}}function Uk(){if(Gl===null)throw Error(s(475));var n=Gl;return n.stylesheets&&n.count===0&&sm(n,n.stylesheets),0<n.count?function(r){var i=setTimeout(function(){if(n.stylesheets&&sm(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(i)}}:null}function Ju(){if(this.count--,this.count===0){if(this.stylesheets)sm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ed=null;function sm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ed=new Map,r.forEach(Bk,n),ed=null,Ju.call(n))}function Bk(n,r){if(!(r.state.loading&4)){var i=ed.get(n);if(i)var c=i.get(null);else{i=new Map,ed.set(n,i);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var _=f[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(i.set(_.dataset.precedence,_),c=_)}c&&i.set(null,c)}f=r.instance,_=f.getAttribute("data-precedence"),m=i.get(_)||c,m===c&&i.set(null,f),i.set(_,f),this.count++,c=Ju.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Fl={$$typeof:ne,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function Hk(n,r,i,c,f,m,_,k){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.hiddenUpdates=Lt(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function mv(n,r,i,c,f,m,_,k,I,q,te,se){return n=new Hk(n,r,i,_,k,I,q,se),r=1,m===!0&&(r|=24),m=mr(3,null,null,r),n.current=m,m.stateNode=n,r=Lh(),r.refCount++,n.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:i,cache:r},Gh(m),n}function gv(n){return n?(n=Xi,n):Xi}function pv(n,r,i,c,f,m){f=gv(f),c.context===null?c.context=f:c.pendingContext=f,c=ss(r),c.payload={element:i},m=m===void 0?null:m,m!==null&&(c.callback=m),i=is(n,c,r),i!==null&&(xr(i,n,r),bl(i,n,r))}function yv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var i=n.retryLane;n.retryLane=i!==0&&i<r?i:r}}function im(n,r){yv(n,r),(n=n.alternate)&&yv(n,r)}function vv(n){if(n.tag===13){var r=Qi(n,67108864);r!==null&&xr(r,n,67108864),im(n,67108864)}}var td=!0;function Gk(n,r,i,c){var f=X.T;X.T=null;var m=he.p;try{he.p=2,om(n,r,i,c)}finally{he.p=m,X.T=f}}function Fk(n,r,i,c){var f=X.T;X.T=null;var m=he.p;try{he.p=8,om(n,r,i,c)}finally{he.p=m,X.T=f}}function om(n,r,i,c){if(td){var f=lm(c);if(f===null)Yf(n,r,c,nd,i),bv(n,c);else if($k(f,n,r,i,c))c.stopPropagation();else if(bv(n,c),r&4&&-1<qk.indexOf(n)){for(;f!==null;){var m=xn(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=Rn(m.pendingLanes);if(_!==0){var k=m;for(k.pendingLanes|=2,k.entangledLanes|=2;_;){var I=1<<31-Xt(_);k.entanglements[1]|=I,_&=~I}la(m),(Dt&6)===0&&(Lu=Ye()+500,Vl(0))}}break;case 13:k=Qi(m,2),k!==null&&xr(k,m,2),Bu(),im(m,2)}if(m=lm(c),m===null&&Yf(n,r,c,nd,i),m===f)break;f=m}f!==null&&c.stopPropagation()}else Yf(n,r,c,null,i)}}function lm(n){return n=_r(n),cm(n)}var nd=null;function cm(n){if(nd=null,n=sn(n),n!==null){var r=l(n);if(r===null)n=null;else{var i=r.tag;if(i===13){if(n=h(r),n!==null)return n;n=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return nd=n,null}function xv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pt()){case tt:return 2;case zt:return 8;case $t:case rn:return 32;case dn:return 268435456;default:return 32}default:return 32}}var um=!1,xs=null,bs=null,_s=null,ql=new Map,$l=new Map,Ts=[],qk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bv(n,r){switch(n){case"focusin":case"focusout":xs=null;break;case"dragenter":case"dragleave":bs=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":$l.delete(r.pointerId)}}function Kl(n,r,i,c,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:r,domEventName:i,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=xn(r),r!==null&&vv(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function $k(n,r,i,c,f){switch(r){case"focusin":return xs=Kl(xs,n,r,i,c,f),!0;case"dragenter":return bs=Kl(bs,n,r,i,c,f),!0;case"mouseover":return _s=Kl(_s,n,r,i,c,f),!0;case"pointerover":var m=f.pointerId;return ql.set(m,Kl(ql.get(m)||null,n,r,i,c,f)),!0;case"gotpointercapture":return m=f.pointerId,$l.set(m,Kl($l.get(m)||null,n,r,i,c,f)),!0}return!1}function _v(n){var r=sn(n.target);if(r!==null){var i=l(r);if(i!==null){if(r=i.tag,r===13){if(r=h(i),r!==null){n.blockedOn=r,Oe(n.priority,function(){if(i.tag===13){var c=vr();c=Z(c);var f=Qi(i,c);f!==null&&xr(f,i,c),im(i,c)}});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){n.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rd(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var i=lm(n.nativeEvent);if(i===null){i=n.nativeEvent;var c=new i.constructor(i.type,i);ka=c,i.target.dispatchEvent(c),ka=null}else return r=xn(i),r!==null&&vv(r),n.blockedOn=i,!1;r.shift()}return!0}function Tv(n,r,i){rd(n)&&i.delete(r)}function Kk(){um=!1,xs!==null&&rd(xs)&&(xs=null),bs!==null&&rd(bs)&&(bs=null),_s!==null&&rd(_s)&&(_s=null),ql.forEach(Tv),$l.forEach(Tv)}function ad(n,r){n.blockedOn===r&&(n.blockedOn=null,um||(um=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Kk)))}var sd=null;function Ev(n){sd!==n&&(sd=n,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){sd===n&&(sd=null);for(var r=0;r<n.length;r+=3){var i=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(cm(c||i)===null)continue;break}var m=xn(i);m!==null&&(n.splice(r,3),r-=3,cf(m,{pending:!0,data:f,method:i.method,action:c},c,f))}}))}function Yl(n){function r(I){return ad(I,n)}xs!==null&&ad(xs,n),bs!==null&&ad(bs,n),_s!==null&&ad(_s,n),ql.forEach(r),$l.forEach(r);for(var i=0;i<Ts.length;i++){var c=Ts[i];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ts.length&&(i=Ts[0],i.blockedOn===null);)_v(i),i.blockedOn===null&&Ts.shift();if(i=(n.ownerDocument||n).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var f=i[c],m=i[c+1],_=f[Ne]||null;if(typeof m=="function")_||Ev(i);else if(_){var k=null;if(m&&m.hasAttribute("formAction")){if(f=m,_=m[Ne]||null)k=_.formAction;else if(cm(f)!==null)continue}else k=_.action;typeof k=="function"?i[c+1]=k:(i.splice(c,3),c-=3),Ev(i)}}}function dm(n){this._internalRoot=n}id.prototype.render=dm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var i=r.current,c=vr();pv(i,c,n,r,null,null)},id.prototype.unmount=dm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;pv(n.current,2,null,n,null,null),Bu(),r[Pe]=null}};function id(n){this._internalRoot=n}id.prototype.unstable_scheduleHydration=function(n){if(n){var r=ke();n={blockedOn:null,target:n,priority:r};for(var i=0;i<Ts.length&&r!==0&&r<Ts[i].priority;i++);Ts.splice(i,0,n),i===0&&_v(n)}};var kv=e.version;if(kv!=="19.1.1")throw Error(s(527,kv,"19.1.1"));he.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(r),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var Yk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{st=od.inject(Yk),ut=od}catch{}}return Xl.createRoot=function(n,r){if(!o(n))throw Error(s(299));var i=!1,c="",f=Uy,m=By,_=Hy,k=null;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(_=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(k=r.unstable_transitionCallbacks)),r=mv(n,1,!1,null,null,i,c,f,m,_,k,null),n[Pe]=r.current,Kf(n),new dm(r)},Xl.hydrateRoot=function(n,r,i){if(!o(n))throw Error(s(299));var c=!1,f="",m=Uy,_=By,k=Hy,I=null,q=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(_=i.onCaughtError),i.onRecoverableError!==void 0&&(k=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(I=i.unstable_transitionCallbacks),i.formState!==void 0&&(q=i.formState)),r=mv(n,1,!0,r,i??null,c,f,m,_,k,I,q),r.context=gv(null),i=r.current,c=vr(),c=Z(c),f=ss(c),f.callback=null,is(i,f,c),i=c,r.current.lanes=i,le(r,i),la(r),n[Pe]=r.current,Kf(n),new id(r)},Xl.version="19.1.1",Xl}var Mv;function s1(){if(Mv)return fm.exports;Mv=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),fm.exports=a1(),fm.exports}var i1=s1();const o1=Xk(i1);var E=lg();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ov="popstate";function l1(a={}){function e(s,o){let{pathname:l,search:h,hash:g}=s.location;return Dm("",{pathname:l,search:h,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:uc(o)}return u1(e,t,null,a)}function Qt(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function Gr(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function c1(){return Math.random().toString(36).substring(2,10)}function Pv(a,e){return{usr:a.state,key:a.key,idx:e}}function Dm(a,e,t=null,s){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?Uo(e):e,state:t,key:e&&e.key||s||c1()}}function uc({pathname:a="/",search:e="",hash:t=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(a+=t.charAt(0)==="#"?t:"#"+t),a}function Uo(a){let e={};if(a){let t=a.indexOf("#");t>=0&&(e.hash=a.substring(t),a=a.substring(0,t));let s=a.indexOf("?");s>=0&&(e.search=a.substring(s),a=a.substring(0,s)),a&&(e.pathname=a)}return e}function u1(a,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,g="POP",p=null,y=x();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function x(){return(h.state||{idx:null}).idx}function T(){g="POP";let U=x(),K=U==null?null:U-y;y=U,p&&p({action:g,location:B.location,delta:K})}function w(U,K){g="PUSH";let ee=Dm(B.location,U,K);y=x()+1;let ne=Pv(ee,y),Se=B.createHref(ee);try{h.pushState(ne,"",Se)}catch(Te){if(Te instanceof DOMException&&Te.name==="DataCloneError")throw Te;o.location.assign(Se)}l&&p&&p({action:g,location:B.location,delta:1})}function M(U,K){g="REPLACE";let ee=Dm(B.location,U,K);y=x();let ne=Pv(ee,y),Se=B.createHref(ee);h.replaceState(ne,"",Se),l&&p&&p({action:g,location:B.location,delta:0})}function F(U){return d1(U)}let B={get action(){return g},get location(){return a(o,h)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Ov,T),p=U,()=>{o.removeEventListener(Ov,T),p=null}},createHref(U){return e(o,U)},createURL:F,encodeLocation(U){let K=F(U);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:w,replace:M,go(U){return h.go(U)}};return B}function d1(a,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Qt(t,"No window.location.(origin|href) available to create URL");let s=typeof a=="string"?a:uc(a);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Sb(a,e,t="/"){return h1(a,e,t,!1)}function h1(a,e,t,s){let o=typeof e=="string"?Uo(e):e,l=Ya(o.pathname||"/",t);if(l==null)return null;let h=wb(a);f1(h);let g=null;for(let p=0;g==null&&p<h.length;++p){let y=k1(l);g=T1(h[p],y,s)}return g}function wb(a,e=[],t=[],s="",o=!1){let l=(h,g,p=o,y)=>{let x={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(s)&&p)return;Qt(x.relativePath.startsWith(s),`Absolute route path "${x.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(s.length)}let T=qa([s,x.relativePath]),w=t.concat(x);h.children&&h.children.length>0&&(Qt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),wb(h.children,e,w,T,p)),!(h.path==null&&!h.index)&&e.push({path:T,score:b1(T,h.index),routesMeta:w})};return a.forEach((h,g)=>{if(h.path===""||!h.path?.includes("?"))l(h,g);else for(let p of Ab(h.path))l(h,g,!0,p)}),e}function Ab(a){let e=a.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=Ab(s.join("/")),g=[];return g.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&g.push(...h),g.map(p=>a.startsWith("/")&&p===""?"/":p)}function f1(a){a.sort((e,t)=>e.score!==t.score?t.score-e.score:_1(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var m1=/^:[\w-]+$/,g1=3,p1=2,y1=1,v1=10,x1=-2,Vv=a=>a==="*";function b1(a,e){let t=a.split("/"),s=t.length;return t.some(Vv)&&(s+=x1),e&&(s+=p1),t.filter(o=>!Vv(o)).reduce((o,l)=>o+(m1.test(l)?g1:l===""?y1:v1),s)}function _1(a,e){return a.length===e.length&&a.slice(0,-1).every((s,o)=>s===e[o])?a[a.length-1]-e[e.length-1]:0}function T1(a,e,t=!1){let{routesMeta:s}=a,o={},l="/",h=[];for(let g=0;g<s.length;++g){let p=s[g],y=g===s.length-1,x=l==="/"?e:e.slice(l.length)||"/",T=Nd({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},x),w=p.route;if(!T&&y&&t&&!s[s.length-1].route.index&&(T=Nd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},x)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:qa([l,T.pathname]),pathnameBase:R1(qa([l,T.pathnameBase])),route:w}),T.pathnameBase!=="/"&&(l=qa([l,T.pathnameBase]))}return h}function Nd(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[t,s]=E1(a.path,a.caseSensitive,a.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:s.reduce((y,{paramName:x,isOptional:T},w)=>{if(x==="*"){let F=g[w]||"";h=l.slice(0,l.length-F.length).replace(/(.)\/+$/,"$1")}const M=g[w];return T&&!M?y[x]=void 0:y[x]=(M||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:a}}function E1(a,e=!1,t=!0){Gr(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let s=[],o="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,p)=>(s.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(s.push({paramName:"*"}),o+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":a!==""&&a!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function k1(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Gr(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function Ya(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=a.charAt(t);return s&&s!=="/"?null:a.slice(t)||"/"}function S1(a,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof a=="string"?Uo(a):a;return{pathname:t?t.startsWith("/")?t:w1(t,e):e,search:N1(s),hash:C1(o)}}function w1(a,e){let t=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function vm(a,e,t,s){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function A1(a){return a.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cg(a){let e=A1(a);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function ug(a,e,t,s=!1){let o;typeof a=="string"?o=Uo(a):(o={...a},Qt(!o.pathname||!o.pathname.includes("?"),vm("?","pathname","search",o)),Qt(!o.pathname||!o.pathname.includes("#"),vm("#","pathname","hash",o)),Qt(!o.search||!o.search.includes("#"),vm("#","search","hash",o)));let l=a===""||o.pathname==="",h=l?"/":o.pathname,g;if(h==null)g=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let w=h.split("/");for(;w[0]==="..";)w.shift(),T-=1;o.pathname=w.join("/")}g=T>=0?e[T]:"/"}let p=S1(o,g),y=h&&h!=="/"&&h.endsWith("/"),x=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||x)&&(p.pathname+="/"),p}var qa=a=>a.join("/").replace(/\/\/+/g,"/"),R1=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),N1=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,C1=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function I1(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var Rb=["POST","PUT","PATCH","DELETE"];new Set(Rb);var D1=["GET",...Rb];new Set(D1);var Bo=E.createContext(null);Bo.displayName="DataRouter";var Yd=E.createContext(null);Yd.displayName="DataRouterState";E.createContext(!1);var Nb=E.createContext({isTransitioning:!1});Nb.displayName="ViewTransition";var j1=E.createContext(new Map);j1.displayName="Fetchers";var M1=E.createContext(null);M1.displayName="Await";var $r=E.createContext(null);$r.displayName="Navigation";var Ac=E.createContext(null);Ac.displayName="Location";var xa=E.createContext({outlet:null,matches:[],isDataRoute:!1});xa.displayName="Route";var dg=E.createContext(null);dg.displayName="RouteError";function O1(a,{relative:e}={}){Qt(Ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=E.useContext($r),{hash:o,pathname:l,search:h}=Rc(a,{relative:e}),g=l;return t!=="/"&&(g=l==="/"?t:qa([t,l])),s.createHref({pathname:g,search:h,hash:o})}function Ho(){return E.useContext(Ac)!=null}function Hs(){return Qt(Ho(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Ac).location}var Cb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ib(a){E.useContext($r).static||E.useLayoutEffect(a)}function Db(){let{isDataRoute:a}=E.useContext(xa);return a?Y1():P1()}function P1(){Qt(Ho(),"useNavigate() may be used only in the context of a <Router> component.");let a=E.useContext(Bo),{basename:e,navigator:t}=E.useContext($r),{matches:s}=E.useContext(xa),{pathname:o}=Hs(),l=JSON.stringify(cg(s)),h=E.useRef(!1);return Ib(()=>{h.current=!0}),E.useCallback((p,y={})=>{if(Gr(h.current,Cb),!h.current)return;if(typeof p=="number"){t.go(p);return}let x=ug(p,JSON.parse(l),o,y.relative==="path");a==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:qa([e,x.pathname])),(y.replace?t.replace:t.push)(x,y.state,y)},[e,t,l,o,a])}E.createContext(null);function Rc(a,{relative:e}={}){let{matches:t}=E.useContext(xa),{pathname:s}=Hs(),o=JSON.stringify(cg(t));return E.useMemo(()=>ug(a,JSON.parse(o),s,e==="path"),[a,o,s,e])}function V1(a,e){return jb(a,e)}function jb(a,e,t,s,o){Qt(Ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=E.useContext($r),{matches:h}=E.useContext(xa),g=h[h.length-1],p=g?g.params:{},y=g?g.pathname:"/",x=g?g.pathnameBase:"/",T=g&&g.route;{let ee=T&&T.path||"";Mb(y,!T||ee.endsWith("*")||ee.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${ee}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ee}"> to <Route path="${ee==="/"?"*":`${ee}/*`}">.`)}let w=Hs(),M;if(e){let ee=typeof e=="string"?Uo(e):e;Qt(x==="/"||ee.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${ee.pathname}" was given in the \`location\` prop.`),M=ee}else M=w;let F=M.pathname||"/",B=F;if(x!=="/"){let ee=x.replace(/^\//,"").split("/");B="/"+F.replace(/^\//,"").split("/").slice(ee.length).join("/")}let U=Sb(a,{pathname:B});Gr(T||U!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Gr(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=H1(U&&U.map(ee=>Object.assign({},ee,{params:Object.assign({},p,ee.params),pathname:qa([x,l.encodeLocation?l.encodeLocation(ee.pathname).pathname:ee.pathname]),pathnameBase:ee.pathnameBase==="/"?x:qa([x,l.encodeLocation?l.encodeLocation(ee.pathnameBase).pathname:ee.pathnameBase])})),h,t,s,o);return e&&K?E.createElement(Ac.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},K):K}function z1(){let a=K1(),e=I1(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),t=a instanceof Error?a.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",a),h=E.createElement(E.Fragment,null,E.createElement("p",null,"💿 Hey developer 👋"),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:l},"ErrorBoundary")," or"," ",E.createElement("code",{style:l},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),t?E.createElement("pre",{style:o},t):null,h)}var L1=E.createElement(z1,null),U1=class extends E.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){this.props.unstable_onError?this.props.unstable_onError(a,e):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?E.createElement(xa.Provider,{value:this.props.routeContext},E.createElement(dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function B1({routeContext:a,match:e,children:t}){let s=E.useContext(Bo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),E.createElement(xa.Provider,{value:a},t)}function H1(a,e=[],t=null,s=null,o=null){if(a==null){if(!t)return null;if(t.errors)a=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)a=t.matches;else return null}let l=a,h=t?.errors;if(h!=null){let y=l.findIndex(x=>x.route.id&&h?.[x.route.id]!==void 0);Qt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let g=!1,p=-1;if(t)for(let y=0;y<l.length;y++){let x=l[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=y),x.route.id){let{loaderData:T,errors:w}=t,M=x.route.loader&&!T.hasOwnProperty(x.route.id)&&(!w||w[x.route.id]===void 0);if(x.route.lazy||M){g=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((y,x,T)=>{let w,M=!1,F=null,B=null;t&&(w=h&&x.route.id?h[x.route.id]:void 0,F=x.route.errorElement||L1,g&&(p<0&&T===0?(Mb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,B=null):p===T&&(M=!0,B=x.route.hydrateFallbackElement||null)));let U=e.concat(l.slice(0,T+1)),K=()=>{let ee;return w?ee=F:M?ee=B:x.route.Component?ee=E.createElement(x.route.Component,null):x.route.element?ee=x.route.element:ee=y,E.createElement(B1,{match:x,routeContext:{outlet:y,matches:U,isDataRoute:t!=null},children:ee})};return t&&(x.route.ErrorBoundary||x.route.errorElement||T===0)?E.createElement(U1,{location:t.location,revalidation:t.revalidation,component:F,error:w,children:K(),routeContext:{outlet:null,matches:U,isDataRoute:!0},unstable_onError:s}):K()},null)}function hg(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G1(a){let e=E.useContext(Bo);return Qt(e,hg(a)),e}function F1(a){let e=E.useContext(Yd);return Qt(e,hg(a)),e}function q1(a){let e=E.useContext(xa);return Qt(e,hg(a)),e}function fg(a){let e=q1(a),t=e.matches[e.matches.length-1];return Qt(t.route.id,`${a} can only be used on routes that contain a unique "id"`),t.route.id}function $1(){return fg("useRouteId")}function K1(){let a=E.useContext(dg),e=F1("useRouteError"),t=fg("useRouteError");return a!==void 0?a:e.errors?.[t]}function Y1(){let{router:a}=G1("useNavigate"),e=fg("useNavigate"),t=E.useRef(!1);return Ib(()=>{t.current=!0}),E.useCallback(async(o,l={})=>{Gr(t.current,Cb),t.current&&(typeof o=="number"?a.navigate(o):await a.navigate(o,{fromRouteId:e,...l}))},[a,e])}var zv={};function Mb(a,e,t){!e&&!zv[a]&&(zv[a]=!0,Gr(!1,t))}E.memo(Q1);function Q1({routes:a,future:e,state:t,unstable_onError:s}){return jb(a,void 0,t,s,e)}function dc({to:a,replace:e,state:t,relative:s}){Qt(Ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=E.useContext($r);Gr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=E.useContext(xa),{pathname:h}=Hs(),g=Db(),p=ug(a,cg(l),h,s==="path"),y=JSON.stringify(p);return E.useEffect(()=>{g(JSON.parse(y),{replace:e,state:t,relative:s})},[g,y,s,e,t]),null}function _o(a){Qt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function X1({basename:a="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){Qt(!Ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=a.replace(/^\/*/,"/"),g=E.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=Uo(t));let{pathname:p="/",search:y="",hash:x="",state:T=null,key:w="default"}=t,M=E.useMemo(()=>{let F=Ya(p,h);return F==null?null:{location:{pathname:F,search:y,hash:x,state:T,key:w},navigationType:s}},[h,p,y,x,T,w,s]);return Gr(M!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:E.createElement($r.Provider,{value:g},E.createElement(Ac.Provider,{children:e,value:M}))}function Z1({children:a,location:e}){return V1(jm(a),e)}function jm(a,e=[]){let t=[];return E.Children.forEach(a,(s,o)=>{if(!E.isValidElement(s))return;let l=[...e,o];if(s.type===E.Fragment){t.push.apply(t,jm(s.props.children,l));return}Qt(s.type===_o,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=jm(s.props.children,l)),t.push(h)}),t}var pd="get",yd="application/x-www-form-urlencoded";function Qd(a){return a!=null&&typeof a.tagName=="string"}function W1(a){return Qd(a)&&a.tagName.toLowerCase()==="button"}function J1(a){return Qd(a)&&a.tagName.toLowerCase()==="form"}function eS(a){return Qd(a)&&a.tagName.toLowerCase()==="input"}function tS(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function nS(a,e){return a.button===0&&(!e||e==="_self")&&!tS(a)}var ld=null;function rS(){if(ld===null)try{new FormData(document.createElement("form"),0),ld=!1}catch{ld=!0}return ld}var aS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function xm(a){return a!=null&&!aS.has(a)?(Gr(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yd}"`),null):a}function sS(a,e){let t,s,o,l,h;if(J1(a)){let g=a.getAttribute("action");s=g?Ya(g,e):null,t=a.getAttribute("method")||pd,o=xm(a.getAttribute("enctype"))||yd,l=new FormData(a)}else if(W1(a)||eS(a)&&(a.type==="submit"||a.type==="image")){let g=a.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=a.getAttribute("formaction")||g.getAttribute("action");if(s=p?Ya(p,e):null,t=a.getAttribute("formmethod")||g.getAttribute("method")||pd,o=xm(a.getAttribute("formenctype"))||xm(g.getAttribute("enctype"))||yd,l=new FormData(g,a),!rS()){let{name:y,type:x,value:T}=a;if(x==="image"){let w=y?`${y}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else y&&l.append(y,T)}}else{if(Qd(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=pd,s=null,o=yd,h=a}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mg(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function iS(a,e,t){let s=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Ya(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function oS(a,e){if(a.id in e)return e[a.id];try{let t=await import(a.module);return e[a.id]=t,t}catch(t){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function lS(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function cS(a,e,t){let s=await Promise.all(a.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await oS(l,t);return h.links?h.links():[]}return[]}));return fS(s.flat(1).filter(lS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Lv(a,e,t,s,o,l){let h=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,g=(p,y)=>t[y].pathname!==p.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,y)=>h(p,y)||g(p,y)):l==="data"?e.filter((p,y)=>{let x=s.routes[p.route.id];if(!x||!x.hasLoader)return!1;if(h(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function uS(a,e,{includeHydrateFallback:t}={}){return dS(a.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function dS(a){return[...new Set(a)]}function hS(a){let e={},t=Object.keys(a).sort();for(let s of t)e[s]=a[s];return e}function fS(a,e){let t=new Set;return new Set(e),a.reduce((s,o)=>{let l=JSON.stringify(hS(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function Ob(){let a=E.useContext(Bo);return mg(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function mS(){let a=E.useContext(Yd);return mg(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var gg=E.createContext(void 0);gg.displayName="FrameworkContext";function Pb(){let a=E.useContext(gg);return mg(a,"You must render this element inside a <HydratedRouter> element"),a}function gS(a,e){let t=E.useContext(gg),[s,o]=E.useState(!1),[l,h]=E.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:x,onTouchStart:T}=e,w=E.useRef(null);E.useEffect(()=>{if(a==="render"&&h(!0),a==="viewport"){let B=K=>{K.forEach(ee=>{h(ee.isIntersecting)})},U=new IntersectionObserver(B,{threshold:.5});return w.current&&U.observe(w.current),()=>{U.disconnect()}}},[a]),E.useEffect(()=>{if(s){let B=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(B)}}},[s]);let M=()=>{o(!0)},F=()=>{o(!1),h(!1)};return t?a!=="intent"?[l,w,{}]:[l,w,{onFocus:Zl(g,M),onBlur:Zl(p,F),onMouseEnter:Zl(y,M),onMouseLeave:Zl(x,F),onTouchStart:Zl(T,M)}]:[!1,w,{}]}function Zl(a,e){return t=>{a&&a(t),t.defaultPrevented||e(t)}}function pS({page:a,...e}){let{router:t}=Ob(),s=E.useMemo(()=>Sb(t.routes,a,t.basename),[t.routes,a,t.basename]);return s?E.createElement(vS,{page:a,matches:s,...e}):null}function yS(a){let{manifest:e,routeModules:t}=Pb(),[s,o]=E.useState([]);return E.useEffect(()=>{let l=!1;return cS(a,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[a,e,t]),s}function vS({page:a,matches:e,...t}){let s=Hs(),{manifest:o,routeModules:l}=Pb(),{basename:h}=Ob(),{loaderData:g,matches:p}=mS(),y=E.useMemo(()=>Lv(a,e,p,o,s,"data"),[a,e,p,o,s]),x=E.useMemo(()=>Lv(a,e,p,o,s,"assets"),[a,e,p,o,s]),T=E.useMemo(()=>{if(a===s.pathname+s.search+s.hash)return[];let F=new Set,B=!1;if(e.forEach(K=>{let ee=o.routes[K.route.id];!ee||!ee.hasLoader||(!y.some(ne=>ne.route.id===K.route.id)&&K.route.id in g&&l[K.route.id]?.shouldRevalidate||ee.hasClientLoader?B=!0:F.add(K.route.id))}),F.size===0)return[];let U=iS(a,h,"data");return B&&F.size>0&&U.searchParams.set("_routes",e.filter(K=>F.has(K.route.id)).map(K=>K.route.id).join(",")),[U.pathname+U.search]},[h,g,s,o,y,e,a,l]),w=E.useMemo(()=>uS(x,o),[x,o]),M=yS(x);return E.createElement(E.Fragment,null,T.map(F=>E.createElement("link",{key:F,rel:"prefetch",as:"fetch",href:F,...t})),w.map(F=>E.createElement("link",{key:F,rel:"modulepreload",href:F,...t})),M.map(({key:F,link:B})=>E.createElement("link",{key:F,nonce:t.nonce,...B})))}function xS(...a){return e=>{a.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Vb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vb&&(window.__reactRouterVersion="7.9.1")}catch{}function bS({basename:a,children:e,window:t}){let s=E.useRef();s.current==null&&(s.current=l1({window:t,v5Compat:!0}));let o=s.current,[l,h]=E.useState({action:o.action,location:o.location}),g=E.useCallback(p=>{E.startTransition(()=>h(p))},[h]);return E.useLayoutEffect(()=>o.listen(g),[o,g]),E.createElement(X1,{basename:a,children:e,location:l.location,navigationType:l.action,navigator:o})}var zb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Lb=E.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:g,target:p,to:y,preventScrollReset:x,viewTransition:T,...w},M){let{basename:F}=E.useContext($r),B=typeof y=="string"&&zb.test(y),U,K=!1;if(typeof y=="string"&&B&&(U=y,Vb))try{let N=new URL(window.location.href),j=y.startsWith("//")?new URL(N.protocol+y):new URL(y),O=Ya(j.pathname,F);j.origin===N.origin&&O!=null?y=O+j.search+j.hash:K=!0}catch{Gr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ee=O1(y,{relative:o}),[ne,Se,Te]=gS(s,w),xe=kS(y,{replace:h,state:g,target:p,preventScrollReset:x,relative:o,viewTransition:T});function R(N){e&&e(N),N.defaultPrevented||xe(N)}let A=E.createElement("a",{...w,...Te,href:U||ee,onClick:K||l?e:R,ref:xS(M,Se),target:p,"data-discover":!B&&t==="render"?"true":void 0});return ne&&!B?E.createElement(E.Fragment,null,A,E.createElement(pS,{page:ee})):A});Lb.displayName="Link";var _S=E.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:g,children:p,...y},x){let T=Rc(h,{relative:y.relative}),w=Hs(),M=E.useContext(Yd),{navigator:F,basename:B}=E.useContext($r),U=M!=null&&NS(T)&&g===!0,K=F.encodeLocation?F.encodeLocation(T).pathname:T.pathname,ee=w.pathname,ne=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;t||(ee=ee.toLowerCase(),ne=ne?ne.toLowerCase():null,K=K.toLowerCase()),ne&&B&&(ne=Ya(ne,B)||ne);const Se=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let Te=ee===K||!o&&ee.startsWith(K)&&ee.charAt(Se)==="/",xe=ne!=null&&(ne===K||!o&&ne.startsWith(K)&&ne.charAt(K.length)==="/"),R={isActive:Te,isPending:xe,isTransitioning:U},A=Te?e:void 0,N;typeof s=="function"?N=s(R):N=[s,Te?"active":null,xe?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(R):l;return E.createElement(Lb,{...y,"aria-current":A,className:N,ref:x,style:j,to:h,viewTransition:g},typeof p=="function"?p(R):p)});_S.displayName="NavLink";var TS=E.forwardRef(({discover:a="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:h=pd,action:g,onSubmit:p,relative:y,preventScrollReset:x,viewTransition:T,...w},M)=>{let F=AS(),B=RS(g,{relative:y}),U=h.toLowerCase()==="get"?"get":"post",K=typeof g=="string"&&zb.test(g),ee=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let Se=ne.nativeEvent.submitter,Te=Se?.getAttribute("formmethod")||h;F(Se||ne.currentTarget,{fetcherKey:e,method:Te,navigate:t,replace:o,state:l,relative:y,preventScrollReset:x,viewTransition:T})};return E.createElement("form",{ref:M,method:U,action:B,onSubmit:s?p:ee,...w,"data-discover":!K&&a==="render"?"true":void 0})});TS.displayName="Form";function ES(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ub(a){let e=E.useContext(Bo);return Qt(e,ES(a)),e}function kS(a,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:h}={}){let g=Db(),p=Hs(),y=Rc(a,{relative:l});return E.useCallback(x=>{if(nS(x,e)){x.preventDefault();let T=t!==void 0?t:uc(p)===uc(y);g(a,{replace:T,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[p,g,y,t,s,e,a,o,l,h])}var SS=0,wS=()=>`__${String(++SS)}__`;function AS(){let{router:a}=Ub("useSubmit"),{basename:e}=E.useContext($r),t=$1();return E.useCallback(async(s,o={})=>{let{action:l,method:h,encType:g,formData:p,body:y}=sS(s,e);if(o.navigate===!1){let x=o.fetcherKey||wS();await a.fetch(x,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||g,flushSync:o.flushSync})}else await a.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[a,e,t])}function RS(a,{relative:e}={}){let{basename:t}=E.useContext($r),s=E.useContext(xa);Qt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...Rc(a||".",{relative:e})},h=Hs();if(a==null){l.search=h.search;let g=new URLSearchParams(l.search),p=g.getAll("index");if(p.some(x=>x==="")){g.delete("index"),p.filter(T=>T).forEach(T=>g.append("index",T));let x=g.toString();l.search=x?`?${x}`:""}}return(!a||a===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:qa([t,l.pathname])),uc(l)}function NS(a,{relative:e}={}){let t=E.useContext(Nb);Qt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Ub("useViewTransitionState"),o=Rc(a,{relative:e});if(!t.isTransitioning)return!1;let l=Ya(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=Ya(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Nd(o.pathname,h)!=null||Nd(o.pathname,l)!=null}const CS=()=>{};var Uv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=function(a){const e=[];let t=0;for(let s=0;s<a.length;s++){let o=a.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<a.length&&(a.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(a.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},IS=function(a){const e=[];let t=0,s=0;for(;t<a.length;){const o=a[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=a[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=a[t++],h=a[t++],g=a[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|g&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=a[t++],h=a[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<a.length;o+=3){const l=a[o],h=o+1<a.length,g=h?a[o+1]:0,p=o+2<a.length,y=p?a[o+2]:0,x=l>>2,T=(l&3)<<4|g>>4;let w=(g&15)<<2|y>>6,M=y&63;p||(M=64,h||(w=64)),s.push(t[x],t[T],t[w],t[M])}return s.join("")},encodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(a):this.encodeByteArray(Bb(a),e)},decodeString(a,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(a):IS(this.decodeStringToByteArray(a,e))},decodeStringToByteArray(a,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<a.length;){const l=t[a.charAt(o++)],g=o<a.length?t[a.charAt(o)]:0;++o;const y=o<a.length?t[a.charAt(o)]:64;++o;const T=o<a.length?t[a.charAt(o)]:64;if(++o,l==null||g==null||y==null||T==null)throw new DS;const w=l<<2|g>>4;if(s.push(w),y!==64){const M=g<<4&240|y>>2;if(s.push(M),T!==64){const F=y<<6&192|T;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let a=0;a<this.ENCODED_VALS.length;a++)this.byteToCharMap_[a]=this.ENCODED_VALS.charAt(a),this.charToByteMap_[this.byteToCharMap_[a]]=a,this.byteToCharMapWebSafe_[a]=this.ENCODED_VALS_WEBSAFE.charAt(a),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[a]]=a,a>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(a)]=a,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(a)]=a)}}};class DS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jS=function(a){const e=Bb(a);return Hb.encodeByteArray(e,!0)},Gb=function(a){return jS(a).replace(/\./g,"")},Fb=function(a){try{return Hb.decodeString(a,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=()=>MS().__FIREBASE_DEFAULTS__,PS=()=>{if(typeof process>"u"||typeof Uv>"u")return;const a=Uv.__FIREBASE_DEFAULTS__;if(a)return JSON.parse(a)},VS=()=>{if(typeof document>"u")return;let a;try{a=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=a&&Fb(a[1]);return e&&JSON.parse(e)},Xd=()=>{try{return CS()||OS()||PS()||VS()}catch(a){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${a}`);return}},zS=a=>Xd()?.emulatorHosts?.[a],qb=()=>Xd()?.config,$b=a=>Xd()?.[`_${a}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(a){try{return(a.startsWith("http://")||a.startsWith("https://")?new URL(a).hostname:a).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kb(a){return(await fetch(a,{credentials:"include"})).ok}const ac={};function US(){const a={prod:[],emulator:[]};for(const e of Object.keys(ac))ac[e]?a.emulator.push(e):a.prod.push(e);return a}function BS(a){let e=document.getElementById(a),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",a),t=!0),{created:t,element:e}}let Bv=!1;function HS(a,e){if(typeof window>"u"||typeof document>"u"||!Go(window.location.host)||ac[a]===e||ac[a]||Bv)return;ac[a]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",l=US().prod.length>0;function h(){const w=document.getElementById(s);w&&w.remove()}function g(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function p(w,M){w.setAttribute("width","24"),w.setAttribute("id",M),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{Bv=!0,h()},w}function x(w,M){w.setAttribute("id",M),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function T(){const w=BS(s),M=t("text"),F=document.getElementById(M)||document.createElement("span"),B=t("learnmore"),U=document.getElementById(B)||document.createElement("a"),K=t("preprendIcon"),ee=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const ne=w.element;g(ne),x(U,B);const Se=y();p(ee,K),ne.append(ee,F,U,Se),document.body.appendChild(ne)}l?(F.innerText="Preview backend disconnected.",ee.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ee.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Wn())}function FS(){const a=Xd()?.forceEnvironment;if(a==="node")return!0;if(a==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function $S(){const a=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof a=="object"&&a.id!==void 0}function KS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YS(){const a=Wn();return a.indexOf("MSIE ")>=0||a.indexOf("Trident/")>=0}function QS(){return!FS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XS(){try{return typeof indexedDB=="object"}catch{return!1}}function ZS(){return new Promise((a,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),a(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="FirebaseError";class Ja extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=WS,Object.setPrototypeOf(this,Ja.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?JS(l,s):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new Ja(o,g,s)}}function JS(a,e){return a.replace(ew,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const ew=/\{\$([^}]+)}/g;function tw(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}function _i(a,e){if(a===e)return!0;const t=Object.keys(a),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=a[o],h=e[o];if(Hv(l)&&Hv(h)){if(!_i(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Hv(a){return a!==null&&typeof a=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(a){const e=[];for(const[t,s]of Object.entries(a))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Wl(a){const e={};return a.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Jl(a){const e=a.indexOf("?");if(!e)return"";const t=a.indexOf("#",e);return a.substring(e,t>0?t:void 0)}function nw(a,e){const t=new rw(a,e);return t.subscribe.bind(t)}class rw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");aw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=bm),o.error===void 0&&(o.error=bm),o.complete===void 0&&(o.complete=bm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function aw(a,e){if(typeof a!="object"||a===null)return!1;for(const t of e)if(t in a&&typeof a[t]=="function")return!0;return!1}function bm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(a){return a&&a._delegate?a._delegate:a}class Ti{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new LS;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ow(e))try{this.getOrInitializeService({instanceIdentifier:vi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=vi){return this.instances.has(e)}getOptions(e=vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(l);s===g&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=vi){return this.component?this.component.multipleInstances?e:vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iw(a){return a===vi?void 0:a}function ow(a){return a.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new sw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(a){a[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT"})(yt||(yt={}));const cw={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},uw=yt.INFO,dw={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},hw=(a,e,...t)=>{if(e<a.logLevel)return;const s=new Date().toISOString(),o=dw[e];if(o)console[o](`[${s}]  ${a.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pg{constructor(e){this.name=e,this._logLevel=uw,this._logHandler=hw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}const fw=(a,e)=>e.some(t=>a instanceof t);let Gv,Fv;function mw(){return Gv||(Gv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gw(){return Fv||(Fv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yb=new WeakMap,Mm=new WeakMap,Qb=new WeakMap,_m=new WeakMap,yg=new WeakMap;function pw(a){const e=new Promise((t,s)=>{const o=()=>{a.removeEventListener("success",l),a.removeEventListener("error",h)},l=()=>{t(Is(a.result)),o()},h=()=>{s(a.error),o()};a.addEventListener("success",l),a.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Yb.set(t,a)}).catch(()=>{}),yg.set(e,a),e}function yw(a){if(Mm.has(a))return;const e=new Promise((t,s)=>{const o=()=>{a.removeEventListener("complete",l),a.removeEventListener("error",h),a.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(a.error||new DOMException("AbortError","AbortError")),o()};a.addEventListener("complete",l),a.addEventListener("error",h),a.addEventListener("abort",h)});Mm.set(a,e)}let Om={get(a,e,t){if(a instanceof IDBTransaction){if(e==="done")return Mm.get(a);if(e==="objectStoreNames")return a.objectStoreNames||Qb.get(a);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Is(a[e])},set(a,e,t){return a[e]=t,!0},has(a,e){return a instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in a}};function vw(a){Om=a(Om)}function xw(a){return a===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=a.call(Tm(this),e,...t);return Qb.set(s,e.sort?e.sort():[e]),Is(s)}:gw().includes(a)?function(...e){return a.apply(Tm(this),e),Is(Yb.get(this))}:function(...e){return Is(a.apply(Tm(this),e))}}function bw(a){return typeof a=="function"?xw(a):(a instanceof IDBTransaction&&yw(a),fw(a,mw())?new Proxy(a,Om):a)}function Is(a){if(a instanceof IDBRequest)return pw(a);if(_m.has(a))return _m.get(a);const e=bw(a);return e!==a&&(_m.set(a,e),yg.set(e,a)),e}const Tm=a=>yg.get(a);function _w(a,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(a,e),g=Is(h);return s&&h.addEventListener("upgradeneeded",p=>{s(Is(h.result),p.oldVersion,p.newVersion,Is(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),g.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const Tw=["get","getKey","getAll","getAllKeys","count"],Ew=["put","add","delete","clear"],Em=new Map;function qv(a,e){if(!(a instanceof IDBDatabase&&!(e in a)&&typeof e=="string"))return;if(Em.get(e))return Em.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=Ew.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Tw.includes(t)))return;const l=async function(h,...g){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(g.shift())),(await Promise.all([y[t](...g),o&&p.done]))[0]};return Em.set(e,l),l}vw(a=>({...a,get:(e,t,s)=>qv(e,t)||a.get(e,t,s),has:(e,t)=>!!qv(e,t)||a.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Sw(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Sw(a){return a.getComponent()?.type==="VERSION"}const Pm="@firebase/app",$v="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new pg("@firebase/app"),ww="@firebase/app-compat",Aw="@firebase/analytics-compat",Rw="@firebase/analytics",Nw="@firebase/app-check-compat",Cw="@firebase/app-check",Iw="@firebase/auth",Dw="@firebase/auth-compat",jw="@firebase/database",Mw="@firebase/data-connect",Ow="@firebase/database-compat",Pw="@firebase/functions",Vw="@firebase/functions-compat",zw="@firebase/installations",Lw="@firebase/installations-compat",Uw="@firebase/messaging",Bw="@firebase/messaging-compat",Hw="@firebase/performance",Gw="@firebase/performance-compat",Fw="@firebase/remote-config",qw="@firebase/remote-config-compat",$w="@firebase/storage",Kw="@firebase/storage-compat",Yw="@firebase/firestore",Qw="@firebase/ai",Xw="@firebase/firestore-compat",Zw="firebase",Ww="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="[DEFAULT]",Jw={[Pm]:"fire-core",[ww]:"fire-core-compat",[Rw]:"fire-analytics",[Aw]:"fire-analytics-compat",[Cw]:"fire-app-check",[Nw]:"fire-app-check-compat",[Iw]:"fire-auth",[Dw]:"fire-auth-compat",[jw]:"fire-rtdb",[Mw]:"fire-data-connect",[Ow]:"fire-rtdb-compat",[Pw]:"fire-fn",[Vw]:"fire-fn-compat",[zw]:"fire-iid",[Lw]:"fire-iid-compat",[Uw]:"fire-fcm",[Bw]:"fire-fcm-compat",[Hw]:"fire-perf",[Gw]:"fire-perf-compat",[Fw]:"fire-rc",[qw]:"fire-rc-compat",[$w]:"fire-gcs",[Kw]:"fire-gcs-compat",[Yw]:"fire-fst",[Xw]:"fire-fst-compat",[Qw]:"fire-vertex","fire-js":"fire-js",[Zw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,eA=new Map,zm=new Map;function Kv(a,e){try{a.container.addComponent(e)}catch(t){Qa.debug(`Component ${e.name} failed to register with FirebaseApp ${a.name}`,t)}}function Do(a){const e=a.name;if(zm.has(e))return Qa.debug(`There were multiple attempts to register component ${e}.`),!1;zm.set(e,a);for(const t of hc.values())Kv(t,a);for(const t of eA.values())Kv(t,a);return!0}function vg(a,e){const t=a.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),a.container.getProvider(e)}function Dr(a){return a==null?!1:a.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ds=new Nc("app","Firebase",tA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ti("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=Ww;function Xb(a,e={}){let t=a;typeof e!="object"&&(e={name:e});const s={name:Vm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ds.create("bad-app-name",{appName:String(o)});if(t||(t=qb()),!t)throw Ds.create("no-options");const l=hc.get(o);if(l){if(_i(t,l.options)&&_i(s,l.config))return l;throw Ds.create("duplicate-app",{appName:o})}const h=new lw(o);for(const p of zm.values())h.addComponent(p);const g=new nA(t,s,h);return hc.set(o,g),g}function Zb(a=Vm){const e=hc.get(a);if(!e&&a===Vm&&qb())return Xb();if(!e)throw Ds.create("no-app",{appName:a});return e}function rA(){return Array.from(hc.values())}function js(a,e,t){let s=Jw[a]??a;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qa.warn(h.join(" "));return}Do(new Ti(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="firebase-heartbeat-database",sA=1,fc="firebase-heartbeat-store";let km=null;function Wb(){return km||(km=_w(aA,sA,{upgrade:(a,e)=>{switch(e){case 0:try{a.createObjectStore(fc)}catch(t){console.warn(t)}}}}).catch(a=>{throw Ds.create("idb-open",{originalErrorMessage:a.message})})),km}async function iA(a){try{const t=(await Wb()).transaction(fc),s=await t.objectStore(fc).get(Jb(a));return await t.done,s}catch(e){if(e instanceof Ja)Qa.warn(e.message);else{const t=Ds.create("idb-get",{originalErrorMessage:e?.message});Qa.warn(t.message)}}}async function Yv(a,e){try{const s=(await Wb()).transaction(fc,"readwrite");await s.objectStore(fc).put(e,Jb(a)),await s.done}catch(t){if(t instanceof Ja)Qa.warn(t.message);else{const s=Ds.create("idb-set",{originalErrorMessage:t?.message});Qa.warn(s.message)}}}function Jb(a){return`${a.name}!${a.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=1024,lA=30;class cA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dA(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Qv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>lA){const o=hA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Qa.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Qv(),{heartbeatsToSend:t,unsentEntries:s}=uA(this._heartbeatsCache.heartbeats),o=Gb(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Qa.warn(e),""}}}function Qv(){return new Date().toISOString().substring(0,10)}function uA(a,e=oA){const t=[];let s=a.slice();for(const o of a){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Xv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Xv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class dA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XS()?ZS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await iA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Xv(a){return Gb(JSON.stringify({version:2,heartbeats:a})).length}function hA(a){if(a.length===0)return-1;let e=0,t=a[0].date;for(let s=1;s<a.length;s++)a[s].date<t&&(t=a[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(a){Do(new Ti("platform-logger",e=>new kw(e),"PRIVATE")),Do(new Ti("heartbeat",e=>new cA(e),"PRIVATE")),js(Pm,$v,a),js(Pm,$v,"esm2020"),js("fire-js","")}fA("");function e_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mA=e_,t_=new Nc("auth","Firebase",e_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd=new pg("@firebase/auth");function gA(a,...e){Cd.logLevel<=yt.WARN&&Cd.warn(`Auth (${Fo}): ${a}`,...e)}function vd(a,...e){Cd.logLevel<=yt.ERROR&&Cd.error(`Auth (${Fo}): ${a}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(a,...e){throw xg(a,...e)}function ua(a,...e){return xg(a,...e)}function n_(a,e,t){const s={...mA(),[e]:t};return new Nc("auth","Firebase",s).create(e,{appName:a.name})}function $a(a){return n_(a,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xg(a,...e){if(typeof a!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=a.name),a._errorFactory.create(t,...s)}return t_.create(a,...e)}function Qe(a,e,...t){if(!a)throw xg(e,...t)}function Ga(a){const e="INTERNAL ASSERTION FAILED: "+a;throw vd(e),new Error(e)}function Xa(a,e){a||Ga(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){return typeof self<"u"&&self.location?.href||""}function pA(){return Zv()==="http:"||Zv()==="https:"}function Zv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pA()||$S()||"connection"in navigator)?navigator.onLine:!0}function vA(){if(typeof navigator>"u")return null;const a=navigator;return a.languages&&a.languages[0]||a.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xa(t>e,"Short delay should be less than long delay!"),this.isMobile=GS()||KS()}get(){return yA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(a,e){Xa(a.emulator,"Emulator should always be set here");const{url:t}=a.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ga("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ga("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ga("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_A=new Ic(3e4,6e4);function Gs(a,e){return a.tenantId&&!e.tenantId?{...e,tenantId:a.tenantId}:e}async function Fs(a,e,t,s,o={}){return a_(a,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const g=Cc({key:a.config.apiKey,...h}).slice(1),p=await a._getAdditionalHeaders();p["Content-Type"]="application/json",a.languageCode&&(p["X-Firebase-Locale"]=a.languageCode);const y={method:e,headers:p,...l};return qS()||(y.referrerPolicy="no-referrer"),a.emulatorConfig&&Go(a.emulatorConfig.host)&&(y.credentials="include"),r_.fetch()(await s_(a,a.config.apiHost,t,g),y)})}async function a_(a,e,t){a._canInitEmulator=!1;const s={...xA,...e};try{const o=new EA(a),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw cd(a,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const g=l.ok?h.errorMessage:h.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw cd(a,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw cd(a,"email-already-in-use",h);if(p==="USER_DISABLED")throw cd(a,"user-disabled",h);const x=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw n_(a,x,y);Fr(a,x)}}catch(o){if(o instanceof Ja)throw o;Fr(a,"network-request-failed",{message:String(o)})}}async function Dc(a,e,t,s,o={}){const l=await Fs(a,e,t,s,o);return"mfaPendingCredential"in l&&Fr(a,"multi-factor-auth-required",{_serverResponse:l}),l}async function s_(a,e,t,s){const o=`${e}${t}?${s}`,l=a,h=l.config.emulator?bg(a.config,o):`${a.config.apiScheme}://${o}`;return bA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function TA(a){switch(a){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class EA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ua(this.auth,"network-request-failed")),_A.get())})}}function cd(a,e,t){const s={appName:a.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ua(a,e,s);return o.customData._tokenResponse=t,o}function Wv(a){return a!==void 0&&a.enterprise!==void 0}class kA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return TA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function SA(a,e){return Fs(a,"GET","/v2/recaptchaConfig",Gs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(a,e){return Fs(a,"POST","/v1/accounts:delete",e)}async function Id(a,e){return Fs(a,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(a){if(a)try{const e=new Date(Number(a));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AA(a,e=!1){const t=nr(a),s=await t.getIdToken(e),o=_g(s);Qe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:s,authTime:sc(Sm(o.auth_time)),issuedAtTime:sc(Sm(o.iat)),expirationTime:sc(Sm(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Sm(a){return Number(a)*1e3}function _g(a){const[e,t,s]=a.split(".");if(e===void 0||t===void 0||s===void 0)return vd("JWT malformed, contained fewer than 3 sections"),null;try{const o=Fb(t);return o?JSON.parse(o):(vd("Failed to decode base64 JWT payload"),null)}catch(o){return vd("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Jv(a){const e=_g(a);return Qe(e,"internal-error"),Qe(typeof e.exp<"u","internal-error"),Qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(a,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Ja&&RA(s)&&a.auth.currentUser===a&&await a.auth.signOut(),s}}function RA({code:a}){return a==="auth/user-disabled"||a==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sc(this.lastLoginAt),this.creationTime=sc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(a){const e=a.auth,t=await a.getIdToken(),s=await mc(a,Id(e,{idToken:t}));Qe(s?.users.length,e,"internal-error");const o=s.users[0];a._notifyReloadListener(o);const l=o.providerUserInfo?.length?i_(o.providerUserInfo):[],h=IA(a.providerData,l),g=a.isAnonymous,p=!(a.email&&o.passwordHash)&&!h?.length,y=g?p:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Um(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(a,x)}async function CA(a){const e=nr(a);await Dd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IA(a,e){return[...a.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function i_(a){return a.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(a,e){const t=await a_(a,{},async()=>{const s=Cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=a.config,h=await s_(a,o,"/v1/token",`key=${l}`),g=await a._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:s};return a.emulatorConfig&&Go(a.emulatorConfig.host)&&(p.credentials="include"),r_.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function jA(a,e){return Fs(a,"POST","/v2/accounts:revokeToken",Gs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qe(e.idToken,"internal-error"),Qe(typeof e.idToken<"u","internal-error"),Qe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Qe(e.length!==0,"internal-error");const t=Jv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await DA(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new Ao;return s&&(Qe(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(Qe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Qe(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return Ga("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(a,e){Qe(typeof a=="string"||typeof a>"u","internal-error",{appName:e})}class Br{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new NA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Um(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await mc(this,this.stsTokenManager.getToken(this.auth,e));return Qe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return AA(this,e)}reload(){return CA(this)}_assign(e){this!==e&&(Qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Br({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Dd(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dr(this.auth.app))return Promise.reject($a(this.auth));const e=await this.getIdToken();return await mc(this,wA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,h=t.photoURL??void 0,g=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:T,emailVerified:w,isAnonymous:M,providerData:F,stsTokenManager:B}=t;Qe(T&&B,e,"internal-error");const U=Ao.fromJSON(this.name,B);Qe(typeof T=="string",e,"internal-error"),ks(s,e.name),ks(o,e.name),Qe(typeof w=="boolean",e,"internal-error"),Qe(typeof M=="boolean",e,"internal-error"),ks(l,e.name),ks(h,e.name),ks(g,e.name),ks(p,e.name),ks(y,e.name),ks(x,e.name);const K=new Br({uid:T,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:M,photoURL:h,phoneNumber:l,tenantId:g,stsTokenManager:U,createdAt:y,lastLoginAt:x});return F&&Array.isArray(F)&&(K.providerData=F.map(ee=>({...ee}))),p&&(K._redirectEventId=p),K}static async _fromIdTokenResponse(e,t,s=!1){const o=new Ao;o.updateFromServerResponse(t);const l=new Br({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Dd(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Qe(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?i_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,g=new Ao;g.updateFromIdToken(s);const p=new Br({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Um(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex=new Map;function Fa(a){Xa(a instanceof Function,"Expected a class definition");let e=ex.get(a);return e?(Xa(e instanceof a,"Instance stored in cache mismatched with class"),e):(e=new a,ex.set(a,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}o_.type="NONE";const tx=o_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(a,e,t){return`firebase:${a}:${e}:${t}`}class Ro{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=xd(this.userKey,o.apiKey,l),this.fullPersistenceKey=xd("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Id(this.auth,{idToken:e}).catch(()=>{});return t?Br._fromGetAccountInfoResponse(this.auth,t,e):null}return Br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ro(Fa(tx),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Fa(tx);const h=xd(s,e.config.apiKey,e.name);let g=null;for(const y of t)try{const x=await y._get(h);if(x){let T;if(typeof x=="string"){const w=await Id(e,{idToken:x}).catch(()=>{});if(!w)break;T=await Br._fromGetAccountInfoResponse(e,w,x)}else T=Br._fromJSON(e,x);y!==l&&(g=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ro(l,e,s):(l=p[0],g&&await l._set(h,g.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new Ro(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(a){const e=a.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f_(e))return"Blackberry";if(m_(e))return"Webos";if(c_(e))return"Safari";if((e.includes("chrome/")||u_(e))&&!e.includes("edge/"))return"Chrome";if(h_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=a.match(t);if(s?.length===2)return s[1]}return"Other"}function l_(a=Wn()){return/firefox\//i.test(a)}function c_(a=Wn()){const e=a.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u_(a=Wn()){return/crios\//i.test(a)}function d_(a=Wn()){return/iemobile/i.test(a)}function h_(a=Wn()){return/android/i.test(a)}function f_(a=Wn()){return/blackberry/i.test(a)}function m_(a=Wn()){return/webos/i.test(a)}function Tg(a=Wn()){return/iphone|ipad|ipod/i.test(a)||/macintosh/i.test(a)&&/mobile/i.test(a)}function MA(a=Wn()){return Tg(a)&&!!window.navigator?.standalone}function OA(){return YS()&&document.documentMode===10}function g_(a=Wn()){return Tg(a)||h_(a)||m_(a)||f_(a)||/windows phone/i.test(a)||d_(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(a,e=[]){let t;switch(a){case"Browser":t=nx(Wn());break;case"Worker":t=`${nx(Wn())}-${a}`;break;default:t=a}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Fo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,g)=>{try{const p=e(l);h(p)}catch(p){g(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(a,e={}){return Fs(a,"GET","/v2/passwordPolicy",Gs(a,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=6;class LA{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??zA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rx(this),this.idTokenSubscription=new rx(this),this.beforeStateQueue=new PA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fa(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ro.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Id(this,{idToken:e}),s=await Br._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Dr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=s?._redirectEventId,g=await this.tryRedirectSignIn(e);(!l||l===h)&&g?.user&&(s=g.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=vA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dr(this.app))return Promise.reject($a(this));const t=e?nr(e):null;return t&&Qe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dr(this.app)?Promise.reject($a(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dr(this.app)?Promise.reject($a(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VA(this),t=new LA(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await jA(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fa(e)||this._popupRedirectResolver;Qe(t,this,"argument-error"),this.redirectPersistenceManager=await Ro.create(this,[Fa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qe(g,this,"internal-error"),g.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=p_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&gA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ri(a){return nr(a)}class rx{constructor(e){this.auth=e,this.observer=null,this.addObserver=nw(t=>this.observer=t)}get next(){return Qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BA(a){Zd=a}function y_(a){return Zd.loadJS(a)}function HA(){return Zd.recaptchaEnterpriseScript}function GA(){return Zd.gapiScript}function FA(a){return`__${a}${Math.floor(Math.random()*1e6)}`}class qA{constructor(){this.enterprise=new $A}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class $A{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const KA="recaptcha-enterprise",v_="NO_RECAPTCHA";class YA{constructor(e){this.type=KA,this.auth=Ri(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,g)=>{SA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new kA(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{g(p)})})}function o(l,h,g){const p=window.grecaptcha;Wv(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(v_)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new qA().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(g=>{if(!t&&Wv(window.grecaptcha))o(g,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=HA();p.length!==0&&(p+=g),y_(p).then(()=>{o(g,l,h)}).catch(y=>{h(y)})}}).catch(g=>{h(g)})})}}async function ax(a,e,t,s=!1,o=!1){const l=new YA(a);let h;if(o)h=v_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const g={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return s?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Bm(a,e,t,s,o){if(a._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ax(a,e,t,t==="getOobCode");return s(a,l)}else return s(a,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await ax(a,e,t,t==="getOobCode");return s(a,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(a,e){const t=vg(a,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(_i(l,e??{}))return o;Fr(o,"already-initialized")}return t.initialize({options:e})}function XA(a,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Fa);e?.errorMap&&a._updateErrorMap(e.errorMap),a._initializeWithPersistence(s,e?.popupRedirectResolver)}function ZA(a,e,t){const s=Ri(a);Qe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=x_(e),{host:h,port:g}=WA(e),p=g===null?"":`:${g}`,y={url:`${l}//${h}${p}/`},x=Object.freeze({host:h,port:g,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Qe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Qe(_i(y,s.config.emulator)&&_i(x,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=x,s.settings.appVerificationDisabledForTesting=!0,Go(h)?(Kb(`${l}//${h}${p}`),HS("Auth",!0)):JA()}function x_(a){const e=a.indexOf(":");return e<0?"":a.substr(0,e+1)}function WA(a){const e=x_(a),t=/(\/\/)?([^?#/]+)/.exec(a.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:sx(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:sx(h)}}}function sx(a){if(!a)return null;const e=Number(a);return isNaN(e)?null:e}function JA(){function a(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",a):a())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ga("not implemented")}_getIdTokenResponse(e){return Ga("not implemented")}_linkToIdToken(e,t){return Ga("not implemented")}_getReauthenticationResolver(e){return Ga("not implemented")}}async function eR(a,e){return Fs(a,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tR(a,e){return Dc(a,"POST","/v1/accounts:signInWithPassword",Gs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nR(a,e){return Dc(a,"POST","/v1/accounts:signInWithEmailLink",Gs(a,e))}async function rR(a,e){return Dc(a,"POST","/v1/accounts:signInWithEmailLink",Gs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends Eg{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new gc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new gc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,t,"signInWithPassword",tR);case"emailLink":return nR(e,{email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,s,"signUpPassword",eR);case"emailLink":return rR(e,{idToken:t,email:this._email,oobCode:this._password});default:Fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(a,e){return Dc(a,"POST","/v1/accounts:signInWithIdp",Gs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="http://localhost";class Ei extends Eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ei(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const h=new Ei(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return No(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,No(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,No(e,t)}buildRequest(){const e={requestUri:aR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(a){switch(a){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function iR(a){const e=Wl(Jl(a)).link,t=e?Wl(Jl(e)).deep_link_id:null,s=Wl(Jl(a)).deep_link_id;return(s?Wl(Jl(s)).link:null)||s||t||e||a}class kg{constructor(e){const t=Wl(Jl(e)),s=t.apiKey??null,o=t.oobCode??null,l=sR(t.mode??null);Qe(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=iR(e);try{return new kg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(){this.providerId=qo.PROVIDER_ID}static credential(e,t){return gc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=kg.parseLink(t);return Qe(s,"argument-error"),gc._fromEmailAndCode(e,s.code,s.tenantId)}}qo.PROVIDER_ID="password";qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends b_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends jc{constructor(){super("facebook.com")}static credential(e){return Ei._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";ws.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends jc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ei._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return As.credential(t,s)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends jc{constructor(){super("github.com")}static credential(e){return Ei._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends jc{constructor(){super("twitter.com")}static credential(e,t){return Ei._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ns.credential(t,s)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(a,e){return Dc(a,"POST","/v1/accounts:signUp",Gs(a,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Br._fromIdTokenResponse(e,s,o),h=ix(s);return new ki({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ix(s);return new ki({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ix(a){return a.providerId?a.providerId:"phoneNumber"in a?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Ja{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new jd(e,t,s,o)}}function __(a,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(a):t._getIdTokenResponse(a)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(a,l,e,s):l})}async function lR(a,e,t=!1){const s=await mc(a,e._linkToIdToken(a.auth,await a.getIdToken()),t);return ki._forOperation(a,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(a,e,t=!1){const{auth:s}=a;if(Dr(s.app))return Promise.reject($a(s));const o="reauthenticate";try{const l=await mc(a,__(s,o,e,a),t);Qe(l.idToken,s,"internal-error");const h=_g(l.idToken);Qe(h,s,"internal-error");const{sub:g}=h;return Qe(a.uid===g,s,"user-mismatch"),ki._forOperation(a,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Fr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T_(a,e,t=!1){if(Dr(a.app))return Promise.reject($a(a));const s="signIn",o=await __(a,s,e),l=await ki._fromIdTokenResponse(a,s,o);return t||await a._updateCurrentUser(l.user),l}async function uR(a,e){return T_(Ri(a),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E_(a){const e=Ri(a);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dR(a,e,t){if(Dr(a.app))return Promise.reject($a(a));const s=Ri(a),h=await Bm(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&E_(a),p}),g=await ki._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(g.user),g}function hR(a,e,t){return Dr(a.app)?Promise.reject($a(a)):uR(nr(a),qo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&E_(a),s})}function fR(a,e,t,s){return nr(a).onIdTokenChanged(e,t,s)}function mR(a,e,t){return nr(a).beforeAuthStateChanged(e,t)}function gR(a,e,t,s){return nr(a).onAuthStateChanged(e,t,s)}function pR(a){return nr(a).signOut()}const Md="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Md,"1"),this.storage.removeItem(Md),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR=1e3,vR=10;class S_ extends k_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);OA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,vR):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},yR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}S_.type="LOCAL";const xR=S_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_ extends k_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}w_.type="SESSION";const A_=w_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(a){return Promise.all(a.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Wd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const g=Array.from(h).map(async y=>y(t.origin,l)),p=await bR(g);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(a="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return a+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((g,p)=>{const y=Sg("",20);o.port1.start();const x=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const w=T;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),g(w.data.response);break;default:clearTimeout(x),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function da(){return window}function TR(a){da().location.href=a}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(){return typeof da().WorkerGlobalScope<"u"&&typeof da().importScripts=="function"}async function ER(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kR(){return navigator?.serviceWorker?.controller||null}function SR(){return R_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N_="firebaseLocalStorageDb",wR=1,Od="firebaseLocalStorage",C_="fbase_key";class Mc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jd(a,e){return a.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function AR(){const a=indexedDB.deleteDatabase(N_);return new Mc(a).toPromise()}function Hm(){const a=indexedDB.open(N_,wR);return new Promise((e,t)=>{a.addEventListener("error",()=>{t(a.error)}),a.addEventListener("upgradeneeded",()=>{const s=a.result;try{s.createObjectStore(Od,{keyPath:C_})}catch(o){t(o)}}),a.addEventListener("success",async()=>{const s=a.result;s.objectStoreNames.contains(Od)?e(s):(s.close(),await AR(),e(await Hm()))})})}async function ox(a,e,t){const s=Jd(a,!0).put({[C_]:e,value:t});return new Mc(s).toPromise()}async function RR(a,e){const t=Jd(a,!1).get(e),s=await new Mc(t).toPromise();return s===void 0?null:s.value}function lx(a,e){const t=Jd(a,!0).delete(e);return new Mc(t).toPromise()}const NR=800,CR=3;class I_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>CR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return R_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wd._getInstance(SR()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await ER(),!this.activeServiceWorker)return;this.sender=new _R(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hm();return await ox(e,Md,"1"),await lx(e,Md),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>ox(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>RR(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>lx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Jd(o,!1).getAll();return new Mc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I_.type="LOCAL";const IR=I_;new Ic(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(a,e){return e?Fa(e):(Qe(a._popupRedirectResolver,a,"argument-error"),a._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends Eg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,t){return No(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jR(a){return T_(a.auth,new wg(a),a.bypassAuthState)}function MR(a){const{auth:e,user:t}=a;return Qe(t,e,"internal-error"),cR(t,new wg(a),a.bypassAuthState)}async function OR(a){const{auth:e,user:t}=a;return Qe(t,e,"internal-error"),lR(t,new wg(a),a.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jR;case"linkViaPopup":case"linkViaRedirect":return OR;case"reauthViaPopup":case"reauthViaRedirect":return MR;default:Fr(this.auth,"internal-error")}}resolve(e){Xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR=new Ic(2e3,1e4);class wo extends D_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,wo.currentPopupAction&&wo.currentPopupAction.cancel(),wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qe(e,this.auth,"internal-error"),e}async onExecution(){Xa(this.filter.length===1,"Popup operations only handle one event");const e=Sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ua(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ua(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ua(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PR.get())};e()}}wo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="pendingRedirect",bd=new Map;class zR extends D_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const s=await LR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function LR(a,e){const t=HR(e),s=BR(a);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function UR(a,e){bd.set(a._key(),e)}function BR(a){return Fa(a._redirectPersistence)}function HR(a){return xd(VR,a.config.apiKey,a.name)}async function GR(a,e,t=!1){if(Dr(a.app))return Promise.reject($a(a));const s=Ri(a),o=DR(s,e),h=await new zR(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=600*1e3;class qR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$R(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!j_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(ua(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FR&&this.cachedEventUids.clear(),this.cachedEventUids.has(cx(e))}saveEventToCache(e){this.cachedEventUids.add(cx(e)),this.lastProcessedEventTime=Date.now()}}function cx(a){return[a.type,a.eventId,a.sessionId,a.tenantId].filter(e=>e).join("-")}function j_({type:a,error:e}){return a==="unknown"&&e?.code==="auth/no-auth-event"}function $R(a){switch(a.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j_(a);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KR(a,e={}){return Fs(a,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QR=/^https?/;async function XR(a){if(a.config.emulator)return;const{authorizedDomains:e}=await KR(a);for(const t of e)try{if(ZR(t))return}catch{}Fr(a,"unauthorized-domain")}function ZR(a){const e=Lm(),{protocol:t,hostname:s}=new URL(e);if(a.startsWith("chrome-extension://")){const h=new URL(a);return h.hostname===""&&s===""?t==="chrome-extension:"&&a.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!QR.test(t))return!1;if(YR.test(a))return s===a;const o=a.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new Ic(3e4,6e4);function ux(){const a=da().___jsl;if(a?.H){for(const e of Object.keys(a.H))if(a.H[e].r=a.H[e].r||[],a.H[e].L=a.H[e].L||[],a.H[e].r=[...a.H[e].L],a.CP)for(let t=0;t<a.CP.length;t++)a.CP[t]=null}}function JR(a){return new Promise((e,t)=>{function s(){ux(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ux(),t(ua(a,"network-request-failed"))},timeout:WR.get()})}if(da().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(da().gapi?.load)s();else{const o=FA("iframefcb");return da()[o]=()=>{gapi.load?s():t(ua(a,"network-request-failed"))},y_(`${GA()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw _d=null,e})}let _d=null;function eN(a){return _d=_d||JR(a),_d}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new Ic(5e3,15e3),nN="__/auth/iframe",rN="emulator/auth/iframe",aN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},sN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iN(a){const e=a.config;Qe(e.authDomain,a,"auth-domain-config-required");const t=e.emulator?bg(e,rN):`https://${a.config.authDomain}/${nN}`,s={apiKey:e.apiKey,appName:a.name,v:Fo},o=sN.get(a.config.apiHost);o&&(s.eid=o);const l=a._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Cc(s).slice(1)}`}async function oN(a){const e=await eN(a),t=da().gapi;return Qe(t,a,"internal-error"),e.open({where:document.body,url:iN(a),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:aN,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=ua(a,"network-request-failed"),g=da().setTimeout(()=>{l(h)},tN.get());function p(){da().clearTimeout(g),o(s)}s.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cN=500,uN=600,dN="_blank",hN="http://localhost";class dx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fN(a,e,t,s=cN,o=uN){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const p={...lN,width:s.toString(),height:o.toString(),top:l,left:h},y=Wn().toLowerCase();t&&(g=u_(y)?dN:t),l_(y)&&(e=e||hN,p.scrollbars="yes");const x=Object.entries(p).reduce((w,[M,F])=>`${w}${M}=${F},`,"");if(MA(y)&&g!=="_self")return mN(e||"",g),new dx(null);const T=window.open(e||"",g,x);Qe(T,a,"popup-blocked");try{T.focus()}catch{}return new dx(T)}function mN(a,e){const t=document.createElement("a");t.href=a,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN="__/auth/handler",pN="emulator/auth/handler",yN=encodeURIComponent("fac");async function hx(a,e,t,s,o,l){Qe(a.config.authDomain,a,"auth-domain-config-required"),Qe(a.config.apiKey,a,"invalid-api-key");const h={apiKey:a.config.apiKey,appName:a.name,authType:t,redirectUrl:s,v:Fo,eventId:o};if(e instanceof b_){e.setDefaultLanguage(a.languageCode),h.providerId=e.providerId||"",tw(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,T]of Object.entries({}))h[x]=T}if(e instanceof jc){const x=e.getScopes().filter(T=>T!=="");x.length>0&&(h.scopes=x.join(","))}a.tenantId&&(h.tid=a.tenantId);const g=h;for(const x of Object.keys(g))g[x]===void 0&&delete g[x];const p=await a._getAppCheckToken(),y=p?`#${yN}=${encodeURIComponent(p)}`:"";return`${vN(a)}?${Cc(g).slice(1)}${y}`}function vN({config:a}){return a.emulator?bg(a,pN):`https://${a.authDomain}/${gN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="webStorageSupport";class xN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A_,this._completeRedirectFn=GR,this._overrideRedirectResult=UR}async _openPopup(e,t,s,o){Xa(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await hx(e,t,s,Lm(),o);return fN(e,l,Sg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await hx(e,t,s,Lm(),o);return TR(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Xa(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await oN(e),s=new qR(e);return t.register("authEvent",o=>(Qe(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wm,{type:wm},o=>{const l=o?.[0]?.[wm];l!==void 0&&t(!!l),Fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return g_()||c_()||Tg()}}const bN=xN;var fx="@firebase/auth",mx="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(a){switch(a){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EN(a){Do(new Ti("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=s.options;Qe(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:g,clientPlatform:a,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:p_(a)},y=new UA(s,o,l,p);return XA(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Do(new Ti("auth-internal",e=>{const t=Ri(e.getProvider("auth").getImmediate());return(s=>new _N(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),js(fx,mx,TN(a)),js(fx,mx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=300,SN=$b("authIdTokenMaxAge")||kN;let gx=null;const wN=a=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>SN)return;const o=t?.token;gx!==o&&(gx=o,await fetch(a,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function AN(a=Zb()){const e=vg(a,"auth");if(e.isInitialized())return e.getImmediate();const t=QA(a,{popupRedirectResolver:bN,persistence:[IR,xR,A_]}),s=$b("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=wN(l.toString());mR(t,h,()=>h(t.currentUser)),fR(t,g=>h(g))}}const o=zS("auth");return o&&ZA(t,`http://${o}`),t}function RN(){return document.getElementsByTagName("head")?.[0]??document}BA({loadJS(a){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",a),s.onload=e,s.onerror=o=>{const l=ua("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",RN().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EN("Browser");var NN="firebase",CN="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */js(NN,CN,"app");var px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ms,M_;(function(){var a;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function N(){}N.prototype=A.prototype,R.D=A.prototype,R.prototype=new N,R.prototype.constructor=R,R.C=function(j,O,V){for(var C=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)C[lt-2]=arguments[lt];return A.prototype[O].apply(j,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(R,A,N){N||(N=0);var j=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)j[O]=A.charCodeAt(N++)|A.charCodeAt(N++)<<8|A.charCodeAt(N++)<<16|A.charCodeAt(N++)<<24;else for(O=0;16>O;++O)j[O]=A[N++]|A[N++]<<8|A[N++]<<16|A[N++]<<24;A=R.g[0],N=R.g[1],O=R.g[2];var V=R.g[3],C=A+(V^N&(O^V))+j[0]+3614090360&4294967295;A=N+(C<<7&4294967295|C>>>25),C=V+(O^A&(N^O))+j[1]+3905402710&4294967295,V=A+(C<<12&4294967295|C>>>20),C=O+(N^V&(A^N))+j[2]+606105819&4294967295,O=V+(C<<17&4294967295|C>>>15),C=N+(A^O&(V^A))+j[3]+3250441966&4294967295,N=O+(C<<22&4294967295|C>>>10),C=A+(V^N&(O^V))+j[4]+4118548399&4294967295,A=N+(C<<7&4294967295|C>>>25),C=V+(O^A&(N^O))+j[5]+1200080426&4294967295,V=A+(C<<12&4294967295|C>>>20),C=O+(N^V&(A^N))+j[6]+2821735955&4294967295,O=V+(C<<17&4294967295|C>>>15),C=N+(A^O&(V^A))+j[7]+4249261313&4294967295,N=O+(C<<22&4294967295|C>>>10),C=A+(V^N&(O^V))+j[8]+1770035416&4294967295,A=N+(C<<7&4294967295|C>>>25),C=V+(O^A&(N^O))+j[9]+2336552879&4294967295,V=A+(C<<12&4294967295|C>>>20),C=O+(N^V&(A^N))+j[10]+4294925233&4294967295,O=V+(C<<17&4294967295|C>>>15),C=N+(A^O&(V^A))+j[11]+2304563134&4294967295,N=O+(C<<22&4294967295|C>>>10),C=A+(V^N&(O^V))+j[12]+1804603682&4294967295,A=N+(C<<7&4294967295|C>>>25),C=V+(O^A&(N^O))+j[13]+4254626195&4294967295,V=A+(C<<12&4294967295|C>>>20),C=O+(N^V&(A^N))+j[14]+2792965006&4294967295,O=V+(C<<17&4294967295|C>>>15),C=N+(A^O&(V^A))+j[15]+1236535329&4294967295,N=O+(C<<22&4294967295|C>>>10),C=A+(O^V&(N^O))+j[1]+4129170786&4294967295,A=N+(C<<5&4294967295|C>>>27),C=V+(N^O&(A^N))+j[6]+3225465664&4294967295,V=A+(C<<9&4294967295|C>>>23),C=O+(A^N&(V^A))+j[11]+643717713&4294967295,O=V+(C<<14&4294967295|C>>>18),C=N+(V^A&(O^V))+j[0]+3921069994&4294967295,N=O+(C<<20&4294967295|C>>>12),C=A+(O^V&(N^O))+j[5]+3593408605&4294967295,A=N+(C<<5&4294967295|C>>>27),C=V+(N^O&(A^N))+j[10]+38016083&4294967295,V=A+(C<<9&4294967295|C>>>23),C=O+(A^N&(V^A))+j[15]+3634488961&4294967295,O=V+(C<<14&4294967295|C>>>18),C=N+(V^A&(O^V))+j[4]+3889429448&4294967295,N=O+(C<<20&4294967295|C>>>12),C=A+(O^V&(N^O))+j[9]+568446438&4294967295,A=N+(C<<5&4294967295|C>>>27),C=V+(N^O&(A^N))+j[14]+3275163606&4294967295,V=A+(C<<9&4294967295|C>>>23),C=O+(A^N&(V^A))+j[3]+4107603335&4294967295,O=V+(C<<14&4294967295|C>>>18),C=N+(V^A&(O^V))+j[8]+1163531501&4294967295,N=O+(C<<20&4294967295|C>>>12),C=A+(O^V&(N^O))+j[13]+2850285829&4294967295,A=N+(C<<5&4294967295|C>>>27),C=V+(N^O&(A^N))+j[2]+4243563512&4294967295,V=A+(C<<9&4294967295|C>>>23),C=O+(A^N&(V^A))+j[7]+1735328473&4294967295,O=V+(C<<14&4294967295|C>>>18),C=N+(V^A&(O^V))+j[12]+2368359562&4294967295,N=O+(C<<20&4294967295|C>>>12),C=A+(N^O^V)+j[5]+4294588738&4294967295,A=N+(C<<4&4294967295|C>>>28),C=V+(A^N^O)+j[8]+2272392833&4294967295,V=A+(C<<11&4294967295|C>>>21),C=O+(V^A^N)+j[11]+1839030562&4294967295,O=V+(C<<16&4294967295|C>>>16),C=N+(O^V^A)+j[14]+4259657740&4294967295,N=O+(C<<23&4294967295|C>>>9),C=A+(N^O^V)+j[1]+2763975236&4294967295,A=N+(C<<4&4294967295|C>>>28),C=V+(A^N^O)+j[4]+1272893353&4294967295,V=A+(C<<11&4294967295|C>>>21),C=O+(V^A^N)+j[7]+4139469664&4294967295,O=V+(C<<16&4294967295|C>>>16),C=N+(O^V^A)+j[10]+3200236656&4294967295,N=O+(C<<23&4294967295|C>>>9),C=A+(N^O^V)+j[13]+681279174&4294967295,A=N+(C<<4&4294967295|C>>>28),C=V+(A^N^O)+j[0]+3936430074&4294967295,V=A+(C<<11&4294967295|C>>>21),C=O+(V^A^N)+j[3]+3572445317&4294967295,O=V+(C<<16&4294967295|C>>>16),C=N+(O^V^A)+j[6]+76029189&4294967295,N=O+(C<<23&4294967295|C>>>9),C=A+(N^O^V)+j[9]+3654602809&4294967295,A=N+(C<<4&4294967295|C>>>28),C=V+(A^N^O)+j[12]+3873151461&4294967295,V=A+(C<<11&4294967295|C>>>21),C=O+(V^A^N)+j[15]+530742520&4294967295,O=V+(C<<16&4294967295|C>>>16),C=N+(O^V^A)+j[2]+3299628645&4294967295,N=O+(C<<23&4294967295|C>>>9),C=A+(O^(N|~V))+j[0]+4096336452&4294967295,A=N+(C<<6&4294967295|C>>>26),C=V+(N^(A|~O))+j[7]+1126891415&4294967295,V=A+(C<<10&4294967295|C>>>22),C=O+(A^(V|~N))+j[14]+2878612391&4294967295,O=V+(C<<15&4294967295|C>>>17),C=N+(V^(O|~A))+j[5]+4237533241&4294967295,N=O+(C<<21&4294967295|C>>>11),C=A+(O^(N|~V))+j[12]+1700485571&4294967295,A=N+(C<<6&4294967295|C>>>26),C=V+(N^(A|~O))+j[3]+2399980690&4294967295,V=A+(C<<10&4294967295|C>>>22),C=O+(A^(V|~N))+j[10]+4293915773&4294967295,O=V+(C<<15&4294967295|C>>>17),C=N+(V^(O|~A))+j[1]+2240044497&4294967295,N=O+(C<<21&4294967295|C>>>11),C=A+(O^(N|~V))+j[8]+1873313359&4294967295,A=N+(C<<6&4294967295|C>>>26),C=V+(N^(A|~O))+j[15]+4264355552&4294967295,V=A+(C<<10&4294967295|C>>>22),C=O+(A^(V|~N))+j[6]+2734768916&4294967295,O=V+(C<<15&4294967295|C>>>17),C=N+(V^(O|~A))+j[13]+1309151649&4294967295,N=O+(C<<21&4294967295|C>>>11),C=A+(O^(N|~V))+j[4]+4149444226&4294967295,A=N+(C<<6&4294967295|C>>>26),C=V+(N^(A|~O))+j[11]+3174756917&4294967295,V=A+(C<<10&4294967295|C>>>22),C=O+(A^(V|~N))+j[2]+718787259&4294967295,O=V+(C<<15&4294967295|C>>>17),C=N+(V^(O|~A))+j[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+V&4294967295}s.prototype.u=function(R,A){A===void 0&&(A=R.length);for(var N=A-this.blockSize,j=this.B,O=this.h,V=0;V<A;){if(O==0)for(;V<=N;)o(this,R,V),V+=this.blockSize;if(typeof R=="string"){for(;V<A;)if(j[O++]=R.charCodeAt(V++),O==this.blockSize){o(this,j),O=0;break}}else for(;V<A;)if(j[O++]=R[V++],O==this.blockSize){o(this,j),O=0;break}}this.h=O,this.o+=A},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;var N=8*this.o;for(A=R.length-8;A<R.length;++A)R[A]=N&255,N/=256;for(this.u(R),R=Array(16),A=N=0;4>A;++A)for(var j=0;32>j;j+=8)R[N++]=this.g[A]>>>j&255;return R};function l(R,A){var N=g;return Object.prototype.hasOwnProperty.call(N,R)?N[R]:N[R]=A(R)}function h(R,A){this.h=A;for(var N=[],j=!0,O=R.length-1;0<=O;O--){var V=R[O]|0;j&&V==A||(N[O]=V,j=!1)}this.g=N}var g={};function p(R){return-128<=R&&128>R?l(R,function(A){return new h([A|0],0>A?-1:0)}):new h([R|0],0>R?-1:0)}function y(R){if(isNaN(R)||!isFinite(R))return T;if(0>R)return U(y(-R));for(var A=[],N=1,j=0;R>=N;j++)A[j]=R/N|0,N*=4294967296;return new h(A,0)}function x(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return U(x(R.substring(1),A));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=y(Math.pow(A,8)),j=T,O=0;O<R.length;O+=8){var V=Math.min(8,R.length-O),C=parseInt(R.substring(O,O+V),A);8>V?(V=y(Math.pow(A,V)),j=j.j(V).add(y(C))):(j=j.j(N),j=j.add(y(C)))}return j}var T=p(0),w=p(1),M=p(16777216);a=h.prototype,a.m=function(){if(B(this))return-U(this).m();for(var R=0,A=1,N=0;N<this.g.length;N++){var j=this.i(N);R+=(0<=j?j:4294967296+j)*A,A*=4294967296}return R},a.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(F(this))return"0";if(B(this))return"-"+U(this).toString(R);for(var A=y(Math.pow(R,6)),N=this,j="";;){var O=Se(N,A).g;N=K(N,O.j(A));var V=((0<N.g.length?N.g[0]:N.h)>>>0).toString(R);if(N=O,F(N))return V+j;for(;6>V.length;)V="0"+V;j=V+j}},a.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function F(R){if(R.h!=0)return!1;for(var A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function B(R){return R.h==-1}a.l=function(R){return R=K(this,R),B(R)?-1:F(R)?0:1};function U(R){for(var A=R.g.length,N=[],j=0;j<A;j++)N[j]=~R.g[j];return new h(N,~R.h).add(w)}a.abs=function(){return B(this)?U(this):this},a.add=function(R){for(var A=Math.max(this.g.length,R.g.length),N=[],j=0,O=0;O<=A;O++){var V=j+(this.i(O)&65535)+(R.i(O)&65535),C=(V>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);j=C>>>16,V&=65535,C&=65535,N[O]=C<<16|V}return new h(N,N[N.length-1]&-2147483648?-1:0)};function K(R,A){return R.add(U(A))}a.j=function(R){if(F(this)||F(R))return T;if(B(this))return B(R)?U(this).j(U(R)):U(U(this).j(R));if(B(R))return U(this.j(U(R)));if(0>this.l(M)&&0>R.l(M))return y(this.m()*R.m());for(var A=this.g.length+R.g.length,N=[],j=0;j<2*A;j++)N[j]=0;for(j=0;j<this.g.length;j++)for(var O=0;O<R.g.length;O++){var V=this.i(j)>>>16,C=this.i(j)&65535,lt=R.i(O)>>>16,de=R.i(O)&65535;N[2*j+2*O]+=C*de,ee(N,2*j+2*O),N[2*j+2*O+1]+=V*de,ee(N,2*j+2*O+1),N[2*j+2*O+1]+=C*lt,ee(N,2*j+2*O+1),N[2*j+2*O+2]+=V*lt,ee(N,2*j+2*O+2)}for(j=0;j<A;j++)N[j]=N[2*j+1]<<16|N[2*j];for(j=A;j<2*A;j++)N[j]=0;return new h(N,0)};function ee(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function ne(R,A){this.g=R,this.h=A}function Se(R,A){if(F(A))throw Error("division by zero");if(F(R))return new ne(T,T);if(B(R))return A=Se(U(R),A),new ne(U(A.g),U(A.h));if(B(A))return A=Se(R,U(A)),new ne(U(A.g),A.h);if(30<R.g.length){if(B(R)||B(A))throw Error("slowDivide_ only works with positive integers.");for(var N=w,j=A;0>=j.l(R);)N=Te(N),j=Te(j);var O=xe(N,1),V=xe(j,1);for(j=xe(j,2),N=xe(N,2);!F(j);){var C=V.add(j);0>=C.l(R)&&(O=O.add(N),V=C),j=xe(j,1),N=xe(N,1)}return A=K(R,O.j(A)),new ne(O,A)}for(O=T;0<=R.l(A);){for(N=Math.max(1,Math.floor(R.m()/A.m())),j=Math.ceil(Math.log(N)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),V=y(N),C=V.j(A);B(C)||0<C.l(R);)N-=j,V=y(N),C=V.j(A);F(V)&&(V=w),O=O.add(V),R=K(R,C)}return new ne(O,R)}a.A=function(R){return Se(this,R).h},a.and=function(R){for(var A=Math.max(this.g.length,R.g.length),N=[],j=0;j<A;j++)N[j]=this.i(j)&R.i(j);return new h(N,this.h&R.h)},a.or=function(R){for(var A=Math.max(this.g.length,R.g.length),N=[],j=0;j<A;j++)N[j]=this.i(j)|R.i(j);return new h(N,this.h|R.h)},a.xor=function(R){for(var A=Math.max(this.g.length,R.g.length),N=[],j=0;j<A;j++)N[j]=this.i(j)^R.i(j);return new h(N,this.h^R.h)};function Te(R){for(var A=R.g.length+1,N=[],j=0;j<A;j++)N[j]=R.i(j)<<1|R.i(j-1)>>>31;return new h(N,R.h)}function xe(R,A){var N=A>>5;A%=32;for(var j=R.g.length-N,O=[],V=0;V<j;V++)O[V]=0<A?R.i(V+N)>>>A|R.i(V+N+1)<<32-A:R.i(V+N);return new h(O,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,M_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=x,Ms=h}).apply(typeof px<"u"?px:typeof self<"u"?self:typeof window<"u"?window:{});var ud=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var O_,ec,P_,Td,Gm,V_,z_,L_;(function(){var a,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,b){return d==Array.prototype||d==Object.prototype||(d[v]=b.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ud=="object"&&ud];for(var v=0;v<d.length;++v){var b=d[v];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function o(d,v){if(v)e:{var b=s;d=d.split(".");for(var S=0;S<d.length-1;S++){var H=d[S];if(!(H in b))break e;b=b[H]}d=d[d.length-1],S=b[d],v=v(S),v!=S&&v!=null&&e(b,d,{configurable:!0,writable:!0,value:v})}}function l(d,v){d instanceof String&&(d+="");var b=0,S=!1,H={next:function(){if(!S&&b<d.length){var J=b++;return{value:v(J,d[J]),done:!1}}return S=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(d){return d||function(){return l(this,function(v,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},g=this||self;function p(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function y(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function x(d,v,b){return d.call.apply(d.bind,arguments)}function T(d,v,b){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,S),d.apply(v,H)}}return function(){return d.apply(v,arguments)}}function w(d,v,b){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:T,w.apply(null,arguments)}function M(d,v){var b=Array.prototype.slice.call(arguments,1);return function(){var S=b.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function F(d,v){function b(){}b.prototype=v.prototype,d.aa=v.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(S,H,J){for(var pe=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)pe[Et-2]=arguments[Et];return v.prototype[H].apply(S,pe)}}function B(d){const v=d.length;if(0<v){const b=Array(v);for(let S=0;S<v;S++)b[S]=d[S];return b}return[]}function U(d,v){for(let b=1;b<arguments.length;b++){const S=arguments[b];if(p(S)){const H=d.length||0,J=S.length||0;d.length=H+J;for(let pe=0;pe<J;pe++)d[H+pe]=S[pe]}else d.push(S)}}class K{constructor(v,b){this.i=v,this.j=b,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function ee(d){return/^[\s\xa0]*$/.test(d)}function ne(){var d=g.navigator;return d&&(d=d.userAgent)?d:""}function Se(d){return Se[" "](d),d}Se[" "]=function(){};var Te=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function xe(d,v,b){for(const S in d)v.call(b,d[S],S,d)}function R(d,v){for(const b in d)v.call(void 0,d[b],b,d)}function A(d){const v={};for(const b in d)v[b]=d[b];return v}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(d,v){let b,S;for(let H=1;H<arguments.length;H++){S=arguments[H];for(b in S)d[b]=S[b];for(let J=0;J<N.length;J++)b=N[J],Object.prototype.hasOwnProperty.call(S,b)&&(d[b]=S[b])}}function O(d){var v=1;d=d.split(":");const b=[];for(;0<v&&d.length;)b.push(d.shift()),v--;return d.length&&b.push(d.join(":")),b}function V(d){g.setTimeout(()=>{throw d},0)}function C(){var d=Me;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class lt{constructor(){this.h=this.g=null}add(v,b){const S=de.get();S.set(v,b),this.h?this.h.next=S:this.g=S,this.h=S}}var de=new K(()=>new X,d=>d.reset());class X{constructor(){this.next=this.g=this.h=null}set(v,b){this.h=v,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let he,me=!1,Me=new lt,D=()=>{const d=g.Promise.resolve(void 0);he=()=>{d.then(z)}};var z=()=>{for(var d;d=C();){try{d.h.call(d.g)}catch(b){V(b)}var v=de;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}me=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Q(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}Q.prototype.h=function(){this.defaultPrevented=!0};var ce=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};g.addEventListener("test",b,v),g.removeEventListener("test",b,v)}catch{}return d})();function be(d,v){if(Q.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(Te){e:{try{Se(v.nodeName);var H=!0;break e}catch{}H=!1}H||(v=null)}}else b=="mouseover"?v=d.fromElement:b=="mouseout"&&(v=d.toElement);this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ae[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&be.aa.h.call(this)}}F(be,Q);var Ae={2:"touch",3:"pen",4:"mouse"};be.prototype.h=function(){be.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var fe="closure_listenable_"+(1e6*Math.random()|0),ue=0;function De(d,v,b,S,H){this.listener=d,this.proxy=null,this.src=v,this.type=b,this.capture=!!S,this.ha=H,this.key=++ue,this.da=this.fa=!1}function ye(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function oe(d){this.src=d,this.g={},this.h=0}oe.prototype.add=function(d,v,b,S,H){var J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);var pe=it(d,v,S,H);return-1<pe?(v=d[pe],b||(v.fa=!1)):(v=new De(v,this.src,J,!!S,H),v.fa=b,d.push(v)),v};function He(d,v){var b=v.type;if(b in d.g){var S=d.g[b],H=Array.prototype.indexOf.call(S,v,void 0),J;(J=0<=H)&&Array.prototype.splice.call(S,H,1),J&&(ye(v),d.g[b].length==0&&(delete d.g[b],d.h--))}}function it(d,v,b,S){for(var H=0;H<d.length;++H){var J=d[H];if(!J.da&&J.listener==v&&J.capture==!!b&&J.ha==S)return H}return-1}var Le="closure_lm_"+(1e6*Math.random()|0),ft={};function et(d,v,b,S,H){if(Array.isArray(v)){for(var J=0;J<v.length;J++)et(d,v[J],b,S,H);return null}return b=Pn(b),d&&d[fe]?d.K(v,b,y(S)?!!S.capture:!1,H):Ye(d,v,b,!1,S,H)}function Ye(d,v,b,S,H,J){if(!v)throw Error("Invalid event type");var pe=y(H)?!!H.capture:!!H,Et=dn(d);if(Et||(d[Le]=Et=new oe(d)),b=Et.add(v,b,S,pe,J),b.proxy)return b;if(S=pt(),b.proxy=S,S.src=d,S.listener=b,d.addEventListener)ce||(H=pe),H===void 0&&(H=!1),d.addEventListener(v.toString(),S,H);else if(d.attachEvent)d.attachEvent($t(v.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return b}function pt(){function d(b){return v.call(d.src,d.listener,b)}const v=rn;return d}function tt(d,v,b,S,H){if(Array.isArray(v))for(var J=0;J<v.length;J++)tt(d,v[J],b,S,H);else S=y(S)?!!S.capture:!!S,b=Pn(b),d&&d[fe]?(d=d.i,v=String(v).toString(),v in d.g&&(J=d.g[v],b=it(J,b,S,H),-1<b&&(ye(J[b]),Array.prototype.splice.call(J,b,1),J.length==0&&(delete d.g[v],d.h--)))):d&&(d=dn(d))&&(v=d.g[v.toString()],d=-1,v&&(d=it(v,b,S,H)),(b=-1<d?v[d]:null)&&zt(b))}function zt(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[fe])He(v.i,d);else{var b=d.type,S=d.proxy;v.removeEventListener?v.removeEventListener(b,S,d.capture):v.detachEvent?v.detachEvent($t(b),S):v.addListener&&v.removeListener&&v.removeListener(S),(b=dn(v))?(He(b,d),b.h==0&&(b.src=null,v[Le]=null)):ye(d)}}}function $t(d){return d in ft?ft[d]:ft[d]="on"+d}function rn(d,v){if(d.da)d=!0;else{v=new be(v,this);var b=d.listener,S=d.ha||d.src;d.fa&&zt(d),d=b.call(S,v)}return d}function dn(d){return d=d[Le],d instanceof oe?d:null}var An="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pn(d){return typeof d=="function"?d:(d[An]||(d[An]=function(v){return d.handleEvent(v)}),d[An])}function st(){W.call(this),this.i=new oe(this),this.M=this,this.F=null}F(st,W),st.prototype[fe]=!0,st.prototype.removeEventListener=function(d,v,b,S){tt(this,d,v,b,S)};function ut(d,v){var b,S=d.F;if(S)for(b=[];S;S=S.F)b.push(S);if(d=d.M,S=v.type||v,typeof v=="string")v=new Q(v,d);else if(v instanceof Q)v.target=v.target||d;else{var H=v;v=new Q(S,d),j(v,H)}if(H=!0,b)for(var J=b.length-1;0<=J;J--){var pe=v.g=b[J];H=Kt(pe,S,!0,v)&&H}if(pe=v.g=d,H=Kt(pe,S,!0,v)&&H,H=Kt(pe,S,!1,v)&&H,b)for(J=0;J<b.length;J++)pe=v.g=b[J],H=Kt(pe,S,!1,v)&&H}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var b=d.g[v],S=0;S<b.length;S++)ye(b[S]);delete d.g[v],d.h--}}this.F=null},st.prototype.K=function(d,v,b,S){return this.i.add(String(d),v,!1,b,S)},st.prototype.L=function(d,v,b,S){return this.i.add(String(d),v,!0,b,S)};function Kt(d,v,b,S){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var H=!0,J=0;J<v.length;++J){var pe=v[J];if(pe&&!pe.da&&pe.capture==b){var Et=pe.listener,bn=pe.ha||pe.src;pe.fa&&He(d.i,pe),H=Et.call(bn,S)!==!1&&H}}return H&&!S.defaultPrevented}function Xt(d,v,b){if(typeof d=="function")b&&(d=w(d,b));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:g.setTimeout(d,v||0)}function Kr(d){d.g=Xt(()=>{d.g=null,d.i&&(d.i=!1,Kr(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Or extends W{constructor(v,b){super(),this.m=v,this.l=b,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Kr(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(d){W.call(this),this.h=d,this.g={}}F(dr,W);var Vn=[];function rr(d){xe(d.g,function(v,b){this.g.hasOwnProperty(b)&&zt(v)},d),d.g={}}dr.prototype.N=function(){dr.aa.N.call(this),rr(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rn=g.JSON.stringify,Ue=g.JSON.parse,We=class{stringify(d){return g.JSON.stringify(d,void 0)}parse(d){return g.JSON.parse(d,void 0)}};function _t(){}_t.prototype.h=null;function It(d){return d.h||(d.h=d.i())}function Zt(){}var Lt={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function le(){Q.call(this,"d")}F(le,Q);function _e(){Q.call(this,"c")}F(_e,Q);var qe={},Je=null;function Z(){return Je=Je||new st}qe.La="serverreachability";function Ee(d){Q.call(this,qe.La,d)}F(Ee,Q);function ke(d){const v=Z();ut(v,new Ee(v))}qe.STAT_EVENT="statevent";function Oe(d,v){Q.call(this,qe.STAT_EVENT,d),this.stat=v}F(Oe,Q);function Ce(d){const v=Z();ut(v,new Oe(v,d))}qe.Ma="timingevent";function ve(d,v){Q.call(this,qe.Ma,d),this.size=v}F(ve,Q);function Ne(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){d()},v)}function Pe(){this.g=!0}Pe.prototype.xa=function(){this.g=!1};function Re(d,v,b,S,H,J){d.info(function(){if(d.g)if(J)for(var pe="",Et=J.split("&"),bn=0;bn<Et.length;bn++){var kt=Et[bn].split("=");if(1<kt.length){var In=kt[0];kt=kt[1];var _n=In.split("_");pe=2<=_n.length&&_n[1]=="type"?pe+(In+"="+kt+"&"):pe+(In+"=redacted&")}}else pe=null;else pe=J;return"XMLHTTP REQ ("+S+") [attempt "+H+"]: "+v+`
`+b+`
`+pe})}function Ge(d,v,b,S,H,J,pe){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+H+"]: "+v+`
`+b+`
`+J+" "+pe})}function Tt(d,v,b,S){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Wt(d,b)+(S?" "+S:"")})}function qt(d,v){d.info(function(){return"TIMEOUT: "+v})}Pe.prototype.info=function(){};function Wt(d,v){if(!d.g)return v;if(!v)return null;try{var b=JSON.parse(v);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var S=b[d];if(!(2>S.length)){var H=S[1];if(Array.isArray(H)&&!(1>H.length)){var J=H[0];if(J!="noop"&&J!="stop"&&J!="close")for(var pe=1;pe<H.length;pe++)H[pe]=""}}}}return Rn(b)}catch{return v}}var an={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xn;function Nn(){}F(Nn,_t),Nn.prototype.g=function(){return new XMLHttpRequest},Nn.prototype.i=function(){return{}},xn=new Nn;function on(d,v,b,S){this.j=d,this.i=v,this.l=b,this.R=S||1,this.U=new dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ut}function Ut(){this.i=null,this.g="",this.h=!1}var Fe={},ge={};function rt(d,v,b){d.L=1,d.v=Ys(hr(v)),d.m=b,d.P=!0,$n(d,null)}function $n(d,v){d.F=Date.now(),Qr(d),d.A=hr(d.v);var b=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),nl(b.i,"t",S),d.C=0,b=d.j.J,d.h=new Ut,d.g=au(d.j,b?v:null,!d.m),0<d.O&&(d.M=new Or(w(d.Y,d,d.g),d.O)),v=d.U,b=d.g,S=d.ca;var H="readystatechange";Array.isArray(H)||(H&&(Vn[0]=H.toString()),H=Vn);for(var J=0;J<H.length;J++){var pe=et(b,H[J],S||v.handleEvent,!1,v.h||v);if(!pe)break;v.g[pe.key]=pe}v=d.H?A(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),ke(),Re(d.i,d.u,d.A,d.l,d.R,d.m)}on.prototype.ca=function(d){d=d.target;const v=this.M;v&&Er(d)==3?v.j():this.Y(d)},on.prototype.Y=function(d){try{if(d==this.g)e:{const _n=Er(this.g);var v=this.g.Ba();const Na=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||Xc(this.g)))){this.J||_n!=4||v==7||(v==8||0>=Na?ke(3):ke(2)),es(this);var b=this.g.Z();this.X=b;t:if(Yr(this)){var S=Xc(this.g);d="";var H=S.length,J=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){zn(this),Xr(this);var pe="";break t}this.h.i=new g.TextDecoder}for(v=0;v<H;v++)this.h.h=!0,d+=this.h.i.decode(S[v],{stream:!(J&&v==H-1)});S.length=0,this.h.g+=d,this.C=0,pe=this.h.g}else pe=this.g.oa();if(this.o=b==200,Ge(this.i,this.u,this.A,this.l,this.R,_n,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Et,bn=this.g;if((Et=bn.g?bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ee(Et)){var kt=Et;break t}}kt=null}if(b=kt)Tt(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qs(this,b);else{this.o=!1,this.s=3,Ce(12),zn(this),Xr(this);break e}}if(this.P){b=!0;let Ln;for(;!this.J&&this.C<pe.length;)if(Ln=_a(this,pe),Ln==ge){_n==4&&(this.s=4,Ce(14),b=!1),Tt(this.i,this.l,null,"[Incomplete Response]");break}else if(Ln==Fe){this.s=4,Ce(15),Tt(this.i,this.l,pe,"[Invalid Chunk]"),b=!1;break}else Tt(this.i,this.l,Ln,null),qs(this,Ln);if(Yr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||pe.length!=0||this.h.h||(this.s=1,Ce(16),b=!1),this.o=this.o&&b,!b)Tt(this.i,this.l,pe,"[Invalid Chunked Response]"),zn(this),Xr(this);else if(0<pe.length&&!this.W){this.W=!0;var In=this.j;In.g==this&&In.ba&&!In.M&&(In.j.info("Great, no buffering proxy detected. Bytes received: "+pe.length),ni(In),In.M=!0,Ce(11))}}else Tt(this.i,this.l,pe,null),qs(this,pe);_n==4&&zn(this),this.o&&!this.J&&(_n==4?tu(this.j,this):(this.o=!1,Qr(this)))}else xh(this.g),b==400&&0<pe.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),zn(this),Xr(this)}}}catch{}finally{}};function Yr(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function _a(d,v){var b=d.C,S=v.indexOf(`
`,b);return S==-1?ge:(b=Number(v.substring(b,S)),isNaN(b)?Fe:(S+=1,S+b>v.length?ge:(v=v.slice(S,S+b),d.C=S+b,v)))}on.prototype.cancel=function(){this.J=!0,zn(this)};function Qr(d){d.S=Date.now()+d.I,qc(d,d.I)}function qc(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ne(w(d.ba,d),v)}function es(d){d.B&&(g.clearTimeout(d.B),d.B=null)}on.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(qt(this.i,this.A),this.L!=2&&(ke(),Ce(17)),zn(this),this.s=2,Xr(this)):qc(this,this.S-d)};function Xr(d){d.j.G==0||d.J||tu(d.j,d)}function zn(d){es(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,rr(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function qs(d,v){try{var b=d.j;if(b.G!=0&&(b.g==d||Zo(b.h,d))){if(!d.K&&Zo(b.h,d)&&b.G==3){try{var S=b.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var H=S;if(H[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Fi(b),Hi(b);else break e;ol(b),Ce(18)}}else b.za=H[1],0<b.za-b.T&&37500>H[2]&&b.F&&b.v==0&&!b.C&&(b.C=Ne(w(b.Za,b),6e3));if(1>=Mi(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else Ra(b,11)}else if((d.K||b.g==d)&&Fi(b),!ee(v))for(H=b.Da.g.parse(v),v=0;v<H.length;v++){let kt=H[v];if(b.T=kt[0],kt=kt[1],b.G==2)if(kt[0]=="c"){b.K=kt[1],b.ia=kt[2];const In=kt[3];In!=null&&(b.la=In,b.j.info("VER="+b.la));const _n=kt[4];_n!=null&&(b.Aa=_n,b.j.info("SVER="+b.Aa));const Na=kt[5];Na!=null&&typeof Na=="number"&&0<Na&&(S=1.5*Na,b.L=S,b.j.info("backChannelRequestTimeoutMs_="+S)),S=b;const Ln=d.g;if(Ln){const ra=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var J=S.h;J.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(Oi(J,J.h),J.h=null))}if(S.D){const cl=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;cl&&(S.ya=cl,Mt(S.I,S.D,cl))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),S=b;var pe=d;if(S.qa=ru(S,S.J?S.ia:null,S.W),pe.K){Jn(S.h,pe);var Et=pe,bn=S.L;bn&&(Et.I=bn),Et.B&&(es(Et),Qr(Et)),S.g=pe}else Jc(S);0<b.i.length&&Gi(b)}else kt[0]!="stop"&&kt[0]!="close"||Ra(b,7);else b.G==3&&(kt[0]=="stop"||kt[0]=="close"?kt[0]=="stop"?Ra(b,7):sl(b):kt[0]!="noop"&&b.l&&b.l.ta(kt),b.v=0)}}ke(4)}catch{}}var $c=class{constructor(d,v){this.g=d,this.map=v}};function Ta(d){this.l=d||10,g.PerformanceNavigationTiming?(d=g.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ji(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Mi(d){return d.h?1:d.g?d.g.size:0}function Zo(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Oi(d,v){d.g?d.g.add(v):d.h=v}function Jn(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Ta.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Wo(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const b of d.g.values())v=v.concat(b.D);return v}return B(d.i)}function gh(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(p(d)){for(var v=[],b=d.length,S=0;S<b;S++)v.push(d[S]);return v}v=[],b=0;for(S in d)v[b++]=d[S];return v}function Pi(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(p(d)||typeof d=="string"){var v=[];d=d.length;for(var b=0;b<d;b++)v.push(b);return v}v=[],b=0;for(const S in d)v[b++]=S;return v}}}function Jo(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(p(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var b=Pi(d),S=gh(d),H=S.length,J=0;J<H;J++)v.call(void 0,S[J],b&&b[J],d)}var $s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ph(d,v){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var S=d[b].indexOf("="),H=null;if(0<=S){var J=d[b].substring(0,S);H=d[b].substring(S+1)}else J=d[b];v(J,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function hn(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof hn){this.h=d.h,Ks(this,d.j),this.o=d.o,this.g=d.g,ts(this,d.s),this.l=d.l;var v=d.i,b=new ka;b.i=v.i,v.g&&(b.g=new Map(v.g),b.h=v.h),Ea(this,b),this.m=d.m}else d&&(v=String(d).match($s))?(this.h=!1,Ks(this,v[1]||"",!0),this.o=br(v[2]||""),this.g=br(v[3]||"",!0),ts(this,v[4]),this.l=br(v[5]||"",!0),Ea(this,v[6]||"",!0),this.m=br(v[7]||"")):(this.h=!1,this.i=new ka(null,this.h))}hn.prototype.toString=function(){var d=[],v=this.j;v&&d.push(Qs(v,el,!0),":");var b=this.g;return(b||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Qs(v,el,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(Qs(b,b.charAt(0)=="/"?yh:tl,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",Qs(b,Vi)),d.join("")};function hr(d){return new hn(d)}function Ks(d,v,b){d.j=b?br(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function ts(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function Ea(d,v,b){v instanceof ka?(d.i=v,Yc(d.i,d.h)):(b||(v=Qs(v,vh)),d.i=new ka(v,d.h))}function Mt(d,v,b){d.i.set(v,b)}function Ys(d){return Mt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function br(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Qs(d,v,b){return typeof d=="string"?(d=encodeURI(d).replace(v,Kc),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Kc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var el=/[#\/\?@]/g,tl=/[#\?:]/g,yh=/[#\?]/g,vh=/[#\?@]/g,Vi=/#/g;function ka(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function _r(d){d.g||(d.g=new Map,d.h=0,d.i&&ph(d.i,function(v,b){d.add(decodeURIComponent(v.replace(/\+/g," ")),b)}))}a=ka.prototype,a.add=function(d,v){_r(this),this.i=null,d=Zr(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(v),this.h+=1,this};function Sa(d,v){_r(d),v=Zr(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function wa(d,v){return _r(d),v=Zr(d,v),d.g.has(v)}a.forEach=function(d,v){_r(this),this.g.forEach(function(b,S){b.forEach(function(H){d.call(v,H,S,this)},this)},this)},a.na=function(){_r(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),b=[];for(let S=0;S<v.length;S++){const H=d[S];for(let J=0;J<H.length;J++)b.push(v[S])}return b},a.V=function(d){_r(this);let v=[];if(typeof d=="string")wa(this,d)&&(v=v.concat(this.g.get(Zr(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)v=v.concat(d[b])}return v},a.set=function(d,v){return _r(this),this.i=null,d=Zr(this,d),wa(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},a.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function nl(d,v,b){Sa(d,v),0<b.length&&(d.i=null,d.g.set(Zr(d,v),B(b)),d.h+=b.length)}a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var b=0;b<v.length;b++){var S=v[b];const J=encodeURIComponent(String(S)),pe=this.V(S);for(S=0;S<pe.length;S++){var H=J;pe[S]!==""&&(H+="="+encodeURIComponent(String(pe[S]))),d.push(H)}}return this.i=d.join("&")};function Zr(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Yc(d,v){v&&!d.j&&(_r(d),d.i=null,d.g.forEach(function(b,S){var H=S.toLowerCase();S!=H&&(Sa(this,S),nl(this,H,b))},d)),d.j=v}function Xs(d,v){const b=new Pe;if(g.Image){const S=new Image;S.onload=M(Tr,b,"TestLoadImage: loaded",!0,v,S),S.onerror=M(Tr,b,"TestLoadImage: error",!1,v,S),S.onabort=M(Tr,b,"TestLoadImage: abort",!1,v,S),S.ontimeout=M(Tr,b,"TestLoadImage: timeout",!1,v,S),g.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else v(!1)}function Pr(d,v){const b=new Pe,S=new AbortController,H=setTimeout(()=>{S.abort(),Tr(b,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:S.signal}).then(J=>{clearTimeout(H),J.ok?Tr(b,"TestPingServer: ok",!0,v):Tr(b,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),Tr(b,"TestPingServer: error",!1,v)})}function Tr(d,v,b,S,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),S(b)}catch{}}function Zs(){this.g=new We}function Wr(d,v,b){const S=b||"";try{Jo(d,function(H,J){let pe=H;y(H)&&(pe=Rn(H)),v.push(S+J+"="+encodeURIComponent(pe))})}catch(H){throw v.push(S+"type="+encodeURIComponent("_badmap")),H}}function ns(d){this.l=d.Ub||null,this.j=d.eb||!1}F(ns,_t),ns.prototype.g=function(){return new Aa(this.l,this.j)},ns.prototype.i=(function(d){return function(){return d}})({});function Aa(d,v){st.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}F(Aa,st),a=Aa.prototype,a.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,ea(this)},a.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||g).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},a.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function rl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}a.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Jr(this):ea(this),this.readyState==3&&rl(this)}},a.Ra=function(d){this.g&&(this.response=this.responseText=d,Jr(this))},a.Qa=function(d){this.g&&(this.response=d,Jr(this))},a.ga=function(){this.g&&Jr(this)};function Jr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ea(d)}a.setRequestHeader=function(d,v){this.u.append(d,v)},a.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var b=v.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=v.next();return d.join(`\r
`)};function ea(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Aa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function al(d){let v="";return xe(d,function(b,S){v+=S,v+=":",v+=b,v+=`\r
`}),v}function Cn(d,v,b){e:{for(S in b){var S=!1;break e}S=!0}S||(b=al(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):Mt(d,v,b))}function Nt(d){st.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}F(Nt,st);var zi=/^https?$/i,Ws=["POST","PUT"];a=Nt.prototype,a.Ha=function(d){this.J=d},a.ea=function(d,v,b,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xn.g(),this.v=this.o?It(this.o):It(xn),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(J){Qc(this,J);return}if(d=b||"",b=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var H in S)b.set(H,S[H]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const J of S.keys())b.set(J,S.get(J));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(b.keys()).find(J=>J.toLowerCase()=="content-type"),H=g.FormData&&d instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Ws,v,void 0))||S||H||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,pe]of b)this.g.setRequestHeader(J,pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Js(this),this.u=!0,this.g.send(d),this.u=!1}catch(J){Qc(this,J)}};function Qc(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,Li(d),ta(d)}function Li(d){d.A||(d.A=!0,ut(d,"complete"),ut(d,"error"))}a.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ut(this,"complete"),ut(this,"abort"),ta(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ta(this,!0)),Nt.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?Ui(this):this.bb())},a.bb=function(){Ui(this)};function Ui(d){if(d.h&&typeof h<"u"&&(!d.v[1]||Er(d)!=4||d.Z()!=2)){if(d.u&&Er(d)==4)Xt(d.Ea,0,d);else if(ut(d,"readystatechange"),Er(d)==4){d.h=!1;try{const pe=d.Z();e:switch(pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var b;if(!(b=v)){var S;if(S=pe===0){var H=String(d.D).match($s)[1]||null;!H&&g.self&&g.self.location&&(H=g.self.location.protocol.slice(0,-1)),S=!zi.test(H?H.toLowerCase():"")}b=S}if(b)ut(d,"complete"),ut(d,"success");else{d.m=6;try{var J=2<Er(d)?d.g.statusText:""}catch{J=""}d.l=J+" ["+d.Z()+"]",Li(d)}}finally{ta(d)}}}}function ta(d,v){if(d.g){Js(d);const b=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||ut(d,"ready");try{b.onreadystatechange=S}catch{}}}function Js(d){d.I&&(g.clearTimeout(d.I),d.I=null)}a.isActive=function(){return!!this.g};function Er(d){return d.g?d.g.readyState:0}a.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Ue(v)}};function Xc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function xh(d){const v={};d=(d.g&&2<=Er(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(ee(d[S]))continue;var b=O(d[S]);const H=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const J=v[H]||[];v[H]=J,J.push(b)}R(v,function(S){return S.join(", ")})}a.Ba=function(){return this.m},a.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ei(d,v,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||v}function Bi(d){this.Aa=0,this.i=[],this.j=new Pe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ei("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ei("baseRetryDelayMs",5e3,d),this.cb=ei("retryDelaySeedMs",1e4,d),this.Wa=ei("forwardChannelMaxRetries",2,d),this.wa=ei("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ta(d&&d.concurrentRequestLimit),this.Da=new Zs,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}a=Bi.prototype,a.la=8,a.G=1,a.connect=function(d,v,b,S){Ce(0),this.W=d,this.H=v||{},b&&S!==void 0&&(this.H.OSID=b,this.H.OAID=S),this.F=this.X,this.I=ru(this,null,this.W),Gi(this)};function sl(d){if(Zc(d),d.G==3){var v=d.U++,b=hr(d.I);if(Mt(b,"SID",d.K),Mt(b,"RID",v),Mt(b,"TYPE","terminate"),ti(d,b),v=new on(d,d.j,v),v.L=2,v.v=Ys(hr(b)),b=!1,g.navigator&&g.navigator.sendBeacon)try{b=g.navigator.sendBeacon(v.v.toString(),"")}catch{}!b&&g.Image&&(new Image().src=v.v,b=!0),b||(v.g=au(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Qr(v)}nu(d)}function Hi(d){d.g&&(ni(d),d.g.cancel(),d.g=null)}function Zc(d){Hi(d),d.u&&(g.clearTimeout(d.u),d.u=null),Fi(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&g.clearTimeout(d.s),d.s=null)}function Gi(d){if(!ji(d.h)&&!d.s){d.s=!0;var v=d.Ga;he||D(),me||(he(),me=!0),Me.add(v,d),d.B=0}}function bh(d,v){return Mi(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ne(w(d.Ga,d,v),ll(d,d.B)),d.B++,!0)}a.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const H=new on(this,this.j,d);let J=this.o;if(this.S&&(J?(J=A(J),j(J,this.S)):J=this.S),this.m!==null||this.O||(H.H=J,J=null),this.P)e:{for(var v=0,b=0;b<this.i.length;b++){t:{var S=this.i[b];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,4096<v){v=b;break e}if(v===4096||b===this.i.length-1){v=b+1;break e}}v=1e3}else v=1e3;v=Wc(this,H,v),b=hr(this.I),Mt(b,"RID",d),Mt(b,"CVER",22),this.D&&Mt(b,"X-HTTP-Session-Id",this.D),ti(this,b),J&&(this.O?v="headers="+encodeURIComponent(String(al(J)))+"&"+v:this.m&&Cn(b,this.m,J)),Oi(this.h,H),this.Ua&&Mt(b,"TYPE","init"),this.P?(Mt(b,"$req",v),Mt(b,"SID","null"),H.T=!0,rt(H,b,null)):rt(H,b,v),this.G=2}}else this.G==3&&(d?il(this,d):this.i.length==0||ji(this.h)||il(this))};function il(d,v){var b;v?b=v.l:b=d.U++;const S=hr(d.I);Mt(S,"SID",d.K),Mt(S,"RID",b),Mt(S,"AID",d.T),ti(d,S),d.m&&d.o&&Cn(S,d.m,d.o),b=new on(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),v&&(d.i=v.D.concat(d.i)),v=Wc(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Oi(d.h,b),rt(b,S,v)}function ti(d,v){d.H&&xe(d.H,function(b,S){Mt(v,S,b)}),d.l&&Jo({},function(b,S){Mt(v,S,b)})}function Wc(d,v,b){b=Math.min(d.i.length,b);var S=d.l?w(d.l.Na,d.l,d):null;e:{var H=d.i;let J=-1;for(;;){const pe=["count="+b];J==-1?0<b?(J=H[0].g,pe.push("ofs="+J)):J=0:pe.push("ofs="+J);let Et=!0;for(let bn=0;bn<b;bn++){let kt=H[bn].g;const In=H[bn].map;if(kt-=J,0>kt)J=Math.max(0,H[bn].g-100),Et=!1;else try{Wr(In,pe,"req"+kt+"_")}catch{S&&S(In)}}if(Et){S=pe.join("&");break e}}}return d=d.i.splice(0,b),v.D=d,S}function Jc(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;he||D(),me||(he(),me=!0),Me.add(v,d),d.v=0}}function ol(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ne(w(d.Fa,d),ll(d,d.v)),d.v++,!0)}a.Fa=function(){if(this.u=null,eu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ne(w(this.ab,this),d)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Hi(this),eu(this))};function ni(d){d.A!=null&&(g.clearTimeout(d.A),d.A=null)}function eu(d){d.g=new on(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=hr(d.qa);Mt(v,"RID","rpc"),Mt(v,"SID",d.K),Mt(v,"AID",d.T),Mt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&Mt(v,"TO",d.ja),Mt(v,"TYPE","xmlhttp"),ti(d,v),d.m&&d.o&&Cn(v,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Ys(hr(v)),b.m=null,b.P=!0,$n(b,d)}a.Za=function(){this.C!=null&&(this.C=null,Hi(this),ol(this),Ce(19))};function Fi(d){d.C!=null&&(g.clearTimeout(d.C),d.C=null)}function tu(d,v){var b=null;if(d.g==v){Fi(d),ni(d),d.g=null;var S=2}else if(Zo(d.h,v))b=v.D,Jn(d.h,v),S=1;else return;if(d.G!=0){if(v.o)if(S==1){b=v.m?v.m.length:0,v=Date.now()-v.F;var H=d.B;S=Z(),ut(S,new ve(S,b)),Gi(d)}else Jc(d);else if(H=v.s,H==3||H==0&&0<v.X||!(S==1&&bh(d,v)||S==2&&ol(d)))switch(b&&0<b.length&&(v=d.h,v.i=v.i.concat(b)),H){case 1:Ra(d,5);break;case 4:Ra(d,10);break;case 3:Ra(d,6);break;default:Ra(d,2)}}}function ll(d,v){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*v}function Ra(d,v){if(d.j.info("Error code "+v),v==2){var b=w(d.fb,d),S=d.Xa;const H=!S;S=new hn(S||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Ks(S,"https"),Ys(S),H?Xs(S.toString(),b):Pr(S.toString(),b)}else Ce(2);d.G=0,d.l&&d.l.sa(v),nu(d),Zc(d)}a.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))};function nu(d){if(d.G=0,d.ka=[],d.l){const v=Wo(d.h);(v.length!=0||d.i.length!=0)&&(U(d.ka,v),U(d.ka,d.i),d.h.i.length=0,B(d.i),d.i.length=0),d.l.ra()}}function ru(d,v,b){var S=b instanceof hn?hr(b):new hn(b);if(S.g!="")v&&(S.g=v+"."+S.g),ts(S,S.s);else{var H=g.location;S=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;var J=new hn(null);S&&Ks(J,S),v&&(J.g=v),H&&ts(J,H),b&&(J.l=b),S=J}return b=d.D,v=d.ya,b&&v&&Mt(S,b,v),Mt(S,"VER",d.la),ti(d,S),S}function au(d,v,b){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new Nt(new ns({eb:b})):new Nt(d.pa),v.Ha(d.J),v}a.isActive=function(){return!!this.l&&this.l.isActive(this)};function su(){}a=su.prototype,a.ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){};function qi(){}qi.prototype.g=function(d,v){return new er(d,v)};function er(d,v){st.call(this),this.g=new Bi(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!ee(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!ee(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new na(this)}F(er,st),er.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},er.prototype.close=function(){sl(this.g)},er.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=Rn(d),d=b);v.i.push(new $c(v.Ya++,d)),v.G==3&&Gi(v)},er.prototype.N=function(){this.g.l=null,delete this.j,sl(this.g),delete this.g,er.aa.N.call(this)};function iu(d){le.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const b in v){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}F(iu,le);function ou(){_e.call(this),this.status=1}F(ou,_e);function na(d){this.g=d}F(na,su),na.prototype.ua=function(){ut(this.g,"a")},na.prototype.ta=function(d){ut(this.g,new iu(d))},na.prototype.sa=function(d){ut(this.g,new ou)},na.prototype.ra=function(){ut(this.g,"b")},qi.prototype.createWebChannel=qi.prototype.g,er.prototype.send=er.prototype.o,er.prototype.open=er.prototype.m,er.prototype.close=er.prototype.close,L_=function(){return new qi},z_=function(){return Z()},V_=qe,Gm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},an.NO_ERROR=0,an.TIMEOUT=8,an.HTTP_ERROR=6,Td=an,sn.COMPLETE="complete",P_=sn,Zt.EventType=Lt,Lt.OPEN="a",Lt.CLOSE="b",Lt.ERROR="c",Lt.MESSAGE="d",st.prototype.listen=st.prototype.K,ec=Zt,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,O_=Nt}).apply(typeof ud<"u"?ud:typeof self<"u"?self:typeof window<"u"?window:{});const yx="@firebase/firestore",vx="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let or=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};or.UNAUTHENTICATED=new or(null),or.GOOGLE_CREDENTIALS=new or("google-credentials-uid"),or.FIRST_PARTY=new or("first-party-uid"),or.MOCK_USER=new or("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new pg("@firebase/firestore");function To(){return Si.logLevel}function Ie(a,...e){if(Si.logLevel<=yt.DEBUG){const t=e.map(Ag);Si.debug(`Firestore (${$o}): ${a}`,...t)}}function Za(a,...e){if(Si.logLevel<=yt.ERROR){const t=e.map(Ag);Si.error(`Firestore (${$o}): ${a}`,...t)}}function pc(a,...e){if(Si.logLevel<=yt.WARN){const t=e.map(Ag);Si.warn(`Firestore (${$o}): ${a}`,...t)}}function Ag(a){if(typeof a=="string")return a;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(a)}catch{return a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(a,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,U_(a,s,t)}function U_(a,e,t){let s=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: ${e} (ID: ${a.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Za(s),new Error(s)}function Ct(a,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,a||U_(e,o,s)}function at(a,e){return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends Ja{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class DN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(or.UNAUTHENTICATED)))}shutdown(){}}class jN{constructor(e){this.t=e,this.currentUser=or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ct(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Ka;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ka,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ka)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ct(typeof s.accessToken=="string",31837,{l:s}),new IN(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ct(e===null||typeof e=="string",2055,{h:e}),new or(e)}}class MN{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=or.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ON{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new MN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(or.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class PN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ct(this.o===void 0,3512);const s=l=>{l.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,Ie("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ct(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(a);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<a;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=VN(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function vt(a,e){return a<e?-1:a>e?1:0}function Fm(a,e){const t=Math.min(a.length,e.length);for(let s=0;s<t;s++){const o=a.charAt(s),l=e.charAt(s);if(o!==l)return Am(o)===Am(l)?vt(o,l):Am(o)?1:-1}return vt(a.length,e.length)}const zN=55296,LN=57343;function Am(a){const e=a.charCodeAt(0);return e>=zN&&e<=LN}function jo(a,e,t){return a.length===e.length&&a.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="__name__";class ca{constructor(e,t,s){t===void 0?t=0:t>e.length&&Xe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Xe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return ca.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ca?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=ca.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return vt(e.length,t.length)}static compareSegments(e,t){const s=ca.isNumericId(e),o=ca.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?ca.extractNumericId(e).compare(ca.extractNumericId(t)):Fm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ms.fromString(e.substring(4,e.length-2))}}class Ft extends ca{construct(e,t,s){return new Ft(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new we(ae.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ft(t)}static emptyPath(){return new Ft([])}}const UN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Fn extends ca{construct(e,t,s){return new Fn(e,t,s)}static isValidIdentifier(e){return UN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Fn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===bx}static keyField(){return new Fn([bx])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new we(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new we(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new we(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(s+=g,o++):(l(),o++)}if(l(),h)throw new we(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Fn(t)}static emptyPath(){return new Fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Ft.fromString(e))}static fromName(e){return new Be(Ft.fromString(e).popFirst(5))}static empty(){return new Be(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(a,e,t){if(!t)throw new we(ae.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function BN(a,e,t,s){if(e===!0&&s===!0)throw new we(ae.INVALID_ARGUMENT,`${a} and ${t} cannot be used together.`)}function _x(a){if(!Be.isDocumentKey(a))throw new we(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function Tx(a){if(Be.isDocumentKey(a))throw new we(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function H_(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}function eh(a){if(a===void 0)return"undefined";if(a===null)return"null";if(typeof a=="string")return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if(typeof a=="number"||typeof a=="boolean")return""+a;if(typeof a=="object"){if(a instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(a);return e?`a custom ${e} object`:"an object"}}return typeof a=="function"?"a function":Xe(12329,{type:typeof a})}function wi(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new we(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eh(a);throw new we(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return a}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(a,e){const t={typeString:a};return e&&(t.value=e),t}function Oc(a,e){if(!H_(a))throw new we(ae.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in a)){t=`JSON missing required field: '${s}'`;break}const h=a[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new we(ae.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=-62135596800,kx=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*kx);return new Ht(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ex)throw new we(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kx}_compareTo(e){return this.seconds===e.seconds?vt(this.nanoseconds,e.nanoseconds):vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ht._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,Ht._jsonSchema))return new Ht(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ex;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ht._jsonSchemaVersion="firestore/timestamp/1.0",Ht._jsonSchema={type:yn("string",Ht._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(e){return new nt(e)}static min(){return new nt(new Ht(0,0))}static max(){return new nt(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc=-1;function HN(a,e){const t=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,o=nt.fromTimestamp(s===1e9?new Ht(t+1,0):new Ht(t,s));return new Ps(o,Be.empty(),e)}function GN(a){return new Ps(a.readTime,a.key,yc)}class Ps{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ps(nt.min(),Be.empty(),yc)}static max(){return new Ps(nt.max(),Be.empty(),yc)}}function FN(a,e){let t=a.readTime.compareTo(e.readTime);return t!==0?t:(t=Be.comparator(a.documentKey,e.documentKey),t!==0?t:vt(a.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $N{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(a){if(a.code!==ae.FAILED_PRECONDITION||a.message!==qN)throw a;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ie.reject(t)}static resolve(e){return new ie(((t,s)=>{t(e)}))}static reject(e){return new ie(((t,s)=>{s(e)}))}static waitFor(e){return new ie(((t,s)=>{let o=0,l=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++l,h&&l===o&&t()}),(p=>s(p)))})),h=!0,l===o&&t()}))}static or(e){let t=ie.resolve(!1);for(const s of e)t=t.next((o=>o?ie.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new ie(((s,o)=>{const l=e.length,h=new Array(l);let g=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((x=>{h[y]=x,++g,g===l&&s(h)}),(x=>o(x)))}}))}static doWhile(e,t){return new ie(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function KN(a){const e=a.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Yo(a){return a.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}th.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=-1;function nh(a){return a==null}function Pd(a){return a===0&&1/a==-1/0}function YN(a){return typeof a=="number"&&Number.isInteger(a)&&!Pd(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="";function QN(a){let e="";for(let t=0;t<a.length;t++)e.length>0&&(e=Sx(e)),e=XN(a.get(t),e);return Sx(e)}function XN(a,e){let t=e;const s=a.length;for(let o=0;o<s;o++){const l=a.charAt(o);switch(l){case"\0":t+="";break;case G_:t+="";break;default:t+=l}}return t}function Sx(a){return a+G_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(a){let e=0;for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e++;return e}function Ni(a,e){for(const t in a)Object.prototype.hasOwnProperty.call(a,t)&&e(t,a[t])}function F_(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t){this.comparator=e,this.root=t||Gn.EMPTY}insert(e,t){return new en(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dd(this.root,e,this.comparator,!1)}getReverseIterator(){return new dd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dd(this.root,e,this.comparator,!0)}}class dd{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gn{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Gn.RED,this.left=o??Gn.EMPTY,this.right=l??Gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Gn(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Gn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Xe(27949);return e+(this.isRed()?0:1)}}Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Xe(57766)}get value(){throw Xe(16141)}get color(){throw Xe(16727)}get left(){throw Xe(29726)}get right(){throw Xe(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ax(this.data.getIterator())}getIteratorFrom(e){return new Ax(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof kn)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new kn(this.comparator);return t.data=e,t}}class Ax{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new Hr([])}unionWith(e){let t=new kn(Fn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Hr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new q_("Invalid base64 string: "+l):l}})(e);return new qn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new qn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const ZN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(a){if(Ct(!!a,39018),typeof a=="string"){let e=0;const t=ZN.exec(a);if(Ct(!!t,46558,{timestamp:a}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:un(a.seconds),nanos:un(a.nanos)}}function un(a){return typeof a=="number"?a:typeof a=="string"?Number(a):0}function zs(a){return typeof a=="string"?qn.fromBase64String(a):qn.fromUint8Array(a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="server_timestamp",K_="__type__",Y_="__previous_value__",Q_="__local_write_time__";function Cg(a){return(a?.mapValue?.fields||{})[K_]?.stringValue===$_}function rh(a){const e=a.mapValue.fields[Y_];return Cg(e)?rh(e):e}function vc(a){const e=Vs(a.mapValue.fields[Q_].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,t,s,o,l,h,g,p,y,x){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=x}}const Vd="(default)";class xc{constructor(e,t){this.projectId=e,this.database=t||Vd}static empty(){return new xc("","")}get isDefaultDatabase(){return this.database===Vd}isEqual(e){return e instanceof xc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="__type__",JN="__max__",hd={mapValue:{}},Z_="__vector__",zd="value";function Ls(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Cg(a)?4:t2(a)?9007199254740991:e2(a)?10:11:Xe(28295,{value:a})}function ya(a,e){if(a===e)return!0;const t=Ls(a);if(t!==Ls(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return vc(a).isEqual(vc(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Vs(o.timestampValue),g=Vs(l.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(a,e);case 5:return a.stringValue===e.stringValue;case 6:return(function(o,l){return zs(o.bytesValue).isEqual(zs(l.bytesValue))})(a,e);case 7:return a.referenceValue===e.referenceValue;case 8:return(function(o,l){return un(o.geoPointValue.latitude)===un(l.geoPointValue.latitude)&&un(o.geoPointValue.longitude)===un(l.geoPointValue.longitude)})(a,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return un(o.integerValue)===un(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=un(o.doubleValue),g=un(l.doubleValue);return h===g?Pd(h)===Pd(g):isNaN(h)&&isNaN(g)}return!1})(a,e);case 9:return jo(a.arrayValue.values||[],e.arrayValue.values||[],ya);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},g=l.mapValue.fields||{};if(wx(h)!==wx(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!ya(h[p],g[p])))return!1;return!0})(a,e);default:return Xe(52216,{left:a})}}function bc(a,e){return(a.values||[]).find((t=>ya(t,e)))!==void 0}function Mo(a,e){if(a===e)return 0;const t=Ls(a),s=Ls(e);if(t!==s)return vt(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return vt(a.booleanValue,e.booleanValue);case 2:return(function(l,h){const g=un(l.integerValue||l.doubleValue),p=un(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(a,e);case 3:return Rx(a.timestampValue,e.timestampValue);case 4:return Rx(vc(a),vc(e));case 5:return Fm(a.stringValue,e.stringValue);case 6:return(function(l,h){const g=zs(l),p=zs(h);return g.compareTo(p)})(a.bytesValue,e.bytesValue);case 7:return(function(l,h){const g=l.split("/"),p=h.split("/");for(let y=0;y<g.length&&y<p.length;y++){const x=vt(g[y],p[y]);if(x!==0)return x}return vt(g.length,p.length)})(a.referenceValue,e.referenceValue);case 8:return(function(l,h){const g=vt(un(l.latitude),un(h.latitude));return g!==0?g:vt(un(l.longitude),un(h.longitude))})(a.geoPointValue,e.geoPointValue);case 9:return Nx(a.arrayValue,e.arrayValue);case 10:return(function(l,h){const g=l.fields||{},p=h.fields||{},y=g[zd]?.arrayValue,x=p[zd]?.arrayValue,T=vt(y?.values?.length||0,x?.values?.length||0);return T!==0?T:Nx(y,x)})(a.mapValue,e.mapValue);case 11:return(function(l,h){if(l===hd.mapValue&&h===hd.mapValue)return 0;if(l===hd.mapValue)return 1;if(h===hd.mapValue)return-1;const g=l.fields||{},p=Object.keys(g),y=h.fields||{},x=Object.keys(y);p.sort(),x.sort();for(let T=0;T<p.length&&T<x.length;++T){const w=Fm(p[T],x[T]);if(w!==0)return w;const M=Mo(g[p[T]],y[x[T]]);if(M!==0)return M}return vt(p.length,x.length)})(a.mapValue,e.mapValue);default:throw Xe(23264,{he:t})}}function Rx(a,e){if(typeof a=="string"&&typeof e=="string"&&a.length===e.length)return vt(a,e);const t=Vs(a),s=Vs(e),o=vt(t.seconds,s.seconds);return o!==0?o:vt(t.nanos,s.nanos)}function Nx(a,e){const t=a.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Mo(t[o],s[o]);if(l)return l}return vt(t.length,s.length)}function Oo(a){return qm(a)}function qm(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?(function(t){const s=Vs(t);return`time(${s.seconds},${s.nanos})`})(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?(function(t){return zs(t).toBase64()})(a.bytesValue):"referenceValue"in a?(function(t){return Be.fromName(t).toString()})(a.referenceValue):"geoPointValue"in a?(function(t){return`geo(${t.latitude},${t.longitude})`})(a.geoPointValue):"arrayValue"in a?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=qm(l);return s+"]"})(a.arrayValue):"mapValue"in a?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${qm(t.fields[h])}`;return o+"}"})(a.mapValue):Xe(61005,{value:a})}function Ed(a){switch(Ls(a)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rh(a);return e?16+Ed(e):16;case 5:return 2*a.stringValue.length;case 6:return zs(a.bytesValue).approximateByteSize();case 7:return a.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Ed(l)),0)})(a.arrayValue);case 10:case 11:return(function(s){let o=0;return Ni(s.fields,((l,h)=>{o+=l.length+Ed(h)})),o})(a.mapValue);default:throw Xe(13486,{value:a})}}function Cx(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function $m(a){return!!a&&"integerValue"in a}function Ig(a){return!!a&&"arrayValue"in a}function Ix(a){return!!a&&"nullValue"in a}function Dx(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function kd(a){return!!a&&"mapValue"in a}function e2(a){return(a?.mapValue?.fields||{})[X_]?.stringValue===Z_}function ic(a){if(a.geoPointValue)return{geoPointValue:{...a.geoPointValue}};if(a.timestampValue&&typeof a.timestampValue=="object")return{timestampValue:{...a.timestampValue}};if(a.mapValue){const e={mapValue:{fields:{}}};return Ni(a.mapValue.fields,((t,s)=>e.mapValue.fields[t]=ic(s))),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(a.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ic(a.arrayValue.values[t]);return e}return{...a}}function t2(a){return(((a.mapValue||{}).fields||{}).__type__||{}).stringValue===JN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this.value=e}static empty(){return new jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!kd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(t)}setAll(e){let t=Fn.emptyPath(),s={},o=[];e.forEach(((h,g)=>{if(!t.isImmediateParentOf(g)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=g.popLast()}h?s[g.lastSegment()]=ic(h):o.push(g.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());kd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ya(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];kd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ni(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new jr(ic(this.value))}}function W_(a){const e=[];return Ni(a.fields,((t,s)=>{const o=new Fn([t]);if(kd(s)){const l=W_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,t,s,o,l,h,g){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Xn(e,0,nt.min(),nt.min(),nt.min(),jr.empty(),0)}static newFoundDocument(e,t,s,o){return new Xn(e,1,t,nt.min(),s,o,0)}static newNoDocument(e,t){return new Xn(e,2,t,nt.min(),nt.min(),jr.empty(),0)}static newUnknownDocument(e,t){return new Xn(e,3,t,nt.min(),nt.min(),jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(e,t){this.position=e,this.inclusive=t}}function jx(a,e,t){let s=0;for(let o=0;o<a.position.length;o++){const l=e[o],h=a.position[o];if(l.field.isKeyField()?s=Be.comparator(Be.fromName(h.referenceValue),t.key):s=Mo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Mx(a,e){if(a===null)return e===null;if(e===null||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let t=0;t<a.position.length;t++)if(!ya(a.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function n2(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{}class pn extends J_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new a2(e,t,s):t==="array-contains"?new o2(e,s):t==="in"?new l2(e,s):t==="not-in"?new c2(e,s):t==="array-contains-any"?new u2(e,s):new pn(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new s2(e,s):new i2(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Mo(t,this.value)):t!==null&&Ls(this.value)===Ls(t)&&this.matchesComparison(Mo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qr extends J_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new qr(e,t)}matches(e){return eT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eT(a){return a.op==="and"}function tT(a){return r2(a)&&eT(a)}function r2(a){for(const e of a.filters)if(e instanceof qr)return!1;return!0}function Km(a){if(a instanceof pn)return a.field.canonicalString()+a.op.toString()+Oo(a.value);if(tT(a))return a.filters.map((e=>Km(e))).join(",");{const e=a.filters.map((t=>Km(t))).join(",");return`${a.op}(${e})`}}function nT(a,e){return a instanceof pn?(function(s,o){return o instanceof pn&&s.op===o.op&&s.field.isEqual(o.field)&&ya(s.value,o.value)})(a,e):a instanceof qr?(function(s,o){return o instanceof qr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,g)=>l&&nT(h,o.filters[g])),!0):!1})(a,e):void Xe(19439)}function rT(a){return a instanceof pn?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oo(t.value)}`})(a):a instanceof qr?(function(t){return t.op.toString()+" {"+t.getFilters().map(rT).join(" ,")+"}"})(a):"Filter"}class a2 extends pn{constructor(e,t,s){super(e,t,s),this.key=Be.fromName(s.referenceValue)}matches(e){const t=Be.comparator(e.key,this.key);return this.matchesComparison(t)}}class s2 extends pn{constructor(e,t){super(e,"in",t),this.keys=aT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class i2 extends pn{constructor(e,t){super(e,"not-in",t),this.keys=aT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aT(a,e){return(e.arrayValue?.values||[]).map((t=>Be.fromName(t.referenceValue)))}class o2 extends pn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&bc(t.arrayValue,this.value)}}class l2 extends pn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bc(this.value.arrayValue,t)}}class c2 extends pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bc(this.value.arrayValue,t)}}class u2 extends pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>bc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t=null,s=[],o=[],l=null,h=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=g,this.Te=null}}function Ox(a,e=null,t=[],s=[],o=null,l=null,h=null){return new d2(a,e,t,s,o,l,h)}function Dg(a){const e=at(a);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Km(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),nh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Oo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Oo(s))).join(",")),e.Te=t}return e.Te}function jg(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<a.orderBy.length;t++)if(!n2(a.orderBy[t],e.orderBy[t]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let t=0;t<a.filters.length;t++)if(!nT(a.filters[t],e.filters[t]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!Mx(a.startAt,e.startAt)&&Mx(a.endAt,e.endAt)}function Ym(a){return Be.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t=null,s=[],o=[],l=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function h2(a,e,t,s,o,l,h,g){return new Pc(a,e,t,s,o,l,h,g)}function Mg(a){return new Pc(a)}function Px(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.explicitOrderBy.length===0||a.explicitOrderBy.length===1&&a.explicitOrderBy[0].field.isKeyField())}function sT(a){return a.collectionGroup!==null}function oc(a){const e=at(a);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new kn(Fn.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ud(l,s))})),t.has(Fn.keyField().canonicalString())||e.Ie.push(new Ud(Fn.keyField(),s))}return e.Ie}function ha(a){const e=at(a);return e.Ee||(e.Ee=f2(e,oc(a))),e.Ee}function f2(a,e){if(a.limitType==="F")return Ox(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Ud(o.field,l)}));const t=a.endAt?new Ld(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new Ld(a.startAt.position,a.startAt.inclusive):null;return Ox(a.path,a.collectionGroup,e,a.filters,a.limit,t,s)}}function Qm(a,e){const t=a.filters.concat([e]);return new Pc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),t,a.limit,a.limitType,a.startAt,a.endAt)}function Xm(a,e,t){return new Pc(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,t,a.startAt,a.endAt)}function ah(a,e){return jg(ha(a),ha(e))&&a.limitType===e.limitType}function iT(a){return`${Dg(ha(a))}|lt:${a.limitType}`}function Eo(a){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>rT(o))).join(", ")}]`),nh(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Oo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Oo(o))).join(",")),`Target(${s})`})(ha(a))}; limitType=${a.limitType})`}function sh(a,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Be.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(a,e)&&(function(s,o){for(const l of oc(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(a,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(a,e)&&(function(s,o){return!(s.startAt&&!(function(h,g,p){const y=jx(h,g,p);return h.inclusive?y<=0:y<0})(s.startAt,oc(s),o)||s.endAt&&!(function(h,g,p){const y=jx(h,g,p);return h.inclusive?y>=0:y>0})(s.endAt,oc(s),o))})(a,e)}function m2(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function oT(a){return(e,t)=>{let s=!1;for(const o of oc(a)){const l=g2(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function g2(a,e,t){const s=a.field.isKeyField()?Be.comparator(e.key,t.key):(function(l,h,g){const p=h.data.field(l),y=g.data.field(l);return p!==null&&y!==null?Mo(p,y):Xe(42886)})(a.field,e,t);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return Xe(19790,{direction:a.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return F_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new en(Be.comparator);function Wa(){return p2}const lT=new en(Be.comparator);function tc(...a){let e=lT;for(const t of a)e=e.insert(t.key,t);return e}function cT(a){let e=lT;return a.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function xi(){return lc()}function uT(){return lc()}function lc(){return new Ci((a=>a.toString()),((a,e)=>a.isEqual(e)))}const y2=new en(Be.comparator),v2=new kn(Be.comparator);function xt(...a){let e=v2;for(const t of a)e=e.add(t);return e}const x2=new kn(vt);function b2(){return x2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(e)?"-0":e}}function dT(a){return{integerValue:""+a}}function _2(a,e){return YN(e)?dT(e):Og(a,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(){this._=void 0}}function T2(a,e,t){return a instanceof _c?(function(o,l){const h={fields:{[K_]:{stringValue:$_},[Q_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Cg(l)&&(l=rh(l)),l&&(h.fields[Y_]=l),{mapValue:h}})(t,e):a instanceof Tc?fT(a,e):a instanceof Ec?mT(a,e):(function(o,l){const h=hT(o,l),g=Vx(h)+Vx(o.Ae);return $m(h)&&$m(o.Ae)?dT(g):Og(o.serializer,g)})(a,e)}function E2(a,e,t){return a instanceof Tc?fT(a,e):a instanceof Ec?mT(a,e):t}function hT(a,e){return a instanceof Bd?(function(s){return $m(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class _c extends ih{}class Tc extends ih{constructor(e){super(),this.elements=e}}function fT(a,e){const t=gT(e);for(const s of a.elements)t.some((o=>ya(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Ec extends ih{constructor(e){super(),this.elements=e}}function mT(a,e){let t=gT(e);for(const s of a.elements)t=t.filter((o=>!ya(o,s)));return{arrayValue:{values:t}}}class Bd extends ih{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Vx(a){return un(a.integerValue||a.doubleValue)}function gT(a){return Ig(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t){this.field=e,this.transform=t}}function S2(a,e){return a.field.isEqual(e.field)&&(function(s,o){return s instanceof Tc&&o instanceof Tc||s instanceof Ec&&o instanceof Ec?jo(s.elements,o.elements,ya):s instanceof Bd&&o instanceof Bd?ya(s.Ae,o.Ae):s instanceof _c&&o instanceof _c})(a.transform,e.transform)}class w2{constructor(e,t){this.version=e,this.transformResults=t}}class fa{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fa}static exists(e){return new fa(void 0,e)}static updateTime(e){return new fa(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sd(a,e){return a.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(a.updateTime):a.exists===void 0||a.exists===e.isFoundDocument()}class oh{}function pT(a,e){if(!a.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return a.isNoDocument()?new vT(a.key,fa.none()):new Vc(a.key,a.data,fa.none());{const t=a.data,s=jr.empty();let o=new kn(Fn.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ii(a.key,s,new Hr(o.toArray()),fa.none())}}function A2(a,e,t){a instanceof Vc?(function(o,l,h){const g=o.value.clone(),p=Lx(o.fieldTransforms,l,h.transformResults);g.setAll(p),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(a,e,t):a instanceof Ii?(function(o,l,h){if(!Sd(o.precondition,l))return void l.convertToUnknownDocument(h.version);const g=Lx(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(yT(o)),p.setAll(g),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(a,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function cc(a,e,t,s){return a instanceof Vc?(function(l,h,g,p){if(!Sd(l.precondition,h))return g;const y=l.value.clone(),x=Ux(l.fieldTransforms,p,h);return y.setAll(x),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(a,e,t,s):a instanceof Ii?(function(l,h,g,p){if(!Sd(l.precondition,h))return g;const y=Ux(l.fieldTransforms,p,h),x=h.data;return x.setAll(yT(l)),x.setAll(y),h.convertToFoundDocument(h.version,x).setHasLocalMutations(),g===null?null:g.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(a,e,t,s):(function(l,h,g){return Sd(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(a,e,t)}function R2(a,e){let t=null;for(const s of a.fieldTransforms){const o=e.data.field(s.field),l=hT(s.transform,o||null);l!=null&&(t===null&&(t=jr.empty()),t.set(s.field,l))}return t||null}function zx(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&jo(s,o,((l,h)=>S2(l,h)))})(a.fieldTransforms,e.fieldTransforms)&&(a.type===0?a.value.isEqual(e.value):a.type!==1||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask))}class Vc extends oh{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ii extends oh{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function yT(a){const e=new Map;return a.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=a.data.field(t);e.set(t,s)}})),e}function Lx(a,e,t){const s=new Map;Ct(a.length===t.length,32656,{Re:t.length,Ve:a.length});for(let o=0;o<t.length;o++){const l=a[o],h=l.transform,g=e.data.field(l.field);s.set(l.field,E2(h,g,t[o]))}return s}function Ux(a,e,t){const s=new Map;for(const o of a){const l=o.transform,h=t.data.field(o.field);s.set(o.field,T2(l,h,e))}return s}class vT extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class N2 extends oh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&A2(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=cc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=cc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=uT();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let g=this.applyToLocalView(h,l.mutatedFields);g=t.has(o.key)?null:g;const p=pT(h,g);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(nt.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),xt())}isEqual(e){return this.batchId===e.batchId&&jo(this.mutations,e.mutations,((t,s)=>zx(t,s)))&&jo(this.baseMutations,e.baseMutations,((t,s)=>zx(t,s)))}}class Pg{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ct(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return y2})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Pg(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gn,wt;function j2(a){switch(a){case ae.OK:return Xe(64938);case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0;default:return Xe(15467,{code:a})}}function xT(a){if(a===void 0)return Za("GRPC error has no .code"),ae.UNKNOWN;switch(a){case gn.OK:return ae.OK;case gn.CANCELLED:return ae.CANCELLED;case gn.UNKNOWN:return ae.UNKNOWN;case gn.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case gn.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case gn.INTERNAL:return ae.INTERNAL;case gn.UNAVAILABLE:return ae.UNAVAILABLE;case gn.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case gn.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case gn.NOT_FOUND:return ae.NOT_FOUND;case gn.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case gn.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case gn.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case gn.ABORTED:return ae.ABORTED;case gn.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case gn.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case gn.DATA_LOSS:return ae.DATA_LOSS;default:return Xe(39323,{code:a})}}(wt=gn||(gn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=new Ms([4294967295,4294967295],0);function Bx(a){const e=M2().encode(a),t=new M_;return t.update(e),new Uint8Array(t.digest())}function Hx(a){const e=new DataView(a.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ms([t,s],0),new Ms([o,l],0)]}class Vg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new nc(`Invalid padding: ${t}`);if(s<0)throw new nc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new nc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ms.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Ms.fromNumber(s)));return o.compare(O2)===1&&(o=new Ms([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Bx(e),[s,o]=Hx(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Vg(l,o,t);return s.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const t=Bx(e),[s,o]=Hx(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new lh(nt.min(),o,new en(vt),Wa(),xt())}}class zc{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new zc(s,t,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class bT{constructor(e,t){this.targetId=e,this.Ce=t}}class _T{constructor(e,t,s=qn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Gx{constructor(){this.ve=0,this.Fe=Fx(),this.Me=qn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),t=xt(),s=xt();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Xe(38017,{changeType:l})}})),new zc(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Fx()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class P2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Wa(),this.Je=fd(),this.He=fd(),this.Ye=new en(vt)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Ym(l))if(s===0){const h=new Be(l.path);this.et(t,h,Xn.newNoDocument(h,nt.min()))}else Ct(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const g=this.ut(e),p=g?this.ct(g,e,h):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,g;try{h=zs(s).toUint8Array()}catch(p){if(p instanceof q_)return pc("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Vg(h,o,l)}catch(p){return pc(p instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(g)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const g=this.ot(h);if(g){if(l.current&&Ym(g.target)){const p=new Be(g.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Xn.newNoDocument(p,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=xt();this.He.forEach(((l,h)=>{let g=!0;h.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new lh(e,t,this.Ye,this.je,s);return this.je=Wa(),this.Je=fd(),this.He=fd(),this.Ye=new en(vt),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Gx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new kn(vt),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new kn(vt),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Gx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function fd(){return new en(Be.comparator)}function Fx(){return new en(Be.comparator)}const V2={asc:"ASCENDING",desc:"DESCENDING"},z2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L2={and:"AND",or:"OR"};class U2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zm(a,e){return a.useProto3Json||nh(e)?e:{value:e}}function Hd(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TT(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function B2(a,e){return Hd(a,e.toTimestamp())}function ma(a){return Ct(!!a,49232),nt.fromTimestamp((function(t){const s=Vs(t);return new Ht(s.seconds,s.nanos)})(a))}function zg(a,e){return Wm(a,e).canonicalString()}function Wm(a,e){const t=(function(o){return new Ft(["projects",o.projectId,"databases",o.database])})(a).child("documents");return e===void 0?t:t.child(e)}function ET(a){const e=Ft.fromString(a);return Ct(RT(e),10190,{key:e.toString()}),e}function Jm(a,e){return zg(a.databaseId,e.path)}function Rm(a,e){const t=ET(e);if(t.get(1)!==a.databaseId.projectId)throw new we(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+a.databaseId.projectId);if(t.get(3)!==a.databaseId.database)throw new we(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+a.databaseId.database);return new Be(ST(t))}function kT(a,e){return zg(a.databaseId,e)}function H2(a){const e=ET(a);return e.length===4?Ft.emptyPath():ST(e)}function eg(a){return new Ft(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function ST(a){return Ct(a.length>4&&a.get(4)==="documents",29091,{key:a.toString()}),a.popFirst(5)}function qx(a,e,t){return{name:Jm(a,e),fields:t.value.mapValue.fields}}function G2(a,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Xe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,x){return y.useProto3Json?(Ct(x===void 0||typeof x=="string",58123),qn.fromBase64String(x||"")):(Ct(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),qn.fromUint8Array(x||new Uint8Array))})(a,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(y){const x=y.code===void 0?ae.UNKNOWN:xT(y.code);return new we(x,y.message||"")})(h);t=new _T(s,o,l,g||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Rm(a,s.document.name),l=ma(s.document.updateTime),h=s.document.createTime?ma(s.document.createTime):nt.min(),g=new jr({mapValue:{fields:s.document.fields}}),p=Xn.newFoundDocument(o,l,h,g),y=s.targetIds||[],x=s.removedTargetIds||[];t=new wd(y,x,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Rm(a,s.document),l=s.readTime?ma(s.readTime):nt.min(),h=Xn.newNoDocument(o,l),g=s.removedTargetIds||[];t=new wd([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Rm(a,s.document),l=s.removedTargetIds||[];t=new wd([],l,o,null)}else{if(!("filter"in e))return Xe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new D2(o,l),g=s.targetId;t=new bT(g,h)}}return t}function F2(a,e){let t;if(e instanceof Vc)t={update:qx(a,e.key,e.value)};else if(e instanceof vT)t={delete:Jm(a,e.key)};else if(e instanceof Ii)t={update:qx(a,e.key,e.data),updateMask:J2(e.fieldMask)};else{if(!(e instanceof N2))return Xe(16599,{Vt:e.type});t={verify:Jm(a,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const g=h.transform;if(g instanceof _c)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Tc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof Ec)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Bd)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw Xe(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:B2(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Xe(27497)})(a,e.precondition)),t}function q2(a,e){return a&&a.length>0?(Ct(e!==void 0,14353),a.map((t=>(function(o,l){let h=o.updateTime?ma(o.updateTime):ma(l);return h.isEqual(nt.min())&&(h=ma(l)),new w2(h,o.transformResults||[])})(t,e)))):[]}function $2(a,e){return{documents:[kT(a,e.path)]}}function K2(a,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=kT(a,o);const l=(function(y){if(y.length!==0)return AT(qr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((x=>(function(w){return{field:ko(w.field),direction:X2(w.dir)}})(x)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const g=Zm(a,e.limit);return g!==null&&(t.structuredQuery.limit=g),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function Y2(a){let e=H2(a.parent);const t=a.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ct(s===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(T){const w=wT(T);return w instanceof qr&&tT(w)?w.getFilters():[w]})(t.where));let h=[];t.orderBy&&(h=(function(T){return T.map((w=>(function(F){return new Ud(So(F.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(w)))})(t.orderBy));let g=null;t.limit&&(g=(function(T){let w;return w=typeof T=="object"?T.value:T,nh(w)?null:w})(t.limit));let p=null;t.startAt&&(p=(function(T){const w=!!T.before,M=T.values||[];return new Ld(M,w)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const w=!T.before,M=T.values||[];return new Ld(M,w)})(t.endAt)),h2(e,o,h,l,g,"F",p,y)}function Q2(a,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Xe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function wT(a){return a.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=So(t.unaryFilter.field);return pn.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=So(t.unaryFilter.field);return pn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=So(t.unaryFilter.field);return pn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=So(t.unaryFilter.field);return pn.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Xe(61313);default:return Xe(60726)}})(a):a.fieldFilter!==void 0?(function(t){return pn.create(So(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Xe(58110);default:return Xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(a):a.compositeFilter!==void 0?(function(t){return qr.create(t.compositeFilter.filters.map((s=>wT(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Xe(1026)}})(t.compositeFilter.op))})(a):Xe(30097,{filter:a})}function X2(a){return V2[a]}function Z2(a){return z2[a]}function W2(a){return L2[a]}function ko(a){return{fieldPath:a.canonicalString()}}function So(a){return Fn.fromServerFormat(a.fieldPath)}function AT(a){return a instanceof pn?(function(t){if(t.op==="=="){if(Dx(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NAN"}};if(Ix(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Dx(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NAN"}};if(Ix(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(t.field),op:Z2(t.op),value:t.value}}})(a):a instanceof qr?(function(t){const s=t.getFilters().map((o=>AT(o)));return s.length===1?s[0]:{compositeFilter:{op:W2(t.op),filters:s}}})(a):Xe(54877,{filter:a})}function J2(a){const e=[];return a.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function RT(a){return a.length>=4&&a.get(0)==="projects"&&a.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t,s,o,l=nt.min(),h=nt.min(),g=qn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new Cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.yt=e}}function tC(a){const e=Y2({parent:a.parent,structuredQuery:a.structuredQuery});return a.limitType==="LAST"?Xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(){this.Cn=new rC}addToCollectionParentIndex(e,t){return this.Cn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Ps.min())}updateCollectionGroup(e,t,s){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class rC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new kn(Ft.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new kn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NT=41943040;class lr{static withCacheSize(e){return new lr(e,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(NT,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Po(0)}static cr(){return new Po(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="LruGarbageCollector",CT=1048576;function Yx([a,e],[t,s]){const o=vt(a,t);return o===0?vt(e,s):o}class aC{constructor(e){this.Ir=e,this.buffer=new kn(Yx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Yx(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class sC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ie(Kx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Yo(t)?Ie(Kx,"Ignoring IndexedDB error during garbage collection: ",t):await Ko(t)}await this.Vr(3e5)}))}}class iC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(th.ce);const s=new aC(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve($x)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$x):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,g,p,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,g=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(y=Date.now(),To()<=yt.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-x}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${l} targets in `+(p-g)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-x}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function oC(a,e){return new iC(a,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(){this.changes=new Ci((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ie.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&cc(s.mutation,o,Hr.empty(),Ht.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,xt()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=xt()){const o=xi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=tc();return l.forEach(((g,p)=>{h=h.insert(g,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=xi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,xt())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,g)=>{t.set(h,g)}))}))}computeViews(e,t,s,o){let l=Wa();const h=lc(),g=(function(){return lc()})();return t.forEach(((p,y)=>{const x=s.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof Ii)?l=l.insert(y.key,y):x!==void 0?(h.set(y.key,x.mutation.getFieldMask()),cc(x.mutation,y,x.mutation.getFieldMask(),Ht.now())):h.set(y.key,Hr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,x)=>h.set(y,x))),t.forEach(((y,x)=>g.set(y,new cC(x,h.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,t){const s=lc();let o=new en(((h,g)=>h-g)),l=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const g of h)g.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let x=s.get(p)||Hr.empty();x=g.applyToLocalView(y,x),s.set(p,x);const T=(o.get(g.batchId)||xt()).add(p);o=o.insert(g.batchId,T)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,x=p.value,T=uT();x.forEach((w=>{if(!l.has(w)){const M=pT(t.get(w),s.get(w));M!==null&&T.set(w,M),l=l.add(w)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return ie.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return Be.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):ie.resolve(xi());let g=yc,p=l;return h.next((y=>ie.forEach(y,((x,T)=>(g<T.largestBatchId&&(g=T.largestBatchId),l.get(x)?ie.resolve():this.remoteDocumentCache.getEntry(e,x).next((w=>{p=p.insert(x,w)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,xt()))).next((x=>({batchId:g,changes:cT(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Be(t)).next((s=>{let o=tc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=tc();return this.indexManager.getCollectionParents(e,l).next((g=>ie.forEach(g,(p=>{const y=(function(T,w){return new Pc(w,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((x=>{x.forEach(((T,w)=>{h=h.insert(T,w)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((p,y)=>{const x=y.getKey();h.get(x)===null&&(h=h.insert(x,Xn.newInvalidDocument(x)))}));let g=tc();return h.forEach(((p,y)=>{const x=l.get(p);x!==void 0&&cc(x.mutation,y,Hr.empty(),Ht.now()),sh(t,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ie.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ma(o.createTime)}})(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:tC(o.bundledQuery),readTime:ma(o.readTime)}})(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.overlays=new en(Be.comparator),this.qr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const s=xi();return ie.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),ie.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ie.resolve()}getOverlaysForCollection(e,t,s){const o=xi(),l=t.length+1,h=new Be(t.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new en(((y,x)=>y-x));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let x=l.get(y.largestBatchId);x===null&&(x=xi(),l=l.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const g=xi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,x)=>g.set(y,x))),!(g.size()>=o)););return ie.resolve(g)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new I2(t,s));let l=this.qr.get(t);l===void 0&&(l=xt(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(){this.Qr=new kn(On.$r),this.Ur=new kn(On.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new On(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new On(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Be(new Ft([])),s=new On(t,e),o=new On(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Be(new Ft([])),s=new On(t,e),o=new On(t,e+1);let l=xt();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new On(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class On{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Be.comparator(e.key,t.key)||vt(e.Yr,t.Yr)}static Kr(e,t){return vt(e.Yr,t.Yr)||Be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new kn(On.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new C2(l,t,s,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new On(g.key,l)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,t){return ie.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Ng:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new On(t,0),o=new On(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const g=this.Xr(h.Yr);l.push(g)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kn(vt);return t.forEach((o=>{const l=new On(o,0),h=new On(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(g=>{s=s.add(g.Yr)}))})),ie.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Be.isDocumentKey(l)||(l=l.child(""));const h=new On(new Be(l),0);let g=new kn(vt);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)}),h),ie.resolve(this.ti(g))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ct(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ie.forEach(t.mutations,(o=>{const l=new On(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new On(t,0),o=this.Zr.firstAfterOrEqual(s);return ie.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.ri=e,this.docs=(function(){return new en(Be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ie.resolve(s?s.document.mutableCopy():Xn.newInvalidDocument(t))}getEntries(e,t){let s=Wa();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Xn.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Wa();const h=t.path,g=new Be(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:x}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||FN(GN(x),s)<=0||(o.has(x.key)||sh(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Xe(9500)}ii(e,t){return ie.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new pC(this)}getSize(e){return ie.resolve(this.size)}}class pC extends lC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ie.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.persistence=e,this.si=new Ci((t=>Dg(t)),jg),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.oi=0,this._i=new Lg,this.targetCount=0,this.ai=Po.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ie.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.Pr(t),ie.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=t&&s.get(g.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ie.waitFor(l).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ie.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ie.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ie.resolve(s)}containsKey(e,t){return ie.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(e,t){this.ui={},this.overlays={},this.ci=new th(0),this.li=!1,this.li=!0,this.hi=new fC,this.referenceDelegate=e(this),this.Pi=new yC(this),this.indexManager=new nC,this.remoteDocumentCache=(function(o){return new gC(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new eC(t),this.Ii=new dC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new mC(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){Ie("MemoryPersistence","Starting transaction:",e);const o=new vC(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return ie.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class vC extends $N{constructor(e){super(),this.currentSequenceNumber=e}}class Ug{constructor(e){this.persistence=e,this.Ri=new Lg,this.Vi=null}static mi(e){return new Ug(e)}get fi(){if(this.Vi)return this.Vi;throw Xe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ie.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ie.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(s=>{const o=Be.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,nt.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ie.or([()=>ie.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Gd{constructor(e,t){this.persistence=e,this.pi=new Ci((s=>QN(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=oC(this,t)}static mi(e,t){return new Gd(e,t)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ie.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?ie.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((g=>{g||(s++,l.removeEntry(h,nt.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ie.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ed(e.data.value)),t}br(e,t,s){return ie.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=xt(),o=xt();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Bg(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return QS()?8:KN(Wn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new xC;return this.Ss(e,t,h).next((g=>{if(l.result=g,this.Vs)return this.bs(e,t,h,g.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(To()<=yt.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",Eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(To()<=yt.DEBUG&&Ie("QueryEngine","Query:",Eo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(To()<=yt.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",Eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ha(t))):ie.resolve())}ys(e,t){if(Px(t))return ie.resolve(null);let s=ha(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Xm(t,null,"F"),s=ha(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=xt(...l);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(t,g);return this.Cs(t,y,h,p.readTime)?this.ys(e,Xm(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,s,o){return Px(t)||o.isEqual(nt.min())?ie.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?ie.resolve(null):(To()<=yt.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Eo(t)),this.vs(e,h,t,HN(o,yc)).next((g=>g)))}))}Ds(e,t){let s=new kn(oT(e));return t.forEach(((o,l)=>{sh(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return To()<=yt.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",Eo(t)),this.ps.getDocumentsMatchingQuery(e,t,Ps.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg="LocalStore",_C=3e8;class TC{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new en(vt),this.xs=new Ci((l=>Dg(l)),jg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function EC(a,e,t,s){return new TC(a,e,t,s)}async function DT(a,e){const t=at(a);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],g=[];let p=xt();for(const y of o){h.push(y.batchId);for(const x of y.mutations)p=p.add(x.key)}for(const y of l){g.push(y.batchId);for(const x of y.mutations)p=p.add(x.key)}return t.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:g})))}))}))}function kC(a,e){const t=at(a);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,x){const T=y.batch,w=T.keys();let M=ie.resolve();return w.forEach((F=>{M=M.next((()=>x.getEntry(p,F))).next((B=>{const U=y.docVersions.get(F);Ct(U!==null,48541),B.version.compareTo(U)<0&&(T.applyToRemoteDocument(B,y),B.isValidDocument()&&(B.setReadTime(y.commitVersion),x.addEntry(B)))}))})),M.next((()=>g.mutationQueue.removeMutationBatch(p,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(g){let p=xt();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function jT(a){const e=at(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function SC(a,e){const t=at(a),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const g=[];e.targetChanges.forEach(((x,T)=>{const w=o.get(T);if(!w)return;g.push(t.Pi.removeMatchingKeys(l,x.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,x.addedDocuments,T))));let M=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?M=M.withResumeToken(qn.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):x.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(x.resumeToken,s)),o=o.insert(T,M),(function(B,U,K){return B.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=_C?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(w,M,x)&&g.push(t.Pi.updateTargetData(l,M))}));let p=Wa(),y=xt();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),g.push(wC(l,h,e.documentUpdates).next((x=>{p=x.ks,y=x.qs}))),!s.isEqual(nt.min())){const x=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));g.push(x)}return ie.waitFor(g).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function wC(a,e,t){let s=xt(),o=xt();return t.forEach((l=>s=s.add(l))),e.getEntries(a,s).next((l=>{let h=Wa();return t.forEach(((g,p)=>{const y=l.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(nt.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):Ie(Hg,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function AC(a,e){const t=at(a);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ng),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function RC(a,e){const t=at(a);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,ie.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new Cs(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function tg(a,e,t){const s=at(a),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Yo(h))throw h;Ie(Hg,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Qx(a,e,t){const s=at(a);let o=nt.min(),l=xt();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,x){const T=at(p),w=T.xs.get(x);return w!==void 0?ie.resolve(T.Ms.get(w)):T.Pi.getTargetData(y,x)})(s,h,ha(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,g.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:nt.min(),t?l:xt()))).next((g=>(NC(s,m2(e),g),{documents:g,Qs:l})))))}function NC(a,e,t){let s=a.Os.get(e)||nt.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),a.Os.set(e,s)}class Xx{constructor(){this.activeTargetIds=b2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CC{constructor(){this.Mo=new Xx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xx,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx="ConnectivityMonitor";class Wx{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ie(Zx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ie(Zx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let md=null;function ng(){return md===null?md=(function(){return 268435456+Math.round(2147483648*Math.random())})():md++,"0x"+md.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="RestConnection",DC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Vd?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=ng(),g=this.zo(e,t.toUriEncodedString());Ie(Nm,`Sending RPC '${e}' ${h}:`,g,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:y}=new URL(g),x=Go(y);return this.Jo(e,g,p,s,x).then((T=>(Ie(Nm,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw pc(Nm,`RPC '${e}' ${h} failed with error: `,T,"url: ",g,"request:",s),T}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$o})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=DC[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="WebChannelConnection";class OC extends jC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=ng();return new Promise(((g,p)=>{const y=new O_;y.setWithCredentials(!0),y.listenOnce(P_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Td.NO_ERROR:const T=y.getResponseJson();Ie(Qn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),g(T);break;case Td.TIMEOUT:Ie(Qn,`RPC '${e}' ${h} timed out`),p(new we(ae.DEADLINE_EXCEEDED,"Request time out"));break;case Td.HTTP_ERROR:const w=y.getStatus();if(Ie(Qn,`RPC '${e}' ${h} failed with status:`,w,"response text:",y.getResponseText()),w>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const F=M?.error;if(F&&F.status&&F.message){const B=(function(K){const ee=K.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(ee)>=0?ee:ae.UNKNOWN})(F.status);p(new we(B,F.message))}else p(new we(ae.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new we(ae.UNAVAILABLE,"Connection failed."));break;default:Xe(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{Ie(Qn,`RPC '${e}' ${h} completed.`)}}));const x=JSON.stringify(o);Ie(Qn,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",x,s,15)}))}T_(e,t,s){const o=ng(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=L_(),g=z_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const x=l.join("");Ie(Qn,`Creating RPC '${e}' stream ${o}: ${x}`,p);const T=h.createWebChannel(x,p);this.I_(T);let w=!1,M=!1;const F=new MC({Yo:U=>{M?Ie(Qn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(w||(Ie(Qn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),w=!0),Ie(Qn,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Zo:()=>T.close()}),B=(U,K,ee)=>{U.listen(K,(ne=>{try{ee(ne)}catch(Se){setTimeout((()=>{throw Se}),0)}}))};return B(T,ec.EventType.OPEN,(()=>{M||(Ie(Qn,`RPC '${e}' stream ${o} transport opened.`),F.o_())})),B(T,ec.EventType.CLOSE,(()=>{M||(M=!0,Ie(Qn,`RPC '${e}' stream ${o} transport closed`),F.a_(),this.E_(T))})),B(T,ec.EventType.ERROR,(U=>{M||(M=!0,pc(Qn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),F.a_(new we(ae.UNAVAILABLE,"The operation could not be completed")))})),B(T,ec.EventType.MESSAGE,(U=>{if(!M){const K=U.data[0];Ct(!!K,16349);const ee=K,ne=ee?.error||ee[0]?.error;if(ne){Ie(Qn,`RPC '${e}' stream ${o} received error:`,ne);const Se=ne.status;let Te=(function(A){const N=gn[A];if(N!==void 0)return xT(N)})(Se),xe=ne.message;Te===void 0&&(Te=ae.INTERNAL,xe="Unknown error status: "+Se+" with message "+ne.message),M=!0,F.a_(new we(Te,xe)),T.close()}else Ie(Qn,`RPC '${e}' stream ${o} received:`,K),F.u_(K)}})),B(g,V_.STAT_EVENT,(U=>{U.stat===Gm.PROXY?Ie(Qn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Gm.NOPROXY&&Ie(Qn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{F.__()}),0),F}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Cm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(a){return new U2(a,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&Ie("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="PersistentStream";class OT{constructor(e,t,s,o,l,h,g,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MT(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Za(t.toString()),Za("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ae.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new we(ae.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(Jx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ie(Jx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PC extends OT{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=G2(this.serializer,e),s=(function(l){if(!("targetChange"in l))return nt.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?nt.min():h.readTime?ma(h.readTime):nt.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=eg(this.serializer),t.addTarget=(function(l,h){let g;const p=h.target;if(g=Ym(p)?{documents:$2(l,p)}:{query:K2(l,p).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=TT(l,h.resumeToken);const y=Zm(l,h.expectedCount);y!==null&&(g.expectedCount=y)}else if(h.snapshotVersion.compareTo(nt.min())>0){g.readTime=Hd(l,h.snapshotVersion.toTimestamp());const y=Zm(l,h.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const s=Q2(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=eg(this.serializer),t.removeTarget=e,this.q_(t)}}class VC extends OT{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=q2(e.writeResults,e.commitTime),s=ma(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=eg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>F2(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{}class LC extends zC{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new we(ae.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,Wm(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ae.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,Wm(t,s),o,h,g,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new we(ae.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class UC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Za(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="RemoteStore";class BC{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Di(this)&&(Ie(Ai,"Restarting streams for network reachability change."),await(async function(p){const y=at(p);y.Ea.add(4),await Lc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await uh(y)})(this))}))})),this.Ra=new UC(s,o)}}async function uh(a){if(Di(a))for(const e of a.da)await e(!0)}async function Lc(a){for(const e of a.da)await e(!1)}function PT(a,e){const t=at(a);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$g(t)?qg(t):Qo(t).O_()&&Fg(t,e))}function Gg(a,e){const t=at(a),s=Qo(t);t.Ia.delete(e),s.O_()&&VT(t,e),t.Ia.size===0&&(s.O_()?s.L_():Di(t)&&t.Ra.set("Unknown"))}function Fg(a,e){if(a.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(nt.min())>0){const t=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Qo(a).Y_(e)}function VT(a,e){a.Va.Ue(e),Qo(a).Z_(e)}function qg(a){a.Va=new P2({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),At:e=>a.Ia.get(e)||null,ht:()=>a.datastore.serializer.databaseId}),Qo(a).start(),a.Ra.ua()}function $g(a){return Di(a)&&!Qo(a).x_()&&a.Ia.size>0}function Di(a){return at(a).Ea.size===0}function zT(a){a.Va=void 0}async function HC(a){a.Ra.set("Online")}async function GC(a){a.Ia.forEach(((e,t)=>{Fg(a,e)}))}async function FC(a,e){zT(a),$g(a)?(a.Ra.ha(e),qg(a)):a.Ra.set("Unknown")}async function qC(a,e,t){if(a.Ra.set("Online"),e instanceof _T&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const g of l.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(a,e)}catch(s){Ie(Ai,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Fd(a,s)}else if(e instanceof wd?a.Va.Ze(e):e instanceof bT?a.Va.st(e):a.Va.tt(e),!t.isEqual(nt.min()))try{const s=await jT(a.localStore);t.compareTo(s)>=0&&await(function(l,h){const g=l.Va.Tt(h);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const x=l.Ia.get(y);x&&l.Ia.set(y,x.withResumeToken(p.resumeToken,h))}})),g.targetMismatches.forEach(((p,y)=>{const x=l.Ia.get(p);if(!x)return;l.Ia.set(p,x.withResumeToken(qn.EMPTY_BYTE_STRING,x.snapshotVersion)),VT(l,p);const T=new Cs(x.target,p,y,x.sequenceNumber);Fg(l,T)})),l.remoteSyncer.applyRemoteEvent(g)})(a,t)}catch(s){Ie(Ai,"Failed to raise snapshot:",s),await Fd(a,s)}}async function Fd(a,e,t){if(!Yo(e))throw e;a.Ea.add(1),await Lc(a),a.Ra.set("Offline"),t||(t=()=>jT(a.localStore)),a.asyncQueue.enqueueRetryable((async()=>{Ie(Ai,"Retrying IndexedDB access"),await t(),a.Ea.delete(1),await uh(a)}))}function LT(a,e){return e().catch((t=>Fd(a,t,e)))}async function dh(a){const e=at(a),t=Us(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ng;for(;$C(e);)try{const o=await AC(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,KC(e,o)}catch(o){await Fd(e,o)}UT(e)&&BT(e)}function $C(a){return Di(a)&&a.Ta.length<10}function KC(a,e){a.Ta.push(e);const t=Us(a);t.O_()&&t.X_&&t.ea(e.mutations)}function UT(a){return Di(a)&&!Us(a).x_()&&a.Ta.length>0}function BT(a){Us(a).start()}async function YC(a){Us(a).ra()}async function QC(a){const e=Us(a);for(const t of a.Ta)e.ea(t.mutations)}async function XC(a,e,t){const s=a.Ta.shift(),o=Pg.from(s,e,t);await LT(a,(()=>a.remoteSyncer.applySuccessfulWrite(o))),await dh(a)}async function ZC(a,e){e&&Us(a).X_&&await(async function(s,o){if((function(h){return j2(h)&&h!==ae.ABORTED})(o.code)){const l=s.Ta.shift();Us(s).B_(),await LT(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await dh(s)}})(a,e),UT(a)&&BT(a)}async function eb(a,e){const t=at(a);t.asyncQueue.verifyOperationInProgress(),Ie(Ai,"RemoteStore received new credentials");const s=Di(t);t.Ea.add(3),await Lc(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await uh(t)}async function WC(a,e){const t=at(a);e?(t.Ea.delete(2),await uh(t)):e||(t.Ea.add(2),await Lc(t),t.Ra.set("Unknown"))}function Qo(a){return a.ma||(a.ma=(function(t,s,o){const l=at(t);return l.sa(),new PC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(a.datastore,a.asyncQueue,{Xo:HC.bind(null,a),t_:GC.bind(null,a),r_:FC.bind(null,a),H_:qC.bind(null,a)}),a.da.push((async e=>{e?(a.ma.B_(),$g(a)?qg(a):a.Ra.set("Unknown")):(await a.ma.stop(),zT(a))}))),a.ma}function Us(a){return a.fa||(a.fa=(function(t,s,o){const l=at(t);return l.sa(),new VC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(a.datastore,a.asyncQueue,{Xo:()=>Promise.resolve(),t_:YC.bind(null,a),r_:ZC.bind(null,a),ta:QC.bind(null,a),na:XC.bind(null,a)}),a.da.push((async e=>{e?(a.fa.B_(),await dh(a)):(await a.fa.stop(),a.Ta.length>0&&(Ie(Ai,`Stopping write stream with ${a.Ta.length} pending writes`),a.Ta=[]))}))),a.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Ka,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,g=new Kg(e,t,h,o,l);return g.start(s),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yg(a,e){if(Za("AsyncQueue",`${e}: ${a}`),Yo(a))return new we(ae.UNAVAILABLE,`${e}: ${a}`);throw a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Be.comparator(t.key,s.key):(t,s)=>Be.comparator(t.key,s.key),this.keyedMap=tc(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(){this.ga=new en(Be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Xe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Vo{constructor(e,t,s,o,l,h,g,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((g=>{h.push({type:0,doc:g})})),new Vo(e,t,Co.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class eI{constructor(){this.queries=nb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=at(t),l=o.queries;o.queries=nb(),l.forEach(((h,g)=>{for(const p of g.Sa)p.onError(s)}))})(this,new we(ae.ABORTED,"Firestore shutting down"))}}function nb(){return new Ci((a=>iT(a)),ah)}async function HT(a,e){const t=at(a);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new JC,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const g=Yg(h,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(g)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Qg(t)}async function GT(a,e){const t=at(a),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function tI(a,e){const t=at(a);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const g of h.Sa)g.Fa(o)&&(s=!0);h.wa=o}}s&&Qg(t)}function nI(a,e,t){const s=at(a),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Qg(a){a.Ca.forEach((e=>{e.next()}))}var rg,rb;(rb=rg||(rg={})).Ma="default",rb.Cache="cache";class FT{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Vo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e){this.key=e}}class $T{constructor(e){this.key=e}}class rI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=oT(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new tb,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,T)=>{const w=o.get(x),M=sh(this.query,T)?T:null,F=!!w&&this.mutatedKeys.has(w.key),B=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let U=!1;w&&M?w.data.isEqual(M.data)?F!==B&&(s.track({type:3,doc:M}),U=!0):this.su(w,M)||(s.track({type:2,doc:M}),U=!0,(p&&this.eu(M,p)>0||y&&this.eu(M,y)<0)&&(g=!0)):!w&&M?(s.track({type:0,doc:M}),U=!0):w&&!M&&(s.track({type:1,doc:w}),U=!0,(p||y)&&(g=!0)),U&&(M?(h=h.add(M),l=B?l.add(x):l.delete(x)):(h=h.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const x=this.query.limitType==="F"?h.last():h.first();h=h.delete(x.key),l=l.delete(x.key),s.track({type:1,doc:x})}return{tu:h,iu:s,Cs:g,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((x,T)=>(function(M,F){const B=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xe(20277,{Rt:U})}};return B(M)-B(F)})(x.type,T.type)||this.eu(x.doc,T.doc))),this.ou(s),o=o??!1;const g=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,h.length!==0||y?{snapshot:new Vo(this.query,e.tu,l,h,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new $T(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new qT(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=xt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xg="SyncEngine";class aI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class sI{constructor(e){this.key=e,this.hu=!1}}class iI{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ci((g=>iT(g)),ah),this.Iu=new Map,this.Eu=new Set,this.du=new en(Be.comparator),this.Au=new Map,this.Ru=new Lg,this.Vu={},this.mu=new Map,this.fu=Po.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function oI(a,e,t=!0){const s=WT(a);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await KT(s,e,t,!0),o}async function lI(a,e){const t=WT(a);await KT(t,e,!0,!1)}async function KT(a,e,t,s){const o=await RC(a.localStore,ha(e)),l=o.targetId,h=a.sharedClientState.addLocalQueryTarget(l,t);let g;return s&&(g=await cI(a,e,l,h==="current",o.resumeToken)),a.isPrimaryClient&&t&&PT(a.remoteStore,o),g}async function cI(a,e,t,s,o){a.pu=(T,w,M)=>(async function(B,U,K,ee){let ne=U.view.ru(K);ne.Cs&&(ne=await Qx(B.localStore,U.query,!1).then((({documents:R})=>U.view.ru(R,ne))));const Se=ee&&ee.targetChanges.get(U.targetId),Te=ee&&ee.targetMismatches.get(U.targetId)!=null,xe=U.view.applyChanges(ne,B.isPrimaryClient,Se,Te);return sb(B,U.targetId,xe.au),xe.snapshot})(a,T,w,M);const l=await Qx(a.localStore,e,!0),h=new rI(e,l.Qs),g=h.ru(l.documents),p=zc.createSynthesizedTargetChangeForCurrentChange(t,s&&a.onlineState!=="Offline",o),y=h.applyChanges(g,a.isPrimaryClient,p);sb(a,t,y.au);const x=new aI(e,t,h);return a.Tu.set(e,x),a.Iu.has(t)?a.Iu.get(t).push(e):a.Iu.set(t,[e]),y.snapshot}async function uI(a,e,t){const s=at(a),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!ah(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await tg(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Gg(s.remoteStore,o.targetId),ag(s,o.targetId)})).catch(Ko)):(ag(s,o.targetId),await tg(s.localStore,o.targetId,!0))}async function dI(a,e){const t=at(a),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Gg(t.remoteStore,s.targetId))}async function hI(a,e,t){const s=xI(a);try{const o=await(function(h,g){const p=at(h),y=Ht.now(),x=g.reduce(((M,F)=>M.add(F.key)),xt());let T,w;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let F=Wa(),B=xt();return p.Ns.getEntries(M,x).next((U=>{F=U,F.forEach(((K,ee)=>{ee.isValidDocument()||(B=B.add(K))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,F))).next((U=>{T=U;const K=[];for(const ee of g){const ne=R2(ee,T.get(ee.key).overlayedDocument);ne!=null&&K.push(new Ii(ee.key,ne,W_(ne.value.mapValue),fa.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,K,g)})).next((U=>{w=U;const K=U.applyToLocalDocumentSet(T,B);return p.documentOverlayCache.saveOverlays(M,U.batchId,K)}))})).then((()=>({batchId:w.batchId,changes:cT(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,g,p){let y=h.Vu[h.currentUser.toKey()];y||(y=new en(vt)),y=y.insert(g,p),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Uc(s,o.changes),await dh(s.remoteStore)}catch(o){const l=Yg(o,"Failed to persist write");t.reject(l)}}async function YT(a,e){const t=at(a);try{const s=await SC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(Ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ct(h.hu,14607):o.removedDocuments.size>0&&(Ct(h.hu,42227),h.hu=!1))})),await Uc(t,s,e)}catch(s){await Ko(s)}}function ab(a,e,t){const s=at(a);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const p=at(h);p.onlineState=g;let y=!1;p.queries.forEach(((x,T)=>{for(const w of T.Sa)w.va(g)&&(y=!0)})),y&&Qg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function fI(a,e,t){const s=at(a);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new en(Be.comparator);h=h.insert(l,Xn.newNoDocument(l,nt.min()));const g=xt().add(l),p=new lh(nt.min(),new Map,new en(vt),h,g);await YT(s,p),s.du=s.du.remove(l),s.Au.delete(e),Zg(s)}else await tg(s.localStore,e,!1).then((()=>ag(s,e,t))).catch(Ko)}async function mI(a,e){const t=at(a),s=e.batch.batchId;try{const o=await kC(t.localStore,e);XT(t,s,null),QT(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Uc(t,o)}catch(o){await Ko(o)}}async function gI(a,e,t){const s=at(a);try{const o=await(function(h,g){const p=at(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return p.mutationQueue.lookupMutationBatch(y,g).next((T=>(Ct(T!==null,37113),x=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,x,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>p.localDocuments.getDocuments(y,x)))}))})(s.localStore,e);XT(s,e,t),QT(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Uc(s,o)}catch(o){await Ko(o)}}function QT(a,e){(a.mu.get(e)||[]).forEach((t=>{t.resolve()})),a.mu.delete(e)}function XT(a,e,t){const s=at(a);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function ag(a,e,t=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Iu.get(e))a.Tu.delete(s),t&&a.Pu.yu(s,t);a.Iu.delete(e),a.isPrimaryClient&&a.Ru.jr(e).forEach((s=>{a.Ru.containsKey(s)||ZT(a,s)}))}function ZT(a,e){a.Eu.delete(e.path.canonicalString());const t=a.du.get(e);t!==null&&(Gg(a.remoteStore,t),a.du=a.du.remove(e),a.Au.delete(t),Zg(a))}function sb(a,e,t){for(const s of t)s instanceof qT?(a.Ru.addReference(s.key,e),pI(a,s)):s instanceof $T?(Ie(Xg,"Document no longer in limbo: "+s.key),a.Ru.removeReference(s.key,e),a.Ru.containsKey(s.key)||ZT(a,s.key)):Xe(19791,{wu:s})}function pI(a,e){const t=e.key,s=t.path.canonicalString();a.du.get(t)||a.Eu.has(s)||(Ie(Xg,"New document in limbo: "+t),a.Eu.add(s),Zg(a))}function Zg(a){for(;a.Eu.size>0&&a.du.size<a.maxConcurrentLimboResolutions;){const e=a.Eu.values().next().value;a.Eu.delete(e);const t=new Be(Ft.fromString(e)),s=a.fu.next();a.Au.set(s,new sI(t)),a.du=a.du.insert(t,s),PT(a.remoteStore,new Cs(ha(Mg(t.path)),s,"TargetPurposeLimboResolution",th.ce))}}async function Uc(a,e,t){const s=at(a),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((g,p)=>{h.push(s.pu(p,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const x=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(y){o.push(y);const x=Bg.As(p.targetId,y);l.push(x)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(p,y){const x=at(p);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ie.forEach(y,(w=>ie.forEach(w.Es,(M=>x.persistence.referenceDelegate.addReference(T,w.targetId,M))).next((()=>ie.forEach(w.ds,(M=>x.persistence.referenceDelegate.removeReference(T,w.targetId,M)))))))))}catch(T){if(!Yo(T))throw T;Ie(Hg,"Failed to update sequence numbers: "+T)}for(const T of y){const w=T.targetId;if(!T.fromCache){const M=x.Ms.get(w),F=M.snapshotVersion,B=M.withLastLimboFreeSnapshotVersion(F);x.Ms=x.Ms.insert(w,B)}}})(s.localStore,l))}async function yI(a,e){const t=at(a);if(!t.currentUser.isEqual(e)){Ie(Xg,"User change. New user:",e.toKey());const s=await DT(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((g=>{g.forEach((p=>{p.reject(new we(ae.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Uc(t,s.Ls)}}function vI(a,e){const t=at(a),s=t.Au.get(e);if(s&&s.hu)return xt().add(s.key);{let o=xt();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const g=t.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function WT(a){const e=at(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=YT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fI.bind(null,e),e.Pu.H_=tI.bind(null,e.eventManager),e.Pu.yu=nI.bind(null,e.eventManager),e}function xI(a){const e=at(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gI.bind(null,e),e}class qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return EC(this.persistence,new bC,e.initialUser,this.serializer)}Cu(e){return new IT(Ug.mi,this.serializer)}Du(e){return new CC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qd.provider={build:()=>new qd};class bI extends qd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ct(this.persistence.referenceDelegate instanceof Gd,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new sC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new IT((s=>Gd.mi(s,t)),this.serializer)}}class sg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ab(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=yI.bind(null,this.syncEngine),await WC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new eI})()}createDatastore(e){const t=ch(e.databaseInfo.databaseId),s=(function(l){return new OC(l)})(e.databaseInfo);return(function(l,h,g,p){return new LC(l,h,g,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,g){return new BC(s,o,l,h,g)})(this.localStore,this.datastore,e.asyncQueue,(t=>ab(this.syncEngine,t,0)),(function(){return Wx.v()?new Wx:new IC})())}createSyncEngine(e,t){return(function(o,l,h,g,p,y,x){const T=new iI(o,l,h,g,p,y);return x&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=at(t);Ie(Ai,"RemoteStore shutting down."),s.Ea.add(5),await Lc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}sg.provider={build:()=>new sg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Za("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="FirestoreClient";class _I{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=or.UNAUTHENTICATED,this.clientId=Rg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{Ie(Bs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(Ie(Bs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ka;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Yg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Im(a,e){a.asyncQueue.verifyOperationInProgress(),Ie(Bs,"Initializing OfflineComponentProvider");const t=a.configuration;await e.initialize(t);let s=t.initialUser;a.setCredentialChangeListener((async o=>{s.isEqual(o)||(await DT(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>a.terminate())),a._offlineComponents=e}async function ib(a,e){a.asyncQueue.verifyOperationInProgress();const t=await TI(a);Ie(Bs,"Initializing OnlineComponentProvider"),await e.initialize(t,a.configuration),a.setCredentialChangeListener((s=>eb(e.remoteStore,s))),a.setAppCheckTokenChangeListener(((s,o)=>eb(e.remoteStore,o))),a._onlineComponents=e}async function TI(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){Ie(Bs,"Using user provided OfflineComponentProvider");try{await Im(a,a._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ae.FAILED_PRECONDITION||o.code===ae.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;pc("Error using user provided cache. Falling back to memory cache: "+t),await Im(a,new qd)}}else Ie(Bs,"Using default OfflineComponentProvider"),await Im(a,new bI(void 0));return a._offlineComponents}async function eE(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(Ie(Bs,"Using user provided OnlineComponentProvider"),await ib(a,a._uninitializedComponentsProvider._online)):(Ie(Bs,"Using default OnlineComponentProvider"),await ib(a,new sg))),a._onlineComponents}function EI(a){return eE(a).then((e=>e.syncEngine))}async function tE(a){const e=await eE(a),t=e.eventManager;return t.onListen=oI.bind(null,e.syncEngine),t.onUnlisten=uI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dI.bind(null,e.syncEngine),t}function kI(a,e,t={}){const s=new Ka;return a.asyncQueue.enqueueAndForget((async()=>(function(l,h,g,p,y){const x=new JT({next:w=>{x.Nu(),h.enqueueAndForget((()=>GT(l,T)));const M=w.docs.has(g);!M&&w.fromCache?y.reject(new we(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&w.fromCache&&p&&p.source==="server"?y.reject(new we(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),T=new FT(Mg(g.path),x,{includeMetadataChanges:!0,qa:!0});return HT(l,T)})(await tE(a),a.asyncQueue,e,t,s))),s.promise}function SI(a,e,t={}){const s=new Ka;return a.asyncQueue.enqueueAndForget((async()=>(function(l,h,g,p,y){const x=new JT({next:w=>{x.Nu(),h.enqueueAndForget((()=>GT(l,T))),w.fromCache&&p.source==="server"?y.reject(new we(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),T=new FT(g,x,{includeMetadataChanges:!0,qa:!0});return HT(l,T)})(await tE(a),a.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(a){const e={};return a.timeoutSeconds!==void 0&&(e.timeoutSeconds=a.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="firestore.googleapis.com",lb=!0;class cb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wI,this.ssl=lb}else this.host=e.host,this.ssl=e.ssl??lb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CT)throw new we(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(ae.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wg{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new DN;switch(s.type){case"firstParty":return new ON(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new we(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=ob.get(t);s&&(Ie("ComponentProvider","Removing Datastore"),ob.delete(t),s.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Xo(this.firestore,e,this._query)}}class vn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}toJSON(){return{type:vn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Oc(t,vn._jsonSchema))return new vn(e,s||null,new Be(Ft.fromString(t.referencePath)))}}vn._jsonSchemaVersion="firestore/documentReference/1.0",vn._jsonSchema={type:yn("string",vn._jsonSchemaVersion),referencePath:yn("string")};class Os extends Xo{constructor(e,t,s){super(e,t,Mg(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new Be(e))}withConverter(e){return new Os(this.firestore,e,this._path)}}function Jg(a,e,...t){if(a=nr(a),B_("collection","path",e),a instanceof Wg){const s=Ft.fromString(e,...t);return Tx(s),new Os(a,null,s)}{if(!(a instanceof vn||a instanceof Os))throw new we(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Ft.fromString(e,...t));return Tx(s),new Os(a.firestore,null,s)}}function ep(a,e,...t){if(a=nr(a),arguments.length===1&&(e=Rg.newId()),B_("doc","path",e),a instanceof Wg){const s=Ft.fromString(e,...t);return _x(s),new vn(a,null,new Be(s))}{if(!(a instanceof vn||a instanceof Os))throw new we(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child(Ft.fromString(e,...t));return _x(s),new vn(a.firestore,a instanceof Os?a.converter:null,new Be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="AsyncQueue";class db{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MT(this,"async_queue_retry"),this._c=()=>{const s=Cm();s&&Ie(ub,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Cm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Cm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ka;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Yo(e))throw e;Ie(ub,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Za("INTERNAL UNHANDLED ERROR: ",hb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Kg.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Xe(47125,{Pc:hb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function hb(a){let e=a.message||"";return a.stack&&(e=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),e}class Bc extends Wg{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new db,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new db(e),this._firestoreClient=void 0,await e}}}function AI(a,e,t){t||(t=Vd);const s=vg(a,"firestore");if(s.isInitialized(t)){const o=s.getImmediate({identifier:t}),l=s.getOptions(t);if(_i(l,e))return o;throw new we(ae.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new we(ae.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CT)throw new we(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Go(e.host)&&Kb(e.host),s.initialize({options:e,instanceIdentifier:t})}function tp(a){if(a._terminated)throw new we(ae.FAILED_PRECONDITION,"The client has already been terminated.");return a._firestoreClient||RI(a),a._firestoreClient}function RI(a){const e=a._freezeSettings(),t=(function(o,l,h,g){return new WN(o,l,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,nE(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(a._databaseId,a._app?.options.appId||"",a._persistenceKey,e);a._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(a._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),a._firestoreClient=new _I(a._authCredentials,a._appCheckCredentials,a._queue,t,a._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(a._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mr(qn.fromBase64String(e))}catch(t){throw new we(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mr(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,Mr._jsonSchema))return Mr.fromBase64String(e.bytes)}}Mr._jsonSchemaVersion="firestore/bytes/1.0",Mr._jsonSchema={type:yn("string",Mr._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return vt(this._lat,e._lat)||vt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ga._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,ga._jsonSchema))return new ga(e.latitude,e.longitude)}}ga._jsonSchemaVersion="firestore/geoPoint/1.0",ga._jsonSchema={type:yn("string",ga._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pa._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,pa._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pa(e.vectorValues);throw new we(ae.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pa._jsonSchemaVersion="firestore/vectorValue/1.0",pa._jsonSchema={type:yn("string",pa._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=/^__.*__$/;class CI{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,t,this.fieldTransforms):new Vc(e,this.data,t,this.fieldTransforms)}}function rE(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xe(40011,{Ac:a})}}class ap{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return $d(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rE(this.Ac)&&NI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class II{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||ch(e)}Cc(e,t,s,o=!1){return new ap({Ac:e,methodName:t,Dc:s,path:Fn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sp(a){const e=a._freezeSettings(),t=ch(a._databaseId);return new II(a._databaseId,!!e.ignoreUndefinedProperties,t)}function aE(a,e,t,s,o,l={}){const h=a.Cc(l.merge||l.mergeFields?2:0,e,t,o);oE("Data must be an object, but it was:",h,s);const g=sE(s,h);let p,y;if(l.merge)p=new Hr(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const x=[];for(const T of l.mergeFields){const w=jI(e,T,t);if(!h.contains(w))throw new we(ae.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);OI(x,w)||x.push(w)}p=new Hr(x),y=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=h.fieldTransforms;return new CI(new jr(g),p,y)}class ip extends rp{_toFieldTransform(e){return new k2(e.path,new _c)}isEqual(e){return e instanceof ip}}function DI(a,e,t,s=!1){return op(t,a.Cc(s?4:3,e))}function op(a,e){if(iE(a=nr(a)))return oE("Unsupported field value:",e,a),sE(a,e);if(a instanceof rp)return(function(s,o){if(!rE(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(a,e),null;if(a===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const g of s){let p=op(g,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(a,e)}return(function(s,o){if((s=nr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return _2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Ht.fromDate(s);return{timestampValue:Hd(o.serializer,l)}}if(s instanceof Ht){const l=new Ht(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Hd(o.serializer,l)}}if(s instanceof ga)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Mr)return{bytesValue:TT(o.serializer,s._byteString)};if(s instanceof vn){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:zg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof pa)return(function(h,g){return{mapValue:{fields:{[X_]:{stringValue:Z_},[zd]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return Og(g.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${eh(s)}`)})(a,e)}function sE(a,e){const t={};return F_(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(a,((s,o)=>{const l=op(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function iE(a){return!(typeof a!="object"||a===null||a instanceof Array||a instanceof Date||a instanceof Ht||a instanceof ga||a instanceof Mr||a instanceof vn||a instanceof rp||a instanceof pa)}function oE(a,e,t){if(!iE(t)||!H_(t)){const s=eh(t);throw s==="an object"?e.Sc(a+" a custom object"):e.Sc(a+" "+s)}}function jI(a,e,t){if((e=nr(e))instanceof np)return e._internalPath;if(typeof e=="string")return lE(a,e);throw $d("Field path arguments must be of type string or ",a,!1,void 0,t)}const MI=new RegExp("[~\\*/\\[\\]]");function lE(a,e,t){if(e.search(MI)>=0)throw $d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,t);try{return new np(...e.split("."))._internalPath}catch{throw $d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,t)}}function $d(a,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new we(ae.INVALID_ARGUMENT,g+a+p)}function OI(a,e){return a.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new PI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(lp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class PI extends cE{data(){return super.data()}}function lp(a,e){return typeof e=="string"?lE(a,e):e instanceof np?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(a){if(a.limitType==="L"&&a.explicitOrderBy.length===0)throw new we(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cp{}class zI extends cp{}function LI(a,e,...t){let s=[];e instanceof cp&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((p=>p instanceof up)).length,g=l.filter((p=>p instanceof hh)).length;if(h>1||h>0&&g>0)throw new we(ae.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)a=o._apply(a);return a}class hh extends zI{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new hh(e,t,s)}_apply(e){const t=this._parse(e);return uE(e._query,t),new Xo(e.firestore,e.converter,Qm(e._query,t))}_parse(e){const t=sp(e.firestore);return(function(l,h,g,p,y,x,T){let w;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new we(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){mb(T,x);const F=[];for(const B of T)F.push(fb(p,l,B));w={arrayValue:{values:F}}}else w=fb(p,l,T)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||mb(T,x),w=DI(g,h,T,x==="in"||x==="not-in");return pn.create(y,x,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function UI(a,e,t){const s=e,o=lp("where",a);return hh._create(o,s,t)}class up extends cp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new up(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:qr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const g=l.getFlattenedFilters();for(const p of g)uE(h,p),h=Qm(h,p)})(e._query,t),new Xo(e.firestore,e.converter,Qm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function fb(a,e,t){if(typeof(t=nr(t))=="string"){if(t==="")throw new we(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sT(e)&&t.indexOf("/")!==-1)throw new we(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ft.fromString(t));if(!Be.isDocumentKey(s))throw new we(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Cx(a,new Be(s))}if(t instanceof vn)return Cx(a,t._key);throw new we(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eh(t)}.`)}function mb(a,e){if(!Array.isArray(a)||a.length===0)throw new we(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uE(a,e){const t=(function(o,l){for(const h of o)for(const g of h.getFlattenedFilters())if(l.indexOf(g.op)>=0)return g.op;return null})(a.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(ae.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ae.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class BI{convertValue(e,t="none"){switch(Ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ni(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[zd].arrayValue?.values?.map((s=>un(s.doubleValue)));return new pa(t)}convertGeoPoint(e){return new ga(un(e.latitude),un(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=rh(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){const t=Vs(e);return new Ht(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ft.fromString(e);Ct(RT(s),9688,{name:e});const o=new xc(s.get(1),s.get(3)),l=new Be(s.popFirst(5));return o.isEqual(t)||Za(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(a,e,t){let s;return s=a?t&&(t.merge||t.mergeFields)?a.toFirestore(e,t):a.toFirestore(e):e,s}class rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bi extends cE{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ad(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(lp("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ae.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=bi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}bi._jsonSchemaVersion="firestore/documentSnapshot/1.0",bi._jsonSchema={type:yn("string",bi._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class Ad extends bi{data(e={}){return super.data(e)}}class Io{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new rc(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Ad(this._firestore,this._userDataWriter,s.key,s,new rc(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const p=new Ad(o._firestore,o._userDataWriter,g.doc.key,g.doc,new rc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>l||g.type!==3)).map((g=>{const p=new Ad(o._firestore,o._userDataWriter,g.doc.key,g.doc,new rc(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return g.type!==0&&(y=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),x=h.indexOf(g.doc.key)),{type:HI(g.type),doc:p,oldIndex:y,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ae.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Io._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HI(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xe(61501,{type:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(a){a=wi(a,vn);const e=wi(a.firestore,Bc);return kI(tp(e),a._key).then((t=>qI(e,a,t)))}Io._jsonSchemaVersion="firestore/querySnapshot/1.0",Io._jsonSchema={type:yn("string",Io._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class fE extends BI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}function GI(a){a=wi(a,Xo);const e=wi(a.firestore,Bc),t=tp(e),s=new fE(e);return VI(a._query),SI(t,a._query).then((o=>new Io(e,s,a,o)))}function FI(a,e,t){a=wi(a,vn);const s=wi(a.firestore,Bc),o=dE(a.converter,e,t);return gE(s,[aE(sp(s),"setDoc",a._key,o,a.converter!==null,t).toMutation(a._key,fa.none())])}function mE(a,e){const t=wi(a.firestore,Bc),s=ep(a),o=dE(a.converter,e);return gE(t,[aE(sp(a.firestore),"addDoc",s._key,o,a.converter!==null,{}).toMutation(s._key,fa.exists(!1))]).then((()=>s))}function gE(a,e){return(function(s,o){const l=new Ka;return s.asyncQueue.enqueueAndForget((async()=>hI(await EI(s),o,l))),l.promise})(tp(a),e)}function qI(a,e,t){const s=t.docs.get(e._key),o=new fE(a);return new bi(a,o,e._key,s,new rc(t.hasPendingWrites,t.fromCache),e.converter)}function $I(){return new ip("serverTimestamp")}(function(e,t=!0){(function(o){$o=o})(Fo),Do(new Ti("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),g=new Bc(new jN(s.getProvider("auth-internal")),new PN(h,s.getProvider("app-check-internal")),(function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new we(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xc(y.options.projectId,x)})(h,o),h);return l={useFetchStreams:t,...l},g._setSettings(l),g}),"PUBLIC").setMultipleInstances(!0)),js(yx,vx,e),js(yx,vx,"esm2020")})();const KI={apiKey:"AIzaSyBj5D2l-lSzekgRUF6w164G5xawAbqKV58",authDomain:"neurolearn-c8df8.firebaseapp.com",projectId:"neurolearn-c8df8",storageBucket:"neurolearn-c8df8.firebasestorage.app",messagingSenderId:"1060414258301",appId:"1:1060414258301:web:86a11e8b84e7d05de10514",measurementId:"G-ZBX8RCHB1X"},pE=rA().length?Zb():Xb(KI),gd=AN(pE),YI={experimentalForceLongPolling:!0,experimentalLongPollingOptions:{timeoutSeconds:10}},Hc=globalThis.__FIREBASE_DB__??(globalThis.__FIREBASE_DB__=AI(pE,YI)),QI=async(a,e)=>{if(!a)throw new Error("UID boş geldi");const t=ep(Hc,"users",a);return await FI(t,{uid:a,...e,createdAt:$I()},{merge:!0}),(await hE(t)).data()},XI=async a=>{const e=ep(Hc,"users",a),t=await hE(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt.toDate()}:null},ZI=async a=>(await mE(Jg(Hc,"activities"),{...a,createdAt:Ht.now()})).id,WI=async a=>{try{const e=await mE(Jg(Hc,"story_attention_games"),{...a,createdAt:Ht.now()});return await ZI({studentId:a.studentId,type:"story-attention",score:a.score,duration:a.duration,metadata:{theme:a.storyTheme,attentionScores:{selective:a.attentionData.selectiveAttention,sustained:a.attentionData.sustainedAttention,divided:a.attentionData.dividedAttention,impulseControl:a.attentionData.impulseControl},performance:{accuracy:a.attentionData.accuracy,avgReactionTime:a.attentionData.avgReactionTime,distractorClicks:a.attentionData.distractorClicks}}}),console.log("Story attention game data saved successfully:",e.id),e.id}catch(e){throw console.error("Error saving story attention game data:",e),e}},yE=E.createContext(void 0),ba=()=>{const a=E.useContext(yE);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a},JI=({children:a})=>{const[e,t]=E.useState(null),[s,o]=E.useState(!0);E.useEffect(()=>gR(gd,async x=>{if(x){const T=await XI(x.uid);t(T||{id:x.uid,name:x.displayName||"",email:x.email||"",role:"teacher",createdAt:new Date})}else t(null);o(!1)}),[]);const p={currentUser:e,loading:s,login:async(y,x)=>{await hR(gd,y,x)},register:async(y,x,T,w="teacher",M,F)=>{const B=await dR(gd,y,x),U=B.user?.uid;if(!U)throw new Error("Kullanıcı UID alınamadı");const K={email:B.user.email??y,name:T,role:w,...M&&{age:M},...F&&{teacherId:F}};await QI(U,K),t({id:U,name:T,email:y,role:w,...M&&{age:M},...F&&{teacherId:F},createdAt:new Date})},logout:async()=>{await pR(gd),t(null)}};return u.jsx(yE.Provider,{value:p,children:a})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),tD=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),gb=a=>{const e=tD(a);return e.charAt(0).toUpperCase()+e.slice(1)},vE=(...a)=>a.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),nD=a=>{for(const e in a)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=E.forwardRef(({color:a="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:h,...g},p)=>E.createElement("svg",{ref:p,...rD,width:e,height:e,stroke:a,strokeWidth:s?Number(t)*24/Number(e):t,className:vE("lucide",o),...!l&&!nD(g)&&{"aria-hidden":"true"},...g},[...h.map(([y,x])=>E.createElement(y,x)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(a,e)=>{const t=E.forwardRef(({className:s,...o},l)=>E.createElement(aD,{ref:l,iconNode:e,className:vE(`lucide-${eD(gb(a))}`,`lucide-${a}`,s),...o}));return t.displayName=gb(a),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],pb=bt("award",sD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],oD=bt("book-open",iD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],cr=bt("brain",lD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],uD=bt("calendar",cD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ur=bt("camera",dD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],fD=bt("chart-column",hD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fh=bt("circle-alert",mD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pD=bt("circle-check-big",gD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],va=bt("clock",yD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kc=bt("eye",vD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],bD=bt("hash",xD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],TD=bt("heart",_D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],yb=bt("info",ED);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ig=bt("lightbulb",kD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],zo=bt("lock",SD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],xE=bt("log-in",wD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],bE=bt("log-out",AD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],mh=bt("mail",RD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],CD=bt("mouse-pointer",ND);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_E=bt("palette",ID);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],vb=bt("pause",DD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],dp=bt("play",jD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Gc=bt("rotate-ccw",MD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],TE=bt("sparkles",OD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Sc=bt("star",PD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ur=bt("target",VD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],hp=bt("trending-up",zD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],xb=bt("triangle-alert",LD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Rd=bt("trophy",UD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],EE=bt("user-plus",BD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],wc=bt("user",HD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kE=bt("users",GD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],qD=bt("wifi-off",FD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],bb=bt("wifi",$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Lo=bt("zap",KD),YD=({onToggleMode:a})=>{const[e,t]=E.useState(""),[s,o]=E.useState(""),[l,h]=E.useState(""),[g,p]=E.useState(!1),{login:y}=ba(),x=async T=>{T.preventDefault(),h(""),p(!0);try{await y(e,s)}catch(w){h(w.message||"Giriş yaparken bir hata oluştu")}p(!1)};return u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:u.jsx(xE,{className:"h-8 w-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Öğretmen Girişi"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"NeuroLearn AI Platformuna hoş geldiniz"})]}),l&&u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[u.jsx(fh,{className:"h-5 w-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700 text-sm",children:l})]}),u.jsxs("form",{onSubmit:x,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx(mh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"email",value:e,onChange:T=>t(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ogretmen@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx(zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:s,onChange:T=>o(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:g,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Giriş yapılıyor...":"Giriş Yap"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600",children:["Hesabınız yok mu?"," ",u.jsx("button",{onClick:a,className:"text-primary font-medium hover:text-blue-700",children:"Kayıt olun"})]})})]})},QD=({onToggleMode:a})=>{const[e,t]=E.useState(""),[s,o]=E.useState(""),[l,h]=E.useState(""),[g,p]=E.useState(""),[y,x]=E.useState(""),[T,w]=E.useState(!1),{register:M}=ba(),F=async B=>{if(B.preventDefault(),x(""),l!==g){x("Şifreler eşleşmiyor");return}if(l.length<6){x("Şifre en az 6 karakter olmalıdır");return}w(!0);try{await M(s,l,e)}catch(U){x(U.message||"Kayıt olurken bir hata oluştu")}w(!1)};return u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-secondary rounded-full flex items-center justify-center mb-4",children:u.jsx(EE,{className:"h-8 w-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Veli Kaydı"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"Yeni hesap oluşturun"})]}),y&&u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[u.jsx(fh,{className:"h-5 w-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700 text-sm",children:y})]}),u.jsxs("form",{onSubmit:F,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),u.jsxs("div",{className:"relative",children:[u.jsx(wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"text",value:e,onChange:B=>t(B.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"Ahmet Yılmaz",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx(mh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"email",value:s,onChange:B=>o(B.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"veli@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx(zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:l,onChange:B=>h(B.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre Tekrar"}),u.jsxs("div",{className:"relative",children:[u.jsx(zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:g,onChange:B=>p(B.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:T,className:"w-full bg-secondary text-white py-3 rounded-lg font-medium hover:bg-purple-700 focus:ring-2 focus:ring-secondary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:T?"Kayıt oluşturuluyor...":"Kayıt Ol"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600",children:["Zaten hesabınız var mı?"," ",u.jsx("button",{onClick:a,className:"text-secondary font-medium hover:text-purple-700",children:"Giriş yapın"})]})})]})},XD=({onToggleMode:a,onToggleRole:e})=>{const[t,s]=E.useState(""),[o,l]=E.useState(""),[h,g]=E.useState(""),[p,y]=E.useState(!1),{login:x}=ba(),T=async w=>{w.preventDefault(),g(""),y(!0);try{await x(t,o)}catch(M){g(M.message||"Giriş yapılırken bir hata oluştu")}y(!1)};return u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:u.jsx(xE,{className:"h-8 w-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Öğrenci Girişi"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"Hesabınıza giriş yapın"})]}),h&&u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[u.jsx(fh,{className:"h-5 w-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700 text-sm",children:h})]}),u.jsxs("form",{onSubmit:T,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx(mh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"email",value:t,onChange:w=>s(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ogrenci@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx(zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:o,onChange:w=>l(w.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:p,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Giriş yapılıyor...":"Giriş Yap"})]}),u.jsxs("div",{className:"mt-6 text-center space-y-2",children:[u.jsxs("p",{className:"text-gray-600",children:["Henüz hesabınız yok mu?"," ",u.jsx("button",{onClick:a,className:"text-primary font-medium hover:text-blue-700",children:"Kayıt olun"})]}),u.jsxs("p",{className:"text-gray-600",children:["Öğretmen misiniz?"," ",u.jsx("button",{onClick:e,className:"text-secondary font-medium hover:text-purple-700",children:"Öğretmen girişi"})]})]})]})},ZD=({onToggleMode:a,onToggleRole:e})=>{const[t,s]=E.useState(""),[o,l]=E.useState(""),[h,g]=E.useState(""),[p,y]=E.useState(""),[x,T]=E.useState(""),[w,M]=E.useState(""),[F,B]=E.useState([]),[U,K]=E.useState(""),[ee,ne]=E.useState(!1),{register:Se}=ba();E.useEffect(()=>{(async()=>{try{const R=LI(Jg(Hc,"users"),UI("role","==","teacher")),A=await GI(R),N=[];A.forEach(j=>{const O=j.data();N.push({id:j.id,name:O.name,email:O.email})}),B(N)}catch(R){console.error("Öğretmenler yüklenirken hata:",R)}})()},[]);const Te=async xe=>{if(xe.preventDefault(),K(""),h!==p){K("Şifreler eşleşmiyor");return}if(h.length<6){K("Şifre en az 6 karakter olmalıdır");return}if(!w){K("Lütfen bir öğretmen seçin");return}const R=parseInt(x);if(isNaN(R)||R<3||R>18){K("Yaş 3-18 arasında olmalıdır");return}ne(!0);try{await Se(o,h,t,"student",R,w)}catch(A){K(A.message||"Kayıt olurken bir hata oluştu")}ne(!1)};return u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:u.jsx(EE,{className:"h-8 w-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Öğrenci Kaydı"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"Yeni öğrenci hesabı oluşturun"})]}),U&&u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[u.jsx(fh,{className:"h-5 w-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700 text-sm",children:U})]}),u.jsxs("form",{onSubmit:Te,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),u.jsxs("div",{className:"relative",children:[u.jsx(wc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"text",value:t,onChange:xe=>s(xe.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Öğrenci Adı",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yaş"}),u.jsxs("div",{className:"relative",children:[u.jsx(uD,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"number",min:"3",max:"18",value:x,onChange:xe=>T(xe.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Yaş",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Öğretmen Seçin"}),u.jsxs("div",{className:"relative",children:[u.jsx(kE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsxs("select",{value:w,onChange:xe=>M(xe.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent appearance-none bg-white",required:!0,children:[u.jsx("option",{value:"",children:"Öğretmen seçin..."}),F.map(xe=>u.jsxs("option",{value:xe.id,children:[xe.name," (",xe.email,")"]},xe.id))]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx(mh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"email",value:o,onChange:xe=>l(xe.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ogrenci@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx(zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:h,onChange:xe=>g(xe.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre Tekrar"}),u.jsxs("div",{className:"relative",children:[u.jsx(zo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:p,onChange:xe=>y(xe.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:ee,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:ee?"Kayıt oluşturuluyor...":"Öğrenci Kaydı Oluştur"})]}),u.jsxs("div",{className:"mt-6 text-center space-y-2",children:[u.jsxs("p",{className:"text-gray-600",children:["Zaten hesabınız var mı?"," ",u.jsx("button",{onClick:a,className:"text-primary font-medium hover:text-blue-700",children:"Giriş yapın"})]}),u.jsxs("p",{className:"text-gray-600",children:["Öğretmen misiniz?"," ",u.jsx("button",{onClick:e,className:"text-secondary font-medium hover:text-purple-700",children:"Öğretmen kaydı"})]})]})]})},WD=()=>{const[a,e]=E.useState(!0),[t,s]=E.useState("parent");return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-6xl mx-auto flex items-center justify-center gap-12",children:[u.jsxs("div",{className:"hidden lg:block flex-1 max-w-lg",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-r from-primary to-secondary rounded-full mb-6",children:u.jsx(cr,{className:"h-12 w-12 text-white"})}),u.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"NeuroLearn AI"}),u.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Otizmli öğrenciler için yapay zeka destekli eğitim platformu"})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsx(TE,{className:"h-6 w-6 text-primary mr-3"}),u.jsx("h3",{className:"font-semibold text-gray-800",children:"AI Destekli İçerik"})]}),u.jsx("p",{className:"text-gray-600",children:"Yapay zeka ile öğrenciye özel sorular ve aktiviteler üretilir"})]}),u.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsx("div",{className:"w-6 h-6 bg-success rounded-full mr-3"}),u.jsx("h3",{className:"font-semibold text-gray-800",children:"Duygu Analizi"})]}),u.jsx("p",{className:"text-gray-600",children:"Gerçek zamanlı duygu tanıma ile öğrencinin durumu takip edilir"})]}),u.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsx("div",{className:"w-6 h-6 bg-warning rounded-full mr-3"}),u.jsx("h3",{className:"font-semibold text-gray-800",children:"Akıllı Raporlama"})]}),u.jsx("p",{className:"text-gray-600",children:"Detaylı analitik ve öğrenci gelişim raporları"})]})]})]}),u.jsxs("div",{className:"flex-1 max-w-md",children:[u.jsxs("div",{className:"bg-white p-1 rounded-lg shadow-sm mb-6 flex",children:[u.jsx("button",{onClick:()=>s("parent"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="parent"?"bg-secondary text-white":"text-gray-600 hover:text-gray-800"}`,children:"Veli"}),u.jsx("button",{onClick:()=>s("student"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="student"?"bg-primary text-white":"text-gray-600 hover:text-gray-800"}`,children:"Öğrenci"})]}),t==="parent"?a?u.jsx(YD,{onToggleMode:()=>e(!1)}):u.jsx(QD,{onToggleMode:()=>e(!0)}):a?u.jsx(XD,{onToggleMode:()=>e(!1),onToggleRole:()=>s("parent")}):u.jsx(ZD,{onToggleMode:()=>e(!0),onToggleRole:()=>s("parent")})]})]})})};function SE(a){var e,t,s="";if(typeof a=="string"||typeof a=="number")s+=a;else if(typeof a=="object")if(Array.isArray(a)){var o=a.length;for(e=0;e<o;e++)a[e]&&(t=SE(a[e]))&&(s&&(s+=" "),s+=t)}else for(t in a)a[t]&&(s&&(s+=" "),s+=t);return s}function JD(){for(var a,e,t=0,s="",o=arguments.length;t<o;t++)(a=arguments[t])&&(e=SE(a))&&(s&&(s+=" "),s+=e);return s}function Fc(...a){return JD(a)}const Zn=({variant:a="primary",size:e="md",loading:t=!1,className:s,disabled:o,children:l,...h})=>{const g="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",p={primary:"bg-primary text-white hover:bg-blue-700 focus:ring-primary",secondary:"bg-secondary text-white hover:bg-purple-700 focus:ring-secondary",danger:"bg-danger text-white hover:bg-red-700 focus:ring-danger",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-primary",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-primary"},y={sm:"px-3 py-2 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return u.jsxs("button",{className:Fc(g,p[a],y[e],s),disabled:o||t,...h,children:[t&&u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})},ej=({aiStatus:a="connected"})=>{const{currentUser:e,logout:t}=ba(),s=()=>{switch(a){case"connected":return u.jsx(bb,{className:"h-4 w-4 text-success"});case"disconnected":return u.jsx(qD,{className:"h-4 w-4 text-danger"});case"processing":return u.jsx("div",{className:"h-4 w-4 border-2 border-warning border-t-transparent rounded-full animate-spin"});default:return u.jsx(bb,{className:"h-4 w-4 text-success"})}},o=()=>{switch(a){case"connected":return"AI Bağlı";case"disconnected":return"AI Bağlantısı Yok";case"processing":return"AI İşlemde";default:return"AI Bağlı"}};return u.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"flex items-center space-x-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:u.jsx(cr,{className:"h-6 w-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"NeuroLearn AI"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Öğretmen Paneli"})]})]})}),u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 rounded-lg",children:[s(),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:o()})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:e?.name||"Öğretmen"}),u.jsx("p",{className:"text-xs text-gray-600",children:e?.email})]}),u.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-white font-medium text-sm",children:e?.name?.charAt(0)||"Ö"})}),u.jsxs(Zn,{variant:"outline",size:"sm",onClick:t,className:"border-gray-300 text-gray-700 hover:bg-red-50 hover:text-red-700 hover:border-red-300",children:[u.jsx(bE,{className:"h-4 w-4 mr-2"}),"Çıkış"]})]})]})]})})},Sn=({className:a,children:e})=>u.jsx("div",{className:Fc("bg-white rounded-lg shadow-sm border border-gray-200 p-6",a),children:e}),_b=({className:a,children:e})=>u.jsx("div",{className:Fc("mb-4",a),children:e}),Tb=({className:a,children:e})=>u.jsx("h3",{className:Fc("text-lg font-semibold text-gray-800",a),children:e}),wn=({className:a,children:e})=>u.jsx("div",{className:Fc(a),children:e}),tj=({stats:a,loading:e=!1})=>{const t=[{title:"Haftalık İlerleme",value:`%${a.weeklyProgress}`,icon:hp,color:"bg-blue-500",change:"+12%",changeType:"positive"},{title:"Tamamlanan Aktivite",value:a.completedActivities.toString(),icon:ur,color:"bg-green-500",change:"+8",changeType:"positive"},{title:"Ortalama Başarı",value:`%${a.averageSuccess}`,icon:kE,color:"bg-purple-500",change:"+5%",changeType:"positive"},{title:"AI Önerileri",value:a.aiRecommendations.toString(),icon:ig,color:"bg-yellow-500",change:"+3",changeType:"positive"}];return e?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(s=>u.jsx(Sn,{className:"animate-pulse",children:u.jsxs(wn,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),u.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"})]}),u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"})]}),u.jsx("div",{className:"mt-4",children:u.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})})]})},s))}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((s,o)=>{const l=s.icon;return u.jsx(Sn,{className:"hover:shadow-md transition-shadow",children:u.jsxs(wn,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.title}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value})]}),u.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${s.color}`,children:u.jsx(l,{className:"h-6 w-6 text-white"})})]}),u.jsxs("div",{className:"mt-4 flex items-center",children:[u.jsx("span",{className:`text-sm font-medium ${s.changeType==="positive"?"text-green-600":"text-red-600"}`,children:s.change}),u.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"son 7 günde"})]})]})},o)})})},nj=[{id:"1",name:"Elif Yılmaz",age:8,parentId:"parent1",notes:"Matematik konularında çok başarılı, hikaye okumayı seviyor.",createdAt:new Date("2024-01-15")},{id:"2",name:"Mehmet Kaya",age:7,parentId:"parent1",notes:"Renklerle ilgili oyunlarda yetenekli, dikkat süresi artıyor.",createdAt:new Date("2024-02-10")},{id:"3",name:"Zeynep Demir",age:9,parentId:"parent2",notes:"Sosyal beceriler gelişiyor, grup oyunlarına katılım artıyor.",createdAt:new Date("2024-01-20")}],fp=[{id:"act1",studentId:"1",gameType:"word-image",score:85,duration:450,emotions:[{emotion:"happy",confidence:.92,timestamp:new Date("2024-03-15T10:30:00")},{emotion:"focused",confidence:.88,timestamp:new Date("2024-03-15T10:35:00")}],createdAt:new Date("2024-03-15")},{id:"act2",studentId:"1",gameType:"number",score:92,duration:380,emotions:[{emotion:"focused",confidence:.95,timestamp:new Date("2024-03-14T14:20:00")},{emotion:"happy",confidence:.87,timestamp:new Date("2024-03-14T14:25:00")}],createdAt:new Date("2024-03-14")},{id:"act3",studentId:"2",gameType:"color",score:78,duration:520,emotions:[{emotion:"confused",confidence:.75,timestamp:new Date("2024-03-13T09:15:00")},{emotion:"neutral",confidence:.82,timestamp:new Date("2024-03-13T09:20:00")}],createdAt:new Date("2024-03-13")},{id:"act4",studentId:"2",gameType:"attention-sprint",score:88,duration:420,emotions:[{emotion:"focused",confidence:.91,timestamp:new Date("2024-03-12T11:00:00")}],createdAt:new Date("2024-03-12")},{id:"act5",studentId:"3",gameType:"word-image",score:94,duration:350,emotions:[{emotion:"happy",confidence:.96,timestamp:new Date("2024-03-11T15:30:00")},{emotion:"focused",confidence:.89,timestamp:new Date("2024-03-11T15:35:00")}],createdAt:new Date("2024-03-11")}],rj=[{id:"insight1",studentId:"1",type:"progress",message:"Elif'in matematik oyunlarındaki performansı son 2 haftada %15 arttı. Sayı tanıma becerilerinde belirgin gelişme gözleniyor.",priority:"medium",createdAt:new Date("2024-03-15")},{id:"insight2",studentId:"1",type:"recommendation",message:"Elif hikaye temelli oyunlarda çok başarılı. Daha karmaşık hikaye senaryoları ile zorlanabilir.",priority:"low",createdAt:new Date("2024-03-14")},{id:"insight3",studentId:"2",type:"attention",message:"Mehmet'in dikkat süresi artıyor ancak renk karışımlarında hala zorlanıyor. Daha basit renk oyunları önerilir.",priority:"high",createdAt:new Date("2024-03-13")},{id:"insight4",studentId:"2",type:"progress",message:"Dikkat sprint oyunlarında %20 iyileşme kaydedildi. Motor beceriler gelişiyor.",priority:"medium",createdAt:new Date("2024-03-12")},{id:"insight5",studentId:"3",type:"recommendation",message:"Zeynep'in sosyal beceri gelişimi için grup oyunları artırılabilir. Mükemmel kelime-resim eşleştirme performansı.",priority:"low",createdAt:new Date("2024-03-11")},{id:"insight6",studentId:"3",type:"warning",message:"Son oyunlarda hafif stres belirtileri gözlendi. Oyun zorluğu azaltılabilir.",priority:"high",createdAt:new Date("2024-03-10")}],og=a=>{const e=fp.filter(y=>y.studentId===a);if(e.length===0)return{totalGames:0,averageScore:0,totalPlayTime:0,favoriteGame:"Henüz oyun oynamamış",lastActivity:null};const t=e.length,s=Math.round(e.reduce((y,x)=>y+x.score,0)/t),o=Math.round(e.reduce((y,x)=>y+x.duration,0)/60),l=e.reduce((y,x)=>(y[x.gameType]=(y[x.gameType]||0)+1,y),{}),h=Object.entries(l).reduce((y,x)=>l[y[0]]>l[x[0]]?y:x)[0],g={"word-image":"Kelime-Resim Eşleştirme",number:"Sayı Oyunları",color:"Renk Oyunları","attention-sprint":"Dikkat Sprintleri"},p=e.sort((y,x)=>x.createdAt.getTime()-y.createdAt.getTime())[0];return{totalGames:t,averageScore:s,totalPlayTime:o,favoriteGame:g[h]||h,lastActivity:p}},aj=a=>{const t=fp.filter(p=>p.studentId===a).flatMap(p=>p.emotions);if(t.length===0)return{dominantEmotion:"neutral",emotionDistribution:{},averageConfidence:0};const s=t.reduce((p,y)=>(p[y.emotion]=(p[y.emotion]||0)+1,p),{}),o=Object.entries(s).reduce((p,y)=>s[p[0]]>s[y[0]]?p:y)[0],l=t.length,h=Object.entries(s).reduce((p,[y,x])=>(p[y]=Math.round(x/l*100),p),{}),g=t.reduce((p,y)=>p+y.confidence,0)/t.length;return{dominantEmotion:o,emotionDistribution:h,averageConfidence:Math.round(g*100)}},sj=a=>{fp.filter(t=>t.studentId===a).sort((t,s)=>t.createdAt.getTime()-s.createdAt.getTime());const e=Array.from({length:7},(t,s)=>{const o=new Date;return o.setDate(o.getDate()-(6-s)),{date:o.toLocaleDateString("tr-TR",{weekday:"short"}),score:0,games:0}});return e.forEach(t=>{t.score=Math.floor(Math.random()*40)+60,t.games=Math.floor(Math.random()*4)+1}),e},ij={happy:"😊 Mutlu",sad:"😢 Üzgün",angry:"😠 Kızgın",neutral:"😐 Nötr",focused:"🎯 Odaklanmış",confused:"😕 Şaşkın"},oj=({students:a,loading:e,onViewStudent:t})=>e?u.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/4"}),u.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>u.jsx("div",{className:"h-20 bg-gray-200 rounded"},s))})]})}):a.length===0?u.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-8 text-center",children:[u.jsx(wc,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Henüz çocuk eklenmemiş"}),u.jsx("p",{className:"text-gray-600",children:"Çocuğunuzun öğrenme sürecini takip etmek için lütfen sistem yöneticisi ile iletişime geçin."})]}):u.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[u.jsx("div",{className:"p-6 border-b border-gray-200",children:u.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[u.jsx(wc,{className:"h-5 w-5 mr-2"}),"Çocuklarınız (",a.length,")"]})}),u.jsx("div",{className:"p-6 space-y-4",children:a.map(s=>{const o=og(s.id),l=aj(s.id),h=sj(s.id),g=Math.round(h.reduce((p,y)=>p+y.score,0)/h.length);return u.jsxs("div",{className:"border border-gray-200 rounded-lg p-5 hover:border-primary/30 hover:shadow-md transition-all cursor-pointer",onClick:()=>t(s),children:[u.jsxs("div",{className:"flex items-start justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center text-white font-bold text-lg",children:s.name.split(" ").map(p=>p[0]).join("").toUpperCase()}),u.jsxs("div",{className:"ml-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:s.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:[s.age," yaş"]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsxs("div",{className:"px-3 py-1 bg-primary/10 text-primary rounded-full text-sm font-medium",children:[g," puan ortalaması"]}),u.jsx("div",{className:"text-2xl",children:ij[l.dominantEmotion]?.split(" ")[0]||"😐"})]})]}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[u.jsx(Rd,{className:"h-5 w-5 text-yellow-500 mx-auto mb-1"}),u.jsx("div",{className:"text-lg font-semibold text-gray-800",children:o.totalGames}),u.jsx("div",{className:"text-xs text-gray-600",children:"Oyun Oynandı"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[u.jsx(hp,{className:"h-5 w-5 text-green-500 mx-auto mb-1"}),u.jsxs("div",{className:"text-lg font-semibold text-gray-800",children:[o.averageScore,"%"]}),u.jsx("div",{className:"text-xs text-gray-600",children:"Ortalama Başarı"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[u.jsx(va,{className:"h-5 w-5 text-blue-500 mx-auto mb-1"}),u.jsxs("div",{className:"text-lg font-semibold text-gray-800",children:[o.totalPlayTime,"dk"]}),u.jsx("div",{className:"text-xs text-gray-600",children:"Toplam Süre"})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[u.jsx(TD,{className:"h-5 w-5 text-red-500 mx-auto mb-1"}),u.jsxs("div",{className:"text-lg font-semibold text-gray-800",children:[l.averageConfidence,"%"]}),u.jsx("div",{className:"text-xs text-gray-600",children:"Duygu Güveni"})]})]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsxs("h5",{className:"text-sm font-medium text-gray-700 flex items-center",children:[u.jsx(fD,{className:"h-4 w-4 mr-1"}),"Haftalık İlerleme"]}),u.jsx("span",{className:"text-xs text-gray-500",children:"Son 7 gün"})]}),u.jsx("div",{className:"flex items-end space-x-1 h-16",children:h.map((p,y)=>u.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[u.jsx("div",{className:"w-full bg-gradient-to-t from-primary to-secondary rounded-sm",style:{height:`${p.score/100*100}%`}}),u.jsx("span",{className:"text-xs text-gray-500 mt-1",children:p.date})]},y))})]}),u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("span",{className:"text-sm text-gray-600",children:"En sevdiği oyun:"}),u.jsx("span",{className:"ml-2 text-sm font-medium text-gray-800",children:o.favoriteGame})]}),o.lastActivity&&u.jsxs("div",{className:"text-xs text-gray-500",children:["Son aktivite: ",o.lastActivity.createdAt.toLocaleDateString("tr-TR")]})]}),s.notes&&u.jsx("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg",children:u.jsx("p",{className:"text-sm text-blue-800",children:s.notes})})]},s.id)})})]}),lj=({insights:a,loading:e=!1})=>{const t=h=>({progress:pD,attention:xb,recommendation:ig,warning:xb})[h]||yb,s=(h,g)=>g==="warning"||h==="high"?"bg-red-50 border-red-200 text-red-800":g==="attention"||h==="medium"?"bg-yellow-50 border-yellow-200 text-yellow-800":g==="progress"?"bg-green-50 border-green-200 text-green-800":"bg-blue-50 border-blue-200 text-blue-800",o=h=>({progress:"İlerleme",attention:"Dikkat",recommendation:"Öneri",warning:"Uyarı"})[h]||"Bilgi",l=h=>{const p=new Date().getTime()-h.getTime(),y=Math.floor(p/6e4),x=Math.floor(p/36e5),T=Math.floor(p/864e5);return T>0?`${T} gün önce`:x>0?`${x} saat önce`:y>0?`${y} dakika önce`:"Az önce"};return e?u.jsxs(Sn,{children:[u.jsx(_b,{children:u.jsx(Tb,{children:"AI Öngörüleri"})}),u.jsx(wn,{children:u.jsx("div",{className:"space-y-4",children:[1,2,3].map(h=>u.jsx("div",{className:"animate-pulse border border-gray-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-1"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})},h))})})]}):u.jsxs(Sn,{children:[u.jsx(_b,{children:u.jsxs(Tb,{className:"flex items-center",children:[u.jsx(ig,{className:"h-5 w-5 mr-2 text-primary"}),"AI Öngörüleri (",a.length,")"]})}),u.jsx(wn,{children:a.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(yb,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600 mb-2",children:"Henüz AI öngörüsü yok"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Öğrenciler aktivite yaptıkça AI öngörüleri burada görünecek"})]}):u.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.map(h=>{const g=t(h.type);return u.jsx("div",{className:`border rounded-lg p-4 ${s(h.priority,h.type)}`,children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx(g,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("h4",{className:"font-medium text-sm",children:o(h.type)}),u.jsxs("div",{className:"flex items-center text-xs opacity-75",children:[u.jsx(va,{className:"h-3 w-3 mr-1"}),l(h.createdAt)]})]}),u.jsx("p",{className:"text-sm opacity-90",children:h.message})]})]})},h.id)})})})]})},cj=()=>{const{currentUser:a}=ba(),[e,t]=E.useState([]),[s,o]=E.useState([]),[l,h]=E.useState(!0),[g]=E.useState("connected"),[p,y]=E.useState({weeklyProgress:85,completedActivities:24,averageSuccess:78,aiRecommendations:5}),x=E.useCallback(async()=>{if(a)try{h(!0);const w=nj.filter(U=>U.parentId===a.id);t(w);const M=rj.filter(U=>w.some(K=>K.id===U.studentId));M.sort((U,K)=>K.createdAt.getTime()-U.createdAt.getTime()),o(M.slice(0,10));const F=w.reduce((U,K)=>{const ee=og(K.id);return U+ee.totalGames},0),B=w.length>0?Math.round(w.reduce((U,K)=>{const ee=og(K.id);return U+ee.averageScore},0)/w.length):0;y({weeklyProgress:85,completedActivities:F,averageSuccess:B,aiRecommendations:M.length})}catch(w){console.error("Error loading data:",w)}finally{h(!1)}},[a]);E.useEffect(()=>{a&&x()},[a,x]);const T=w=>{console.log("View student:",w)};return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(ej,{aiStatus:g}),u.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-lg p-6 text-white",children:[u.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Hoş geldiniz, ",a?.name,"! 👋"]}),u.jsx("p",{className:"text-blue-100",children:"NeuroLearn AI ile çocuğunuzun gelişimini takip edin ve öğrenme sürecini destekleyin."})]}),u.jsx(tj,{stats:p,loading:l}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsx(oj,{students:e,loading:l,onViewStudent:T})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(lj,{insights:s,loading:l})})]}),u.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Hızlı İşlemler"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[u.jsx("div",{className:"text-primary font-medium mb-1",children:"📊 Gelişim Raporu"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Çocuğunuzun detaylı gelişim raporunu görüntüleyin"})]}),u.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[u.jsx("div",{className:"text-secondary font-medium mb-1",children:"🎯 Oyun Önerileri"}),u.jsx("div",{className:"text-sm text-gray-600",children:"AI destekli kişisel oyun önerilerini inceleyin"})]}),u.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[u.jsx("div",{className:"text-success font-medium mb-1",children:"💬 Uzman Desteği"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Gelişim uzmanı ile iletişim kurun"})]})]})]})]})})]})};class uj{async generateAttentionSprint(e){const{performansOzeti:t,studentAge:s,sonGorevler:o=[],forcedDifficulty:l,emotionData:h}=e,g=l||this.determineDifficulty(t);l&&console.log("👤 [USER CHOICE] Kullanıcının seçtiği zorluk kullanılıyor:",l);const p=this.determineTaskVariety(o),y=this.buildAttentionSprintPrompt(t,s,g,p,h);console.log("📝 [AI PROMPT FULL]",{hasEmotionData:!!h,promptLength:y.length,emotionDataLength:h?.length||0,preview:h?`${JSON.parse(h).length} emotions`:"no emotions"}),console.log("📄 [AI PROMPT TEXT]"),console.log("=".repeat(80)),console.log(y),console.log("=".repeat(80));try{console.log("🎯 [ATTENTION SPRINT] Görev üretiliyor:",{difficulty:g,performansOzeti:t});const x=await this.callOllama(y),T=this.parseSprintResponse(x,g);return console.log("✅ [ATTENTION SPRINT] Görev üretildi:",T.gorev),T}catch(x){return console.error("❌ [ATTENTION SPRINT] Görev üretme hatası:",x),this.getFallbackTask(g,s)}}determineDifficulty(e){const{basariOrani:t,odaklanmaDurumu:s,ortalamaReaksiyonSuresi:o,son3Tur:l,sayiGorevPerformansi:h,zamanlamaPerformansi:g}=e,p=l.filter(M=>M.hizliCozum).length,y=l.some(M=>M.hedefTipi==="sayi"),x=l.some(M=>M.hedefZaman!==null),T=g?.ortalamaSapma||0,w=g?.idealZamanlamaOrani||0;if(console.log("📊 [ADAPTIVE DIFFICULTY]",{basariOrani:t,ortalamaReaksiyonSuresi:o,hizliCozumSayisi:p,sayiGoreviVarMi:y,zamanlamaGoreviVarMi:x,ortalamaSapma:T,idealZamanlamaOrani:w,sayiGorevPerformansi:h,zamanlamaPerformansi:g}),console.log("🔍 [DIFFICULTY DEBUG]",{"Test 1 (Süper)":t>=.8&&(p>=2||o<2.5),"Test 2 (İyi)":t>=.7&&(p>=1||o<4),"Test 3 (Yavaş)":t>=.8&&o<6,"Test 4 (Zayıf)":t<.5||o>8,conditions:{"basariOrani >= 0.8":t>=.8,"hizliCozumSayisi >= 2":p>=2,"ortalamaReaksiyonSuresi < 2.5":o<2.5}}),p>=2&&t>=.8&&o<2)return console.log("🚀 [DIFFICULTY] Süper hızlı - 2x atlama!"),"zor";if(h&&y){const M=this.evaluateNumberTaskPerformance(h,l);if(M.zorlukArtisi>1)return console.log(`🔢 [DIFFICULTY] Sayı görevi adaptasyonu: +${M.zorlukArtisi}`),M.onerilen}if(x&&g){if(w>=.8&&T<=.5)return console.log("🎯 [DIFFICULTY] Mükemmel zamanlama (sapma ≤0.5s) - ZOR seviye!"),"zor";if(w>=.6&&T<=1.5)return console.log("⏱️ [DIFFICULTY] İyi zamanlama (sapma ≤1.5s) - ORTA seviye!"),"orta";if(w>=.4&&T<=3)return console.log("⏰ [DIFFICULTY] Orta zamanlama (sapma ≤3s) - KOLAY/ORTA seviye!"),t>=.7?"orta":"kolay";if(T>3)return console.log("❌ [DIFFICULTY] Kötü zamanlama (sapma >3s) - KOLAY seviye!"),"kolay"}return t>=.8&&(p>=2||o<2.5)?(console.log("🔥 [DIFFICULTY] Süper performans - ZOR seviye!"),"zor"):t>=.7&&(p>=1||o<4)?(console.log("⬆️ [DIFFICULTY] İyi performans - ORTA seviye!"),"orta"):t>=.8&&o<6?(console.log("🐌 [DIFFICULTY] Yavaş ama başarılı - ORTA seviye!"),"orta"):t<.5||o>8?(console.log("📉 [DIFFICULTY] Zayıf performans - KOLAY seviye!"),"kolay"):(console.log("🎯 [DIFFICULTY] Varsayılan - ORTA seviye!"),"orta")}determineTaskVariety(e){if(e.length===1){const g=e[0];if(g==="sayma")return console.log("🎨 [VARIETY] Özel istek: Sayma oyunu"),"sayma";if(g==="dinamik-tıklama")return console.log("🎨 [VARIETY] Özel istek: Dinamik tıklama oyunu"),"dinamik-tıklama";if(g==="tıklama"||g==="tek-tıklama")return console.log("🎨 [VARIETY] Özel istek: Normal tıklama oyunu"),"tek-tıklama"}const t=e.map(g=>this.analyzeTaskType(g)),o=["renk-tıklama","şekil-tıklama","sayma","bekleme","kombinasyon","dinamik-sayma","dinamik-tıklama","sayı-tıklama"].map(g=>({tip:g,sayi:t.filter(p=>p===g).length})),l=o.filter(g=>g.sayi===Math.min(...o.map(p=>p.sayi))),h=l[Math.floor(Math.random()*l.length)];return console.log("🎨 [VARIETY] Son görevler:",t,"→ Önerilen tip:",h.tip),h.tip}analyzeTaskType(e){const t=e.toLowerCase();if(t.includes("say")||t.includes("count")||t.includes("adet"))return t.includes("tüm")||t.includes("saniye içinde")?"dinamik-sayma":"sayma";if(t.includes("tüm")&&t.includes("tıkla")&&(t.includes("saniye")||t.includes("dakika")))return"dinamik-tıklama";if(t.includes("bekle")||t.includes("wait")||t.includes("sessiz")||t.includes("dur"))return"bekleme";if(["1","2","3","4","5","6","7","8","9"].some(y=>t.includes(y)&&t.includes("tıkla")))return"sayı-tıklama";const l=["kırmızı","mavi","yeşil","sarı","mor","turuncu"],h=["daire","kare","üçgen","yıldız","kalp","elmas"],g=l.some(y=>t.includes(y)),p=h.some(y=>t.includes(y));return g&&p?"kombinasyon":g?"renk-tıklama":p?"şekil-tıklama":"renk-tıklama"}getTaskExamplesForType(e,t){const s={"renk-tıklama":{kolay:['"🔴 Kırmızı butona 2 saniye sonra bas"','"🔵 Mavi daire görünce hemen tıkla"','"🟢 Yeşil rengi gördüğünde bas"'],orta:['"🔴 3 saniye bekle, sonra kırmızı daire tıkla"','"🔵 Mavi renk çıktığında hızlıca bas"','"🟡 Sarı butonu gördüğün anda tıkla"'],zor:['"🔴 Kırmızı hedef çıktığında 1 saniye içinde bas"','"🔵 Mavi objesi belirdiğinde çok hızlı tıkla"','"🟢 Yeşil hedef görünür görünmez bas"']},"şekil-tıklama":{kolay:['"⭐ Yıldızı gördüğünde tıkla"','"🔺 Üçgen çıktığında bas"','"⭕ Daire görünce hemen tıkla"'],orta:['"⭐ Yıldız belirdiğinde 2 saniye içinde bas"','"🔺 Üçgen hedefe odaklan ve tıkla"','"💎 Elmas şeklini gördüğünde bas"'],zor:['"⭐ Yıldız çıktığında anında tıkla"','"🔺 Üçgen hedefini çok hızlı yakala"','"💎 Elmas görünür görünmez bas"']},sayma:{kolay:['"🔵 Mavi karelerin sayısını bul"','"⭐ Yıldızları say"','"🔴 Kırmızı daireleri hesapla"'],orta:['"🟢 Yeşil üçgenleri dikkatli say"','"🔵 Mavi şekillerin toplam sayısını bul"','"⭐ Sarı yıldızları say ve say"'],zor:['"🔺 Hızlı çıkan kırmızı üçgenleri say"','"🟦 Mavi kareleri çabuk hesapla"','"⭐ Parlayan yıldızları hızla say"']},bekleme:{kolay:['"⏰ 3 saniye sessizce bekle"','"🤫 5 saniye hareketsiz dur"','"⏳ 4 saniye sakin ol"'],orta:['"⏰ 6 saniye bekle, sonra başla"','"🧘 8 saniye nefes al ve bekle"','"⏳ 7 saniye odaklan ve dur"'],zor:['"⏰ 10 saniye tam konsantre bekle"','"🧘 12 saniye hiç hareket etme"','"⏳ 15 saniye mükemmel bekleme"']},kombinasyon:{kolay:['"🔴 Kırmızı daireyi tıkla"','"🔵 Mavi üçgeni bul ve bas"','"🟢 Yeşil kareyi hedefle"'],orta:['"🔴 Kırmızı yıldızı 3 saniye sonra tıkla"','"🔵 Mavi kalbi gördüğünde bas"','"🟡 Sarı elmasını yakala"'],zor:['"🔴 Kırmızı üçgeni çok hızlı yakala"','"🔵 Mavi kareyi anında tıkla"','"🟢 Yeşil yıldızı 1 saniyede bas"']},"dinamik-sayma":{kolay:['"15 saniye içinde çıkan mavi daireleri say"','"20 saniye boyunca gelen yıldızları hesapla"','"12 saniye içinde beliren şekilleri say"'],orta:['"25 saniye içinde gelen kırmızı üçgenleri say"','"30 saniye boyunca çıkan mavi kareleri hesapla"','"20 saniye içinde beliren yeşil daireleri say"'],zor:['"35 saniye içinde hızlı çıkan hedefleri say"','"40 saniye boyunca değişken objeleri hesapla"','"30 saniye içinde karışık şekilleri say"']},"dinamik-tıklama":{kolay:['"20 saniye içinde tüm 🔵 mavi daireleri tıkla"','"25 saniye içinde tüm 🟡 sarı yıldızları tıkla"','"15 saniye içinde tüm 🟢 yeşil kareleri tıkla"'],orta:['"35 saniye içinde tüm 🔺 kırmızı üçgenleri tıkla"','"40 saniye içinde tüm 🟦 mavi kareleri tıkla"','"30 saniye içinde tüm 🟢 yeşil daireleri tıkla"'],zor:['"50 saniye içinde tüm 🔺 kırmızı üçgenleri tıkla"','"60 saniye içinde tüm 🟡 sarı yıldızları tıkla"','"45 saniye içinde tüm 💜 mor kalpleri tıkla"']},"sayı-tıklama":{kolay:['"3️⃣ 3 sayısını gördüğünde tıkla"','"5️⃣ 5 rakamına bas"','"2️⃣ 2 sayısını yakala"'],orta:['"7️⃣ 7 rakamını 2 saniye sonra tıkla"','"4️⃣ 4 sayısını hızlıca yakala"','"6️⃣ 6 rakamını gördüğünde bas"'],zor:['"9️⃣ 9 sayısını çok hızlı yakala"','"8️⃣ 8 rakamını anında tıkla"','"1️⃣ 1 sayısını görür görmez bas"']}};return(s[e]?.[t]||s["renk-tıklama"][t]).join(`
`)}buildAttentionSprintPrompt(e,t,s,o,l){const h=this.formatPerformanceForPrompt(e),g=this.getTaskExamplesForType(o,s),p=`ADHD'li 12 yaş çocuk için Dikkat Sprintleri görevi üret. SADECE JSON döndür.

ÖNERİLEN GÖREV TİPİ: ${o} (çeşitlilik için)

TİP BAZLI ÖRNEKLER:
${g}

HEDEF KITLE:
- Yaş: 12 (ortaokul seviyesi)
- ADHD özellik: Kısa dikkat süresi, hiperaktivite, impulse kontrol zorluğu
- Motivasyon: Görsel ödüller, hızlı geri bildirim, başarı hissi

${l?`KAMERA VERİSİ - TÜM DUYGUSAL DURUMLAR (Oyun süresince):
${l}

DİKKAT: Bu emotion data'dan çok boyutlu analiz yap:

DUYGUSAL DURUM ANALİZİ:
- Hangi duygu baskın? Son trend nasıl?
- Emotion stabilite: Sabit mi değişken mi?
- Pozitif/negatif emotion dengesi?

ÖĞRENME STİLİ ÇIKARIMI:
- confused→happy geçişi = Yavaş öğrenen ama başarılı mı?
- happy→bored pattern = Hızla sıkılan, challenge isteyen mi?
- surprised spike'ları = Yenilikçi görevleri seven mi?

MOTİVASYON/STRES ANALİZİ:
- İçsel motivasyon: happy/neutral dominant mı?
- Frustration tolerance: angry/confused nasıl?
- Kaygı seviyesi: emotion volatility yüksek mi?

ATTENTION SPAN PATTERNİ:
- Emotion değişim hızı = Dikkat süresi ipucu
- Bored'a kadar geçen süre = Natural attention span
- Cognitive load: neutral→confused geçiş noktası

Bu analizlere göre en uygun görev stratejisini belirle:

Bu analizine göre çocuğun mevcut duygusal durumuna uygun görev üret:
- Mutlu/heyecanlı ise: Momentum sürdürecek, biraz daha zorlayıcı görevler
- Kafa karışık/yorgun ise: Basit, net talimatlar, daha az dikkat dağıtıcı
- Odaklanmış ise: Bu durumu koruyacak dengeli görevler
- Stresli/sinirli ise: Sakinleştirici, pozitif, başarıya odaklı görevler

İpuçlarını da bu duygusal duruma göre ayarla.`:""}

GÖREV KURALLARI:
- Süre: 30-60 saniye (ADHD için kısa)
- Tek odak: Sadece 1 şey yap (çoklu görev yok)
- Net talimat: Basit, anlaşılır komutlar
- Görsel zengin: Renkler, şekiller, emojiler kullan
- Olumlu dil: "Yapma" yerine "Yap" kalıbı
- Duygu durumuna uygun ipuçları ve zorluk seviyesi ayarla
${o==="sayma"?'- ÖNEMLİ: SADECE SAYMA GÖREVİ ÜRETİN! "tıkla", "bas", "yakala" gibi eylemler YOK. Sadece "say", "hesapla", "bul" kullanın.':""}

ZORLUK SEVİYESİ: ${s}

PERFORMANS ÖZETİ:
${h}

${e.attentionMetrics?`
DETAYLI DİKKAT METRİKLERİ:
- Oyun süresi: ${e.attentionMetrics.totalGameTime.toFixed(1)}s
- Ekrana bakma: %${e.attentionMetrics.screenLookingPercentage.toFixed(1)}
- Dikkat skoru: ${e.attentionMetrics.attentionScore.toFixed(1)}/100
- Baskın duygu: ${e.attentionMetrics.dominantEmotion}
- Dikkat dağılması: ${e.attentionMetrics.distractionEvents} kez
- Emotion dağılımı: ${e.attentionMetrics.emotionStats.map(y=>`${y.emotion}(${y.percentage.toFixed(1)}%)`).join(", ")}

Bu metrikleri de göz önünde bulundurarak çocuğun GERÇEK odaklanma seviyesini sen belirle:
- Başarı oranı + Dikkat skoru + Ekrana bakma + Emotion pattern + Dikkat dağılması
- "yuksek", "orta" veya "dusuk" olarak değerlendir
`:""}

ÇIKTI ŞEMASI:
{
  "gorev": string, // ÖRNERİLEN TİPE GÖRE: ${o==="sayma"?'"🔴 Kırmızı daireleri say"':o==="tek-tıklama"?'"🔴 Kırmızı daire çıktığında tıkla"':o==="dinamik-tıklama"?'"30 saniye içinde tüm 🔴 kırmızı daireleri tıkla"':'"3 saniye bekle, sonra 🔴 kırmızı daire tıkla"'}
  "sure_saniye": number, // 30-60 arası
  "ipuclari": [string], // Max 2 ipucu, kısa ve net, duygusal duruma uygun
  "hedefRenk": string, // Varsa: "kırmızı", "mavi" vs
  "hedefSayi": number, // Varsa: sayma görevi için
  "hedefSekil": string, // Varsa: "daire", "kare" vs
  "dikkatDagitici": number, // 0-1 arası (0=yok, 1=maksimum)

  // EMOTION ANALİZİNE GÖRE OYUN PARAMETRELERİ:
  "gameParams": {
    "spawnInterval": number, // 1500-4000ms - Kısa attention span = düşük değer, confused'dan kaçın
    "objectLifespan": number, // 3000-8000ms - Yavaş reaction = yüksek değer, stressed ise uzat
    "targetRatio": number, // 0.3-0.8 - Düşük frustration tolerance = yüksek ratio (kolay)
    "visualComplexity": number, // 0.2-1.0 - Confused/overwhelmed ise düşür, happy/confident ise artır
    "feedbackFrequency": number // 0.5-3.0 - Low motivation = sık feedback, high confidence = az feedback
  }
}

12 YAŞ İÇİN GÖREV ÖRNEKLERİ (ÖNERİLEN TİP: ${o}):
${o==="sayma"?`- "🔴 Kırmızı daireleri say"
- "🟢 Yeşil kareleri hesapla"
- "⭐ Yıldızların sayısını bul"
- "🔵 Mavi şekilleri say"
- "🟡 Sarı objeleri hesapla"`:o==="tek-tıklama"?`- "🔴 Kırmızı daire çıktığında tıkla"
- "🔵 Mavi kare belirdiğinde bas"
- "🟢 Yeşil yıldız gördüğünde tıkla"
- "🟡 Sarı üçgen görünce bas"
- "⭐ Yıldız şekli çıktığında tıkla"`:o==="dinamik-tıklama"?`- "30 saniye içinde tüm 🔴 kırmızı daireleri tıkla"
- "25 saniye içinde tüm 🔵 mavi kareleri yakala"
- "35 saniye içinde tüm 🟢 yeşil yıldızları tıkla"`:`- "🔴 Kırmızı butona 2 saniye sonra bas"
- "🟢 Yeşil kareler sayısını bul"
- "👀 Mavi ⭐ yıldızları takip et"
- "⏰ 5 saniye sessizce bekle"
- "🎯 Ortadaki hedefe odaklan"`}

YAPMA:
- Uzun açıklamalar
- Karmaşık çoklu adımlar
- Olumsuz kelimeler
- Soyut kavramlar

${o==="dinamik-tıklama"?`ZORUNLU KURALLAR DİNAMİK TIKLAMA İÇİN:
- Süre MUTLAKA belirt: "30 saniye içinde" formatında
- Renk MUTLAKA emoji ile: 🔴 kırmızı, 🔵 mavi, 🟢 yeşil, 🟡 sarı
- Şekil MUTLAKA spesifik: daire, kare, üçgen, yıldız, kalp, elmas
- Örnek: "45 saniye içinde tüm 🔵 mavi daireleri tıkla"
- "hedefRenk" ve "hedefSekil" alanları MUTLAKA doldur`:""}

${o==="sayma"?`ZORUNLU KURALLAR SAYMA GÖREVLERİ İÇİN:
- Sadece "say", "hesapla", "bul" eylemleri kullan
- "tıkla", "bas", "yakala" gibi eylemler YASAKta
- Renk MUTLAKA emoji ile: 🔴 kırmızı, 🔵 mavi, 🟢 yeşil, 🟡 sarı
- Şekil MUTLAKA spesifik: daire, kare, üçgen, yıldız, kalp, elmas
- Örnek: "🔵 Mavi daireleri say"
- "hedefRenk" ve "hedefSekil" alanları MUTLAKA doldur`:""}`;return console.log("🤖 [AI PROMPT] ============================================================================="),console.log(p),console.log("🤖 [AI PROMPT END] ========================================================================"),p}formatPerformanceForPrompt(e){const{son3Tur:t,basariOrani:s,ortalamaReaksiyonSuresi:o,odaklanmaDurumu:l,sayiGorevPerformansi:h}=e,g=t.map((y,x)=>`Tur ${x+1}: ${y.basari?"Başarılı":"Başarısız"} - ${y.sure}s - ${y.zorluk}`).join(`
`);let p="";return h&&h.hedefYakalamaOrani!==void 0&&h.toplamHedefSayisi!==void 0&&(p=`

HEDEF YAKALAMA METRİKLERİ:
- Hedef Yakalama Oranı: ${Math.round((h.hedefYakalamaOrani||0)*100)}%
- Yakalanan Hedefler: ${h.yakalinanHedefSayisi||0}/${h.toplamHedefSayisi||0}
- Yanlış Tıklamalar: ${h.yanlisTiklamaSayisi||0}

HIZLI TIKLAMA ANALİZİ (ADHD İÇİN ÖNEMLİ) - KÜMÜLATIF PERFORMANS:
- Genel Hızlı Tıklama Oranı: ${h.hizliTiklamaOrani?Math.round(h.hizliTiklamaOrani*100):0}% (3 saniye altı)
- Toplam Hızlı Tıklamalar: ${h.hizliTiklamaSayisi||0}/${h.toplamTiklamaSayisi||0}
- Toplam Hızlı+Doğru Tıklamalar: ${h.hizliVeDogruTiklamalar||0}
- Genel Hızlı Tıklama Doğruluğu: ${h.hizliTiklamaDogrulukOrani?Math.round(h.hizliTiklamaDogrulukOrani*100):0}%

SON ROUND HIZLI TIKLAMA PERFORMANSI:
- Son Round Hızlı Tıklama Oranı: ${h.sonRoundHizliTiklamaOrani?Math.round(h.sonRoundHizliTiklamaOrani*100):0}%
- Son Round Hızlı Tıklamalar: ${h.sonRoundHizliTiklamaSayisi||0}/${h.sonRoundToplamTiklamaSayisi||0}
- Son Round Hızlı+Doğru: ${h.sonRoundHizliVeDogruTiklamalar||0}
- Son Round Hızlı Tıklama Doğruluğu: ${h.sonRoundHizliTiklamaDogrulukOrani?Math.round(h.sonRoundHizliTiklamaDogrulukOrani*100):0}%`),`Son 3 Tur:
${g}

Genel Durum:
- Başarı Oranı: ${Math.round(s*100)}%
- Ortalama Reaksiyon: ${o.toFixed(1)}s
- Odaklanma: ${l}${p}`}async callOllama(e){const o=await fetch("http://localhost:11434/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"hf.co/umutkkgz/Kaira-Turkish-Gemma-9B-T1-GGUF:Q3_K_M",prompt:e,format:"json",stream:!1,options:{temperature:.7,top_p:.9,num_predict:250}})});if(!o.ok)throw new Error(`Ollama API hatası: ${o.status}`);return(await o.json()).response?.trim()||""}parseSprintResponse(e,t){try{const s=JSON.parse(e);if(!s.gorev||typeof s.gorev!="string")throw new Error("Geçersiz görev");const o={id:`sprint_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,gorev:s.gorev,sure_saniye:Math.max(30,Math.min(60,s.sure_saniye||45)),ipuclari:Array.isArray(s.ipuclari)?s.ipuclari.slice(0,2):[],hedefRenk:s.hedefRenk||void 0,hedefSayi:s.hedefSayi||void 0,hedefSekil:s.hedefSekil||void 0,dikkatDagitici:Math.max(0,Math.min(1,s.dikkatDagitici||0)),difficulty:t,hedefTipi:this.determineTargetType(s)},l=this.validateAndCorrectTask(o);return console.log("🔍 [AI TASK] Orijinal görev:",s),console.log("✅ [AI TASK] Düzeltilmiş görev:",l),l}catch(s){throw console.error("Sprint response parse hatası:",s),new Error(`JSON parse hatası: ${s}`)}}getFallbackTask(e,t){const o={kolay:[{gorev:"🔴 Kırmızı butona bas",sure_saniye:30,ipuclari:["Kırmızı rengi ara","Büyük buton olacak"],hedefRenk:"kırmızı",dikkatDagitici:0},{gorev:"⭐ Yıldızları say",sure_saniye:35,ipuclari:["Sarı yıldızları bul","Parmakla işaret et"],hedefSekil:"yıldız",dikkatDagitici:0}],orta:[{gorev:"🟢 Yeşil kareler sayısını bul",sure_saniye:45,ipuclari:["Sadece yeşil olanlar","Sessizce say"],hedefRenk:"yeşil",hedefSekil:"kare",dikkatDagitici:.3},{gorev:"🎯 Ortadaki hedefe 3 saniye odaklan",sure_saniye:40,ipuclari:["Gözlerini hedeften ayırma","Nefes al"],dikkatDagitici:.5}],zor:[{gorev:"🔵 Mavi daireler gözükünce hızla tıkla",sure_saniye:50,ipuclari:["Hazır ol","Hızlı reaksiyon göster"],hedefRenk:"mavi",hedefSekil:"daire",dikkatDagitici:.7},{gorev:"🟡⭐ Sarı yıldızları takip et ve say",sure_saniye:55,ipuclari:["Hareket eden yıldızları takip et","Sayıyı unutma"],hedefRenk:"sarı",hedefSekil:"yıldız",dikkatDagitici:.8}]}[e],l=o[Math.floor(Math.random()*o.length)];return{id:`fallback_sprint_${Date.now()}`,...l,difficulty:e,hedefTipi:l.hedefRenk?"renk":l.hedefSekil?"sekil":l.hedefSayi?"sayi":"genel"}}determineTargetType(e){return e.hedefRenk&&e.hedefSekil||e.hedefRenk?"renk":e.hedefSekil?"sekil":e.hedefSayi?"sayi":"genel"}validateAndCorrectTask(e){const t=e.gorev.toLowerCase(),s=["kırmızı","mavi","yeşil","sarı","mor","turuncu"].find(g=>t.includes(g)),o=["yıldız","daire","kare","üçgen","kalp","elmas"].find(g=>t.includes(g));let l=null;if(t.includes("tane")||t.includes("adet")||t.includes("say")){const g=t.match(/(\d+)\s*(tane|adet|say)/);l=g?parseInt(g[1]):null}else if(t.includes("numar")||t.includes("rakam")){const g=t.match(/(\d+)\s*(numar|rakam)/);l=g?parseInt(g[1]):null}console.log("🔍 [TEXT ANALYSIS]",{görev:e.gorev,detectedColors:s,detectedShapes:o,detectedNumbers:l,originalTask:{hedefRenk:e.hedefRenk,hedefSekil:e.hedefSekil,hedefSayi:e.hedefSayi}});const h={...e};return s&&o?(console.log(`🔧 [TASK FIX] Karma hedef: ${s} ${o}`),h.hedefRenk=s,h.hedefSekil=o,h.hedefSayi=void 0,h.gorev=h.gorev.replace(/(\d+)\s*(tane|adet)/g,"").replace(/\s+/g," ").trim()):s&&!o?(console.log(`🔧 [TASK FIX] Sadece renk: ${s}`),h.hedefRenk=s,h.hedefSekil=void 0,h.hedefSayi=void 0,h.gorev=h.gorev.replace(/(\d+)\s*(tane|adet)/g,"").replace(/\s+/g," ").trim()):o&&!s&&(console.log(`🔧 [TASK FIX] Sadece şekil: ${o}`),h.hedefSekil=o,h.hedefRenk=void 0,h.hedefSayi=void 0,h.gorev=h.gorev.replace(/(\d+)\s*(tane|adet)/g,"").replace(/\s+/g," ").trim()),l&&(!e.hedefSayi||e.hedefSayi!==l)?(console.log(`🔧 [TASK FIX] Sayı düzeltmesi: ${e.hedefSayi} → ${l}`),h.hedefSayi=l,h.hedefRenk=void 0,h.hedefSekil=void 0):e.hedefSayi&&!l&&(s||o)&&(console.log(`🔧 [TASK FIX] Yanlış sayı temizleme: hedefSayi ${e.hedefSayi} silindi`),h.hedefSayi=void 0,h.gorev=h.gorev.replace(/(\d+)\s*(tane|adet)/g,"").replace(/\s+/g," ").trim()),h}evaluateNumberTaskPerformance(e,t){const{ortalamaSayiZorlugu:s,sayiBasariOrani:o,ortalamaReaksiyonSuresiSayi:l,hizliCozumSayisi:h}=e,g=t.filter(x=>x.hedefTipi==="sayi");g[g.length-1];let p=0,y="orta";return h>=2&&l<2?(p=3,y="zor"):o>=.8&&l<4?(p=2,y=s<5?"orta":"zor"):o>=.6&&l<6?(p=1,y="orta"):(o<.5||l>8)&&(p=-1,y="kolay"),{zorlukArtisi:p,onerilen:y}}determineNumberDifficulty(e,t,s){const l=Math.max(1,Math.min(3,(e==="kolay"?1:e==="orta"?2:3)+s)),h={1:{min:1,max:3},2:{min:2,max:5},3:{min:3,max:7},4:{min:5,max:9}};return h[Math.min(4,l)]||h[2]}}const Kd=new uj;class dj{constructor(){this.emotions=[],this.gameStartTime=0,this.lastAnalysisTime=0,this.currentGameSession=[],this.currentRoundSession=[],this.isGameActive=!1,this.roundStartTime=0}startGameSession(){this.gameStartTime=Date.now(),this.currentGameSession=[],this.lastAnalysisTime=this.gameStartTime,this.isGameActive=!0,console.log("🎮 [EMOTION] Oyun seansı başladı, emotion tracking aktif")}startRoundSession(){this.roundStartTime=Date.now(),this.currentRoundSession=[],console.log("🔄 [EMOTION] Round seansı başladı, round emotion tracking aktif")}addEmotionResult(e){if(!this.isGameActive){console.log("⏸️ [EMOTION] Oyun aktif değil, emotion kaydedilmiyor");return}this.emotions.push(e),this.currentGameSession.push(e),this.currentRoundSession.push(e),console.log("📥 [EMOTION ADDED]",{emotion:e.emotion,confidence:(e.confidence*100).toFixed(1)+"%",gazeStatus:e.gazeStatus,lookingAtScreen:e.lookingAtScreen,gameActive:this.isGameActive,gameTotal:this.currentGameSession.length,roundTotal:this.currentRoundSession.length,timestamp:new Date(e.timestamp).toLocaleTimeString()});const t=this.currentRoundSession[this.currentRoundSession.length-2];(!t||t.emotion!==e.emotion)&&console.log(`😊 [EMOTION] ${e.emotion} (${(e.confidence*100).toFixed(1)}%) - ${e.gazeStatus} [Round: ${this.currentRoundSession.length}]`)}getCurrentGameMetrics(){if(this.currentGameSession.length===0)return this.getEmptyMetrics();const e=(Date.now()-this.gameStartTime)/1e3,t=this.groupEmotionsByType(this.currentGameSession),s=this.currentGameSession.filter(x=>x.lookingAtScreen),o=e/this.currentGameSession.length,l=s.length*o,h=l/e*100;console.log("👁️ [SCREEN LOOKING DEBUG]",{totalEmotions:this.currentGameSession.length,lookingEmotions:s.length,totalGameTime:e.toFixed(1)+"s",avgEmotionDuration:o.toFixed(1)+"s",screenLookingTime:l.toFixed(1)+"s",screenLookingPercentage:h.toFixed(1)+"%",calculationCheck:`${s.length}/${this.currentGameSession.length} = ${(s.length/this.currentGameSession.length*100).toFixed(1)}%`,sampleEmotions:this.currentGameSession.slice(-3).map(x=>({emotion:x.emotion,lookingAtScreen:x.lookingAtScreen,timestamp:new Date(x.timestamp).toLocaleTimeString()}))});const g=this.getDominantEmotion(t),p=this.calculateAttentionScore(h,g,this.countDistractionEvents());return{totalGameTime:e,screenLookingTime:l,screenLookingPercentage:h,emotionStats:this.formatEmotionStats(t,e),dominantEmotion:g,attentionScore:p,distractionEvents:this.countDistractionEvents()}}endGameSession(){const e=this.getCurrentGameMetrics();return this.isGameActive=!1,console.log("🏁 [EMOTION] Oyun seansı bitti",{totalTime:`${e.totalGameTime.toFixed(1)}s`,attentionScore:e.attentionScore,dominantEmotion:e.dominantEmotion,totalEmotions:this.currentGameSession.length}),e}groupEmotionsByType(e){return e.reduce((t,s)=>(t[s.emotion]||(t[s.emotion]=[]),t[s.emotion].push(s),t),{})}getDominantEmotion(e){let t=0,s="neutral";for(const[o,l]of Object.entries(e))l.length>t&&(t=l.length,s=o);return s}calculateAttentionScore(e,t,s){let o=0;o+=Math.min(e*.5,50),o+={focused:30,happy:28,neutral:25,surprised:20,confused:15,bored:10,sad:5,angry:0}[t]||15;const h=Math.min(s*2,20);return o-=h,Math.max(0,Math.min(100,o))}countDistractionEvents(){let e=0,t=!0;for(const s of this.currentGameSession)t&&!s.lookingAtScreen&&e++,t=s.lookingAtScreen;return e}formatEmotionStats(e,t){const s=Object.values(e).reduce((o,l)=>o+l.length,0);return Object.entries(e).map(([o,l])=>{const h=l.length/s*100,g=l.filter(y=>y.lookingAtScreen),p=l.length>0?g.length/l.length*100:0;return{emotion:o,totalTime:l.length,lookingTime:g.length,percentage:h,lookingPercentage:p}}).sort((o,l)=>l.totalTime-o.totalTime)}getEmptyMetrics(){return{totalGameTime:0,screenLookingTime:0,screenLookingPercentage:0,emotionStats:[],dominantEmotion:"neutral",attentionScore:50,distractionEvents:0}}clearHistory(){this.emotions=[],this.currentGameSession=[],console.log("🗑️ [EMOTION] Emotion history temizlendi")}isGameActiveStatus(){return this.isGameActive}getCurrentRoundEmotions(){return[...this.currentRoundSession]}getFullGameEmotions(){return[...this.currentGameSession]}endRoundSession(){const e=[...this.currentRoundSession];return console.log("🏁 [EMOTION] Round seansı bitti",{roundEmotions:e.length,totalGameEmotions:this.currentGameSession.length,roundDuration:this.roundStartTime?`${((Date.now()-this.roundStartTime)/1e3).toFixed(1)}s`:"N/A"}),e}getRecentEmotionTrend(){const e=this.currentGameSession.slice(-10);if(e.length===0)return{emotion:"neutral",confidence:.5,lookingAtScreen:!0};const t={};let s=0,o=0;for(const h of e)t[h.emotion]=(t[h.emotion]||0)+1,h.lookingAtScreen&&s++,o+=h.confidence;return{emotion:Object.entries(t).sort(([,h],[,g])=>g-h)[0][0],confidence:o/e.length,lookingAtScreen:s/e.length>.5}}}const Ve=new dj;class hj{constructor(){this.performanceHistory=[],this.baseSettings={kolay:{speed:.8,objectCount:3,duration:20},orta:{speed:1,objectCount:4,duration:30},zor:{speed:1.5,objectCount:6,duration:40}}}calculateDifficultyAdjustment(e,t){console.log("🎯 [ADAPTIVE] Zorluk analizi başlıyor...",{currentDifficulty:e,accuracy:t.accuracy,attentionScore:t.attentionMetrics.attentionScore});const s=this.analyzeEmotionState(t.attentionMetrics),o=this.analyzeGamePerformance(t),l=this.analyzeAttentionLevel(t.attentionMetrics),h=this.calculateAdjustment(e,s,o,l);return this.performanceHistory.push(t),this.performanceHistory.length>5&&this.performanceHistory.shift(),console.log("✅ [ADAPTIVE] Zorluk ayarlaması tamamlandı:",{newDifficulty:h.newDifficulty,reason:h.reason,speedMultiplier:h.speedMultiplier}),h}analyzeEmotionState(e){const{dominantEmotion:t,attentionScore:s}=e;let o=0,l="neutral";o={happy:10,surprised:8,neutral:6,confused:4,bored:2,sad:1,angry:0}[t]||5,o>=8?l="positive":o>=4?l="neutral":l="negative";let g="maintain";return l==="positive"&&s>70?g="increase":l==="negative"||s<30?g="decrease":t==="bored"&&s>50&&(g="increase"),{score:o,type:l,recommendation:g}}analyzeGamePerformance(e){const{accuracy:t,avgReactionTime:s}=e;let o="average",l="maintain";return t>.8&&s<1.5?(o="excellent",l="increase"):t>.6&&s<2?(o="good",l="maintain"):t>.4||s<3?(o="average",l="maintain"):(o="poor",l="decrease"),{level:o,recommendation:l}}analyzeAttentionLevel(e){const{screenLookingPercentage:t,distractionEvents:s,attentionScore:o}=e;let l="medium",h="maintain";return t>80&&s<3&&o>70?(l="high",h="increase"):t>60&&s<5&&o>50?(l="medium",h="maintain"):(l="low",h="decrease"),{level:l,recommendation:h}}calculateAdjustment(e,t,s,o){const l=[t.recommendation,s.recommendation,o.recommendation],h=l.filter(F=>F==="increase").length,g=l.filter(F=>F==="decrease").length;let p=e,y="",x=[];h>=2?(e==="kolay"?p="orta":e==="orta"&&(p="zor"),y="Performansın mükemmel! Daha zorlu görevler deniyoruz 🎯",x=["Harika gidiyorsun! 🌟","Dikkatini toplamayı başarıyorsun","Daha hızlı objeler gelecek"]):g>=2?(e==="zor"?p="orta":e==="orta"&&(p="kolay"),y="Odaklanma konusunda zorluk yaşıyorsun. Daha kolay görevlerle devam edelim 💪",x=["Merak etme, adım adım öğreniyoruz","Nefes al ve odaklanmaya çalış","Objeler daha yavaş gelecek"]):(y="Performansın dengeli, mevcut zorlukta devam ediyoruz 👍",x=["İyi gidiyorsun!","Bu tempoda devam et","Dikkatini korumaya çalış"]);const T=this.baseSettings[p];let w=T.speed,M=T.objectCount;return t.type==="negative"?(w*=.8,M=Math.max(2,M-1)):t.type==="positive"&&o.level==="high"&&(w*=1.2,M=Math.min(8,M+1)),o.level==="low"&&(w*=.7,M=Math.max(2,M-1)),{newDifficulty:p,speedMultiplier:Number(w.toFixed(1)),objectCount:M,reason:y,suggestions:x}}formatForPrompt(e,t){const s=e.attentionMetrics;return`
DUYGU VE DİKKAT ANALİZİ:
- Baskın Duygu: ${s.dominantEmotion} (${s.emotionStats[0]?.percentage.toFixed(1)||"0"}% süre)
- Ekrana Bakma: %${s.screenLookingPercentage.toFixed(1)} (${s.screenLookingTime.toFixed(1)}s)
- Dikkat Skoru: ${s.attentionScore}/100
- Dikkat Dağılması: ${s.distractionEvents} kez ekrandan baktı
- Oyun Performansı: %${(e.accuracy*100).toFixed(1)} doğruluk, ${e.avgReactionTime.toFixed(1)}s ortalama tepki

ZORLUK AYARLAMA:
- Mevcut Zorluk → Yeni Zorluk: ${t.newDifficulty}
- Hız Çarpanı: ${t.speedMultiplier}x
- Sebep: ${t.reason}

ADHD İÇİN ÖPTİMİZASYON GEREKSİNİMLERİ:
${this.getADHDOptimizations(s,e)}`}getADHDOptimizations(e,t){const s=[];return e.screenLookingPercentage<60&&(s.push("- DİKKAT: Çok dikkat dağınıklığı var, daha büyük ve renkli objeler kullan"),s.push("- Görevde daha açık talimatlar ve görsel ipuçları ekle")),e.dominantEmotion==="bored"&&(s.push("- SIKINTI: Oyuncu sıkılmış, daha eğlenceli ve değişken görevler sun"),s.push("- Motivasyon artırıcı pozitif geri bildirimler kullan")),e.dominantEmotion==="confused"&&(s.push("- KARIŞIKLIK: Görevler karmaşık gelmiş, daha basit ve net talimatlar ver"),s.push("- Adım adım açıklamalar ve örnek göster")),t.accuracy<.5&&(s.push("- PERFORMANS: Başarı oranı düşük, daha kolay hedefler ve daha uzun süre ver"),s.push("- Pozitif teşvik ve cesaretlendirme mesajları ekle")),e.distractionEvents>5&&(s.push("- DİKKAT DAĞINIKLIGI: Çok sık ekrandan bakıyor, daha ilgi çekici görevler tasarla"),s.push("- Kısa süreli görevler ve sık ara verme imkanı sun")),s.length>0?s.join(`
`):"- Mevcut ayarlar ADHD için uygun görünüyor"}getRealtimeFeedback(e){return e.screenLookingPercentage<40?{message:"Ekrana odaklanmaya çalış! 👀",type:"warning",suggestion:"Gözlerini ekrandaki renklere odakla"}:e.dominantEmotion==="bored"?{message:"Sıkılıyor gibisin, devam et! 🎯",type:"info",suggestion:"Bu görev bittikten sonra daha eğlenceli bir görev gelecek"}:e.attentionScore>70?{message:"Harika odaklanıyorsun! 🌟",type:"success",suggestion:"Bu tempoda devam et"}:{message:"İyi gidiyorsun! 👍",type:"info",suggestion:"Dikkatini korumaya devam et"}}}const mp=new hj;class fj{constructor(){this.isActive=!1,this.isAnalysisActive=!1,this.pythonServerUrl="http://localhost:5000",this.pollInterval=null,this.videoRef=null,this.lastAnalysisTime=0,this.ANALYSIS_INTERVAL=3e3}async checkCameraAvailability(){try{return(await navigator.mediaDevices.getUserMedia({video:!0})).getTracks().forEach(t=>t.stop()),!0}catch(e){return console.log("📷 [CAMERA] Kamera erişimi yok:",e),!1}}async checkPythonServer(){try{return(await fetch(`${this.pythonServerUrl}/health`,{method:"GET",timeout:2e3})).ok}catch(e){return console.log("🐍 [PYTHON] Python server erişilemiyor:",e),!1}}async startEmotionTracking(e,t){if(console.log("🎭 [EMOTION] Real-time tracking başlatılıyor..."),!await this.checkCameraAvailability())return console.log("❌ [EMOTION] Kamera erişimi yok, mock mode kullanılacak"),!1;if(!await this.checkPythonServer())return console.log("❌ [EMOTION] Python server çalışmıyor, mock mode kullanılacak"),!1;try{const l=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480,facingMode:"user"}});return e.srcObject=l,await e.play(),this.onEmotionCallback=t,this.isActive=!0,this.pollInterval=setInterval(()=>{this.captureAndAnalyzeFrame(e)},1e3),console.log("✅ [EMOTION] Real-time kamera tracking aktif"),!0}catch(l){return console.error("❌ [EMOTION] Kamera başlatma hatası:",l),!1}}async captureAndAnalyzeFrame(e){if(!this.isActive||!this.isAnalysisActive)return;if(!Ve.isGameActiveStatus()){console.log("⏸️ [CAMERA FRAME] Oyun aktif değil, frame analizi atlanıyor");return}const t=Date.now();if(this.lastAnalysisTime>0&&t-this.lastAnalysisTime<this.ANALYSIS_INTERVAL){console.log("⏱️ [TIMING] Analiz çok erken, atlanıyor",{timeSinceLastAnalysis:`${t-this.lastAnalysisTime}ms`,required:`${this.ANALYSIS_INTERVAL}ms`});return}this.lastAnalysisTime=t;try{const s=document.createElement("canvas");s.width=640,s.height=480;const o=s.getContext("2d");if(!o)return;o.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL("image/jpeg",.8),h=await fetch(`${this.pythonServerUrl}/analyze_frame`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({frame:l.split(",")[1]})});if(h.ok){const g=await h.json(),p=this.convertToEmotionResult(g);console.log("✅ [FRAME ANALYSIS] Analiz tamamlandı",{emotion:p.emotion,confidence:`${(p.confidence*100).toFixed(1)}%`,gaze:p.gazeStatus,timeSinceLastAnalysis:`${Date.now()-this.lastAnalysisTime}ms`}),this.onEmotionCallback&&this.onEmotionCallback(p)}}catch(s){console.log("🔍 [FRAME] Frame analiz hatası:",s)}}async pollEmotionData(){if(this.isActive)try{const e=await fetch(`${this.pythonServerUrl}/emotion_data`,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.ok){const t=await e.json(),s=this.convertToEmotionResult(t);this.onEmotionCallback&&this.onEmotionCallback(s)}}catch{}}convertToEmotionResult(e){const s={happy:"happy",sad:"sad",bored:"bored",confused:"confused",surprised:"surprised",angry:"angry",neutral:"neutral",focused:"focused",frustrated:"angry"}[e.emotion]||"neutral";let o="no-face";const l=e.lookingAtScreen||e.looking_at_screen||!1;return e.faceDetected&&(o=l?"looking":"not-looking"),console.log("🔍 [GAZE MAPPING DEBUG]",{faceDetected:e.faceDetected,lookingAtScreen_snake:e.looking_at_screen,lookingAtScreen_camel:e.lookingAtScreen,finalLookingAtScreen:l,gazeStatus:o}),{emotion:s,confidence:e.confidence,timestamp:new Date,gazeStatus:o,gazeX:e.gaze_x,lookingAtScreen:l}}stopEmotionTracking(){console.log("⏹️ [EMOTION] Real-time tracking durduruluyor..."),this.isActive=!1,this.isAnalysisActive=!1,this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),fetch(`${this.pythonServerUrl}/stop_camera`,{method:"POST",headers:{"Content-Type":"application/json"}}).catch(()=>{}),this.onEmotionCallback=void 0}startMockEmotionSimulation(e,t){console.log("🎭 [MOCK] Mock emotion simulation başlatılıyor...");let s="neutral",o=0;const l=()=>{if(!this.isActive)return;o+=1;const{correctClicks:h,wrongClicks:g,timeLeft:p,isPlaying:y}=t,x=h+g>0?h/(h+g):.5;y?x>.8&&h>5?s=Math.random()>.7?"happy":"neutral":x<.3&&g>3?s=Math.random()>.6?"confused":Math.random()>.5?"sad":"neutral":p<10&&x>.6?s=Math.random()>.7?"surprised":"neutral":o>30&&x<.5&&(s=Math.random()>.6?"bored":"neutral"):s="neutral";const w=!(Math.random()<.15),M={emotion:s,confidence:.7+Math.random()*.25,timestamp:new Date,gazeStatus:w?"looking":"not-looking",gazeX:w?320+(Math.random()-.5)*100:Math.random()*640,lookingAtScreen:w};e(M)};this.isActive=!0,this.pollInterval=setInterval(l,1e3),console.log("✅ [MOCK] Mock emotion simulation aktif")}startFrameAnalysis(){if(!this.isActive){console.log("⚠️ [CAMERA] Kamera bağlantısı yok, frame analizi başlatılamıyor");return}this.isAnalysisActive=!0,this.lastAnalysisTime=0,console.log("🎥 [CAMERA] Frame analizi başlatıldı, strict 3s timing aktif")}stopFrameAnalysis(){this.isAnalysisActive=!1,console.log("⏸️ [CAMERA] Frame analizi durduruldu")}isTrackingActive(){return this.isActive}isFrameAnalysisActive(){return this.isAnalysisActive}}const ht=new fj,mj=({studentId:a,studentAge:e=12,difficulty:t,onGameComplete:s,onEmotionDetected:o})=>{console.log("🎯 [AttentionClickGame] Component initialized with props:",{studentId:a,studentAge:e,difficulty:t});const[l,h]=E.useState(null),[g,p]=E.useState("ready"),[y,x]=E.useState(0),[T,w]=E.useState([]),[M,F]=E.useState(0),[B,U]=E.useState(0),[K,ee]=E.useState([]),ne=E.useRef([]),[Se]=E.useState(Date.now()),[Te,xe]=E.useState(3),[R,A]=E.useState(!1),[N,j]=E.useState(!1),[O,V]=E.useState(!1),[C,lt]=E.useState({x:50,y:50}),[de,X]=E.useState([]),[he,me]=E.useState(!1),[Me,D]=E.useState(null),[z,W]=E.useState(null),[Q,ce]=E.useState(""),[be,Ae]=E.useState(0),[fe,ue]=E.useState(0),[De,ye]=E.useState(0),[oe,He]=E.useState(null),it=E.useRef(0),Le=E.useRef(!1),ft=E.useRef(!1),et=E.useRef(!1),Ye=E.useRef(null),pt=E.useRef(null),tt=5,zt=E.useCallback(async()=>{console.log("🎭 [EMOTION] Emotion tracking başlatılıyor..."),me(!0);const Ue=_t=>{if(!Ve.isGameActiveStatus())return;D(_t),Ve.addEmotionResult(_t);const It=Ve.getCurrentGameMetrics();W(It);const Zt=mp.getRealtimeFeedback(It);ce(Zt.message);const Lt={emotion:_t.emotion,confidence:_t.confidence,timestamp:_t.timestamp};ee(le=>{const _e=[...le.slice(-10),Lt];return ne.current=_e,_e}),o?.(Lt)};let We=!1;pt.current&&(We=await ht.startEmotionTracking(pt.current,Ue)),We||console.log("📱 [EMOTION] Gerçek kamera bulunamadı - Python server çalışıyor mu?"),console.log("✅ [EMOTION] Emotion tracking aktif")},[o]),$t=E.useCallback(()=>{console.log("⏹️ [EMOTION] Emotion tracking durduruluyor..."),ht.stopEmotionTracking(),me(!1);const Ue=Ve.endGameSession();W(Ue),console.log("🏁 [EMOTION] Final metrics:",Ue)},[]);E.useEffect(()=>(!Le.current&&!O&&(Le.current=!0,rn()),()=>{Ye.current&&(clearInterval(Ye.current),Ye.current=null)}),[]);const rn=E.useCallback(async()=>{if(ft.current)return;ft.current=!0,V(!0);const Ue=T.reduce((Z,Ee)=>Z+(Ee.success?1:0),0),We=T.length,_t=We>0?Ue/We:.7,It=T.length>0?T.reduce((Z,Ee)=>Z+Ee.reactionTime,0)/T.length:2.5,Zt=T.length>0?T.reduce((Z,Ee)=>Z+Ee.targetAppearanceDelay,0)/T.length:1.5,Lt=T.reduce((Z,Ee)=>Z+Ee.distractorClicks,0),le=T.reduce((Z,Ee)=>Z+Ee.missedTargets,0),_e=T.slice(-3).map(Z=>({basari:Z.success,sure:Z.reactionTime,zorluk:t,hedefTipi:"tek-tıklama",hizliCozum:Z.reactionTime<1.5,zamanlamaSapmasi:Math.abs(Z.reactionTime-It),hedefZaman:Zt})),qe=Ve.getCurrentGameMetrics(),Je={son3Tur:_e,ortalamaReaksiyonSuresi:It,basariOrani:_t,odaklanmaDurumu:"ai-analiz",attentionMetrics:qe,clickGorevPerformansi:{hedefBulmaHizi:It,dikkatDagiticiDirenci:Lt>0?_t:1,hedefKacirmaSayisi:le,ortalamaBeklemeSSuresi:Zt,basariOrani:_t,toplamTur:We,basariliTur:Ue,yanlisTiklamalar:Lt}};try{const Z=Ve.getCurrentRoundEmotions(),Ee=Z.length>0?JSON.stringify(Z):void 0;console.log("🎯 [CLICK GAME AI PROMPT DATA]",{hasEmotionData:!!Ee,roundEmotionCount:Z.length,roundsCount:T.length,accuracy:_t,avgReactionTime:It,distractorClicks:Lt});const ke=await Kd.generateAttentionSprint({performansOzeti:Je,studentAge:e,sonGorevler:["tek-tıklama"],emotionData:Ee}),Oe={...ke,difficulty:t,gorev:dn(ke.gorev)};h(Oe),x(Oe.sure_saniye)}catch(Z){console.error("İlk görev üretme hatası:",Z),h(An())}finally{ft.current=!1,V(!1)}},[e,t,T]),dn=Ue=>{const We=Ue.toLowerCase();if(!We.includes("say")&&!We.includes("count")&&!We.includes("adet")&&!We.includes("tüm")&&!We.includes("hepsi"))return Ue;const _t=["🔴 Kırmızı","🔵 Mavi","🟢 Yeşil","🟡 Sarı"],It=["daire","kare","üçgen","yıldız"],Zt=_t[Math.floor(Math.random()*_t.length)],Lt=It[Math.floor(Math.random()*It.length)];return`${Zt} ${Lt}i tıkla`},An=()=>{const We={kolay:[{gorev:"🔴 Kırmızı daire tıkla",hedefRenk:"kırmızı",hedefSekil:"daire"},{gorev:"🔵 Mavi kare tıkla",hedefRenk:"mavi",hedefSekil:"kare"},{gorev:"🟢 Yeşil yıldız tıkla",hedefRenk:"yeşil",hedefSekil:"yıldız"}],orta:[{gorev:"🔴 Kırmızı üçgen 2 saniye sonra tıkla",hedefRenk:"kırmızı",hedefSekil:"üçgen"},{gorev:"🔵 Mavi daire belirdiğinde tıkla",hedefRenk:"mavi",hedefSekil:"daire"},{gorev:"🟡 Sarı kare gördüğünde bas",hedefRenk:"sarı",hedefSekil:"kare"}],zor:[{gorev:"🔴 Kırmızı yıldız çıktığında hemen tıkla",hedefRenk:"kırmızı",hedefSekil:"yıldız"},{gorev:"🔵 Mavi üçgen görünür görünmez bas",hedefRenk:"mavi",hedefSekil:"üçgen"},{gorev:"🟢 Yeşil daire belirdiğinde anında tıkla",hedefRenk:"yeşil",hedefSekil:"daire"}]}[t],_t=We[Math.floor(Math.random()*We.length)];return{id:`click_fallback_${Date.now()}`,..._t,sure_saniye:t==="kolay"?30:t==="orta"?40:50,ipuclari:["Hedefe odaklan","Hızlı reaksiyon göster"],dikkatDagitici:t==="kolay"?0:t==="orta"?.3:.5,difficulty:t,hedefTipi:"renk"}},Pn=async()=>{if(!l)return;p("countdown"),xe(3),A(!1),j(!1),await zt();const Ue=setInterval(()=>{xe(We=>We<=1?(clearInterval(Ue),Xt(),0):We-1)},1e3)},st=()=>{Ye.current&&(clearInterval(Ye.current),Ye.current=null),it.current=Date.now(),Ye.current=setInterval(()=>{x(Ue=>Ue<=1?(Ye.current&&(clearInterval(Ye.current),Ye.current=null),Vn(!1),0):Ue-1)},1e3)},ut=()=>({x:Math.random()*70+15,y:Math.random()*60+20}),Kt=()=>{if(!l)return[];const Ue=Math.floor(l.dikkatDagitici*5),We=[];for(let _t=0;_t<Ue;_t++){const It=ut();let Zt="shape",Lt="⚫";if(l.hedefRenk&&l.hedefSekil){Zt="combo";const le=l.hedefRenk;let _e=[];le==="mavi"?_e=["🔴","🟢","🟡","🟠","🟣"]:le==="kırmızı"?_e=["🔵","🟢","🟡","🟠","🟣"]:le==="yeşil"?_e=["🔴","🔵","🟡","🟠","🟣"]:le==="sarı"&&(_e=["🔴","🔵","🟢","🟠","🟣"]),Lt=_e[Math.floor(Math.random()*_e.length)]||"⚫"}We.push({id:`distractor-${_t}`,x:It.x,y:It.y,type:Zt,value:Lt})}return We},Xt=()=>{if(!l)return;p("active"),x(l.sure_saniye),lt(ut()),X(Kt()),Ve.startGameSession(),Ve.startRoundSession();const Ue=Math.random()*2e3+1e3;Ae(Ue),setTimeout(()=>{A(!0),st(),ht.startFrameAnalysis?.()},Ue)},Kr=Ue=>{if(Ue.stopPropagation(),g!=="active"||!R||N)return;j(!0),He({isCorrect:!0,x:C.x,y:C.y}),setTimeout(()=>{He(null)},1e3);const We=(Date.now()-it.current)/1e3;Vn(!0,We)},Or=(Ue,We,_t)=>{if(Ue.stopPropagation(),g!=="active"||N)return;He({isCorrect:!1,x:We,y:_t}),setTimeout(()=>{He(null)},1e3),ue(Zt=>Zt+1);const It=(Date.now()-it.current)/1e3;Vn(!1,It)},dr=()=>{if(g!=="active"||!R||N)return;ye(We=>We+1);const Ue=(Date.now()-it.current)/1e3;Vn(!1,Ue)},Vn=(Ue,We)=>{if(!l||et.current)return;et.current=!0,Ye.current&&(clearInterval(Ye.current),Ye.current=null);const _t=We||(Date.now()-it.current)/1e3,It=Ue?1:0,Zt={task:l,startTime:it.current,endTime:Date.now(),success:Ue,reactionTime:_t,targetAppearanceDelay:be,clickAccuracy:It,distractorClicks:fe,missedTargets:De};console.log("🎯 [CLICK ROUND METRICS]",{success:Ue,reactionTime:_t,targetDelay:be,distractorClicks:fe,missedTargets:De,clickAccuracy:It}),w(le=>[...le,Zt]);const Lt=Ve.endRoundSession();if(console.log("🏁 [CLICK ROUND ENDED] Round emotion data:",Lt.length),ht.stopFrameAnalysis?.(),M+1>=tt){const le=Ve.endGameSession();W(le),console.log("⏹️ [CLICK GAME ENDED] Final metrics:",le)}if(Ue){U(_e=>_e+1);const le={emotion:"happy",confidence:.9,timestamp:new Date};ee(_e=>[..._e,le]),o?.(le)}else{const le={emotion:"confused",confidence:.7,timestamp:new Date};ee(_e=>[..._e,le]),o?.(le)}p("waiting"),setTimeout(()=>{M+1>=tt?rr():(F(le=>le+1),A(!1),j(!1),X([]),ue(0),ye(0),Ae(0),Ve.startRoundSession(),rn(),p("ready")),et.current=!1},2e3)},rr=()=>{p("completed"),$t();const Ue=Math.floor((Date.now()-Se)/1e3);s(B,Ue,K)},Rn=()=>{Ye.current&&(clearInterval(Ye.current),Ye.current=null),$t(),w([]),F(0),U(0),ee([]),ne.current=[],p("ready"),A(!1),j(!1),lt({x:50,y:50}),X([]),me(!1),D(null),W(null),ce(""),ue(0),ye(0),Ae(0),He(null),Le.current=!1,ft.current=!1,et.current=!1,rn()};return g==="completed"?u.jsx(Sn,{className:"max-w-2xl mx-auto",children:u.jsxs(wn,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:u.jsx(ur,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dikkat Tıklama Oyunu Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Hızlı reaksiyon becerin gelişiyor!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[B,"/",tt]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarılı Tıklama"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(B/tt*100),"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[T.length>0?(T.reduce((Ue,We)=>Ue+We.reactionTime,0)/T.length).toFixed(1):"0.0","s"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Reaksiyon"})]})]})}),u.jsxs(Zn,{onClick:Rn,size:"lg",children:[u.jsx(Gc,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("video",{ref:pt,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),u.jsx(Sn,{children:u.jsx(wn,{children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Tur ",M+1,"/",tt]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",B]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(cr,{className:"h-4 w-4 text-purple-600"}),u.jsxs("span",{className:"text-xs text-purple-600",children:["Zorluk: ",t]})]}),he&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${ht.isTrackingActive()&&ht.isFrameAnalysisActive?.()?"bg-green-500":ht.isTrackingActive()?"bg-yellow-500":"bg-orange-500"}`}),u.jsx(Ur,{className:"h-4 w-4 text-green-600"}),u.jsx("span",{className:"text-xs text-green-600",children:ht.isTrackingActive()&&ht.isFrameAnalysisActive?.()?"Analiz Aktif":ht.isTrackingActive()?"Kamera Bağlı":"Mock Mode"})]}),Me&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(kc,{className:`h-4 w-4 ${Me.lookingAtScreen?"text-green-600":"text-red-600"}`}),u.jsxs("span",{className:"text-xs text-gray-600",children:[Me.emotion," (",(Me.confidence*100).toFixed(0),"%)"]})]})]})})})}),u.jsx(Sn,{children:u.jsx(wn,{className:"text-center py-12",children:O?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),u.jsx("p",{className:"text-gray-600",children:"Senin için özel görev hazırlanıyor..."})]}):g==="ready"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:u.jsx(dp,{className:"h-10 w-10 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dikkat Tıklama"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Hızlıca doğru hedefe tıkla ve reaksiyon sürenı geliştir!"}),l&&u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[u.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Görevin:"}),u.jsx("p",{className:"text-blue-700",children:l.gorev}),l.ipuclari.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"İpuçları:"}),l.ipuclari.map((Ue,We)=>u.jsxs("p",{className:"text-xs text-blue-600",children:["• ",Ue]},We))]})]}),u.jsxs(Zn,{onClick:Pn,size:"lg",disabled:!l,children:[u.jsx(Lo,{className:"h-5 w-5 mr-2"}),"Başla"]})]}):g==="countdown"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-800",children:"Hazırlan!"}),u.jsx("div",{className:"text-6xl font-bold text-blue-600 animate-bounce",children:Te})]}):g==="active"?u.jsxs("div",{className:"space-y-6 cursor-crosshair",onClick:dr,children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?.gorev}),R&&l&&u.jsxs("div",{className:"relative w-full h-96",children:[de.map(Ue=>u.jsx("button",{onClick:We=>Or(We,Ue.x,Ue.y),className:"absolute w-12 h-12 rounded-full bg-white hover:bg-gray-100 transition-colors duration-200 flex items-center justify-center text-2xl shadow-lg border-2 border-gray-300",style:{left:`${Ue.x}%`,top:`${Ue.y}%`,transform:"translate(-50%, -50%)"},children:Ue.value},Ue.id)),u.jsxs("button",{onClick:Kr,disabled:N,className:"absolute w-12 h-12 rounded-full transition-colors duration-200 flex items-center justify-center text-2xl shadow-lg border-2 bg-white hover:bg-gray-50 border-gray-300 hover:border-blue-400",style:{left:`${C.x}%`,top:`${C.y}%`,transform:"translate(-50%, -50%)"},children:[l.hedefRenk==="kırmızı"&&l.hedefSekil==="daire"&&"🔴",l.hedefRenk==="mavi"&&l.hedefSekil==="daire"&&"🔵",l.hedefRenk==="yeşil"&&l.hedefSekil==="daire"&&"🟢",l.hedefRenk==="sarı"&&l.hedefSekil==="daire"&&"🟡",l.hedefRenk==="kırmızı"&&l.hedefSekil==="kare"&&"🟥",l.hedefRenk==="mavi"&&l.hedefSekil==="kare"&&"🟦",l.hedefRenk==="yeşil"&&l.hedefSekil==="kare"&&"🟩",l.hedefRenk==="sarı"&&l.hedefSekil==="kare"&&"🟨",l.hedefRenk==="kırmızı"&&l.hedefSekil==="üçgen"&&"🔺",l.hedefRenk==="mavi"&&l.hedefSekil==="üçgen"&&"🔹",!l.hedefRenk&&l.hedefSekil==="yıldız"&&"⭐",!l.hedefRenk&&l.hedefSekil==="daire"&&"⭕",!l.hedefSekil&&l.hedefRenk==="kırmızı"&&"🔴",!l.hedefSekil&&l.hedefRenk==="mavi"&&"🔵",!l.hedefSekil&&l.hedefRenk==="yeşil"&&"🟢",!l.hedefSekil&&l.hedefRenk==="sarı"&&"🟡",!l.hedefSekil&&!l.hedefRenk&&!l.hedefSayi&&"🎯"]}),oe&&u.jsx("div",{className:`absolute w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold animate-ping pointer-events-none ${oe.isCorrect?"bg-green-500 text-white":"bg-red-500 text-white"}`,style:{left:`${oe.x}%`,top:`${oe.y}%`,transform:"translate(-50%, -50%)",zIndex:1e3},children:oe.isCorrect?"✓":"✗"})]}),!R&&u.jsxs("div",{className:"text-gray-600",children:[u.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"}),"Hazırlan..."]}),u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-lg",children:[u.jsx(va,{className:"h-5 w-5 text-blue-600"}),u.jsxs("span",{className:"font-mono font-bold text-blue-600",children:[y,"s"]})]})]}):g==="waiting"?u.jsxs("div",{className:"space-y-4",children:[T.length>0&&T[T.length-1].success?u.jsxs("div",{className:"text-green-600",children:[u.jsx(Sc,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Harika!"}),u.jsxs("p",{children:["Reaksiyon süresi: ",T[T.length-1].reactionTime.toFixed(2),"s"]})]}):u.jsxs("div",{className:"text-orange-600",children:[u.jsx(ur,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Bir daha deneyelim!"}),u.jsx("p",{children:"Daha hızlı olmaya çalış"})]}),u.jsx("p",{className:"text-sm text-gray-600",children:"Sonraki görev hazırlanıyor..."})]}):null})})]})},gj=({studentId:a,studentAge:e=12,difficulty:t,onGameComplete:s,onEmotionDetected:o})=>{const[l,h]=E.useState(null),[g,p]=E.useState("ready"),[y,x]=E.useState(0),[T,w]=E.useState([]),[M,F]=E.useState(0),[B,U]=E.useState(0),[K,ee]=E.useState([]),ne=E.useRef([]),[Se]=E.useState(Date.now()),[Te,xe]=E.useState(3),[R,A]=E.useState(!1),[N,j]=E.useState(!1),[O,V]=E.useState(null),[C,lt]=E.useState(null),[de,X]=E.useState(""),[he,me]=E.useState([]),[Me,D]=E.useState(""),[z,W]=E.useState(0),[Q,ce]=E.useState(0),[be,Ae]=E.useState(!1),[fe,ue]=E.useState(t),[De,ye]=E.useState(1),[oe,He]=E.useState(()=>t==="kolay"?2:t==="orta"?3:5),[it,Le]=E.useState([]),ft=E.useRef(0),et=E.useRef(!1),Ye=E.useRef(!1),pt=E.useRef(!1),tt=E.useRef(null),zt=E.useRef(null),$t=E.useRef(null),rn=5,dn=E.useCallback(async()=>{console.log("🎭 [EMOTION] Emotion tracking başlatılıyor..."),j(!0);const le=qe=>{if(!Ve.isGameActiveStatus())return;V(qe),Ve.addEmotionResult(qe);const Je=Ve.getCurrentGameMetrics();lt(Je);const Z=mp.getRealtimeFeedback(Je);X(Z.message);const Ee={emotion:qe.emotion,confidence:qe.confidence,timestamp:qe.timestamp};ee(ke=>{const Oe=[...ke.slice(-10),Ee];return ne.current=Oe,Oe}),o?.(Ee)};let _e=!1;$t.current&&(_e=await ht.startEmotionTracking($t.current,le)),_e||(console.log("📱 [EMOTION] Gerçek kamera bulunamadı - Python server çalışıyor mu?"),console.log("💡 [TIP] Terminal'de çalıştır: python emotion_server.py")),console.log("✅ [EMOTION] Emotion tracking aktif")},[o]),An=E.useCallback(()=>{console.log("⏹️ [EMOTION] Emotion tracking durduruluyor..."),ht.stopEmotionTracking(),j(!1);const le=Ve.endGameSession();lt(le),console.log("🏁 [EMOTION] Final metrics:",le)},[]),Pn=E.useCallback(async le=>{if(Ye.current){console.log("🚫 [DUPLICATE CALL] generateFirstTask already running, skipping");return}console.log("🎬 [TASK GENERATION] Starting task generation"),Ye.current=!0,A(!0);const _e=T.reduce((Re,Ge)=>Re+(Ge.success?1:0),0),qe=T.length,Je=qe>0?_e/qe:.7,Z=T.length>0?T.reduce((Re,Ge)=>Re+Ge.reactionTime,0)/T.length:15,Ee=T.length>0?T.reduce((Re,Ge)=>Re+Ge.countingDuration,0)/T.length:15,ke=T.length>0?T.reduce((Re,Ge)=>Re+Ge.answerTime,0)/T.length:5,Oe=T.reduce((Re,Ge)=>Re+Ge.objectsDisplayed,0),Ce=T.reduce((Re,Ge)=>Re+Ge.targetObjectsDisplayed,0),ve=T.slice(-3).map(Re=>({basari:Re.success,sure:Re.reactionTime,zorluk:t,hedefTipi:"sayma",hizliCozum:Re.reactionTime<10,zamanlamaSapmasi:Math.abs(Re.reactionTime-Z),hedefZaman:Ee})),Ne=Ve.getCurrentGameMetrics(),Pe={son3Tur:ve,ortalamaReaksiyonSuresi:Z,basariOrani:Je,odaklanmaDurumu:"ai-analiz",attentionMetrics:Ne,saymaGorevPerformansi:{saymaDogrulugu:Je,ortalamaSaymaSuresi:Ee,ortalamaCevapSuresi:ke,toplamObjeGosterilen:Oe,toplamHedefObje:Ce,saymaHizi:Ee>0?Ce/Ee:0,toplamTur:qe,basariliTur:_e,ortalamaDikkatSuresi:Ee}};try{const Re=le||Ve.getCurrentRoundEmotions(),Ge=Ve.getFullGameEmotions(),Tt=Re.length>0?JSON.stringify(Re):void 0;console.log("🤖 [AI PROMPT DATA]",{hasEmotionData:!!Tt,roundEmotionCount:Re.length,fullGameEmotionCount:Ge.length,roundsCount:T.length,accuracy:Je,avgReactionTime:Z,avgCountingDuration:Ee,passedRoundEmotions:le?le.length:0,emotionsSource:le?"passed-from-previous-round":"current-round-service"});const qt=await Kd.generateAttentionSprint({performansOzeti:Pe,studentAge:e,sonGorevler:["sayma"],emotionData:Tt}),Wt={...qt,difficulty:t,gorev:st(qt.gorev),hedefRenk:ut(qt.gorev)||qt.hedefRenk,hedefSekil:Kt(qt.gorev)||qt.hedefSekil,hedefSayi:void 0};console.log("🔢 [COUNT GAME] Generated counting task:",Wt.gorev),h(Wt),x(Wt.sure_saniye)}catch(Re){console.error("İlk görev üretme hatası:",Re),h(Xt())}finally{Ye.current=!1,A(!1)}},[e,t,T]);E.useEffect(()=>(!et.current&&!R&&(et.current=!0,Pn()),()=>{tt.current&&(clearInterval(tt.current),tt.current=null),zt.current&&(clearInterval(zt.current),zt.current=null)}),[Pn]);const st=le=>{const _e=le.toLowerCase();if(_e.includes("say")||_e.includes("count")||_e.includes("adet")||_e.includes("hesapla"))return le;const qe=[{turkish:"mavi",emoji:"🔵"},{turkish:"kırmızı",emoji:"🔴"},{turkish:"yeşil",emoji:"🟢"},{turkish:"sarı",emoji:"🟡"}],Je=[{turkish:"daire",emoji:"⭕"},{turkish:"kare",emoji:"⬜"},{turkish:"üçgen",emoji:"🔺"},{turkish:"yıldız",emoji:"⭐"}],Z=qe[Math.floor(Math.random()*qe.length)],Ee=Je[Math.floor(Math.random()*Je.length)];return`${Z.emoji} ${Z.turkish} ${Ee.turkish}leri say`},ut=le=>["kırmızı","mavi","yeşil","sarı","mor","turuncu"].find(qe=>le.toLowerCase().includes(qe)),Kt=le=>["yıldız","daire","kare","üçgen","kalp","elmas"].find(qe=>le.toLowerCase().includes(qe)),Xt=()=>{const _e={kolay:[{gorev:"🔵 Mavi daireleri say",hedefRenk:"mavi",hedefSekil:"daire"},{gorev:"🟢 Yeşil kareleri say",hedefRenk:"yeşil",hedefSekil:"kare"},{gorev:"⭐ Yıldızları say",hedefSekil:"yıldız"}],orta:[{gorev:"🔴 Kırmızı üçgenleri dikkatli say",hedefRenk:"kırmızı",hedefSekil:"üçgen"},{gorev:"🟡 Sarı daireleri hesapla",hedefRenk:"sarı",hedefSekil:"daire"},{gorev:"🔵 Mavi kareleri hızla say",hedefRenk:"mavi",hedefSekil:"kare"}],zor:[{gorev:"🟢 Hızlı çıkan yeşil yıldızları say",hedefRenk:"yeşil",hedefSekil:"yıldız"},{gorev:"🔴 Karışık kırmızı daireleri hesapla",hedefRenk:"kırmızı",hedefSekil:"daire"},{gorev:"🔵 Parlayan mavi üçgenleri say",hedefRenk:"mavi",hedefSekil:"üçgen"}]}[t],qe=_e[Math.floor(Math.random()*_e.length)];return{id:`count_fallback_${Date.now()}`,...qe,sure_saniye:t==="kolay"?20:t==="orta"?25:30,ipuclari:["Dikkatli say","Unutma sayıları"],dikkatDagitici:t==="kolay"?.2:t==="orta"?.4:.6,difficulty:t,hedefTipi:"renk"}},Kr=le=>{if(it.length<1)return le;const _e=it.slice(-3),qe=_e.filter(ke=>ke.correct).length,Je=_e.reduce((ke,Oe)=>ke+Oe.accuracy,0)/_e.length;let Z=De;console.log("⏱️ [GAME DURATION] Analiz:",{recent3Count:_e.length,correctCount:qe,avgAccuracy:Je.toFixed(2),currentMultiplier:De.toFixed(2),baseDuration:le}),_e.length<2?console.log("⏸️ [DURATION] Henüz yeterli veri yok - süre sabit kalıyor"):Je>.9?(Z=Math.min(1.5,De+.2),console.log("⬆️ [DURATION] Mükemmel performans - oyunu uzatıyorum!")):Je>.8?(Z=Math.min(1.3,De+.1),console.log("↗️ [DURATION] İyi performans - hafif uzatıyorum")):Je>.6?console.log("➡️ [DURATION] Dengeli performans - süre sabit"):Je<.5?(Z=Math.max(.7,De-.1),console.log("⬇️ [DURATION] Zayıf performans - oyunu kısaltıyorum")):Je<.3&&(Z=Math.max(.6,De-.2),console.log("↘️ [DURATION] Çok kötü performans - fazla kısaltıyorum")),ye(Z);const Ee=Math.round(le*Z);if(_e.length>=2){const ke={kolay:2,orta:3,zor:5};let Oe=oe;Je>.9?(Oe=Math.min(ke[t]+2,t==="zor"?6:4),console.log("⬆️ [MAX OBJECTS] Mükemmel performans - daha fazla obje!")):Je>.8?(Oe=Math.min(ke[t]+1,t==="zor"?6:4),console.log("↗️ [MAX OBJECTS] İyi performans - obje sayısı artırıldı")):Je<.5?(Oe=Math.max(ke[t]-1,2),console.log("⬇️ [MAX OBJECTS] Zayıf performans - obje sayısı azaltıldı")):(Oe=ke[t],console.log("➡️ [MAX OBJECTS] Normal performans - varsayılan obje sayısı")),Oe!==oe&&(console.log("🎯 [MAX OBJECTS] Ayarlandı:",{difficulty:t,oldMax:oe,newMax:Oe,avgAccuracy:Je.toFixed(2)}),He(Oe))}return console.log("🎯 [DURATION] Süre ayarlandı:",{baseDuration:le,multiplier:Z.toFixed(2),adjustedDuration:Ee}),Ee},Or=(le,_e)=>{const qe=Kr(_e),Z=Math.max((qe-5)*1e3,1e4),Ee={kolay:{totalObjectsRatio:4,targetCountRatio:8,spawnInterval:3e3,objectLifespan:6e3,persistanceChance:0},orta:{totalObjectsRatio:3,targetCountRatio:6,spawnInterval:2500,objectLifespan:5e3,persistanceChance:.35},zor:{totalObjectsRatio:2,targetCountRatio:4,spawnInterval:2e3,objectLifespan:4e3,persistanceChance:.7}},ke=Ee[le]||Ee.orta,Oe={totalObjects:Math.ceil(qe/ke.totalObjectsRatio),targetCount:Math.ceil(qe/ke.targetCountRatio),spawnInterval:ke.spawnInterval,objectLifespan:ke.objectLifespan,spawnDuration:Z,persistanceChance:ke.persistanceChance,adjustedGameDuration:qe};return console.log("🎮 [PARAMS] Süre bazlı parametreler:",{baseParams:ke,baseDurationSeconds:_e,adjustedGameDuration:qe,durationMultiplier:De.toFixed(2),adjustedParams:Oe}),Oe},dr=async()=>{if(!l)return;p("countdown"),xe(3),await dn();const le=setInterval(()=>{xe(_e=>_e<=1?(clearInterval(le),Ue(),0):_e-1)},1e3)},Vn=()=>{tt.current&&(clearInterval(tt.current),tt.current=null),ft.current=Date.now(),tt.current=setInterval(()=>{x(le=>le<=1?(tt.current&&(clearInterval(tt.current),tt.current=null),It(!1),0):(le===6&&(Ae(!0),console.log("⏰ [COUNTING] Son 5 saniye! Cevabını hazırla.")),le-1))},1e3)},rr=()=>({x:Math.random()*70+15,y:Math.random()*60+20}),Rn=()=>{if(!l)return;zt.current&&(console.log("🚫 [DUPLICATE SPAWN] Spawn already running, clearing previous"),clearInterval(zt.current),zt.current=null),console.log("🎬 [SPAWN START] Starting counting spawn");const le=Or(t,l.sure_saniye);let _e=0,qe=0;console.log("🔢 [COUNTING SPAWN] Parametreler:",{gameDuration:l.sure_saniye,totalObjects:le.totalObjects,targetCount:le.targetCount,spawnDuration:le.spawnDuration,spawnInterval:le.spawnInterval,persistanceChance:le.persistanceChance,answerTime:"5 saniye (son kısım)"}),W(0),ce(Date.now()),ht.startFrameAnalysis?.(),zt.current=setInterval(()=>{if(_e>=le.totalObjects){clearInterval(zt.current),zt.current=null;return}me(ke=>{let Oe=ke,Ce=0;return t==="kolay"?(Oe=ke.filter(ve=>{const Ne=Math.random()<.3;return!Ne&&ve.isTarget&&Ce++,Ne}),Ce>0&&console.log("🔄 [KOLAY MOD] Bazı eski objeler kaldırılıyor:",Ce,"(sayım değişmiyor)")):(Oe=ke.filter(ve=>{const Ne=Math.random()<le.persistanceChance;return!Ne&&ve.isTarget&&Ce++,Ne}),Ce>0&&console.log(`🔄 [${t.toUpperCase()} MOD] Rastgele objeler kaldırılıyor:`,Ce,"(sayım değişmiyor)")),Oe});let Je=1;if(t==="orta")Math.random()<.2&&(Je=2,console.log("🎲 [ORTA MOD] Çoklu spawn! 2 obje birden"));else if(t==="zor"){const ke=Math.random();ke<.05?(Je=3,console.log("🎲 [ZOR MOD] Süper spawn! 3 obje birden")):ke<.2&&(Je=2,console.log("🎲 [ZOR MOD] Çoklu spawn! 2 obje birden"))}const Z=he.length,Ee=oe-Z;if(Je=Math.min(Je,Ee),Je<=0){console.log("🚫 [MAX LIMIT] Maksimum obje sayısına ulaşıldı:",oe,"spawn bekliyor");return}console.log(`🎯 [SPAWN COUNT] ${Je} obje spawn edilecek (maks: ${oe}, mevcut: ${Z})`);for(let ke=0;ke<Je;ke++){const Ce=qe<le.targetCount&&(Math.random()<.4||_e>=le.totalObjects-(le.targetCount-qe));Ce&&(qe++,W(Re=>Re+1));const ve=rr();let Ne="";if(l?.hedefRenk&&l?.hedefSekil)if(Ce)l.hedefRenk==="yeşil"&&l.hedefSekil==="daire"?Ne="🟢":l.hedefRenk==="yeşil"&&l.hedefSekil==="kare"?Ne="🟩":l.hedefRenk==="sarı"&&l.hedefSekil==="daire"?Ne="🟡":l.hedefRenk==="sarı"&&l.hedefSekil==="kare"?Ne="🟨":l.hedefRenk==="mavi"&&l.hedefSekil==="üçgen"?Ne="🔹":l.hedefRenk==="kırmızı"&&l.hedefSekil==="daire"?Ne="🔴":l.hedefRenk==="kırmızı"&&l.hedefSekil==="kare"?Ne="🟥":l.hedefRenk==="mavi"&&l.hedefSekil==="daire"?Ne="🔵":l.hedefRenk==="mavi"&&l.hedefSekil==="kare"?Ne="🟦":Ne="🔴";else{const Re=l.hedefRenk;let Ge=[];Re==="mavi"?Ge=["🔴","🟢","🟡","🟣","🟠"]:Re==="kırmızı"?Ge=["🔵","🟢","🟡","🟣","🟠"]:Re==="yeşil"?Ge=["🔴","🔵","🟡","🟣","🟠"]:Re==="sarı"?Ge=["🔴","🔵","🟢","🟣","🟠"]:Ge=["🔴","🔵","🟢","🟡"],Ne=Ge[Math.floor(Math.random()*Ge.length)]}else if(l?.hedefRenk){const Re={kırmızı:"🔴",mavi:"🔵",yeşil:"🟢",sarı:"🟡",mor:"🟣",turuncu:"🟠"};if(Ce)Ne=Re[l.hedefRenk]||"🟢";else{const Ge=Object.values(Re).filter(Tt=>Tt!==Re[l.hedefRenk]);Ne=Ge[Math.floor(Math.random()*Ge.length)]}}else if(l?.hedefSekil){const Re={yıldız:"⭐",daire:"⭕",kare:"⬜",üçgen:"🔺",kalp:"❤️",elmas:"💎"};if(Ce)Ne=Re[l.hedefSekil]||"🔺";else{const Ge=Object.values(Re).filter(Tt=>Tt!==Re[l.hedefSekil]);Ne=Ge[Math.floor(Math.random()*Ge.length)]}}const Pe={id:`counting-${Date.now()}-${Math.random()}-${ke}`,x:ve.x,y:ve.y,value:Ne,isTarget:Ce,createdAt:Date.now(),lifespan:le.objectLifespan};me(Re=>[...Re,Pe]),console.log("➕ [SPAWN]",{spawnIndex:ke+1,spawnTotal:Je,isTarget:Ce,value:Ne,targetSpawnedCount:qe,totalTargetCountCurrent:z,spawnedCount:_e+1,totalObjects:le.totalObjects}),setTimeout(()=>{me(Re=>{const Ge=Re.filter(Tt=>Tt.id!==Pe.id);return Pe.isTarget&&console.log("⏱️ [LIFESPAN END] Hedef obje yaşam süresi bitti, ekrandan kaldırılıyor (sayım değişmiyor)"),Ge})},le.objectLifespan)}_e+=Je},le.spawnInterval),setTimeout(()=>{zt.current&&(clearInterval(zt.current),zt.current=null,console.log("⏹️ [SPAWN END] Spawn duration ended, clearing interval"))},le.spawnDuration)},Ue=()=>{if(!l)return;const _e=Or(t,l.sure_saniye).adjustedGameDuration;p("active"),x(_e),D(""),Ae(!1),Ve.startGameSession(),Ve.startRoundSession(),console.log("🚀 [COUNT GAME START] Oyun başlıyor:",{originalDuration:l.sure_saniye,adjustedDuration:_e,answerTime:5,emotionTrackingActive:N}),Rn(),Vn()},We=le=>{if(le.preventDefault(),Me.trim()==="")return;const _e=parseInt(Me),qe=_e===z,Je=(Date.now()-ft.current)/1e3;console.log("🔢 [COUNTING RESULT]",{userAnswer:_e,correctAnswer:z,isCorrect:qe,reactionTime:Je,currentObjectsOnScreen:he.length,targetObjectsOnScreen:he.filter(Z=>Z.isTarget).length}),It(qe,Je,_e)},_t=le=>{const _e=le.target.value;(_e===""||/^\d+$/.test(_e))&&D(_e)},It=(le,_e,qe)=>{if(!l||pt.current)return;pt.current=!0,tt.current&&(clearInterval(tt.current),tt.current=null);const Je=_e||(Date.now()-ft.current)/1e3,Z=qe||parseInt(Me)||0,Ee=z>0?Math.max(0,1-Math.abs(Z-z)/z):0,ke={correct:le,accuracy:Ee,round:M+1};Le(ve=>[...ve.slice(-4),ke]),console.log("📈 [PERFORMANCE] Yeni kayıt:",{round:M+1,correct:le,accuracy:Ee.toFixed(2),userAnswer:Z,correctAnswer:z,currentDurationMultiplier:De.toFixed(2)});const Oe={task:l,startTime:ft.current,endTime:Date.now(),success:le,reactionTime:Je,userAnswer:Z,correctAnswer:z};w(ve=>[...ve,Oe]);const Ce=Ve.endRoundSession();if(console.log("🏁 [ROUND ENDED] Round emotion data:",Ce.length),ht.stopFrameAnalysis?.(),M+1>=rn){const ve=Ve.endGameSession();lt(ve),console.log("⏹️ [GAME ENDED] Emotion kaydetme durdu, final metrics:",ve)}if(le){U(Ne=>Ne+1);const ve={emotion:"happy",confidence:.9,timestamp:new Date};ee(Ne=>[...Ne,ve]),o?.(ve)}else{const ve={emotion:"confused",confidence:.7,timestamp:new Date};ee(Ne=>[...Ne,ve]),o?.(ve)}p("waiting"),setTimeout(()=>{M+1>=rn?Zt():(F(ve=>ve+1),me([]),D(""),W(0),ce(0),Ve.startRoundSession(),Pn(Ce),p("ready")),pt.current=!1},2e3)},Zt=()=>{p("completed"),An();const le=Math.floor((Date.now()-Se)/1e3);s(B,le,K)},Lt=()=>{tt.current&&(clearInterval(tt.current),tt.current=null),An(),w([]),F(0),U(0),ee([]),ne.current=[],p("ready"),j(!1),V(null),lt(null),X(""),me([]),D(""),W(0),ce(0),ue(t),ye(1),Le([]),et.current=!1,Ye.current=!1,pt.current=!1,Pn()};return g==="completed"?u.jsx(Sn,{className:"max-w-2xl mx-auto",children:u.jsxs(wn,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:u.jsx(ur,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dikkat Sayma Oyunu Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Sayma becerin gelişiyor!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[B,"/",rn]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Doğru Sayım"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(B/rn*100),"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[T.length>0?(T.reduce((le,_e)=>le+_e.reactionTime,0)/T.length).toFixed(1):"0.0","s"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Süre"})]})]})}),u.jsxs(Zn,{onClick:Lt,size:"lg",children:[u.jsx(Gc,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("video",{ref:$t,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),u.jsx(Sn,{children:u.jsx(wn,{children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Tur ",M+1,"/",rn]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",B]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(cr,{className:"h-4 w-4 text-purple-600"}),u.jsxs("span",{className:"text-xs text-purple-600",children:["Zorluk: ",t,De!==1&&u.jsxs("span",{className:"ml-1 text-xs bg-purple-100 px-1 rounded",children:["⏱️ ",De>1?"⬆️":"⬇️"," ",De.toFixed(1),"x"]})]})]})]})})})}),u.jsx(Sn,{children:u.jsx(wn,{className:"text-center py-12",children:R?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"}),u.jsx("p",{className:"text-gray-600",children:"Senin için özel sayma görevi hazırlanıyor..."})]}):g==="ready"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center",children:u.jsx(dp,{className:"h-10 w-10 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dikkat Sayma"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Beliren objeleri dikkatli şekilde say ve konsantrasyonunu geliştir!"}),l&&u.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-6",children:[u.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Görevin:"}),u.jsx("p",{className:"text-green-700",children:l.gorev}),l.ipuclari.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"İpuçları:"}),l.ipuclari.map((le,_e)=>u.jsxs("p",{className:"text-xs text-green-600",children:["• ",le]},_e))]})]}),u.jsxs(Zn,{onClick:dr,size:"lg",disabled:!l,children:[u.jsx(Lo,{className:"h-5 w-5 mr-2"}),"Başla"]})]}):g==="countdown"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-800",children:"Hazırlan!"}),u.jsx("div",{className:"text-6xl font-bold text-green-600 animate-bounce",children:Te})]}):g==="active"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?.gorev}),u.jsx("div",{className:"relative w-full h-96 bg-gray-50 rounded-lg overflow-hidden",children:he.map(le=>u.jsx("div",{className:"absolute w-8 h-8 text-2xl animate-bounce transition-all duration-500",style:{left:`${le.x}%`,top:`${le.y}%`,transform:"translate(-50%, -50%)",animationDuration:`${1+Math.random()}s`},children:le.value},le.id))}),u.jsx("form",{onSubmit:We,className:"space-y-4",children:u.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[u.jsx("label",{className:"text-lg font-medium",children:"Toplam:"}),u.jsx("input",{type:"text",value:Me,onChange:_t,className:"w-20 h-12 text-center text-xl font-bold border-2 border-green-400 rounded-lg focus:outline-none focus:border-green-600",placeholder:"0",maxLength:2}),u.jsx("button",{type:"submit",disabled:Me.trim()==="",className:"px-6 py-2 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Gönder"})]})}),u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-lg",children:[u.jsx(va,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"font-mono font-bold text-green-600",children:[y,"s"]})]}),be&&u.jsxs("div",{className:"bg-orange-100 border-2 border-orange-300 rounded-lg p-4 animate-pulse",children:[u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(va,{className:"h-5 w-5 text-orange-600 animate-spin"}),u.jsxs("p",{className:"text-orange-700 font-bold text-lg",children:["⏰ Son ",y," saniye! Cevabını yaz ve gönder!"]})]}),u.jsx("p",{className:"text-orange-600 text-sm mt-2",children:"Objeler artık çıkmıyor, şimdi sayını gir"})]})]}):g==="waiting"?u.jsxs("div",{className:"space-y-4",children:[T.length>0&&T[T.length-1].success?u.jsxs("div",{className:"text-green-600",children:[u.jsx(Sc,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Mükemmel!"}),u.jsxs("p",{children:["Doğru cevap: ",T[T.length-1].correctAnswer]}),u.jsxs("p",{children:["Senin cevabın: ",T[T.length-1].userAnswer]})]}):u.jsxs("div",{className:"text-orange-600",children:[u.jsx(ur,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Bir daha deneyelim!"}),T.length>0&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Doğru cevap: ",T[T.length-1].correctAnswer]}),u.jsxs("p",{children:["Senin cevabın: ",T[T.length-1].userAnswer]})]})]}),u.jsx("p",{className:"text-sm text-gray-600",children:"Sonraki görev hazırlanıyor..."})]}):null})})]})},pj=({className:a})=>u.jsx("span",{className:a,children:"❌"}),yj=({studentId:a,studentAge:e=12,difficulty:t,onGameComplete:s,onEmotionDetected:o})=>{const[l,h]=E.useState(null),[g,p]=E.useState("ready"),[y,x]=E.useState(0),[T,w]=E.useState([]),[M,F]=E.useState(0),[B,U]=E.useState(0),[K,ee]=E.useState([]),ne=E.useRef([]),[Se]=E.useState(Date.now()),[Te,xe]=E.useState(2),[R,A]=E.useState(!1),[N,j]=E.useState(!1),[O,V]=E.useState(null),[C,lt]=E.useState(null),[de,X]=E.useState(null),[he,me]=E.useState(""),[Me,D]=E.useState([]),[z,W]=E.useState(0),[Q,ce]=E.useState(0),be=E.useRef(0),Ae=E.useRef(0),[fe,ue]=E.useState(0),[De,ye]=E.useState(0),oe=E.useRef(0),[He,it]=E.useState([]),Le=E.useRef([]),[ft,et]=E.useState([]),Ye=E.useRef([]),[pt,tt]=E.useState(null),zt=Z=>({kırmızı:"#dc2626",mavi:"#2563eb",yeşil:"#16a34a",sarı:"#eab308",mor:"#9333ea",turuncu:"#ea580c"})[Z]||"#dc2626",$t=Z=>{if(Z.includes("-")){const[Oe,Ce]=Z.split("-"),ve=zt(Ce);switch(Oe){case"triangle":return u.jsx("div",{className:"w-0 h-0",style:{borderLeft:"15px solid transparent",borderRight:"15px solid transparent",borderBottom:`30px solid ${ve}`}});case"circle":return u.jsx("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:ve}});case"square":return u.jsx("div",{className:"w-8 h-8",style:{backgroundColor:ve}});case"star":return u.jsx("div",{className:"relative w-8 h-8",style:{clipPath:"polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)",backgroundColor:ve}});case"heart":return u.jsxs("div",{className:"relative w-8 h-8",style:{transform:"rotate(-45deg)"},children:[u.jsx("div",{className:"w-6 h-6 rounded-full absolute top-0 left-1",style:{backgroundColor:ve}}),u.jsx("div",{className:"w-6 h-6 rounded-full absolute top-1 left-0",style:{backgroundColor:ve}}),u.jsx("div",{className:"w-4 h-4 absolute top-3 left-2",style:{backgroundColor:ve}})]});case"diamond":return u.jsx("div",{className:"w-8 h-8 transform rotate-45",style:{backgroundColor:ve}});case"hexagon":return u.jsx("div",{className:"w-8 h-8",style:{clipPath:"polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)",backgroundColor:ve}});case"oval":return u.jsx("div",{className:"w-10 h-6 rounded-full",style:{backgroundColor:ve}});default:return u.jsx("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:"#6b7280"}})}}const ke={"🔴":"#dc2626","🔵":"#2563eb","🟢":"#16a34a","🟡":"#eab308","🟣":"#9333ea","🟠":"#ea580c"}[Z]||"#6b7280";return u.jsx("div",{className:"w-8 h-8 rounded-full",style:{backgroundColor:ke}})},rn=E.useRef(0),dn=E.useRef(!1),An=E.useRef(!1),Pn=E.useRef(!1),st=E.useRef(null),ut=E.useRef(null),Kt=5,Xt=3e3,Kr=E.useCallback(async()=>{console.log("🎭 [EMOTION] Emotion tracking başlatılıyor..."),j(!0);const Z=ke=>{if(!Ve.isGameActiveStatus())return;V(ke),Ve.addEmotionResult(ke);const Oe=Ve.getCurrentGameMetrics();lt(Oe);const Ce=mp.getRealtimeFeedback(Oe);me(Ce.message);const ve={emotion:ke.emotion,confidence:ke.confidence,timestamp:ke.timestamp};ee(Ne=>{const Pe=[...Ne.slice(-10),ve];return ne.current=Pe,Pe}),o?.(ve)};let Ee=!1;ut.current&&(Ee=await ht.startEmotionTracking(ut.current,Z)),Ee||(console.log("📱 [EMOTION] Gerçek kamera bulunamadı - Python server çalışıyor mu?"),console.log("💡 [TIP] Terminal'de çalıştır: python emotion_server.py")),console.log("✅ [EMOTION] Emotion tracking aktif")},[o]),Or=E.useCallback(()=>{console.log("⏹️ [EMOTION] Emotion tracking durduruluyor..."),ht.stopEmotionTracking(),j(!1);const Z=Ve.endGameSession();lt(Z),console.log("🏁 [EMOTION] Final metrics:",Z)},[]);E.useEffect(()=>(!dn.current&&!R&&(console.log("🤖 [TASK] İlk görev AI'dan yükleniyor (emotion data olmadan)"),dn.current=!0,Vn()),()=>{st.current&&(clearInterval(st.current),st.current=null)}),[]);const dr=E.useCallback(async(Z,Ee,ke)=>{if(An.current)return;An.current=!0,A(!0);const Oe=Ee??z,Ce=ke??Q,ve=Z.reduce((ge,rt)=>ge+rt.correctClicks,0),Ne=Z.reduce((ge,rt)=>ge+rt.wrongClicks,0),Pe=Z.reduce((ge,rt)=>ge+rt.targetSpawned,0),Re=ve+Oe,Ge=Ne+Ce,Tt=Pe+(oe.current||0),qt=Re+Ge,Wt=qt>0?Re/qt:.5,an=Tt>0?Re/Tt:.5,sn=[...Le.current];Z.forEach(ge=>{ge.avgReactionTimeMs&&sn.push(ge.avgReactionTimeMs)});const xn=sn.length>0?sn.reduce((ge,rt)=>ge+rt,0)/sn.length/1e3:2.5;Le.current.length>0&&Le.current.reduce((ge,rt)=>ge+rt,0)/Le.current.length;const Nn=Z.slice(-3).map(ge=>({basari:ge.success,sure:ge.reactionTime,zorluk:t,hedefTipi:"renk",hizliCozum:ge.reactionTime<2,zamanlamaSapmasi:Math.abs(ge.reactionTime-(l?.sure_saniye||30)),hedefZaman:l?.sure_saniye||30})),on=Nn.filter(ge=>ge.hizliCozum).length,Ut=Ve.getCurrentGameMetrics(),Fe={son3Tur:Nn,ortalamaReaksiyonSuresi:xn,basariOrani:Wt,odaklanmaDurumu:"ai-analiz",attentionMetrics:Ut,sayiGorevPerformansi:{ortalamaSayiZorlugu:t==="kolay"?3:t==="orta"?5:7,sayiBasariOrani:Wt,ortalamaReaksiyonSuresiSayi:xn,hizliCozumSayisi:on,hedefYakalamaOrani:an,toplamHedefSayisi:Tt,yakalinanHedefSayisi:Re,yanlisTiklamaSayisi:Ge,hizliTiklamaOrani:Z.length>0?Z.reduce((ge,rt)=>ge+rt.fastClickRate,0)/Z.length:0,hizliTiklamaSayisi:Z.reduce((ge,rt)=>ge+rt.fastClicks,0),toplamTiklamaSayisi:Z.reduce((ge,rt)=>ge+rt.totalClicksAnalyzed,0),hizliVeDogruTiklamalar:Z.reduce((ge,rt)=>ge+rt.correctFastClicks,0),hizliTiklamaDogrulukOrani:Z.length>0?Z.reduce((ge,rt)=>ge+rt.fastAccuracyRate,0)/Z.length:0,sonRoundHizliTiklamaOrani:Z.length>0?Z[Z.length-1].fastClickRate:0,sonRoundHizliTiklamaSayisi:Z.length>0?Z[Z.length-1].fastClicks:0,sonRoundToplamTiklamaSayisi:Z.length>0?Z[Z.length-1].totalClicksAnalyzed:0,sonRoundHizliVeDogruTiklamalar:Z.length>0?Z[Z.length-1].correctFastClicks:0,sonRoundHizliTiklamaDogrulukOrani:Z.length>0?Z[Z.length-1].fastAccuracyRate:0,odaklanmaSayisi:Z.length}};try{const ge=Ve.getCurrentRoundEmotions(),rt=Ve.getFullGameEmotions(),$n=ge.length>0?JSON.stringify(ge):void 0;console.log("🤖 [AI PROMPT DATA WITH UPDATED ROUNDS]",{hasEmotionData:!!$n,roundEmotionCount:ge.length,fullGameEmotionCount:rt.length,legacyEmotionCount:K.length,roundsCount:Z.length,kumulatifFastClickData:{hizliTiklamaOrani:Fe.sayiGorevPerformansi?.hizliTiklamaOrani,hizliTiklamaSayisi:Fe.sayiGorevPerformansi?.hizliTiklamaSayisi,toplamTiklamaSayisi:Fe.sayiGorevPerformansi?.toplamTiklamaSayisi},sonRoundFastClickData:{sonRoundHizliTiklamaOrani:Fe.sayiGorevPerformansi?.sonRoundHizliTiklamaOrani,sonRoundHizliTiklamaSayisi:Fe.sayiGorevPerformansi?.sonRoundHizliTiklamaSayisi,sonRoundToplamTiklamaSayisi:Fe.sayiGorevPerformansi?.sonRoundToplamTiklamaSayisi}});const Yr=await Kd.generateAttentionSprint({performansOzeti:Fe,studentAge:e,sonGorevler:["dinamik-tıklama"],emotionData:$n}),_a=rr(Yr.gorev),Qr={...Yr,difficulty:t,gorev:_a,sure_saniye:Yr.sure_saniye};h(Qr),x(Qr.sure_saniye)}catch(ge){console.error("İlk görev üretme hatası:",ge),h(Rn())}finally{An.current=!1,A(!1)}},[e,t,z,Q]),Vn=E.useCallback(async(Z,Ee)=>{if(An.current)return;An.current=!0,A(!0);const ke=Z??z,Oe=Ee??Q,Ce=T.reduce((Fe,ge)=>Fe+ge.correctClicks,0),ve=T.reduce((Fe,ge)=>Fe+ge.wrongClicks,0),Ne=T.reduce((Fe,ge)=>Fe+ge.targetSpawned,0),Pe=Ce+ke,Re=ve+Oe,Ge=Ne+(oe.current||0),Tt=Pe+Re,qt=Tt>0?Pe/Tt:.5,Wt=Ge>0?Pe/Ge:.5,an=[...Le.current];T.forEach(Fe=>{Fe.avgReactionTimeMs&&an.push(Fe.avgReactionTimeMs)});const sn=an.length>0?an.reduce((Fe,ge)=>Fe+ge,0)/an.length/1e3:2.5;Le.current.length>0&&Le.current.reduce((Fe,ge)=>Fe+ge,0)/Le.current.length;const xn=T.slice(-3).map(Fe=>({basari:Fe.success,sure:Fe.reactionTime,zorluk:t,hedefTipi:"renk",hizliCozum:Fe.reactionTime<2,zamanlamaSapmasi:Math.abs(Fe.reactionTime-(l?.sure_saniye||30)),hedefZaman:l?.sure_saniye||30})),Nn=xn.filter(Fe=>Fe.hizliCozum).length,on=Ve.getCurrentGameMetrics(),Ut={son3Tur:xn,ortalamaReaksiyonSuresi:sn,basariOrani:qt,odaklanmaDurumu:"ai-analiz",attentionMetrics:on,sayiGorevPerformansi:{ortalamaSayiZorlugu:t==="kolay"?3:t==="orta"?5:7,sayiBasariOrani:qt,ortalamaReaksiyonSuresiSayi:sn,hizliCozumSayisi:Nn,hedefYakalamaOrani:Wt,toplamHedefSayisi:Ge,yakalinanHedefSayisi:Pe,yanlisTiklamaSayisi:Re,hizliTiklamaOrani:T.length>0?T.reduce((Fe,ge)=>Fe+ge.fastClickRate,0)/T.length:0,hizliTiklamaSayisi:T.reduce((Fe,ge)=>Fe+ge.fastClicks,0),toplamTiklamaSayisi:T.reduce((Fe,ge)=>Fe+ge.totalClicksAnalyzed,0),hizliVeDogruTiklamalar:T.reduce((Fe,ge)=>Fe+ge.correctFastClicks,0),hizliTiklamaDogrulukOrani:T.length>0?T.reduce((Fe,ge)=>Fe+ge.fastAccuracyRate,0)/T.length:0,odaklanmaSayisi:T.length}};try{const Fe=Ve.getCurrentRoundEmotions(),ge=Ve.getFullGameEmotions(),rt=Fe.length>0?JSON.stringify(Fe):void 0;console.log("🤖 [AI PROMPT DATA]",{hasEmotionData:!!rt,roundEmotionCount:Fe.length,fullGameEmotionCount:ge.length,legacyEmotionCount:K.length,isFirstTask:!T.length});const $n=await Kd.generateAttentionSprint({performansOzeti:Ut,studentAge:e,sonGorevler:["dinamik-tıklama"],emotionData:rt}),Yr=rr($n.gorev),_a={...$n,difficulty:t,gorev:Yr,sure_saniye:$n.sure_saniye};h(_a),x(_a.sure_saniye)}catch(Fe){console.error("İlk görev üretme hatası:",Fe),h(Rn())}finally{An.current=!1,A(!1)}},[e,t,T,z,Q]),rr=Z=>{const Ee=Z.toLowerCase();if(Ee.includes("tıkla")||Ee.includes("yakala"))return Z;const ke=[{turkish:"mavi",emoji:"🔵"},{turkish:"kırmızı",emoji:"🔴"},{turkish:"yeşil",emoji:"🟢"},{turkish:"sarı",emoji:"🟡"}],Oe=[{turkish:"daire",emoji:"⭕"},{turkish:"kare",emoji:"⬜"},{turkish:"üçgen",emoji:"🔺"},{turkish:"yıldız",emoji:"⭐"}],Ce=ke[Math.floor(Math.random()*ke.length)],ve=Oe[Math.floor(Math.random()*Oe.length)];return`${t==="kolay"?"20 saniye":t==="orta"?"30 saniye":"40 saniye"} içinde tüm ${Ce.emoji} ${Ce.turkish} ${ve.turkish}leri tıkla`},Rn=()=>{const Ee={kolay:[{gorev:"20 saniye içinde tüm mavi daireleri tıkla",hedefRenk:"mavi",hedefSekil:"daire",sure:20},{gorev:"20 saniye içinde tüm yeşil kareleri yakala",hedefRenk:"yeşil",hedefSekil:"kare",sure:20},{gorev:"20 saniye içinde tüm sarı yıldızları tıkla",hedefRenk:"sarı",hedefSekil:"yıldız",sure:20}],orta:[{gorev:"30 saniye içinde tüm kırmızı üçgenleri tıkla",hedefRenk:"kırmızı",hedefSekil:"üçgen",sure:30},{gorev:"30 saniye içinde tüm mavi kareleri yakala",hedefRenk:"mavi",hedefSekil:"kare",sure:30},{gorev:"30 saniye içinde tüm yeşil daireleri tıkla",hedefRenk:"yeşil",hedefSekil:"daire",sure:30}],zor:[{gorev:"40 saniye içinde tüm hızlı hedefleri yakala",hedefRenk:"kırmızı",hedefSekil:"yıldız",sure:40},{gorev:"40 saniye içinde tüm mavi üçgenleri tıkla",hedefRenk:"mavi",hedefSekil:"üçgen",sure:40},{gorev:"40 saniye içinde tüm karışık hedefleri yakala",hedefRenk:"yeşil",hedefSekil:"kare",sure:40}]}[t],ke=Ee[Math.floor(Math.random()*Ee.length)];return{id:`dynamic_fallback_${Date.now()}`,...ke,sure_saniye:ke.sure,ipuclari:["Hızlı ol","Doğru hedefleri seç"],dikkatDagitici:t==="kolay"?.3:t==="orta"?.5:.7,difficulty:t,hedefTipi:"renk"}},Ue=Z=>{switch(Z){case"kolay":return{spawnInterval:3e3,objectLifespan:6e3,targetRatio:.7};case"orta":return{spawnInterval:2500,objectLifespan:5e3,targetRatio:.6};case"zor":return{spawnInterval:2e3,objectLifespan:4e3,targetRatio:.5};default:return{spawnInterval:2500,objectLifespan:5e3,targetRatio:.6}}},We=async()=>{if(!l)return;p("countdown"),xe(2),await Kr();const Z=setInterval(()=>{xe(Ee=>Ee<=1?(clearInterval(Z),Lt(),0):Ee-1)},1e3)},_t=()=>{st.current&&(clearInterval(st.current),st.current=null),rn.current=Date.now(),st.current=setInterval(()=>{x(Z=>Z<=1?(st.current&&(clearInterval(st.current),st.current=null),_e(!0),0):Z-1)},1e3)},It=()=>({x:Math.random()*70+15,y:Math.random()*60+20}),Zt=()=>{const Z=l?.gameParams?{spawnInterval:l.gameParams.spawnInterval,objectLifespan:l.gameParams.objectLifespan,targetRatio:l.gameParams.targetRatio}:Ue(t);console.log("🎮 [GAME PARAMS]",{source:l?.gameParams?"AI-emotion-based":"default-difficulty",spawnInterval:`${Z.spawnInterval}ms`,objectLifespan:`${Z.objectLifespan}ms`,targetRatio:`${(Z.targetRatio*100).toFixed(1)}%`,aiParams:l?.gameParams}),W(0),ce(0),ue(0),ye(0),oe.current=0;const Ee=()=>{const Oe=Math.random()<Z.targetRatio,Ce=It();let ve="";if(l?.hedefRenk&&l?.hedefSekil)if(Oe)l.hedefSekil==="daire"?ve=`circle-${l.hedefRenk}`:l.hedefSekil==="kare"?ve=`square-${l.hedefRenk}`:l.hedefSekil==="üçgen"?ve=`triangle-${l.hedefRenk}`:l.hedefSekil==="yıldız"?ve=`star-${l.hedefRenk}`:l.hedefSekil==="kalp"?ve=`heart-${l.hedefRenk}`:l.hedefSekil==="elmas"?ve=`diamond-${l.hedefRenk}`:ve="🔴";else{const Pe=["circle","square","triangle","star","heart","diamond"],Re=["kırmızı","mavi","yeşil","sarı","mor","turuncu"];let Ge,Tt;do Ge=Pe[Math.floor(Math.random()*Pe.length)],Tt=Re[Math.floor(Math.random()*Re.length)];while(Ge===l.hedefSekil&&Tt===l.hedefRenk);ve=`${Ge}-${Tt}`}else if(l?.hedefRenk){const Pe=["circle","square","triangle","star","heart","diamond"],Re=Pe[Math.floor(Math.random()*Pe.length)];if(Oe)ve=`${Re}-${l.hedefRenk}`;else{const Ge=["kırmızı","mavi","yeşil","sarı","mor","turuncu"].filter(qt=>qt!==l.hedefRenk),Tt=Ge[Math.floor(Math.random()*Ge.length)];ve=`${Re}-${Tt}`}}else if(l?.hedefSekil){const Pe=["kırmızı","mavi","yeşil","sarı","mor","turuncu"],Re=Pe[Math.floor(Math.random()*Pe.length)];if(Oe)ve=`${l.hedefSekil==="daire"?"circle":l.hedefSekil==="kare"?"square":l.hedefSekil==="üçgen"?"triangle":l.hedefSekil==="yıldız"?"star":l.hedefSekil==="kalp"?"heart":l.hedefSekil==="elmas"?"diamond":"circle"}-${Re}`;else{const Ge=["circle","square","triangle","star","heart","diamond"],Tt=l.hedefSekil==="daire"?"circle":l.hedefSekil==="kare"?"square":l.hedefSekil==="üçgen"?"triangle":l.hedefSekil==="yıldız"?"star":l.hedefSekil==="kalp"?"heart":l.hedefSekil==="elmas"?"diamond":"circle";ve=`${Ge.filter(Wt=>Wt!==Tt)[Math.floor(Math.random()*(Ge.length-1))]}-${Re}`}}const Ne={id:`clicking-${Date.now()}-${Math.random()}`,x:Ce.x,y:Ce.y,value:ve,isTarget:Oe,createdAt:Date.now(),lifespan:Z.objectLifespan};D(Pe=>[...Pe,Ne]),ue(Pe=>Pe+1),Oe&&(ye(Pe=>Pe+1),oe.current+=1),setTimeout(()=>{D(Pe=>Pe.filter(Re=>Re.id!==Ne.id))},Z.objectLifespan)};Ee(),ht.startFrameAnalysis?.();const ke=setInterval(Ee,Z.spawnInterval);setTimeout(()=>{clearInterval(ke)},(l?.sure_saniye||30)*1e3)},Lt=()=>{l&&(p("active"),x(l.sure_saniye),ue(0),Ve.startGameSession(),Ve.startRoundSession(),Zt(),_t())},le=(Z,Ee)=>{const ke=Date.now(),Oe=Me.find(Pe=>Pe.id===Z);if(!Oe)return;const Ce=ke-Oe.createdAt,ve=Ce<Xt;console.log(`⚡ [FAST CLICK DEBUG] Reaction: ${Ce}ms, Threshold: ${Xt}ms, IsFast: ${ve}`),tt({id:`feedback-${Date.now()}`,isCorrect:Ee,x:Oe.x,y:Oe.y}),setTimeout(()=>{tt(null)},1e3),Le.current.push(Ce),it(Pe=>[...Pe,Ce]);const Ne={timestamp:Date.now(),reactionTime:Ce,isCorrect:Ee,isFast:ve};Ye.current.push(Ne),et(Pe=>[...Pe,Ne]),D(Pe=>Pe.filter(Re=>Re.id!==Z)),Ee?(be.current+=1,W(Pe=>Pe+1)):(Ae.current+=1,ce(Pe=>Pe+1))},_e=(Z,Ee)=>{if(console.log("🚨 [END ROUND CALLED]",{success:Z,reactionTime:Ee,currentTask:!!l,isEndingRound:Pn.current}),!l||Pn.current)return;Pn.current=!0;const ke=be.current,Oe=Ae.current,Ce=oe.current;st.current&&(clearInterval(st.current),st.current=null);const ve=(Date.now()-rn.current)/1e3,Ne=ke+Oe,Re=(Ne>0?ke/Ne:0)>=.5&&Ne>=3,Ge=Le.current.length>0?Le.current.reduce((ge,rt)=>ge+rt,0)/Le.current.length:0,Tt=Ce>0?ke/Ce:0,qt=Ye.current,Wt=qt.length,an=qt.filter(ge=>ge.isFast).length,sn=qt.filter(ge=>ge.isFast&&ge.isCorrect).length,xn=Wt>0?an/Wt:0,Nn=an>0?sn/an:0;console.log("📊 [FAST CLICK DETAILS]",{totalClicks:Wt,fastClicks:an,correctFastClicks:sn,fastClickRate:`${(xn*100).toFixed(1)}%`,fastAccuracyRate:`${(Nn*100).toFixed(1)}%`,allClicks:qt.map(ge=>({reaction:`${ge.reactionTime}ms`,isFast:ge.isFast,isCorrect:ge.isCorrect}))});const on={task:l,startTime:rn.current,endTime:Date.now(),success:Re,reactionTime:ve,correctClicks:ke,wrongClicks:Oe,totalSpawned:fe,targetSpawned:Ce,targetHitRate:Tt,avgReactionTimeMs:Ge,fastClicks:an,totalClicksAnalyzed:Wt,fastClickRate:xn,correctFastClicks:sn,fastAccuracyRate:Nn},Ut=Ve.endRoundSession();if(console.log("🏁 [ROUND ENDED] Round emotion data:",Ut.length),ht.stopFrameAnalysis?.(),M+1>=Kt){const ge=Ve.endGameSession();lt(ge),console.log("⏹️ [GAME ENDED] Emotion kaydetme durdu, final metrics:",ge)}w(ge=>{const rt=[...ge,on];return M+1<Kt&&setTimeout(()=>{dr(rt,ke,Oe)},100),rt});const Fe=Re?{emotion:"happy",confidence:.9,timestamp:new Date}:{emotion:"confused",confidence:.7,timestamp:new Date};ee(ge=>{const rt=[...ge,Fe];return ne.current=rt,rt}),o?.(Fe),p("waiting"),setTimeout(()=>{M+1>=Kt?qe():(F(ge=>ge+1),D([]),W(0),ce(0),be.current=0,Ae.current=0,it([]),Le.current=[],ue(0),ye(0),oe.current=0,et([]),Ye.current=[],tt(null),Ve.startRoundSession(),p("ready")),Pn.current=!1},2e3)},qe=()=>{p("completed"),Or();const Z=Math.floor((Date.now()-Se)/1e3);s(B,Z,K)},Je=()=>{st.current&&(clearInterval(st.current),st.current=null),Or(),w([]),F(0),U(0),ee([]),ne.current=[],p("ready"),j(!1),V(null),lt(null),X(null),me(""),D([]),W(0),ce(0),ue(0),ye(0),oe.current=0,et([]),Ye.current=[],tt(null),dn.current=!1,An.current=!1,Pn.current=!1,Vn()};return g==="completed"?u.jsx(Sn,{className:"max-w-2xl mx-auto",children:u.jsxs(wn,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:u.jsx(ur,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dinamik Dikkat Oyunu Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Hızlı karar verme becerin gelişiyor!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[B,"/",Kt]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarılı Tur"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(B/Kt*100),"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:T.length>0?Math.round(T.reduce((Z,Ee)=>Z+Ee.correctClicks,0)/T.length):0}),u.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Doğru Tıklama"})]})]})}),u.jsxs(Zn,{onClick:Je,size:"lg",children:[u.jsx(Gc,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("video",{ref:ut,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),u.jsx(Sn,{children:u.jsx(wn,{children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Tur ",M+1,"/",Kt]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",B]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(cr,{className:"h-4 w-4 text-purple-600"}),u.jsxs("span",{className:"text-xs text-purple-600",children:["Zorluk: ",t]})]}),N&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${ht.isTrackingActive()&&ht.isFrameAnalysisActive?.()?"bg-green-500":ht.isTrackingActive()?"bg-yellow-500":"bg-orange-500"}`}),u.jsx(Ur,{className:"h-4 w-4 text-green-600"}),u.jsx("span",{className:"text-xs text-green-600",children:ht.isTrackingActive()&&ht.isFrameAnalysisActive?.()?"Analiz Aktif":ht.isTrackingActive()?"Kamera Bağlı":"Mock Mode"})]}),O&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(kc,{className:`h-4 w-4 ${O.lookingAtScreen?"text-green-600":"text-red-600"}`}),u.jsxs("span",{className:"text-xs text-gray-600",children:[O.emotion," (",(O.confidence*100).toFixed(0),"%)"]})]})]})})})}),u.jsx(Sn,{children:u.jsx(wn,{className:"text-center py-12",children:R?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto"}),u.jsx("p",{className:"text-gray-600",children:"Senin için özel dinamik görev hazırlanıyor..."})]}):g==="ready"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:u.jsx(dp,{className:"h-10 w-10 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dinamik Dikkat"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Sürekli çıkan hedefleri hızlıca yakala ve reflexlerini geliştir!"}),l&&u.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-6",children:[u.jsx("h3",{className:"font-medium text-purple-800 mb-2",children:"Görevin:"}),u.jsx("p",{className:"text-purple-700",children:l.gorev}),l.ipuclari?.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"İpuçları:"}),l.ipuclari.map((Z,Ee)=>u.jsxs("p",{className:"text-xs text-purple-600",children:["• ",Z]},Ee))]})]}),u.jsxs(Zn,{onClick:We,size:"lg",disabled:!l,children:[u.jsx(Lo,{className:"h-5 w-5 mr-2"}),"Başla"]})]}):g==="countdown"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-800",children:"Hazırlan!"}),u.jsx("div",{className:"text-6xl font-bold text-purple-600 animate-bounce",children:Te})]}):g==="active"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?.gorev}),u.jsxs("div",{className:"relative w-full h-96 bg-gray-50 rounded-lg overflow-hidden",children:[Me.map(Z=>u.jsx("button",{onClick:()=>le(Z.id,Z.isTarget),className:"absolute w-12 h-12 rounded-full transition-all duration-300 flex items-center justify-center text-2xl shadow-lg border-2 bg-white border-gray-300 hover:bg-gray-50 hover:scale-110 animate-bounce",style:{left:`${Z.x}%`,top:`${Z.y}%`,transform:"translate(-50%, -50%)",animationDuration:`${.8+Math.random()*.4}s`},children:$t(Z.value)},Z.id)),pt&&u.jsx("div",{className:`absolute w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold animate-ping pointer-events-none ${pt.isCorrect?"bg-green-500 text-white":"bg-red-500 text-white"}`,style:{left:`${pt.x}%`,top:`${pt.y}%`,transform:"translate(-50%, -50%)",zIndex:1e3},children:pt.isCorrect?"✓":"✗"})]}),u.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[u.jsx(Sc,{className:"h-5 w-5"}),u.jsxs("span",{className:"text-lg font-bold",children:["Doğru: ",z]})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[u.jsx(pj,{className:"h-5 w-5"}),u.jsxs("span",{className:"text-lg font-bold",children:["Yanlış: ",Q]})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[u.jsx(ur,{className:"h-5 w-5"}),u.jsxs("span",{className:"text-lg font-bold",children:["Toplam Çıkan: ",fe]})]})]}),u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-lg",children:[u.jsx(va,{className:"h-5 w-5 text-purple-600"}),u.jsxs("span",{className:"font-mono font-bold text-purple-600",children:[y,"s"]})]})]}):g==="waiting"?u.jsxs("div",{className:"space-y-4",children:[T.length>0&&T[T.length-1].success?u.jsxs("div",{className:"text-green-600",children:[u.jsx(Sc,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Mükemmel!"}),u.jsxs("p",{children:["Doğru: ",T[T.length-1].correctClicks,", Yanlış: ",T[T.length-1].wrongClicks]}),u.jsxs("p",{children:["Hedef Yakalama: ",T[T.length-1].correctClicks,"/",T[T.length-1].targetSpawned," (",Math.round(T[T.length-1].targetHitRate*100),"%)"]}),u.jsxs("p",{children:["Hızlı Tıklama: ",T[T.length-1].fastClicks,"/",T[T.length-1].totalClicksAnalyzed," (",Math.round(T[T.length-1].fastClickRate*100),"%)"]}),u.jsxs("p",{children:["Hızlı+Doğru: ",T[T.length-1].correctFastClicks," (",Math.round(T[T.length-1].fastAccuracyRate*100),"%)"]})]}):u.jsxs("div",{className:"text-orange-600",children:[u.jsx(ur,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Daha iyi yapabilirsin!"}),T.length>0&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Doğru: ",T[T.length-1].correctClicks,", Yanlış: ",T[T.length-1].wrongClicks]}),u.jsxs("p",{children:["Hedef Yakalama: ",T[T.length-1].correctClicks,"/",T[T.length-1].targetSpawned," (",Math.round(T[T.length-1].targetHitRate*100),"%)"]}),u.jsxs("p",{children:["Hızlı Tıklama: ",T[T.length-1].fastClicks,"/",T[T.length-1].totalClicksAnalyzed," (",Math.round(T[T.length-1].fastClickRate*100),"%)"]}),u.jsx("p",{children:"Daha dikkatli olmaya çalış"})]})]}),u.jsx("p",{className:"text-sm text-gray-600",children:"Sonraki görev hazırlanıyor..."})]}):null})})]})};class vj{constructor(){this.modelName="llama3.2:1b"}async getAdaptiveDifficulty(e,t){const s=this.buildDifficultyPrompt(e,t);try{const o=await this.callOllama(s),l=this.parseAIResponse(o);return console.log("🤖 AI Zorluk Önerisi:",l),l}catch(o){return console.error("❌ AI Zorluk Analizi hatası:",o),this.getFallbackDifficulty(e)}}buildDifficultyPrompt(e,t){const s=e.totalAttempts>0?e.correctAttempts/e.totalAttempts*100:0;this.analyzeErrorPatterns(e.recentErrors);let o="";return t&&(o=`

KAMERA VERİSİ - TÜM DUYGUSAL DURUMLAR (Oyun süresince):
${t}

DİKKAT: Bu emotion data'dan çok boyutlu analiz yap:

DUYGUSAL DURUM ANALİZİ:
- Hangi duygu baskın? Son trend nasıl?
- Emotion stabilite: Sabit mi değişken mi?
- Pozitif/negatif emotion dengesi?

ÖĞRENME STİLİ ÇIKARIMI:
- confused→happy geçişi = Yavaş öğrenen ama başarılı mı?
- happy→bored pattern = Hızla sıkılan, challenge isteyen mi?
- surprised spike'ları = Yenilikçi görevleri seven mi?

MOTİVASYON/STRES ANALİZİ:
- İçsel motivasyon: happy/neutral dominant mı?
- Frustration tolerance: angry/confused nasıl?
- Kaygı seviyesi: emotion volatility yüksek mi?

ATTENTION SPAN PATTERNİ:
- Emotion değişim hızı = Dikkat süresi ipucu
- Bored'a kadar geçen süre = Natural attention span
- Cognitive load: neutral→confused geçiş noktası

Bu analizlere göre en uygun zorluk stratejisini belirle:

Bu analizine göre çocuğun mevcut duygusal durumuna uygun zorluk ayarla:
- Mutlu/heyecanlı ise: Momentum sürdürecek, biraz daha zorlayıcı görevler
- Kafa karışık/yorgun ise: Basit, net talimatlar, daha az dikkat dağıtıcı
- Odaklanmış ise: Bu durumu koruyacak dengeli görevler
- Stresli/sinirli ise: Sakinleştirici, pozitif, başarıya odaklı görevler`),`Adjust difficulty for ADHD child Stroop game.

DATA: ${s.toFixed(1)}% accuracy, ${e.averageReactionTime}ms reaction${o}

RULES:
- If accuracy >80% AND reaction <2000ms: increase difficulty
- If accuracy <50% OR reaction >2500ms: decrease difficulty
- If reaction <700ms: slow down (impulsive)
- If reaction >2800ms: motivate (struggling)

OUTPUT JSON:
{
  "newSettings": {"boxCount": ${s>80&&e.averageReactionTime<2e3?6:s<50?4:5}, "commandVisibilityDuration": ${e.averageReactionTime<700?3500:e.averageReactionTime>2800?2e3:2500}, "conflictRate": ${s>80?.6:s<50?.3:.5}, "distractorCount": ${s>80?1:0}, "distractorTypes": ["${s>80?"text":"none"}"], "pauseTime": ${e.averageReactionTime<700?800:400}},
  "reasoning": "Based on ${s.toFixed(1)}% accuracy and ${e.averageReactionTime}ms reaction",
  "encouragement": "Keep going!",
  "tips": ["Focus", "Read carefully"]
}`}analyzeErrorPatterns(e){if(!e.length)return"Henüz hata analizi için yeterli veri yok";const t={colorCommand:0,textCommand:0,quickClicks:0,slowClicks:0};e.forEach(l=>{l.includes("color")&&t.colorCommand++,l.includes("text")&&t.textCommand++,l.includes("quick")&&t.quickClicks++,l.includes("slow")&&t.slowClicks++});const s=Object.entries(t).reduce((l,h)=>t[l[0]]>t[h[0]]?l:h);return{colorCommand:"Renk komutlarında zorluk",textCommand:"Kelime komutlarında zorluk",quickClicks:"Çok hızlı tıklama eğilimi",slowClicks:"Yavaş reaksiyon gösterme"}[s[0]]||"Karma hata türleri"}async callOllama(e){const t="https://3c9bc3387069.ngrok-free.app/api/generate",s={model:this.modelName,prompt:e,format:"json",stream:!1,options:{temperature:.1,top_p:.7,num_predict:100}};try{const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Ollama API hatası: ${o.status}`);return(await o.json()).response.trim()}catch(o){throw new Error(`Ollama bağlantı hatası: ${o}`)}}parseAIResponse(e){try{let t;try{t=JSON.parse(e.trim())}catch{const l=e.match(/\{[\s\S]*\}/);if(!l)throw new Error("JSON bulunamadı");t=JSON.parse(l[0])}if(!t.newSettings)throw new Error("newSettings eksik");const s=t.newSettings;s.boxCount=Math.max(2,Math.min(10,s.boxCount||4)),s.commandVisibilityDuration=Math.max(1500,Math.min(4e3,s.commandVisibilityDuration||2500)),s.conflictRate=Math.max(.2,Math.min(.9,s.conflictRate||.5)),s.distractorCount=Math.max(0,Math.min(3,s.distractorCount||0)),s.pauseTime=Math.max(200,Math.min(1200,s.pauseTime||600));const o=["emoji","text","shape","none"];return Array.isArray(s.distractorTypes)?(s.distractorTypes=s.distractorTypes.filter(l=>o.includes(l)),s.distractorTypes.length===0&&(s.distractorTypes=["none"])):s.distractorTypes=["none"],{newSettings:s,reasoning:t.reasoning||"AI tarafından optimize edildi",encouragement:t.encouragement||"Harika gidiyorsun! Devam et!",tips:Array.isArray(t.tips)?t.tips:["Odaklan ve sakin ol","Her cevap öğrenme fırsatı"]}}catch(t){throw console.error("AI response parse hatası:",t),new Error(`AI yanıtı parse edilemedi: ${t}`)}}getFallbackDifficulty(e){const t=e.totalAttempts>0?e.correctAttempts/e.totalAttempts:0;let s=5,o=2500,l=.5,h=0,g=600;return t>.8?(s=6,l=.6,h=1):t<.5&&(s=4,l=.3,o=3e3,g=800),{newSettings:{boxCount:s,commandVisibilityDuration:o,conflictRate:l,distractorCount:h,distractorTypes:h>0?["emoji"]:["none"],pauseTime:g},reasoning:"AI mevcut değil, basit algoritma kullanıldı",encouragement:t>.7?"Harika devam ediyorsun!":"Güzel, pratik yapmaya devam et!",tips:["Komutları dikkatli oku","Acele etme, doğruluğa odaklan","Her seferinde biraz daha iyi oluyorsun"]}}setModel(e){this.modelName=e}}const xj=new vj,Ir=["KIRMIZI","MAVİ","YEŞİL","SARI","TURUNCU","PEMBE"],bj={KIRMIZI:"#DC2626",MAVİ:"#2563EB",YEŞİL:"#16A34A",SARI:"#CA8A04",TURUNCU:"#EA580C",PEMBE:"#DB2777"},Eb=["🎯","⚠️","?","⭐","🔥","💎","🎪","⚡"],_j=({studentId:a,studentAge:e=12,difficulty:t="orta",onGameComplete:s,onEmotionDetected:o})=>{const l=E.useRef(null),h=E.useRef([]),g=E.useRef(0),p=E.useRef(null),[y,x]=E.useState(!1),[T,w]=E.useState(null),[M,F]=E.useState(null),[B,U]=E.useState({boxCount:6,commandVisibilityDuration:2500,conflictRate:.5,distractorCount:0,distractorTypes:["none"],pauseTime:600}),[K,ee]=E.useState({correctAttempts:0,totalAttempts:0,averageReactionTime:0,streakCounter:0,bestStreak:0,timeSpent:0,difficultyLevel:5,recentErrors:[]}),[ne,Se]=E.useState(""),[Te,xe]=E.useState([]);E.useMemo(()=>({kolay:B,orta:B,zor:B}),[B]);const[R,A]=E.useState({boxes:[],command:"",commandType:"color",targetColor:"KIRMIZI",score:0,timeRemaining:60,gameStarted:!1,gameEnded:!1,currentLevel:1,consecutiveCorrect:0,consecutiveWrong:0,commandVisible:!0,commandTimeLeft:B.commandVisibilityDuration,boxesVisible:!1,totalAttempts:0,correctAttempts:0,streakCounter:0,bestStreak:0,aiAnalyzing:!1,feedback:{show:!1,type:"correct",message:""}}),N=E.useRef([]),j=E.useRef(0),O=E.useCallback(z=>{const W=l.current;if(!W)return console.log("⚠️ [DEBUG] Container not found, using default position"),{x:50+Math.random()*400,y:50+Math.random()*300};const Q=W.getBoundingClientRect(),ce=100,be=20;if(Q.width===0||Q.height===0)return console.log("⚠️ [DEBUG] Container has no dimensions, using fallback"),{x:50+Math.random()*400,y:50+Math.random()*300};let Ae=0,fe;do fe={x:Math.random()*(Q.width-ce-2*be)+be,y:Math.random()*(Q.height-ce-2*be)+be},Ae++;while(Ae<50&&z.some(ue=>Math.abs(ue.x-fe.x)<ce+10&&Math.abs(ue.y-fe.y)<ce+10));return Ae>10&&console.log("📍 [DEBUG] Position generation took",Ae,"attempts"),fe},[]),V=E.useCallback(async()=>{console.log("🎭 [EMOTION] Emotion tracking başlatılıyor..."),x(!0);const z=Q=>{if(!Ve.isGameActiveStatus())return;w(Q),Ve.addEmotionResult(Q);const ce=Ve.getCurrentGameMetrics();F(ce);const be={emotion:Q.emotion,confidence:Q.confidence,timestamp:Q.timestamp};h.current=[...h.current.slice(-10),be],o?.(be)};let W=!1;p.current&&(W=await ht.startEmotionTracking(p.current,z)),W||(console.log("📱 [EMOTION] Gerçek kamera bulunamadı - Python server çalışıyor mu?"),console.log("💡 [TIP] Terminal'de çalıştır: python emotion_server.py")),console.log("✅ [EMOTION] Emotion tracking aktif")},[o]),C=E.useCallback(()=>{console.log("⏹️ [EMOTION] Emotion tracking durduruluyor..."),ht.stopEmotionTracking(),x(!1);const z=Ve.endGameSession();F(z),console.log("🏁 [EMOTION] Final metrics:",z)},[]),lt=E.useCallback((z,W)=>{const Q=B,ce=[],be=[];console.log("🎯 [DEBUG] Generating boxes for:",{targetColor:z,commandType:W,settings:Q});const Ae=O(be);be.push(Ae);const fe={id:0,textLabel:z,textColor:z,position:Ae,isCorrect:!0};if(W==="text"){fe.textLabel=z;const oe=Ir.filter(He=>He!==z);fe.textColor=oe[Math.floor(Math.random()*oe.length)]}else{fe.textColor=z;const oe=Ir.filter(He=>He!==z);fe.textLabel=oe[Math.floor(Math.random()*oe.length)]}console.log("✅ [DEBUG] Correct box created:",fe),ce.push(fe);const ue=Math.max(2,Q.boxCount-1-(Q.distractorCount||0));console.log("📊 [DEBUG] Generating",ue,"normal boxes + 1 correct box =",ue+1,"total");for(let oe=1;oe<=ue;oe++){const He=O(be);be.push(He);const it=Math.random()<Q.conflictRate;let Le,ft,et=0;do{if(et++,it){Le=Ir[Math.floor(Math.random()*Ir.length)];do ft=Ir[Math.floor(Math.random()*Ir.length)];while(ft===Le)}else{const pt=Ir[Math.floor(Math.random()*Ir.length)];Le=pt,ft=pt}if(!(W==="color"?ft===z:Le===z))break;if(et>=10){if(W==="color"){const pt=Ir.filter(tt=>tt!==z);ft=pt[Math.floor(Math.random()*pt.length)]}else{const pt=Ir.filter(tt=>tt!==z);Le=pt[Math.floor(Math.random()*pt.length)]}break}}while(et<20);ce.push({id:oe,textLabel:Le,textColor:ft,position:He,isCorrect:!1})}const De=Q.distractorCount;if(De>0&&!Q.distractorTypes.includes("none"))for(let oe=ue+1;oe<=ue+De;oe++){const He=O(be);be.push(He);let it;const Le=Q.distractorTypes[Math.floor(Math.random()*Q.distractorTypes.length)];switch(Le){case"emoji":it=Eb[Math.floor(Math.random()*Eb.length)];break;case"text":it="?";break;case"shape":it="●";break;default:continue}ce.push({id:oe,textLabel:it,textColor:"KIRMIZI",position:He,isCorrect:!1,isDistractor:!0}),console.log(`🎭 [DEBUG] Distractor box ${oe} created with type ${Le}`)}const ye=ce.filter(oe=>oe.isCorrect);return console.log("🔍 [DEBUG] Final boxes check:",{totalBoxes:ce.length,correctBoxes:ye.length,normalBoxes:ce.filter(oe=>!oe.isCorrect&&!oe.isDistractor).length,distractorBoxes:ce.filter(oe=>oe.isDistractor).length}),ye.length===0&&(console.error("❌ [ERROR] No correct boxes found! This should not happen."),ce.length>0&&(ce[0].isCorrect=!0,W==="text"?ce[0].textLabel=z:ce[0].textColor=z)),ce},[B,O]),de=E.useCallback(()=>{if(!l.current){setTimeout(()=>de(),100);return}const z=Math.random()>.5?"color":"text",W=Ir[Math.floor(Math.random()*Ir.length)],Q=z==="color"?`${W} renkli yazana tıkla`:`${W} yazısını seç`,ce=lt(W,z);Ve.startRoundSession(),A(be=>({...be,boxes:ce,command:Q,commandType:z,targetColor:W,commandVisible:!0,commandTimeLeft:B.commandVisibilityDuration,boxesVisible:!1,feedback:{show:!1,type:"correct",message:""}})),setTimeout(()=>{A(be=>({...be,commandVisible:!1,boxesVisible:!0})),j.current=Date.now()},B.commandVisibilityDuration)},[lt,B]),X=E.useCallback(z=>{const W=R.boxes.find(ue=>ue.id===z);if(!W||R.gameEnded||R.aiAnalyzing||!R.boxesVisible)return;const Q=W.isCorrect,be=Date.now()-j.current;N.current.push(be);const Ae=Ve.endRoundSession();console.log("🏁 [CONFLICT ROUND ENDED] Round emotion data:",Ae.length),A(ue=>{const De={...ue};if(De.totalAttempts+=1,Q){De.correctAttempts+=1,De.streakCounter+=1,De.bestStreak=Math.max(De.bestStreak,De.streakCounter);const ye=Math.max(0,Math.floor(ue.commandTimeLeft/100*10));De.score+=100+ye,De.consecutiveCorrect+=1,De.consecutiveWrong=0,De.feedback={show:!0,type:"correct",message:`Doğru! +${100+ye} puan`}}else{De.streakCounter=0,De.score=Math.max(0,De.score-50),De.timeRemaining=Math.max(0,De.timeRemaining-2),De.consecutiveWrong+=1,De.consecutiveCorrect=0;const ye=`${ue.commandType}_error_${be<1e3?"quick":"slow"}`;De.feedback={show:!0,type:"incorrect",message:"Yanlış! -50 puan, -2 saniye"},ee(oe=>({...oe,recentErrors:[...oe.recentErrors.slice(-4),ye]}))}return De}),ee(ue=>({...ue,correctAttempts:Q?ue.correctAttempts+1:ue.correctAttempts,totalAttempts:ue.totalAttempts+1,averageReactionTime:N.current.length>0?N.current.reduce((ye,oe)=>ye+oe,0)/N.current.length:0,streakCounter:Q?ue.streakCounter+1:0,bestStreak:Math.max(ue.bestStreak,Q?ue.streakCounter+1:0),timeSpent:Date.now()-g.current,difficultyLevel:Math.round(((B.boxCount-2)/8+B.conflictRate)*5)}));const fe=R.totalAttempts+1;fe>=5&&fe%3===0?(console.log("🚀 AI Tetikleniyor! Deneme sayısı:",fe),A(ue=>({...ue,aiAnalyzing:!0,boxesVisible:!0})),he().then(()=>{A(ue=>({...ue,aiAnalyzing:!1,boxesVisible:!1})),setTimeout(()=>{de()},B.pauseTime)})):(fe<5&&console.log("📊 Veri toplaniyor... Deneme:",fe,"/5"),setTimeout(()=>{de()},B.pauseTime))},[R.boxes,R.gameEnded,R.boxesVisible,R.aiAnalyzing,R.totalAttempts,B,de]),he=E.useCallback(async()=>{if(K.totalAttempts<3){console.log("⚠️ Yetersiz veri, AI analizi atlanıyor. Deneme:",K.totalAttempts),Se("Daha fazla veri toplanıyor... 📊"),setTimeout(()=>Se(""),2e3);return}try{console.log("🤖 AI Adaptasyon kontrolü başlıyor...",K),Se("AI analiz ediyor... 🤖");const z=Ve.getCurrentRoundEmotions(),W=Ve.getFullGameEmotions(),Q=W.length>0?JSON.stringify(W):void 0;console.log("🤖 [CONFLICT AI PROMPT DATA]",{hasEmotionData:!!Q,roundEmotionCount:z.length,fullGameEmotionCount:W.length,performanceMetrics:K,emotionsSource:"full-game-emotions"});const ce=await xj.getAdaptiveDifficulty(K,Q);U(ce.newSettings),Se(ce.encouragement),xe(ce.tips),console.log("✅ AI Adaptasyon tamamlandı:",{newSettings:ce.newSettings,reasoning:ce.reasoning,oldSettings:B,emotionDataUsed:!!Q}),console.log("🧹 [EMOTION RESET] AI analizi sonrası emotion data temizleniyor"),Ve.clearHistory(),setTimeout(()=>{Se("")},5e3)}catch(z){console.error("❌ AI Adaptasyon hatası:",z);const W=K.totalAttempts>0?K.correctAttempts/K.totalAttempts:0;W>.8?(U(Q=>({...Q,boxCount:Math.min(8,Q.boxCount+1),conflictRate:Math.min(.9,Q.conflictRate+.1)})),Se("Harika performans! Zorluk artırıldı 🚀")):W<.5?(U(Q=>({...Q,boxCount:Math.max(3,Q.boxCount-1),conflictRate:Math.max(.3,Q.conflictRate-.1)})),Se("Kolaylaştırdım, sen yapabilirsin! 💪")):Se("Güzel devam ediyorsun! 👍"),setTimeout(()=>{Se("")},4e3)}},[K,B]),me=E.useCallback(async()=>{await V(),ee({correctAttempts:0,totalAttempts:0,averageReactionTime:0,streakCounter:0,bestStreak:0,timeSpent:0,difficultyLevel:5,recentErrors:[]}),N.current=[],Ve.startGameSession(),Ve.startRoundSession(),A(z=>({...z,gameStarted:!0,gameEnded:!1,score:0,timeRemaining:60,currentLevel:1,consecutiveCorrect:0,consecutiveWrong:0,totalAttempts:0,correctAttempts:0,streakCounter:0,bestStreak:0,boxesVisible:!1})),g.current=Date.now(),h.current=[],ht.startFrameAnalysis?.(),de()},[de]),Me=E.useCallback(()=>{ht.stopFrameAnalysis?.(),C(),A(W=>({...W,gameEnded:!0}));const z=Date.now()-g.current;s(R.score,z,h.current)},[R.score,s,C]),D=E.useCallback(()=>{U({boxCount:6,commandVisibilityDuration:2500,conflictRate:.5,distractorCount:0,distractorTypes:["none"],pauseTime:600}),Se(""),xe([]),x(!1),w(null),F(null),h.current=[],A(z=>({...z,gameStarted:!1,gameEnded:!1,score:0,timeRemaining:60,currentLevel:1,consecutiveCorrect:0,consecutiveWrong:0,totalAttempts:0,correctAttempts:0,streakCounter:0,bestStreak:0,aiAnalyzing:!1,boxesVisible:!1,boxes:[]}))},[]);return E.useEffect(()=>{if(!R.gameStarted||R.gameEnded||R.aiAnalyzing)return;const z=setInterval(()=>{A(W=>W.timeRemaining<=1?{...W,timeRemaining:0}:{...W,timeRemaining:W.timeRemaining-1})},1e3);return()=>clearInterval(z)},[R.gameStarted,R.gameEnded,R.aiAnalyzing]),E.useEffect(()=>{R.gameStarted&&R.timeRemaining===0&&!R.gameEnded&&Me()},[R.gameStarted,R.timeRemaining,R.gameEnded,Me]),E.useEffect(()=>{if(R.feedback.show){const z=setTimeout(()=>{A(W=>({...W,feedback:{...W.feedback,show:!1}}))},1500);return()=>clearTimeout(z)}},[R.feedback.show]),R.gameStarted?R.gameEnded?u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("video",{ref:p,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),u.jsx(Sn,{children:u.jsxs(wn,{className:"text-center py-8",children:[u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:u.jsx(pb,{className:"h-10 w-10 text-white"})})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Oyun Tamamlandı!"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto mb-6",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:R.score}),u.jsx("div",{className:"text-sm text-blue-800",children:"Toplam Puan"})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["%",R.totalAttempts>0?Math.round(R.correctAttempts/R.totalAttempts*100):0]}),u.jsx("div",{className:"text-sm text-green-800",children:"Doğruluk"})]}),u.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:R.bestStreak}),u.jsx("div",{className:"text-sm text-purple-800",children:"En İyi Seri"})]}),u.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[K.averageReactionTime>0?Math.round(K.averageReactionTime):0,"ms"]}),u.jsx("div",{className:"text-sm text-orange-800",children:"Ort. Reaksiyon"})]})]}),Te.length>0&&u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg max-w-md mx-auto mb-6",children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx(cr,{className:"h-5 w-5 text-blue-600 mr-2"}),u.jsx("span",{className:"font-semibold text-blue-800",children:"AI Analizi"})]}),u.jsx("div",{className:"space-y-1",children:Te.map((z,W)=>u.jsxs("div",{className:"text-sm text-blue-700",children:["• ",z]},W))})]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsxs(Zn,{onClick:D,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white",children:[u.jsx(Gc,{className:"h-4 w-4 mr-2"}),"Tekrar Oyna"]}),u.jsx(Zn,{onClick:()=>s(R.score,Date.now()-g.current,h.current),variant:"outline",children:"Bitir"})]})]})})]}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:[u.jsx("video",{ref:p,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),u.jsx("div",{className:"max-w-6xl mx-auto mb-6",children:u.jsx(Sn,{children:u.jsx(wn,{className:"py-4",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center space-x-6",children:[R.commandVisible&&u.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-8 py-4 rounded-xl shadow-lg",children:[u.jsx("div",{className:"font-bold text-2xl text-center",children:R.command}),u.jsx("div",{className:"text-sm text-center mt-2 opacity-90",children:"Komutu oku ve hatırla!"})]}),!R.commandVisible&&!R.boxesVisible&&u.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-lg",children:u.jsx("div",{className:"font-bold text-lg text-center",children:"Kutular hazırlanıyor..."})}),!R.commandVisible&&R.boxesVisible&&u.jsx("div",{className:"text-gray-600 italic text-lg font-semibold",children:"Komutu hatırla ve doğru kutuyu seç!"})]}),u.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(va,{className:"h-4 w-4 text-blue-600"}),u.jsxs("span",{className:"font-semibold",children:[R.timeRemaining,"s"]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(pb,{className:"h-4 w-4 text-green-600"}),u.jsx("span",{className:"font-semibold",children:R.score})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(ur,{className:"h-4 w-4 text-purple-600"}),u.jsxs("span",{className:"font-semibold",children:[R.totalAttempts>0?Math.round(R.correctAttempts/R.totalAttempts*100):0,"% Doğru"]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(hp,{className:"h-4 w-4 text-orange-600"}),u.jsxs("span",{className:"font-semibold",children:["Seri: ",R.streakCounter]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(cr,{className:"h-4 w-4 text-indigo-600"}),u.jsxs("span",{className:"font-semibold text-xs",children:["AI: ",B.boxCount," kutu, %",Math.round(B.conflictRate*100)," çatışma"]})]}),y&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${ht.isTrackingActive()&&ht.isFrameAnalysisActive?.()?"bg-green-500":ht.isTrackingActive()?"bg-yellow-500":"bg-orange-500"}`}),u.jsx(Ur,{className:"h-4 w-4 text-green-600"}),u.jsx("span",{className:"text-xs text-green-600",children:ht.isTrackingActive()&&ht.isFrameAnalysisActive?.()?"Analiz Aktif":ht.isTrackingActive()?"Kamera Bağlı":"Mock Mode"})]}),T&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(kc,{className:`h-4 w-4 ${T.lookingAtScreen?"text-green-600":"text-red-600"}`}),u.jsxs("span",{className:"text-xs text-gray-600",children:[T.emotion," (",(T.confidence*100).toFixed(0),"%)"]})]})]})]})})})}),u.jsx("div",{className:"max-w-6xl mx-auto",children:u.jsx("div",{ref:l,className:"relative w-full h-[600px] bg-white rounded-xl shadow-lg overflow-hidden",style:{position:"relative"},children:R.boxesVisible&&R.boxes.map(z=>u.jsx("div",{className:"absolute cursor-pointer transform hover:scale-105 transition-transform duration-150",style:{left:z.position.x,top:z.position.y,width:"100px",height:"100px"},onClick:()=>X(z.id),children:u.jsx("div",{className:"w-full h-full bg-white rounded-lg shadow-md border-2 border-gray-200 flex items-center justify-center hover:shadow-lg",children:z.isDistractor?u.jsx("div",{className:"text-4xl",children:z.textLabel}):u.jsx("div",{className:"text-xl font-bold",style:{color:bj[z.textColor]},children:z.textLabel})})},z.id))})}),R.aiAnalyzing&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-8 py-6 rounded-xl shadow-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),u.jsx(cr,{className:"h-6 w-6"}),u.jsx("span",{className:"font-semibold text-lg",children:"AI performansını analiz ediyor..."})]}),u.jsx("div",{className:"text-center mt-2 text-blue-100 text-sm",children:"Oyun kısa sürede devam edecek"})]})}),ne&&!R.aiAnalyzing&&u.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-40 pointer-events-none",children:u.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-xl shadow-lg",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(cr,{className:"h-5 w-5"}),u.jsx("span",{className:"font-semibold",children:ne})]})})}),R.feedback.show&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:u.jsx("div",{className:`
            px-8 py-4 rounded-xl text-white text-xl font-bold shadow-lg
            ${R.feedback.type==="correct"?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-red-500 to-pink-500"}
          `,children:R.feedback.message})})]}):u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsx("video",{ref:p,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),u.jsx(Sn,{children:u.jsxs(wn,{className:"text-center py-8",children:[u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-red-500 to-orange-500 rounded-full flex items-center justify-center",children:u.jsx(cr,{className:"h-10 w-10 text-white"})})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Çatışma Oyunu"}),u.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"Stroop etkisiyle dikkatini geliştir! Yazan kelimeyle renk farklı olabilir."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto mb-6",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsx(ur,{className:"h-6 w-6 text-blue-600 mx-auto mb-2"}),u.jsx("h3",{className:"font-semibold text-blue-800 mb-1",children:"Renk Odaklı"}),u.jsx("p",{className:"text-sm text-blue-600",children:"Belirtilen renkteki yazıyı bul"})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsx(cr,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),u.jsx("h3",{className:"font-semibold text-green-800 mb-1",children:"Kelime Odaklı"}),u.jsx("p",{className:"text-sm text-green-600",children:"Belirtilen kelimeyi bul"})]}),u.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[u.jsx(va,{className:"h-6 w-6 text-purple-600 mx-auto mb-2"}),u.jsx("h3",{className:"font-semibold text-purple-800 mb-1",children:"Zamana Karşı"}),u.jsx("p",{className:"text-sm text-purple-600",children:"60 saniyede en yüksek skoru yap"})]})]}),u.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg max-w-md mx-auto",children:[u.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Nasıl Oynanır?"}),u.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[u.jsx("li",{children:"• Ekranda çıkan komutu oku"}),u.jsx("li",{children:"• Komuta uygun kutuyu tıkla"}),u.jsx("li",{children:"• Dikkat: Kelime ve renk farklı olabilir!"}),u.jsx("li",{children:"• Doğru: +100 puan, Yanlış: -50 puan"})]})]}),u.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[u.jsxs(Zn,{onClick:me,size:"lg",className:"bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white px-8 py-3",children:[u.jsx(ur,{className:"h-5 w-5 mr-2"}),"Oyunu Başlat - ",t==="kolay"?"Kolay":t==="orta"?"Orta":"Zor"]}),u.jsxs(Zn,{onClick:()=>he(),variant:"outline",size:"sm",className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[u.jsx(cr,{className:"h-4 w-4 mr-2"}),"AI Test Et"]})]})]})})]})};class Tj{constructor(){this.modelName="alibayram/turkish-gemma-9b-v0.1:latest"}async generateQuestion(e){const{subject:t,difficulty:s,questionType:o="çoktan seçmeli"}=e;console.log("🤖 [OLLAMA DEBUG] Soru üretimi başlıyor:",{subject:t,difficulty:s,questionType:o,timestamp:new Date().toISOString(),stack:new Error().stack?.split(`
`).slice(1,5).join(`
`)});const l=this.buildPrompt(t,s,o);try{const h=await this.callOllama(l),g=this.parseOllamaResponse(h);return console.log("✅ [OLLAMA DEBUG] Soru başarıyla üretildi:",g.question),{id:`ollama_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,question:g.question,options:g.options,correctAnswer:g.correctIndex,confidence:.9,gameType:"word-image",difficulty:this.mapDifficultyToEnglish(s),source:"ollama"}}catch(h){throw console.error("❌ [OLLAMA DEBUG] Soru üretme hatası:",h),new Error(`Ollama servisi ile soru üretilemedi: ${h}`)}}buildPrompt(e,t,s){return`Aşağıdaki talimatları tamamen uygula ve yalnızca istenen biçimde yanıt ver.

Profil (hedef kitle)
Yaş: 12 (ortaokul 5–6. sınıf).
Dikkat süresi için: tek görev, tek cümle, somut/giriş düzeyi soyut kavramlar.
Kelime dağarcığı: B1 düzeyi; günlük ve dersle ilişkili sözcükler.

Dil ve karakterler
Yanıt yalnızca Türkçe olmalıdır.
Çin/Japon tipi karakter ve noktalama kullanma (örn. ： ， ︿ ＜ ＞).
ASCII soru işareti ? kullan.

Çıktı formatı (zorunlu)
Sadece tek bir JSON nesnesi döndür; açıklama/ek metin yok.
Şema: {"question": string, "options": [string,string,string,string], "correctIndex": number}

Kurallar:
question: 6–8 kelime, kısa ve net.
options: tam 4 seçenek, Türkçe ve emoji ile görsel zengin.
Seçenekler benzersiz, benzer uzunlukta; sadece 1 doğru.
correctIndex: 0–3 arası tamsayı.

ADHD'ye uygun tasarım
Olumsuz kalıp kullanma ("hangisi değildir" yok).
Belirsiz/iki anlamlı ifadeler yok.
Aynı veya çok benzer emojiler kullanma (karışıklık oluşturma).
Gereksiz süsleme ve uzun cümleler yok.

Zorluk haritalaması (12 yaş):
kolay: doğrudan tanıma/isimlendirme; açık farklar; 1 adım.
orta: temel sınıflama/özdeşlik; yakın ama ayrılabilir çeldiriciler.
zor: kısa bağlam ipucu veya 2 adımlı basit akıl yürütme (yine kısa).

Kalite kontrolleri
Soru "hangi / ne / kim / nerede / nedir / nasıl" kalıbı içersin.
Seçenekler dilbilgisel olarak tutarlı (hepsi kısa söz öbekleri).
Soruda cevabı açık etmeyin (ipucu sızıntısı yok).
Doğru cevabın konumu rastgele olsun; sabit pozisyon kullanma.

Konu: ${e}
Zorluk: ${t}

DOĞRU örnek
{"question":"🐶 hangi ses çıkarır?","options":["Hav hav","Miyav","Möö","Cik cik"],"correctIndex":0}

YANLIŞ örnekler (yapma)
Ek açıklama/metin döndürmek.
Çin tipi noktalama: ： ， ︿ ＜ ＞
Uzun/iki görevli sorular.
Birden çok doğru cevap.`}getADHDGuidelines(e){switch(e){case"kolay":return`
- Çok basit, günlük yaşamdan konular
- Büyük, kontrastlı emojiler kullan
- Sadece bir odak noktası
- Pozitif, eğlenceli dil`;case"orta":return`
- Bilinen konulardan biraz farklı örnekler
- Rengarenk emojiler
- Hafif düşündürücü ama yorucu değil
- Teşvik edici ifadeler`;case"zor":return`
- Dikkat gerektiren detaylar
- Çoklu görsel ipuçları
- Problem çözme odaklı
- Başarı hissi verecek zorlukta`;default:return"- Temel ADHD uyumlu tasarım prensiplerine uygun"}}async callOllama(e){const t="http://localhost:11434/api/generate";console.log("📡 [OLLAMA DEBUG] API çağrısı başlıyor...");const s={model:this.modelName,prompt:e,format:"json",stream:!1,options:{temperature:.6,top_p:.9,num_predict:300}};try{const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!o.ok)throw new Error(`Ollama API hatası: ${o.status} ${o.statusText}`);const l=await o.json();if(!l.response)throw new Error("Ollama boş yanıt döndürdü");return console.log("📨 [OLLAMA DEBUG] API yanıtı alındı"),l.response.trim()}catch(o){throw o instanceof Error?new Error(`Ollama API hatası: ${o.message}`):o}}parseOllamaResponse(e){console.log("🔍 [OLLAMA DEBUG] Parse edilecek yanıt:",e);try{let t;try{t=JSON.parse(e.trim())}catch{const l=e.match(/\{[\s\S]*\}/);if(!l)throw new Error(`JSON bulunamadı. Ham yanıt: ${e}`);const h=l[0];t=JSON.parse(h)}if(!t?.question||typeof t.question!="string")throw new Error(`Geçersiz question: ${t?.question}`);const s=/[\u4e00-\u9fff\uff00-\uffef：，＞︿＜]/;if(s.test(t.question))throw new Error(`Soru Çince karakter içeriyor: ${t.question}`);if(!Array.isArray(t?.options))throw new Error(`Options array değil: ${t?.options}`);if(t.options.length!==4)throw new Error(`4 seçenek gerekli, ${t.options.length} bulundu: ${JSON.stringify(t.options)}`);for(const o of t.options){if(typeof o!="string")throw new Error(`Seçenek string değil: ${o}`);if(s.test(o))throw new Error(`Seçenek Çince karakter içeriyor: ${o}`)}if(typeof t?.correctIndex!="number")throw new Error(`correctIndex sayı değil: ${t?.correctIndex}`);if(t.correctIndex<0||t.correctIndex>3)throw new Error(`correctIndex 0-3 arasında olmalı: ${t.correctIndex}`);return console.log("✅ [OLLAMA DEBUG] JSON başarıyla parse edildi"),t}catch(t){throw console.error("❌ [OLLAMA DEBUG] JSON parse hatası:",t),console.error("🔍 [OLLAMA DEBUG] Ham yanıt:",e),new Error(`Model JSON döndürmedi veya format hatalı: ${t}`)}}mapDifficultyToEnglish(e){return{kolay:"easy",orta:"medium",zor:"hard"}[e]||"medium"}setModel(e){this.modelName=e}getCurrentModel(){return this.modelName}async checkOllamaStatus(){try{const e=await fetch("http://localhost:11434/api/tags",{method:"GET",headers:{"Content-Type":"application/json"}});return e.ok?((await e.json()).models||[]).some(o=>o.name.includes(this.modelName.split(":")[0])):!1}catch(e){return console.error("Ollama status kontrolü hatası:",e),!1}}async generateSimpleResponse(e){console.log("🤖 [OLLAMA DEBUG] Basit yanıt üretimi başlıyor:",e);const t=`${e}

ÖNEMLI TALİMATLAR:
- Sadece tek kelime renk ismi söyle
- Hiç açıklama yapma
- <think> tag'i kullanma
- "Hmm" gibi düşünce belirteci kullanma
- Sadece renk ismini yaz ve dur

Örnek: "Mavi" veya "Kırmızı"`;try{const s="http://localhost:11434/api/generate",o={model:this.modelName,prompt:t,stream:!1,options:{temperature:.3,top_p:.5,num_predict:10}},l=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(!l.ok)throw new Error(`Ollama API hatası: ${l.status} ${l.statusText}`);const h=await l.json();if(!h.response)throw new Error("Ollama boş yanıt döndürdü");return console.log("✅ [OLLAMA DEBUG] Basit yanıt alındı:",h.response.trim()),h.response.trim()}catch(s){throw console.error("❌ [OLLAMA DEBUG] Basit yanıt hatası:",s),new Error(`Ollama servisi yanıt veremedi: ${s}`)}}async generateMultipleQuestions(e,t=5){const s=[];for(let o=0;o<t;o++)try{const l=await this.generateQuestion(e);s.push(l),await new Promise(h=>setTimeout(h,1e3))}catch(l){console.error(`${o+1}. soru üretme hatası:`,l)}if(s.length===0)throw new Error("Hiç soru üretilemedi");return s}}const Ej=new Tj,Ss=[{name:"Kırmızı",hex:"#FF0000",bgColor:"bg-red-500"},{name:"Mavi",hex:"#0000FF",bgColor:"bg-blue-500"},{name:"Yeşil",hex:"#00FF00",bgColor:"bg-green-500"},{name:"Sarı",hex:"#FFFF00",bgColor:"bg-yellow-500"},{name:"Turuncu",hex:"#FFA500",bgColor:"bg-orange-500"},{name:"Mor",hex:"#800080",bgColor:"bg-purple-500"},{name:"Pembe",hex:"#FFC0CB",bgColor:"bg-pink-500"},{name:"Beyaz",hex:"#FFFFFF",bgColor:"bg-white"},{name:"Siyah",hex:"#000000",bgColor:"bg-black"}],kj=({studentId:a,studentAge:e=6,onGameComplete:t,onEmotionDetected:s})=>{const[o,l]=E.useState("idle"),[h,g]=E.useState(null),[p,y]=E.useState(5),[x,T]=E.useState(60),[w,M]=E.useState(0),[F,B]=E.useState(1),[U]=E.useState(Date.now()),[K,ee]=E.useState([]),[ne,Se]=E.useState(!1);E.useEffect(()=>{console.log("🎬 isVideoActive değişti:",ne)},[ne]);const[Te,xe]=E.useState(!1),[R,A]=E.useState(""),[N,j]=E.useState(0),[O,V]=E.useState(""),[C,lt]=E.useState(null),de=E.useRef(null),X=E.useRef(null),he=E.useRef(null),me=E.useRef(null),Me=E.useRef(null),D=E.useRef(null),z=E.useCallback(async()=>{if(console.log("🎥 Kamera başlatılmaya çalışılıyor..."),console.log("🔍 Video ref durumu:",{current:!!de.current,isConnected:de.current?.isConnected,parentElement:!!de.current?.parentElement}),!de.current){console.error("❌ Video element henüz mevcut değil, DOM mount bekleniyor..."),V("Video element henüz hazır değil"),setTimeout(()=>{de.current&&(console.log("🔄 Video element bulundu, tekrar deneniyor..."),z())},500);return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){const ye="Browser kamera desteği yok. Lütfen modern bir tarayıcı kullanın.";console.error("❌",ye),V(ye),Se(!1);return}try{const ye=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});if(console.log("✅ Kamera akışı alındı:",ye),de.current){console.log("🎬 Video element bulundu, stream atanıyor..."),console.log("🏗️ Video element DOM durumu:",{isConnected:de.current.isConnected,parentElement:!!de.current.parentElement,tagName:de.current.tagName,autoplay:de.current.autoplay,playsInline:de.current.playsInline,muted:de.current.muted}),console.log("📊 Video element durumu:",{readyState:de.current.readyState,networkState:de.current.networkState,videoWidth:de.current.videoWidth,videoHeight:de.current.videoHeight}),de.current.srcObject=ye,de.current.onloadedmetadata=null,de.current.onerror=null;const oe=()=>{console.log("📹 Video metadata yüklendi"),console.log("📏 Video boyutları:",de.current?.videoWidth,"x",de.current?.videoHeight),console.log("📊 Video readyState:",de.current?.readyState),de.current&&de.current.play().then(()=>{console.log("▶️ Video oynatılmaya başladı"),console.log("✅ setIsVideoActive(true) çağrılıyor"),Se(!0),V("")}).catch(et=>{console.error("❌ Video oynatma hatası:",et),V("Video oynatılamıyor. Lütfen tarayıcıyı yenileyin."),Se(!1)})},He=et=>{console.error("❌ Video element hatası:",et),V("Video element hatası oluştu."),Se(!1)};console.log("🔧 Event listener'lar ekleniyor..."),de.current.addEventListener("loadedmetadata",oe),de.current.addEventListener("error",He),console.log("📊 Stream atama sonrası durum:",{readyState:de.current.readyState,networkState:de.current.networkState,srcObject:!!de.current.srcObject}),de.current.readyState>=1?(console.log("📹 Metadata zaten yüklü, direkt oynatılıyor"),oe()):console.log("⏳ Metadata yüklenmesi bekleniyor..."),setTimeout(()=>{de.current&&de.current.srcObject&&(console.log("🚀 Immediate play attempt..."),de.current.play().then(()=>{console.log("✅ Immediate play başarılı"),ne||(Se(!0),V(""))}).catch(et=>{console.log("⏸️ Immediate play başarısız (normal):",et.message)}))},100);const Le=()=>{console.log("✅ Video oynatılabilir durumda"),console.log("🔍 isVideoActive mevcut değeri:",ne),ne||(console.log("📺 setIsVideoActive(true) çağrılıyor (canplay event)"),Se(!0),V(""))};de.current.addEventListener("canplay",Le);const ft=()=>{if(de.current&&!ne&&(console.log("🔄 Agresif kontrol...",{readyState:de.current.readyState,videoWidth:de.current.videoWidth,videoHeight:de.current.videoHeight,srcObject:!!de.current.srcObject,currentTime:de.current.currentTime}),de.current.srcObject&&(de.current.readyState>=1||de.current.videoWidth>0||de.current.currentTime>0))){console.log("🚀 AGRESIF AKTİFLEŞTİRME: setIsVideoActive(true)"),Se(!0),V("");return}ne||setTimeout(ft,500)};setTimeout(ft,500)}}catch(ye){console.error("❌ Kamera erişimi başarısız:",ye),console.error("Hata tipi:",ye.name),console.error("Hata mesajı:",ye.message);let oe="";ye.name==="NotAllowedError"?oe="Kamera izni reddedildi. Lütfen tarayıcı ayarlarından kamera iznini aktifleştirin.":ye.name==="NotFoundError"?oe="Kamera bulunamadı. Lütfen kameranızın bağlı ve çalışır durumda olduğunu kontrol edin.":ye.name==="NotSupportedError"?oe="HTTPS gerekli. Lütfen sayfayı HTTPS üzerinden açın.":oe=`Kamera hatası: ${ye.message}`,V(oe),Se(!1)}},[]),W=E.useCallback(()=>{console.log("🛑 Kamera durduruluyor..."),de.current?.srcObject&&(de.current.srcObject.getTracks().forEach(oe=>{console.log("⏹️ Track durduruluyor:",oe.kind),oe.stop()}),de.current.srcObject=null),de.current&&(de.current.removeEventListener("loadedmetadata",()=>{}),de.current.removeEventListener("error",()=>{}),de.current.removeEventListener("canplay",()=>{})),Se(!1),V("")},[]),Q=E.useCallback(()=>{l("completed");const ye=Math.floor((Date.now()-U)/1e3);Me.current&&clearInterval(Me.current),me.current&&clearInterval(me.current),W(),t(w,ye,K)},[w,K,U,t,W]),ce=E.useCallback(async()=>{l("asking-ai"),T(60),await z(),Me.current=setInterval(()=>{T(ye=>ye<=1?(Q(),0):ye-1)},1e3),fe()},[z,Q]),be=E.useCallback(()=>{if(!de.current||!X.current||!h)return console.log("🔍 detectColor: Eksik element",{video:!!de.current,canvas:!!X.current,targetColor:!!h}),!1;const ye=X.current,oe=ye.getContext("2d"),He=de.current;if(!oe)return console.log("❌ Canvas context alınamadı"),!1;if(He.videoWidth===0||He.videoHeight===0)return console.log("⚠️ Video boyutları henüz yüklenmedi:",He.videoWidth,"x",He.videoHeight),!1;try{ye.width=He.videoWidth,ye.height=He.videoHeight,oe.drawImage(He,0,0);const it=ye.width/2,Le=ye.height/2,ft=80,et=oe.getImageData(it-ft/2,Le-ft/2,ft,ft);let Ye=0,pt=0,tt=0;const zt=et.data.length/4;for(let dn=0;dn<et.data.length;dn+=4)Ye+=et.data[dn],pt+=et.data[dn+1],tt+=et.data[dn+2];Ye=Math.round(Ye/zt),pt=Math.round(pt/zt),tt=Math.round(tt/zt),lt({r:Ye,g:pt,b:tt});const $t=ue(h.hex);if(!$t)return console.log("❌ Target RGB dönüştürülemedi:",h.hex),!1;const rn=Math.sqrt(Math.pow(Ye-$t.r,2)+Math.pow(pt-$t.g,2)+Math.pow(tt-$t.b,2));return Math.random()<.05&&console.log("🎨 Renk analizi:",{detected:`rgb(${Ye}, ${pt}, ${tt})`,target:`rgb(${$t.r}, ${$t.g}, ${$t.b})`,targetName:h.name,distance:rn.toFixed(1),threshold:200,match:rn<150}),rn<200}catch(it){return console.error("❌ Renk algılama hatası:",it),!1}},[h]),Ae=E.useCallback(()=>{if(!h){console.log("⚠️ Target color henüz belirlenmedi, renk algılama başlatılamıyor");return}if(me.current){console.log("⚠️ Renk algılama zaten çalışıyor, yeni başlatılmıyor");return}console.log("🎯 Renk algılama başlatılıyor...",{targetColor:h?.name,gameTimeLeft:x}),j(0),xe(!1),me.current=setInterval(()=>{be()?(console.log("✅ Renk eşleşti!"),xe(!0),j(oe=>{const He=oe+.1;if(He>=5){console.log("🎉 5 saniye tamamlandı! Başarı!"),me.current&&(clearInterval(me.current),me.current=null),l("success"),M(Le=>Le+1);const it={emotion:"happy",confidence:.9,timestamp:new Date};ee(Le=>[...Le,it]),s?.(it),setTimeout(()=>{x>0?(console.log("🔄 Yeni renk seçiliyor..."),fe()):console.log("⏰ Oyun süresi doldu")},2e3)}return He})):(Te&&console.log("❌ Renk kaybedildi, süre sıfırlanıyor"),xe(!1),j(0))},100),console.log("✅ Renk algılama interval başlatıldı")},[be,s,x,h,Te]),fe=E.useCallback(async()=>{console.log("🤖 AI renk seçimi başlıyor..."),l("asking-ai"),A("");try{const ye=Ss.map(et=>et.name).join(", "),oe=Math.floor(Math.random()*1e3),He=`SADECE TEK KELİME RENK İSMİ SÖYLE!

Renkler: ${ye}

SADECE BİR RENGİN İSMİNİ YAZ, BAŞKA HİÇBİR ŞEY YAZMA!
Örnek: Mavi
Örnek: Kırmızı

Şimdi sadece bir renk ismi yaz:`;console.log("📤 AI'ya gönderilen prompt:",He);const it=await Ej.generateSimpleResponse(He);console.log("📥 AI'dan gelen ham yanıt:",it);let Le=it.replace(/<think>[\s\S]*?<\/think>/gs,"").replace(/<think>[\s\S]*/gs,"").replace(/<.*?>/g,"").replace(/Tamam,.*$/gs,"").replace(/Hmm,.*$/gs,"").replace(/Oyun #\d+.*$/gs,"").replace(/kullanıcı.*$/gs,"").replace(/.*?listesi.*$/gs,"").replace(/.*?seç.*$/gs,"").replace(/\n+/g," ").trim();if(!Le||Le.length<2){console.log("🎲 AI yanıtı boş/kısa, direkt fallback kullanılıyor");const et=Ss[Math.floor(Math.random()*Ss.length)];console.log("🎲 Rastgele seçilen renk:",et.name),g(et),l("counting");return}console.log("🧹 Temizlenmiş AI yanıtı:",Le),A(Le);const ft=Ss.find(et=>Le.toLowerCase().includes(et.name.toLowerCase())||et.name.toLowerCase().includes(Le.toLowerCase()));if(ft)console.log("✅ AI renk seçimi başarılı:",ft.name),g(ft),l("counting");else{console.log("⚠️ AI yanıtından renk bulunamadı, fallback kullanılıyor"),console.log("🔍 Aranan response:",Le);const et=Ss[Math.floor(Math.random()*Ss.length)];console.log("🎲 Rastgele seçilen renk:",et.name),g(et),l("counting")}}catch(ye){console.error("❌ AI renk seçimi başarısız:",ye);const oe=Ss[Math.floor(Math.random()*Ss.length)];console.log("🎲 Hata sonrası rastgele seçilen renk:",oe.name),g(oe),l("counting")}},[]),ue=ye=>{const oe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(ye);return oe?{r:parseInt(oe[1],16),g:parseInt(oe[2],16),b:parseInt(oe[3],16)}:null};E.useEffect(()=>{if(h&&o==="counting"){console.log("🎯 Target color değişti, renk algılama başlatılıyor:",h.name),me.current&&(clearInterval(me.current),me.current=null);const ye=setTimeout(()=>{Ae()},100);return()=>{clearTimeout(ye)}}},[h,o]),E.useEffect(()=>{console.log("🚀 Component mount oldu, kamera başlatılıyor...");const ye=setTimeout(()=>{z()},100);return()=>clearTimeout(ye)},[]),E.useEffect(()=>()=>{he.current&&clearInterval(he.current),me.current&&clearInterval(me.current),Me.current&&clearInterval(Me.current),D.current&&clearInterval(D.current),W()},[W]);const De=()=>{M(0),B(1),ee([]),l("idle"),g(null),T(60),j(0),xe(!1),V(""),Me.current&&clearInterval(Me.current),me.current&&clearInterval(me.current),W()};return o==="completed"?u.jsx(Sn,{className:"max-w-2xl mx-auto",children:u.jsxs(wn,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:u.jsx(_E,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"1 Dakika Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"AI ile renk tanıma oyununu başarıyla bitirdin!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:w}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarılı Renk Tanıma"}),u.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"1 dakika içinde"})]})}),u.jsxs(Zn,{onClick:De,size:"lg",children:[u.jsx(Gc,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx("video",{ref:de,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),u.jsx(Sn,{children:u.jsx(wn,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Süre: ",Math.floor(x/60),":",(x%60).toString().padStart(2,"0")]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",w]}),o==="counting"&&h&&u.jsxs("div",{className:"text-sm text-blue-600",children:[h.name,": ",N.toFixed(1),"/5.0s"]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(cr,{className:"h-4 w-4 text-purple-600"}),u.jsx("span",{className:"text-sm text-gray-600",children:"AI Destekli"}),ne&&u.jsx(Ur,{className:"h-4 w-4 text-green-600"})]})]})})}),u.jsx(Sn,{children:u.jsxs(wn,{className:"text-center py-8",children:[o==="idle"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:u.jsx(ur,{className:"h-8 w-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"AI Renk Tanıma Oyunu"}),u.jsxs("p",{className:"text-gray-600",children:["1 dakika süresince AI'nin seçtiği renkleri kameraya göster!",u.jsx("br",{}),"Her rengi 5 saniye tuttuğunda puan kazanırsın."]}),O?u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-red-700 mb-2",children:[u.jsx(Ur,{className:"h-5 w-5"}),u.jsx("span",{className:"font-medium",children:"Kamera Sorunu"})]}),u.jsx("p",{className:"text-red-600 text-sm mb-3",children:O}),u.jsx(Zn,{onClick:z,size:"sm",className:"bg-red-600 hover:bg-red-700",children:"Kamerayı Tekrar Dene"})]}):ne?u.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-center space-x-2 text-green-700",children:[u.jsx(Ur,{className:"h-5 w-5"}),u.jsx("span",{className:"font-medium",children:"Kamera Hazır ✓"})]})}):u.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-blue-700 mb-2",children:[u.jsx(Ur,{className:"h-5 w-5"}),u.jsx("span",{className:"font-medium",children:"Kamera Gerekli"})]}),u.jsx("p",{className:"text-blue-600 text-sm mb-3",children:"Bu oyun kamera erişimi gerektirir"}),u.jsx(Zn,{onClick:z,size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:"Kamerayı Test Et"})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs(Zn,{onClick:ce,size:"lg",disabled:!ne,className:`${ne?"":"opacity-50 cursor-not-allowed"}`,children:[u.jsx(Ur,{className:"h-5 w-5 mr-2"}),"Oyunu Başlat"]}),u.jsxs("div",{className:"text-xs text-gray-500 bg-gray-100 p-2 rounded space-y-1",children:[u.jsxs("div",{children:["Debug: isVideoActive = ",ne.toString()]}),u.jsxs("div",{children:["Video ref: ",de.current?"mevcut":"yok"]}),de.current&&u.jsxs("div",{children:["Video readyState: ",de.current.readyState]}),O&&u.jsxs("div",{className:"text-red-500",children:["Error: ",O]})]}),ne&&u.jsx("div",{className:"relative inline-block",children:u.jsxs("div",{className:"w-60 h-45 rounded-lg border-2 border-gray-300 shadow-lg bg-black relative overflow-hidden",children:[u.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",ref:ye=>{ye&&de.current?.srcObject&&(ye.srcObject=de.current.srcObject)}}),u.jsx("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:"Kamera Hazır"})]})})]})]}),o==="asking-ai"&&u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto"}),u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"AI Renk Seçiyor..."}),u.jsx("p",{className:"text-gray-600",children:"Gemma 9B model çalışıyor"})]}),o==="counting"&&h&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"space-y-4",children:[R&&u.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:u.jsxs("p",{className:"text-blue-800 font-medium",children:['AI: "',R,'"']})}),u.jsx("div",{className:`w-32 h-32 mx-auto rounded-full ${h.bgColor} shadow-xl border-4 border-gray-300`}),u.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:h.name})]}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(va,{className:"h-5 w-5 text-gray-600"}),u.jsx("p",{className:"text-gray-600",children:"Bu rengi kameraya 5 saniye göster!"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:u.jsx("div",{className:`h-4 rounded-full transition-all duration-100 ${Te?"bg-green-500":"bg-gray-400"}`,style:{width:`${N/5*100}%`}})}),u.jsx("div",{className:"text-center",children:u.jsxs("span",{className:`text-2xl font-bold ${Te?"text-green-600":"text-gray-500"}`,children:[N.toFixed(1),"/5.0s"]})}),Te&&u.jsx("div",{className:"text-green-600 font-medium",children:"✅ Renk algılandı! Tutmaya devam et..."}),C&&u.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded space-y-1",children:[u.jsxs("div",{children:["Algılanan: rgb(",C.r,", ",C.g,", ",C.b,")"]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{children:"Örnek:"}),u.jsx("div",{className:"w-8 h-4 border rounded",style:{backgroundColor:`rgb(${C.r}, ${C.g}, ${C.b})`}})]}),h&&u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{children:"Hedef:"}),u.jsx("div",{className:"w-8 h-4 border rounded",style:{backgroundColor:h.hex}}),u.jsx("span",{children:h.hex})]})]})]}),u.jsx("div",{className:"space-y-4",children:ne?u.jsx("div",{className:"relative inline-block",children:u.jsxs("div",{className:"w-80 h-60 rounded-lg border-4 border-gray-300 shadow-lg bg-black relative overflow-hidden",children:[u.jsx("video",{autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",ref:ye=>{ye&&de.current?.srcObject&&(ye.srcObject=de.current.srcObject)}}),u.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:u.jsx("div",{className:`w-16 h-16 border-4 ${Te?"border-green-400":"border-yellow-400"} rounded-lg pointer-events-none animate-pulse`,children:u.jsx("div",{className:"w-full h-full bg-transparent"})})}),u.jsx("div",{className:"absolute top-2 right-2",children:u.jsx("div",{className:`w-8 h-8 rounded-full ${h.bgColor} border-2 border-white shadow-md`})})]})}):u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-red-700 mb-2",children:[u.jsx(Ur,{className:"h-5 w-5"}),u.jsx("span",{className:"font-medium",children:"Kamera Problemi"})]}),u.jsx("p",{className:"text-red-600 text-sm mb-3",children:O||"Kamera erişilemedi"}),u.jsx(Zn,{onClick:z,size:"sm",className:"bg-red-600 hover:bg-red-700",children:"Kamerayı Yeniden Başlat"})]})})]}),o==="success"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto bg-green-500 rounded-full flex items-center justify-center",children:u.jsx(Sc,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-green-600",children:"Başarılı!"}),u.jsx("p",{className:"text-gray-600",children:"+1 Puan! Yeni renk yükleniyor... 🌈"}),u.jsx("div",{className:"w-16 h-16 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"})]})]})}),u.jsx("canvas",{ref:X,style:{display:"none"}})]})};class Sj{constructor(){this.apiEndpoint="https://3c9bc3387069.ngrok-free.app/api/generate",this.fallbackScenes=[{id:1,story:"Ali büyülü bir ormana girdi. Önünde iki kapı belirdi.",question:"Ali hangi kapıyı seçmeli?",choices:[{id:"a",text:"🟢 Yeşil Kapı",color:"#10B981",isCorrect:!0},{id:"b",text:"🔴 Kırmızı Kapı",color:"#EF4444",isCorrect:!1},{id:"c",text:"🎁 Parlak Kutu",color:"#F59E0B",isCorrect:!1,isDistractor:!0}]},{id:2,story:"Ali doğru renge sahip kapıdan geçmeli.",question:"Hangi seçenek doğru RENGE sahip?",choices:[{id:"a",text:"MAVİ",color:"#EF4444",isCorrect:!1,stroopConflict:!0},{id:"b",text:"KIRMIZI",color:"#3B82F6",isCorrect:!1,stroopConflict:!0},{id:"c",text:"YEŞİL",color:"#10B981",isCorrect:!0},{id:"d",text:"💎 Elmas",color:"#8B5CF6",isCorrect:!1,isDistractor:!0}]},{id:3,story:"Ali köprüden geçerken dikkatli olmalı. Tehlikeli yaratıklar var!",question:"Ali hangi köprüyü seçmeli?",choices:[{id:"a",text:"🌉 Güvenli Köprü",isCorrect:!0},{id:"b",text:"⚡ Yıldırım Köprü",isCorrect:!1},{id:"c",text:"🍭 Şeker Köprü",isCorrect:!1,isDistractor:!0}],backgroundTask:{targetSymbol:"🐍",instruction:"Yılan göründüğünde DOKUNMA!"}},{id:4,story:"Ejderha aniden ortaya çıktı! Hızla kaçmak gerekiyor!",question:"Acil durum! Ne yapmalı?",choices:[{id:"a",text:"🏃‍♂️ KAÇ",isCorrect:!0},{id:"b",text:"⚔️ SAVAŞ",isCorrect:!1},{id:"c",text:"🎪 DANS ET",isCorrect:!1,isDistractor:!0}],emergencyTask:{symbol:"🚨",duration:2e3,instruction:"HIZLA KAÇ butonuna bas!"}},{id:5,story:"Ali hazine odasına ulaştı. Doğru renkteki sandığı seçmeli.",question:"Hangi renk yazısı doğru renkte yazılmış?",choices:[{id:"a",text:"SARI",color:"#10B981",isCorrect:!1,stroopConflict:!0},{id:"b",text:"PEMBE",color:"#EC4899",isCorrect:!0},{id:"c",text:"TURUNCU",color:"#3B82F6",isCorrect:!1,stroopConflict:!0},{id:"d",text:"🌟 Yıldız",color:"#F59E0B",isCorrect:!1,isDistractor:!0}]},{id:6,story:"Ali büyücünün testine girdi. Aynı anda iki işi yapması gerekiyor!",question:"Ali hangi büyüyü seçmeli?",choices:[{id:"a",text:"✨ İyileştirme Büyüsü",isCorrect:!0},{id:"b",text:"💥 Patlama Büyüsü",isCorrect:!1},{id:"c",text:"🎭 Yanılsama Büyüsü",isCorrect:!1,isDistractor:!0}],backgroundTask:{targetSymbol:"🦉",instruction:"Baykuş göründüğünde DOKUNMA!"}}]}async generateStory(e){try{const t=await this.callAIService(e);return t.scenes&&t.scenes.length>0?t:(console.warn("AI service returned empty scenes, using fallback"),this.generateFallbackStory(e))}catch(t){return console.warn("AI Story Service failed, using fallback:",t),this.generateFallbackStory(e)}}async generateNextScene(e){try{return await this.callDynamicSceneService(e)}catch(t){return console.warn("Dynamic scene generation failed, using fallback:",t),this.generateFallbackScene(e)}}async callAIService(e){const t=this.constructPrompt(e),s=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"alibayram/turkish-gemma-9b-v0.1:latest",prompt:t,stream:!1,options:{num_ctx:2048,num_batch:256,temperature:.7,top_p:.9,repeat_penalty:1.1}})});if(!s.ok){const l=await s.text();throw console.error("Ollama error response:",l),new Error(`Ollama Service responded with status: ${s.status} - ${l}`)}const o=await s.json();return console.log("Ollama response:",o),this.parseOllamaResponse(o,e)}async callDynamicSceneService(e){const t=this.constructDynamicPrompt(e),s=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"alibayram/turkish-gemma-9b-v0.1:latest",prompt:t,stream:!1,options:{num_ctx:1024,num_batch:256,temperature:.8,top_p:.9,repeat_penalty:1.1}})});if(!s.ok){const l=await s.text();throw console.error("Dynamic scene error:",l),new Error(`Dynamic Scene Service error: ${s.status}`)}const o=await s.json();return console.log("Dynamic scene response:",o),this.parseDynamicSceneResponse(o,e)}constructDynamicPrompt(e){let t=`${e.studentAge} yaşındaki çocuk için ${e.theme} temalı hikaye devamı oluştur.

Sahne ${e.sceneNumber}:`;return e.previousStory&&e.userChoice?t+=`
Önceki durum: ${e.previousStory}
Çocuğun seçimi: ${e.userChoice}

Bu seçime göre hikayeyi devam ettir.`:t+=`
Bu hikayenin başlangıç sahnesi. Çocuk için ilginç bir durumla başla.`,e.emotionData&&(t+=`

KAMERA VERİSİ - ÇOCUĞUN DUYGUSAL DURUMU (Son sahne boyunca):
${e.emotionData}

DİKKAT: Bu emotion data'dan çok boyutlu analiz yap:

DUYGUSAL DURUM ANALİZİ:
- Hangi duygu baskın? Son trend nasıl?
- Emotion stabilite: Sabit mi değişken mi?
- Pozitif/negatif emotion dengesi?

ÖĞRENME STİLİ ÇIKARIMI:
- confused→happy geçişi = Yavaş öğrenen ama başarılı mı?
- happy→bored pattern = Hızla sıkılan, challenge isteyen mi?
- surprised spike'ları = Yenilikçi görevleri seven mi?

MOTİVASYON/STRES ANALİZİ:
- İçsel motivasyon: happy/neutral dominant mı?
- Frustration tolerance: angry/confused nasıl?
- Kaygı seviyesi: emotion volatility yüksek mi?

HİKAYE ADAPTASYONU:
Bu analizlere göre hikaye yolunu belirle:
- Mutlu/heyecanlı ise: Momentum sürdürecek, biraz daha heyecanlı macera
- Kafa karışık/yorgun ise: Basit, net hikaye, az seçenek
- Odaklanmış ise: Bu durumu koruyacak dengeli macera
- Stresli/sinirli ise: Sakinleştirici, pozitif, başarıya odaklı hikaye yolu

Çocuğun mevcut duygusal durumuna uygun hikaye yolunu seç.`),t+=`

Tek bir sahne JSON'ı döndür:
{
  "id": ${e.sceneNumber},
  "story": "Kısa hikaye (1-2 cümle)",
  "question": "Çocuğa soru?",
  "choices": [
    {"id": "a", "text": "🟢 Seçenek 1", "isCorrect": true},
    {"id": "b", "text": "🔴 Seçenek 2", "isCorrect": false},
    {"id": "c", "text": "💎 Çeldirici seçenek", "isCorrect": false, "isDistractor": true}
  ]
}

Sadece JSON döndür.`,t}parseDynamicSceneResponse(e,t){try{const s=e.response||"";console.log("Dynamic scene response text:",s);let o=s;o.includes("```json")&&(o=o.replace(/```json\s*/,"")),o.includes("```")&&(o=o.replace(/```\s*$/,""));const l=o.match(/\{[\s\S]*\}/);if(!l)throw new Error("No JSON found in dynamic scene response");let h=l[0];h=h.replace(/,(\s*[}\]])/g,"$1"),h=h.trim(),console.log("Parsed dynamic scene JSON:",h);const g=JSON.parse(h);return{id:g.id||t.sceneNumber,story:g.story||`Sahne ${t.sceneNumber}`,question:g.question||"Ne yapmalı?",choices:g.choices?.map((p,y)=>({id:p.id||String.fromCharCode(97+y),text:p.text||`Seçenek ${y+1}`,color:p.color,isCorrect:p.isCorrect||!1,isDistractor:p.isDistractor||!1,stroopConflict:p.stroopConflict||!1}))||[{id:"a",text:"🟢 Devam et",isCorrect:!0,isDistractor:!1,stroopConflict:!1},{id:"b",text:"🔴 Dur",isCorrect:!1,isDistractor:!1,stroopConflict:!1}],emergencyTask:g.emergencyTask,backgroundTask:g.backgroundTask}}catch(s){throw console.error("Dynamic scene parse error:",s),s}}generateFallbackScene(e){const s=[{story:`Ali yeni bir yola çıktı. (Sahne ${e.sceneNumber})`,question:"Hangi yönde gitmeli?",choices:[{id:"a",text:"🟢 Sağa git",isCorrect:!0},{id:"b",text:"🔴 Sola git",isCorrect:!1},{id:"c",text:"💎 Parlak taş",isCorrect:!1,isDistractor:!0}]},{story:`Ali ilginç bir yaratıkla karşılaştı. (Sahne ${e.sceneNumber})`,question:"Ne yapmalı?",choices:[{id:"a",text:"🟢 Dostça yaklaş",isCorrect:!0},{id:"b",text:"🔴 Kaç",isCorrect:!1},{id:"c",text:"🎁 Hediye ver",isCorrect:!1,isDistractor:!0}]}][e.sceneNumber%2];return{id:e.sceneNumber,story:s.story,question:s.question,choices:s.choices.map((o,l)=>({...o,isDistractor:o.isDistractor||!1,stroopConflict:!1}))}}constructPrompt(e){return`${e.studentAge} yaşındaki bir çocuk için Türkçe hikaye oyunu oluştur. ${e.sceneCount||4} sahne olsun.

Tema: ${e.theme||"Ali'nin maceraları"}

Her sahne için:
- Kısa hikaye (1-2 cümle)
- Soru
- 3-4 seçenek (1 doğru, diğerleri yanlış, bazıları çeldirici)

JSON formatında döndür:
{
  "scenes": [
    {
      "id": 1,
      "story": "Ali ormana girdi.",
      "question": "Hangi yolu seçmeli?",
      "choices": [
        {"id": "a", "text": "🟢 Yeşil yol", "isCorrect": true},
        {"id": "b", "text": "🔴 Kırmızı yol", "isCorrect": false},
        {"id": "c", "text": "💎 Parlayan taş", "isCorrect": false, "isDistractor": true}
      ]
    }
  ]
}

Sadece JSON döndür, başka açıklama yazma.`}parseOllamaResponse(e,t){try{const s=e.response||"";console.log("Full Ollama response text:",s);let o=s;o.includes("```json")&&(o=o.replace(/```json\s*/,"")),o.includes("```")&&(o=o.replace(/```\s*$/,""));let l=o.match(/\{[\s\S]*\}/);if(!l)throw console.error("No valid JSON found in response"),new Error("No JSON found in Ollama response");let h=l[0];return h=h.replace(/,(\s*[}\]])/g,"$1"),h=h.trim(),console.log("Cleaned JSON text:",h),{scenes:(JSON.parse(h).scenes||[]).map((y,x)=>({id:y.id||x+1,story:y.story||`Sahne ${x+1}`,question:y.question||"Ne yapmalı?",choices:y.choices?.map((T,w)=>({id:T.id||String.fromCharCode(97+w),text:T.text||`Seçenek ${w+1}`,color:T.color,isCorrect:T.isCorrect||!1,isDistractor:T.isDistractor||!1,stroopConflict:T.stroopConflict||!1}))||[{id:"a",text:"🟢 Devam et",isCorrect:!0,isDistractor:!1,stroopConflict:!1},{id:"b",text:"🔴 Dur",isCorrect:!1,isDistractor:!1,stroopConflict:!1}],emergencyTask:y.emergencyTask,backgroundTask:y.backgroundTask})),difficulty:this.calculateDifficulty(t.attentionLevel),estimatedDuration:(t.sceneCount||4)*90,theme:t.theme||"Adventure"}}catch(s){throw console.error("Failed to parse Ollama response:",s),console.error("Original response:",e),s}}parseAIResponse(e,t){try{return{scenes:(e.scenes||e.content?.scenes||[]).map((o,l)=>({id:o.id||l+1,story:o.story||"",question:o.question||"",choices:o.choices?.map((h,g)=>({id:h.id||String.fromCharCode(97+g),text:h.text||"",color:h.color,isCorrect:h.isCorrect||!1,isDistractor:h.isDistractor||!1,stroopConflict:h.stroopConflict||!1}))||[],emergencyTask:o.emergencyTask,backgroundTask:o.backgroundTask})),difficulty:this.calculateDifficulty(t.attentionLevel),estimatedDuration:(t.sceneCount||4)*90,theme:t.theme||"Adventure"}}catch(s){throw console.error("Failed to parse AI response:",s),s}}generateFallbackStory(e){let t=this.fallbackScenes;return e.sceneCount&&e.sceneCount<this.fallbackScenes.length&&(t=this.fallbackScenes.slice(0,e.sceneCount)),e.studentAge<6&&(t=t.map(s=>({...s,choices:s.choices.filter(o=>!o.stroopConflict||o.isCorrect),emergencyTask:void 0}))),{scenes:t,difficulty:this.calculateDifficulty(e.attentionLevel),estimatedDuration:t.length*90,theme:e.theme||"Macera"}}calculateDifficulty(e){switch(e){case"beginner":return"Kolay";case"intermediate":return"Orta";case"advanced":return"Zor";default:return"Orta"}}generateTemplate(e,t){const s={adventure:{theme:"Ali'nin büyülü orman macerası",sceneCount:t<6?3:t<8?4:6},space:{theme:"Uzay kahramanı Aylin'in gezegen keşfi",sceneCount:t<6?3:t<8?4:6},underwater:{theme:"Denizaltı kaşifi Cem'in okyanus yolculuğu",sceneCount:t<6?3:t<8?4:6}};return s[e]||s.adventure}}const wj=new Sj,Aj=({studentId:a,studentAge:e,onGameComplete:t})=>{const[s,o]=E.useState(null),[l,h]=E.useState(!1),[g,p]=E.useState("adventure"),[y,x]=E.useState(1),[T,w]=E.useState(""),[M,F]=E.useState(!1),[B,U]=E.useState(!1),[K,ee]=E.useState({selectiveAttention:0,sustainedAttention:0,dividedAttention:0,impulseControl:0,reactionTime:[],distractorClicks:0,correctChoices:0,totalChoices:0}),[ne,Se]=E.useState(0),[Te,xe]=E.useState(!1),[R,A]=E.useState(!1),[N,j]=E.useState(!1),O=E.useRef(null),[V,C]=E.useState(!1),[lt,de]=E.useState(null),[X,he]=E.useState(null),me=E.useCallback(async()=>{console.log("🎭 [EMOTION] Emotion tracking başlatılıyor..."),C(!0);const fe=De=>{if(!Ve.isGameActiveStatus())return;de(De),Ve.addEmotionResult(De);const ye=Ve.getCurrentGameMetrics();he(ye)};let ue=!1;O.current&&(ue=await ht.startEmotionTracking(O.current,fe)),ue||(console.log("📱 [EMOTION] Gerçek kamera bulunamadı - Python server çalışıyor mu?"),console.log("💡 [TIP] Terminal'de çalıştır: python emotion_server.py")),console.log("✅ [EMOTION] Emotion tracking aktif")},[]),Me=E.useCallback(()=>{console.log("⏹️ [EMOTION] Emotion tracking durduruluyor..."),ht.stopEmotionTracking(),C(!1);const fe=Ve.endGameSession();he(fe),console.log("🏁 [EMOTION] Final metrics:",fe)},[]),D=E.useCallback(async fe=>{if(l){console.log("Already loading story, skipping...");return}h(!0);try{const ue={adventure:"Orman Macerası",space:"Uzay Keşfi",underwater:"Deniz Altı Maceraları"};let De="";fe&&fe.emotions&&fe.emotions.length>0&&(De=fe.emotions.map((He,it)=>`${it+1}. ${He.timestamp}: ${He.dominantEmotion} (${He.confidence?.toFixed(2)||"N/A"})`).join(`
`));const ye={studentAge:e,theme:ue[g],previousStory:s?.story||void 0,userChoice:T,sceneNumber:y,emotionData:De||void 0};console.log("🤖 [STORY AI] Emotion data AI'ya gönderiliyor:",De);const oe=await wj.generateNextScene(ye);o(oe),console.log("🎭 [STORY GAME] Yeni sahne başladı, emotion session başlatılıyor..."),Ve.startRoundSession()}catch(ue){console.error("Dynamic scene generation failed:",ue)}finally{h(!1)}},[e,g,T,l,s?.story,y]);E.useEffect(()=>{M&&!B&&y>1&&!l&&s?.id!==y&&(console.log("Generating next scene for scene number:",y),setTimeout(()=>{l||D()},200))},[y,M,B,D,l,s]),E.useEffect(()=>{if(B&&N){const ue=(oe=>{const He=oe.reactionTime.length>0?oe.reactionTime.reduce((pt,tt)=>pt+tt,0)/oe.reactionTime.length:0,it=oe.totalChoices>0?oe.correctChoices/oe.totalChoices*100:0,Le=Math.max(0,100-oe.distractorClicks*20),ft=Math.max(0,100-(oe.reactionTime.length-oe.correctChoices)*10),et=Math.max(0,100-oe.distractorClicks*15),Ye=Math.max(0,100-oe.impulseControl*25);return{...oe,selectiveAttention:Le,sustainedAttention:ft,dividedAttention:et,impulseControl:Ye,avgReactionTime:He,accuracy:it}})(K);ee(ue);const De=(ue.accuracy+ue.selectiveAttention+ue.sustainedAttention+ue.dividedAttention+ue.impulseControl)/5,ye={studentId:a,studentAge:e,gameType:"story-attention",score:Math.round(De),duration:Date.now()-ne,storyTheme:g,attentionData:{selectiveAttention:ue.selectiveAttention,sustainedAttention:ue.sustainedAttention,dividedAttention:ue.dividedAttention,impulseControl:ue.impulseControl,avgReactionTime:ue.avgReactionTime||0,accuracy:ue.accuracy||0,distractorClicks:ue.distractorClicks,correctChoices:ue.correctChoices,totalChoices:ue.totalChoices},timestamp:new Date().toISOString()};WI(ye).catch(oe=>{console.error("Failed to save story attention game data:",oe)})}},[B,N,K,a,e,ne,g]),E.useEffect(()=>{if(M&&!B&&s){if(Se(Date.now()),s.backgroundTask){const fe=setInterval(()=>{xe(!0),setTimeout(()=>xe(!1),1500)},3e3+Math.random()*2e3);return()=>clearInterval(fe)}if(s.emergencyTask){const fe=setTimeout(()=>{A(!0),setTimeout(()=>{A(!1),ce()},s.emergencyTask.duration)},2e3+Math.random()*3e3);return()=>clearTimeout(fe)}}},[y,M,B,s]);const z=E.useCallback(fe=>{if(console.log("Choice clicked:",fe),!s||R||l)return;const ue=Date.now()-ne,De=s.choices.find(oe=>oe.id===fe);if(!De)return;console.log("Selected choice:",De.text),w(De.text),console.log("🎭 [STORY GAME] Sahne tamamlandı, emotion verisi alınıyor...");const ye=Ve.endRoundSession();console.log("🎭 [STORY GAME] Sahne emotion verisi:",ye),ee(oe=>{const He={...oe,reactionTime:[...oe.reactionTime,ue],totalChoices:oe.totalChoices+1};return De.isCorrect&&He.correctChoices++,De.isDistractor&&He.distractorClicks++,ue<500&&(He.impulseControl+=1),He}),ce(ye)},[s,ne,R]),W=E.useCallback(()=>{ee(fe=>({...fe,distractorClicks:fe.distractorClicks+1})),xe(!1)},[]),Q=E.useCallback(()=>{const fe=Date.now()-ne;ee(ue=>({...ue,reactionTime:[...ue.reactionTime,fe]})),A(!1),ce()},[ne]),ce=E.useCallback(fe=>{console.log("Handling next scene. Current scene number:",y),y>=10?(console.log("Game ending - reached max scenes"),U(!0),j(!0)):(console.log("Moving to next scene:",y+1),x(ue=>ue+1),fe&&(console.log("🎭 [STORY GAME] Emotion data ile yeni sahne oluşturuluyor..."),setTimeout(()=>{D(fe)},100)))},[y,D]);E.useEffect(()=>{B&&(console.log("🏁 [STORY GAME] Oyun bitti, emotion tracking durduruluyor..."),ht.stopFrameAnalysis?.(),Me())},[B,Me]);const be=async(fe="adventure")=>{await me(),p(fe),F(!0),x(1),w(""),Ve.startGameSession(),Ve.startRoundSession(),ht.startFrameAnalysis?.(),await D()},Ae=()=>{F(!1),U(!1),x(1),o(null),j(!1),w(""),h(!1),C(!1),de(null),he(null),ee({selectiveAttention:0,sustainedAttention:0,dividedAttention:0,impulseControl:0,reactionTime:[],distractorClicks:0,correctChoices:0,totalChoices:0})};return N?u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:[u.jsx("video",{ref:O,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Hikaye Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Dikkat becerilerinin analizi"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-lg text-white",children:[u.jsx(kc,{className:"h-8 w-8 mb-4"}),u.jsx("h3",{className:"text-lg font-bold",children:"Seçici Dikkat"}),u.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(K.selectiveAttention),"%"]}),u.jsx("p",{className:"text-blue-100 text-sm",children:"Çeldiricileri görmezden gelme"})]}),u.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-lg text-white",children:[u.jsx(ur,{className:"h-8 w-8 mb-4"}),u.jsx("h3",{className:"text-lg font-bold",children:"Sürekli Dikkat"}),u.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(K.sustainedAttention),"%"]}),u.jsx("p",{className:"text-green-100 text-sm",children:"Dikkatin devamlılığı"})]}),u.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-6 rounded-lg text-white",children:[u.jsx(Lo,{className:"h-8 w-8 mb-4"}),u.jsx("h3",{className:"text-lg font-bold",children:"Bölünmüş Dikkat"}),u.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(K.dividedAttention),"%"]}),u.jsx("p",{className:"text-purple-100 text-sm",children:"Çoklu görev yetisi"})]}),u.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 p-6 rounded-lg text-white",children:[u.jsx(vb,{className:"h-8 w-8 mb-4"}),u.jsx("h3",{className:"text-lg font-bold",children:"Dürtü Kontrolü"}),u.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(K.impulseControl),"%"]}),u.jsx("p",{className:"text-orange-100 text-sm",children:"Hızlı karar verme kontrolü"})]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Detaylı Analiz"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium",children:"Toplam Doğru Cevap:"})," ",K.correctChoices,"/",K.totalChoices]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium",children:"Başarı Oranı:"})," ",Math.round(K.correctChoices/K.totalChoices*100),"%"]})]}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium",children:"Çeldirici Tıklama:"})," ",K.distractorClicks]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium",children:"Ortalama Tepki Süresi:"})," ",Math.round(K.reactionTime.reduce((fe,ue)=>fe+ue,0)/K.reactionTime.length),"ms"]})]})]})]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsx("button",{onClick:Ae,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Tekrar Oyna"}),u.jsx("button",{onClick:()=>t(Math.round((K.selectiveAttention+K.sustainedAttention+K.dividedAttention+K.impulseControl)/4),Date.now()-ne,K),className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Ana Menüye Dön"})]})]})})]}):M?u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:[u.jsx("video",{ref:O,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),Te&&s?.backgroundTask&&u.jsx("div",{className:"fixed top-20 right-20 text-4xl cursor-pointer animate-bounce z-10",onClick:W,children:s.backgroundTask.targetSymbol}),R&&s?.emergencyTask&&u.jsx("div",{className:"fixed inset-0 bg-red-500/80 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-8 text-center animate-pulse",children:[u.jsx("div",{className:"text-6xl mb-4",children:s.emergencyTask.symbol}),u.jsx("h3",{className:"text-2xl font-bold text-red-600 mb-4",children:s.emergencyTask.instruction}),u.jsx("button",{onClick:Q,className:"bg-red-500 hover:bg-red-600 text-white px-8 py-4 rounded-lg font-bold text-lg animate-pulse",children:"🏃‍♂️ KAÇ!"})]})}),u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Sahne ",y," / 10"]}),u.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(y/10*100),"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:u.jsx("div",{className:"bg-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${y/10*100}%`}})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[V&&u.jsxs("div",{className:"mb-4 flex items-center justify-between bg-blue-50 border border-blue-200 rounded-lg p-3",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ur,{className:"h-5 w-5 text-blue-600"}),u.jsx("span",{className:"text-blue-800 font-medium",children:"Kamera Aktif"})]}),lt&&u.jsxs("div",{className:"text-sm text-blue-700",children:[u.jsx("span",{className:"font-medium",children:"Şu an:"})," ",lt.dominantEmotion||"Analiz ediliyor...",lt.confidence&&u.jsxs("span",{className:"ml-1",children:["(",(lt.confidence*100).toFixed(0),"%)"]})]})]}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"text-4xl mb-4",children:"📚"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:s?.story}),u.jsx("p",{className:"text-lg text-gray-600 mb-6",children:s?.question})]}),l&&u.jsxs("div",{className:"text-center py-8",children:[u.jsx("div",{className:"text-4xl mb-4",children:"✨"}),u.jsx("h3",{className:"text-xl font-bold text-purple-600 mb-2",children:"Hikaye devam ediyor..."}),u.jsx("p",{className:"text-gray-600",children:"Seçiminize göre yeni macera hazırlanıyor!"}),u.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mt-4"})]}),T&&!l&&y>1&&u.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"text-2xl",children:"✅"}),u.jsxs("div",{children:[u.jsxs("h4",{className:"font-bold text-green-800",children:["Seçimin: ",T]}),u.jsx("p",{className:"text-green-700 text-sm",children:"Hikaye bu seçiminle devam ediyor..."})]})]})}),!l&&u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s?.choices.map(fe=>u.jsx("button",{onClick:()=>z(fe.id),className:`p-6 rounded-lg border-2 transition-all duration-200 hover:shadow-lg ${fe.isDistractor?"border-yellow-300 bg-yellow-50 hover:bg-yellow-100":fe.stroopConflict?"border-red-300 bg-red-50 hover:bg-red-100":"border-purple-300 bg-purple-50 hover:bg-purple-100"} ${l?"opacity-50 cursor-not-allowed":""}`,style:fe.color?{borderColor:fe.color,backgroundColor:fe.color+"20"}:{},disabled:R||l,children:u.jsx("span",{className:"text-lg font-bold",style:fe.color&&fe.stroopConflict?{color:fe.color}:{},children:fe.text})},fe.id))}),s?.backgroundTask&&u.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-center text-yellow-800 font-medium",children:["⚠️ ",s.backgroundTask.instruction]})})]})]})]}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:[u.jsx("video",{ref:O,autoPlay:!0,playsInline:!0,muted:!0,style:{display:"none"}}),u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx(oD,{className:"h-16 w-16 text-purple-600 mx-auto mb-6"}),u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Hikaye Tabanlı Dikkat Oyunu"}),u.jsx("p",{className:"text-gray-600 mb-8",children:"Ali'nin macerasında ona yardım et! Bu oyun dikkat becerilerini ölçer:"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 text-left",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsx(kc,{className:"h-6 w-6 text-blue-600 mb-2"}),u.jsx("h3",{className:"font-bold text-blue-800",children:"Seçici Dikkat"}),u.jsx("p",{className:"text-blue-700 text-sm",children:"Çeldiricileri görmezden gel"})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsx(ur,{className:"h-6 w-6 text-green-600 mb-2"}),u.jsx("h3",{className:"font-bold text-green-800",children:"Sürekli Dikkat"}),u.jsx("p",{className:"text-green-700 text-sm",children:"Dikkati uzun süre koru"})]}),u.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[u.jsx(Lo,{className:"h-6 w-6 text-purple-600 mb-2"}),u.jsx("h3",{className:"font-bold text-purple-800",children:"Bölünmüş Dikkat"}),u.jsx("p",{className:"text-purple-700 text-sm",children:"Aynı anda iki işi yap"})]}),u.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[u.jsx(vb,{className:"h-6 w-6 text-orange-600 mb-2"}),u.jsx("h3",{className:"font-bold text-orange-800",children:"Dürtü Kontrolü"}),u.jsx("p",{className:"text-orange-700 text-sm",children:"Düşünmeden hareket etme"})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 text-center mb-4",children:"Hangi hikayeyi oynamak istiyorsun?"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("button",{onClick:()=>be("adventure"),disabled:l,className:"bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"text-3xl mb-2",children:"🌲"}),u.jsx("h4",{className:"font-bold",children:"Orman Macerası"}),u.jsx("p",{className:"text-sm text-green-100",children:"Ali'nin büyülü orman yolculuğu"})]}),u.jsxs("button",{onClick:()=>be("space"),disabled:l,className:"bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"text-3xl mb-2",children:"🚀"}),u.jsx("h4",{className:"font-bold",children:"Uzay Keşfi"}),u.jsx("p",{className:"text-sm text-blue-100",children:"Aylin'in gezegen maceraları"})]}),u.jsxs("button",{onClick:()=>be("underwater"),disabled:l,className:"bg-teal-500 hover:bg-teal-600 text-white p-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"text-3xl mb-2",children:"🐠"}),u.jsx("h4",{className:"font-bold",children:"Deniz Altı"}),u.jsx("p",{className:"text-sm text-teal-100",children:"Cem'in okyanus keşfi"})]})]}),l&&u.jsxs("div",{className:"text-center py-4",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),u.jsx("p",{className:"text-gray-600",children:"Hikaye hazırlanıyor..."})]})]})]})})})]})},Rj=()=>{const{currentUser:a,logout:e}=ba(),[t,s]=E.useState(null),[o]=E.useState({gamesPlayed:12,totalScore:850,averageScore:71,timeSpent:145}),l=async()=>{try{await e()}catch(p){console.error("Çıkış yapılırken hata:",p)}},h=(p,y,x)=>{s(null),p!==void 0&&console.log("Oyun tamamlandı:",{score:p,duration:y,emotions:x})},g=()=>{if(!a?.id)return null;switch(t){case"attention-click":return u.jsx(mj,{studentId:a.id,studentAge:a.age||12,difficulty:"orta",onGameComplete:h});case"attention-count":return u.jsx(gj,{studentId:a.id,studentAge:a.age||12,difficulty:"orta",onGameComplete:h});case"attention-dynamic":return u.jsx(yj,{studentId:a.id,studentAge:a.age||12,difficulty:"orta",onGameComplete:h});case"conflict":return u.jsx(_j,{studentId:a.id,studentAge:a.age||12,difficulty:"orta",onGameComplete:h});case"color-recognition":return u.jsx(kj,{studentId:a.id,studentAge:a.age||12,onGameComplete:h});case"story-attention":return u.jsx(Aj,{studentId:a.id,studentAge:a.age||8,onGameComplete:h});default:return null}};return t?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsx("button",{onClick:()=>s(null),className:"mb-4 bg-white text-gray-700 px-4 py-2 rounded-lg shadow hover:shadow-md transition-shadow",children:"← Geri Dön"}),g()]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[u.jsx("div",{className:"bg-white shadow-sm border-b",children:u.jsx("div",{className:"container mx-auto px-4 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:u.jsx(cr,{className:"h-6 w-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"NeuroLearn AI"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Öğrenci Paneli"})]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[u.jsx(wc,{className:"h-5 w-5"}),u.jsx("span",{className:"hidden sm:inline",children:a?.name})]}),u.jsxs("button",{onClick:l,className:"flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg transition-colors",children:[u.jsx(bE,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Çıkış"})]})]})]})})}),u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:["Hoş Geldin, ",a?.name,"! 🌟"]}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Hangi oyunu oynamak istiyorsun?"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[u.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Oynanan Oyun"}),u.jsx("p",{className:"text-2xl font-bold text-primary",children:o.gamesPlayed})]}),u.jsx(Rd,{className:"h-8 w-8 text-primary"})]})}),u.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Puan"}),u.jsx("p",{className:"text-2xl font-bold text-success",children:o.totalScore})]}),u.jsx(Rd,{className:"h-8 w-8 text-success"})]})}),u.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Ortalama Puan"}),u.jsx("p",{className:"text-2xl font-bold text-warning",children:o.averageScore})]}),u.jsx(Rd,{className:"h-8 w-8 text-warning"})]})}),u.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Geçirilen Süre"}),u.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[o.timeSpent,"dk"]})]}),u.jsx(va,{className:"h-8 w-8 text-purple-600"})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 p-6 text-white",children:[u.jsx(CD,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Dikkat Tıklama"}),u.jsx("p",{className:"text-blue-100",children:"Hızlı reaksiyon gerektiren tek hedef tıklama oyunu"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Özellik"}),u.jsx("span",{children:"Tek Hedef"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"100%"}})}),u.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Tek hedef odaklanma • Hızlı reaksiyon • Dikkat dağıtıcılar"})]}),u.jsx("button",{onClick:()=>s("attention-click"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Başlat"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-6 text-white",children:[u.jsx(bD,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Dikkat Sayma"}),u.jsx("p",{className:"text-green-100",children:"Beliren objeleri sayarak konsantrasyon geliştirme"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Özellik"}),u.jsx("span",{children:"Sayısal Dikkat"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"100%"}})}),u.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Sayısal dikkat • Görsel takip • Konsantrasyon • Bellek"})]}),u.jsx("button",{onClick:()=>s("attention-count"),className:"w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Başlat"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 p-6 text-white",children:[u.jsx(Lo,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Dinamik Dikkat"}),u.jsx("p",{className:"text-purple-100",children:"Sürekli çıkan hedefleri hızla yakalama"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Özellik"}),u.jsx("span",{children:"Çoklu Hedef"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"100%"}})}),u.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Çoklu hedef takibi • Hızlı karar • Refleks • Sürekli dikkat"})]}),u.jsx("button",{onClick:()=>s("attention-dynamic"),className:"w-full bg-purple-500 hover:bg-purple-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Başlat"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 p-6 text-white",children:[u.jsx(_E,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Çatışma Oyunu"}),u.jsx("p",{className:"text-red-100",children:"Stroop etkisi ile dikkat geliştirme"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Özellik"}),u.jsx("span",{children:"Stroop Etkisi"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-red-500 h-2 rounded-full",style:{width:"100%"}})}),u.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Stroop etkisi • Renk-kelime çatışması • Bilişsel esneklik"})]}),u.jsx("button",{onClick:()=>s("conflict"),className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Başlat"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 p-6 text-white",children:[u.jsx(Ur,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"AI Renk Tanıma"}),u.jsx("p",{className:"text-indigo-100",children:"AI seçtiği rengi kameraya gösterme oyunu"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Özellik"}),u.jsx("span",{children:"AI Destekli"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-indigo-500 h-2 rounded-full",style:{width:"100%"}})}),u.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"AI renk seçimi • Gerçek zamanlı tanıma • Kamera etkileşimi"})]}),u.jsx("button",{onClick:()=>s("color-recognition"),className:"w-full bg-indigo-500 hover:bg-indigo-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Başlat"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 p-6 text-white",children:[u.jsx(TE,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Hikaye Dikkat Oyunu"}),u.jsx("p",{className:"text-pink-100",children:"Ali'nin macerasında dikkat becerilerini test et"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Dikkat Türü"}),u.jsx("span",{children:"4 Boyut"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-pink-500 h-2 rounded-full",style:{width:"100%"}})}),u.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Seçici • Sürekli • Bölünmüş • Dürtü Kontrolü"})]}),u.jsx("button",{onClick:()=>s("story-attention"),className:"w-full bg-pink-500 hover:bg-pink-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Hikayeyi Başlat"})]})]})]}),u.jsxs("div",{className:"mt-12 text-center bg-white rounded-lg p-8 shadow-sm",children:[u.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Harika İş Çıkarıyorsun!"}),u.jsx("p",{className:"text-gray-600",children:"Her oyun oynayışında daha da iyi oluyorsun. Böyle devam et! 🌟"})]})]})]})},kb=({children:a})=>{const{currentUser:e,loading:t}=ba();return t?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Yükleniyor..."})]})}):e?u.jsx(u.Fragment,{children:a}):u.jsx(dc,{to:"/auth",replace:!0})},Nj=({children:a})=>{const{currentUser:e,loading:t}=ba();return t?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Yükleniyor..."})]})}):e?u.jsx(dc,{to:"/dashboard",replace:!0}):u.jsx(u.Fragment,{children:a})},Cj=()=>{const{currentUser:a,loading:e}=ba();if(e)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Yükleniyor..."})]})});if(!a)return u.jsx(dc,{to:"/auth",replace:!0});const t=a.role==="parent"?"/dashboard/parent":"/dashboard/student";return u.jsx(dc,{to:t,replace:!0})};function Ij(){return u.jsx(JI,{children:u.jsx(bS,{children:u.jsx("div",{className:"App",children:u.jsxs(Z1,{children:[u.jsx(_o,{path:"/auth",element:u.jsx(Nj,{children:u.jsx(WD,{})})}),u.jsx(_o,{path:"/dashboard/parent",element:u.jsx(kb,{children:u.jsx(cj,{})})}),u.jsx(_o,{path:"/dashboard/student",element:u.jsx(kb,{children:u.jsx(Rj,{})})}),u.jsx(_o,{path:"/dashboard",element:u.jsx(Cj,{})}),u.jsx(_o,{path:"/",element:u.jsx(dc,{to:"/dashboard",replace:!0})})]})})})})}o1.createRoot(document.getElementById("root")).render(u.jsx(Ij,{}));
