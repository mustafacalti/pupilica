(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function YT(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var um={exports:{}},Gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wv;function QT(){if(wv)return Gl;wv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,l){var h=null;if(l!==void 0&&(h=""+l),o.key!==void 0&&(h=""+o.key),"key"in o){l={};for(var g in o)g!=="key"&&(l[g]=o[g])}else l=o;return o=l.ref,{$$typeof:s,type:a,key:h,ref:o!==void 0?o:null,props:l}}return Gl.Fragment=e,Gl.jsx=n,Gl.jsxs=n,Gl}var Sv;function XT(){return Sv||(Sv=1,um.exports=QT()),um.exports}var d=XT(),hm={exports:{}},Fl={},dm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function ZT(){return Av||(Av=1,(function(s){function e(F,se){var ee=F.length;F.push(se);e:for(;0<ee;){var me=ee-1>>>1,N=F[me];if(0<o(N,se))F[me]=se,F[ee]=N,ee=me;else break e}}function n(F){return F.length===0?null:F[0]}function a(F){if(F.length===0)return null;var se=F[0],ee=F.pop();if(ee!==se){F[0]=ee;e:for(var me=0,N=F.length,J=N>>>1;me<J;){var Q=2*(me+1)-1,$=F[Q],oe=Q+1,fe=F[oe];if(0>o($,ee))oe<N&&0>o(fe,$)?(F[me]=fe,F[oe]=ee,me=oe):(F[me]=$,F[Q]=ee,me=Q);else if(oe<N&&0>o(fe,ee))F[me]=fe,F[oe]=ee,me=oe;else break e}}return se}function o(F,se){var ee=F.sortIndex-se.sortIndex;return ee!==0?ee:F.id-se.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var h=Date,g=h.now();s.unstable_now=function(){return h.now()-g}}var p=[],y=[],_=1,E=null,A=3,V=!1,B=!1,z=!1,j=!1,Z=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;function ue(F){for(var se=n(y);se!==null;){if(se.callback===null)a(y);else if(se.startTime<=F)a(y),se.sortIndex=se.expirationTime,e(p,se);else break;se=n(y)}}function le(F){if(z=!1,ue(F),!B)if(n(p)!==null)B=!0,he||(he=!0,I());else{var se=n(y);se!==null&&_e(le,se.startTime-F)}}var he=!1,O=-1,R=5,C=-1;function M(){return j?!0:!(s.unstable_now()-C<R)}function P(){if(j=!1,he){var F=s.unstable_now();C=F;var se=!0;try{e:{B=!1,z&&(z=!1,X(O),O=-1),V=!0;var ee=A;try{t:{for(ue(F),E=n(p);E!==null&&!(E.expirationTime>F&&M());){var me=E.callback;if(typeof me=="function"){E.callback=null,A=E.priorityLevel;var N=me(E.expirationTime<=F);if(F=s.unstable_now(),typeof N=="function"){E.callback=N,ue(F),se=!0;break t}E===n(p)&&a(p),ue(F)}else a(p);E=n(p)}if(E!==null)se=!0;else{var J=n(y);J!==null&&_e(le,J.startTime-F),se=!1}}break e}finally{E=null,A=ee,V=!1}se=void 0}}finally{se?I():he=!1}}}var I;if(typeof ce=="function")I=function(){ce(P)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Ae=k.port2;k.port1.onmessage=P,I=function(){Ae.postMessage(null)}}else I=function(){Z(P,0)};function _e(F,se){O=Z(function(){F(s.unstable_now())},se)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(F){F.callback=null},s.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(F){switch(A){case 1:case 2:case 3:var se=3;break;default:se=A}var ee=A;A=se;try{return F()}finally{A=ee}},s.unstable_requestPaint=function(){j=!0},s.unstable_runWithPriority=function(F,se){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var ee=A;A=F;try{return se()}finally{A=ee}},s.unstable_scheduleCallback=function(F,se,ee){var me=s.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?me+ee:me):ee=me,F){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=ee+N,F={id:_++,callback:se,priorityLevel:F,startTime:ee,expirationTime:N,sortIndex:-1},ee>me?(F.sortIndex=ee,e(y,F),n(p)===null&&F===n(y)&&(z?(X(O),O=-1):z=!0,_e(le,ee-me))):(F.sortIndex=N,e(p,F),B||V||(B=!0,he||(he=!0,I()))),F},s.unstable_shouldYield=M,s.unstable_wrapCallback=function(F){var se=A;return function(){var ee=A;A=se;try{return F.apply(this,arguments)}finally{A=ee}}}})(fm)),fm}var kv;function WT(){return kv||(kv=1,dm.exports=ZT()),dm.exports}var mm={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nv;function JT(){if(Nv)return Ve;Nv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function A(N){return N===null||typeof N!="object"?null:(N=E&&N[E]||N["@@iterator"],typeof N=="function"?N:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,z={};function j(N,J,Q){this.props=N,this.context=J,this.refs=z,this.updater=Q||V}j.prototype.isReactComponent={},j.prototype.setState=function(N,J){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,J,"setState")},j.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Z(){}Z.prototype=j.prototype;function X(N,J,Q){this.props=N,this.context=J,this.refs=z,this.updater=Q||V}var ce=X.prototype=new Z;ce.constructor=X,B(ce,j.prototype),ce.isPureReactComponent=!0;var ue=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},he=Object.prototype.hasOwnProperty;function O(N,J,Q,$,oe,fe){return Q=fe.ref,{$$typeof:s,type:N,key:J,ref:Q!==void 0?Q:null,props:fe}}function R(N,J){return O(N.type,J,void 0,void 0,void 0,N.props)}function C(N){return typeof N=="object"&&N!==null&&N.$$typeof===s}function M(N){var J={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Q){return J[Q]})}var P=/\/+/g;function I(N,J){return typeof N=="object"&&N!==null&&N.key!=null?M(""+N.key):J.toString(36)}function k(){}function Ae(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(k,k):(N.status="pending",N.then(function(J){N.status==="pending"&&(N.status="fulfilled",N.value=J)},function(J){N.status==="pending"&&(N.status="rejected",N.reason=J)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function _e(N,J,Q,$,oe){var fe=typeof N;(fe==="undefined"||fe==="boolean")&&(N=null);var pe=!1;if(N===null)pe=!0;else switch(fe){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(N.$$typeof){case s:case e:pe=!0;break;case _:return pe=N._init,_e(pe(N._payload),J,Q,$,oe)}}if(pe)return oe=oe(N),pe=$===""?"."+I(N,0):$,ue(oe)?(Q="",pe!=null&&(Q=pe.replace(P,"$&/")+"/"),_e(oe,J,Q,"",function(pt){return pt})):oe!=null&&(C(oe)&&(oe=R(oe,Q+(oe.key==null||N&&N.key===oe.key?"":(""+oe.key).replace(P,"$&/")+"/")+pe)),J.push(oe)),1;pe=0;var qe=$===""?".":$+":";if(ue(N))for(var $e=0;$e<N.length;$e++)$=N[$e],fe=qe+I($,$e),pe+=_e($,J,Q,fe,oe);else if($e=A(N),typeof $e=="function")for(N=$e.call(N),$e=0;!($=N.next()).done;)$=$.value,fe=qe+I($,$e++),pe+=_e($,J,Q,fe,oe);else if(fe==="object"){if(typeof N.then=="function")return _e(Ae(N),J,Q,$,oe);throw J=String(N),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return pe}function F(N,J,Q){if(N==null)return N;var $=[],oe=0;return _e(N,$,"","",function(fe){return J.call(Q,fe,oe++)}),$}function se(N){if(N._status===-1){var J=N._result;J=J(),J.then(function(Q){(N._status===0||N._status===-1)&&(N._status=1,N._result=Q)},function(Q){(N._status===0||N._status===-1)&&(N._status=2,N._result=Q)}),N._status===-1&&(N._status=0,N._result=J)}if(N._status===1)return N._result.default;throw N._result}var ee=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function me(){}return Ve.Children={map:F,forEach:function(N,J,Q){F(N,function(){J.apply(this,arguments)},Q)},count:function(N){var J=0;return F(N,function(){J++}),J},toArray:function(N){return F(N,function(J){return J})||[]},only:function(N){if(!C(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ve.Component=j,Ve.Fragment=n,Ve.Profiler=o,Ve.PureComponent=X,Ve.StrictMode=a,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(N){return le.H.useMemoCache(N)}},Ve.cache=function(N){return function(){return N.apply(null,arguments)}},Ve.cloneElement=function(N,J,Q){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var $=B({},N.props),oe=N.key,fe=void 0;if(J!=null)for(pe in J.ref!==void 0&&(fe=void 0),J.key!==void 0&&(oe=""+J.key),J)!he.call(J,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&J.ref===void 0||($[pe]=J[pe]);var pe=arguments.length-2;if(pe===1)$.children=Q;else if(1<pe){for(var qe=Array(pe),$e=0;$e<pe;$e++)qe[$e]=arguments[$e+2];$.children=qe}return O(N.type,oe,void 0,void 0,fe,$)},Ve.createContext=function(N){return N={$$typeof:h,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:l,_context:N},N},Ve.createElement=function(N,J,Q){var $,oe={},fe=null;if(J!=null)for($ in J.key!==void 0&&(fe=""+J.key),J)he.call(J,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(oe[$]=J[$]);var pe=arguments.length-2;if(pe===1)oe.children=Q;else if(1<pe){for(var qe=Array(pe),$e=0;$e<pe;$e++)qe[$e]=arguments[$e+2];oe.children=qe}if(N&&N.defaultProps)for($ in pe=N.defaultProps,pe)oe[$]===void 0&&(oe[$]=pe[$]);return O(N,fe,void 0,void 0,null,oe)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(N){return{$$typeof:g,render:N}},Ve.isValidElement=C,Ve.lazy=function(N){return{$$typeof:_,_payload:{_status:-1,_result:N},_init:se}},Ve.memo=function(N,J){return{$$typeof:y,type:N,compare:J===void 0?null:J}},Ve.startTransition=function(N){var J=le.T,Q={};le.T=Q;try{var $=N(),oe=le.S;oe!==null&&oe(Q,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(me,ee)}catch(fe){ee(fe)}finally{le.T=J}},Ve.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ve.use=function(N){return le.H.use(N)},Ve.useActionState=function(N,J,Q){return le.H.useActionState(N,J,Q)},Ve.useCallback=function(N,J){return le.H.useCallback(N,J)},Ve.useContext=function(N){return le.H.useContext(N)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(N,J){return le.H.useDeferredValue(N,J)},Ve.useEffect=function(N,J,Q){var $=le.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(N,J)},Ve.useId=function(){return le.H.useId()},Ve.useImperativeHandle=function(N,J,Q){return le.H.useImperativeHandle(N,J,Q)},Ve.useInsertionEffect=function(N,J){return le.H.useInsertionEffect(N,J)},Ve.useLayoutEffect=function(N,J){return le.H.useLayoutEffect(N,J)},Ve.useMemo=function(N,J){return le.H.useMemo(N,J)},Ve.useOptimistic=function(N,J){return le.H.useOptimistic(N,J)},Ve.useReducer=function(N,J,Q){return le.H.useReducer(N,J,Q)},Ve.useRef=function(N){return le.H.useRef(N)},Ve.useState=function(N){return le.H.useState(N)},Ve.useSyncExternalStore=function(N,J,Q){return le.H.useSyncExternalStore(N,J,Q)},Ve.useTransition=function(){return le.H.useTransition()},Ve.version="19.1.1",Ve}var Rv;function ig(){return Rv||(Rv=1,mm.exports=JT()),mm.exports}var gm={exports:{}},kn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cv;function ew(){if(Cv)return kn;Cv=1;var s=ig();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)y+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,y,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:p,containerInfo:y,implementation:_}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return kn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,kn.createPortal=function(p,y){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,_)},kn.flushSync=function(p){var y=h.T,_=a.p;try{if(h.T=null,a.p=2,p)return p()}finally{h.T=y,a.p=_,a.d.f()}},kn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(p,y))},kn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},kn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var _=y.as,E=g(_,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,V=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;_==="style"?a.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:E,integrity:A,fetchPriority:V}):_==="script"&&a.d.X(p,{crossOrigin:E,integrity:A,fetchPriority:V,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},kn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var _=g(y.as,y.crossOrigin);a.d.M(p,{crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(p)},kn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var _=y.as,E=g(_,y.crossOrigin);a.d.L(p,_,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},kn.preloadModule=function(p,y){if(typeof p=="string")if(y){var _=g(y.as,y.crossOrigin);a.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:_,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(p)},kn.requestFormReset=function(p){a.d.r(p)},kn.unstable_batchedUpdates=function(p,y){return p(y)},kn.useFormState=function(p,y,_){return h.H.useFormState(p,y,_)},kn.useFormStatus=function(){return h.H.useHostTransitionStatus()},kn.version="19.1.1",kn}var Iv;function tw(){if(Iv)return gm.exports;Iv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),gm.exports=ew(),gm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function nw(){if(Dv)return Fl;Dv=1;var s=WT(),e=ig(),n=tw();function a(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function l(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function g(t){if(l(t)!==t)throw Error(a(188))}function p(t){var r=t.alternate;if(!r){if(r=l(t),r===null)throw Error(a(188));return r!==t?null:t}for(var i=t,c=r;;){var f=i.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){i=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===i)return g(f),t;if(m===c)return g(f),r;m=m.sibling}throw Error(a(188))}if(i.return!==c.return)i=f,c=m;else{for(var b=!1,T=f.child;T;){if(T===i){b=!0,i=f,c=m;break}if(T===c){b=!0,c=f,i=m;break}T=T.sibling}if(!b){for(T=m.child;T;){if(T===i){b=!0,i=m,c=f;break}if(T===c){b=!0,c=m,i=f;break}T=T.sibling}if(!b)throw Error(a(189))}}if(i.alternate!==c)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?t:r}function y(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=y(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),Z=Symbol.for("react.provider"),X=Symbol.for("react.consumer"),ce=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function I(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var k=Symbol.for("react.client.reference");function Ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===k?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case j:return"Profiler";case z:return"StrictMode";case le:return"Suspense";case he:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case V:return"Portal";case ce:return(t.displayName||"Context")+".Provider";case X:return(t._context.displayName||"Context")+".Consumer";case ue:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O:return r=t.displayName||null,r!==null?r:Ae(t.type)||"Memo";case R:r=t._payload,t=t._init;try{return Ae(t(r))}catch{}}return null}var _e=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},me=[],N=-1;function J(t){return{current:t}}function Q(t){0>N||(t.current=me[N],me[N]=null,N--)}function $(t,r){N++,me[N]=t.current,t.current=r}var oe=J(null),fe=J(null),pe=J(null),qe=J(null);function $e(t,r){switch($(pe,r),$(fe,t),$(oe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?W0(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=W0(r),t=J0(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Q(oe),$(oe,t)}function pt(){Q(oe),Q(fe),Q(pe)}function rt(t){t.memoizedState!==null&&$(qe,t);var r=oe.current,i=J0(r,t.type);r!==i&&($(fe,t),$(oe,i))}function wt(t){fe.current===t&&(Q(oe),Q(fe)),qe.current===t&&(Q(qe),zl._currentValue=ee)}var wn=Object.prototype.hasOwnProperty,en=s.unstable_scheduleCallback,qn=s.unstable_cancelCallback,Me=s.unstable_shouldYield,ye=s.unstable_requestPaint,xe=s.unstable_now,st=s.unstable_getCurrentPriorityLevel,Ot=s.unstable_ImmediatePriority,De=s.unstable_UserBlockingPriority,St=s.unstable_NormalPriority,He=s.unstable_LowPriority,ht=s.unstable_IdlePriority,pr=s.log,Ei=s.unstable_setDisableYieldValue,Rt=null,at=null;function In(t){if(typeof pr=="function"&&Ei(t),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(Rt,t)}catch{}}var ln=Math.clz32?Math.clz32:ze,be=Math.log,Te=Math.LN2;function ze(t){return t>>>=0,t===0?32:31-(be(t)/Te|0)|0}var Ue=256,dt=4194304;function Ct(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ke(t,r,i){var c=t.pendingLanes;if(c===0)return 0;var f=0,m=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var T=c&134217727;return T!==0?(c=T&~m,c!==0?f=Ct(c):(b&=T,b!==0?f=Ct(b):i||(i=T&~t,i!==0&&(f=Ct(i))))):(T=c&~m,T!==0?f=Ct(T):b!==0?f=Ct(b):i||(i=c&~t,i!==0&&(f=Ct(i)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,i=r&-r,m>=i||m===32&&(i&4194048)!==0)?r:f}function Et(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ot(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cn(){var t=Ue;return Ue<<=1,(Ue&4194048)===0&&(Ue=256),t}function ft(){var t=dt;return dt<<=1,(dt&62914560)===0&&(dt=4194304),t}function Hn(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function yt(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Bt(t,r,i,c,f,m){var b=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var T=t.entanglements,D=t.expirationTimes,G=t.hiddenUpdates;for(i=b&~i;0<i;){var te=31-ln(i),ae=1<<te;T[te]=0,D[te]=-1;var K=G[te];if(K!==null)for(G[te]=null,te=0;te<K.length;te++){var Y=K[te];Y!==null&&(Y.lane&=-536870913)}i&=~ae}c!==0&&Sn(t,c,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(b&~r))}function Sn(t,r,i){t.pendingLanes|=r,t.suspendedLanes&=~r;var c=31-ln(r);t.entangledLanes|=r,t.entanglements[c]=t.entanglements[c]|1073741824|i&4194090}function Ho(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var c=31-ln(i),f=1<<c;f&r|t[c]&r&&(t[c]|=r),i&=~f}}function Vs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ti(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ps(){var t=se.p;return t!==0?t:(t=window.event,t===void 0?32:vv(t.type))}function Oc(t,r){var i=se.p;try{return se.p=t,r()}finally{se.p=i}}var It=Math.random().toString(36).slice(2),tn="__reactFiber$"+It,$t="__reactProps$"+It,Jn="__reactContainer$"+It,Go="__reactEvents$"+It,dd="__reactListeners$"+It,Ls="__reactHandles$"+It,Vc="__reactResources$"+It,Ia="__reactMarker$"+It;function zs(t){delete t[tn],delete t[$t],delete t[Go],delete t[dd],delete t[Ls]}function es(t){var r=t[tn];if(r)return r;for(var i=t.parentNode;i;){if(r=i[Jn]||i[tn]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=rv(t);t!==null;){if(i=t[tn])return i;t=rv(t)}return r}t=i,i=t.parentNode}return null}function Rr(t){if(t=t[tn]||t[Jn]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Cr(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(a(33))}function Dn(t){var r=t[Vc];return r||(r=t[Vc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function qt(t){t[Ia]=!0}var Fo=new Set,wi={};function yr(t,r){ts(t,r),ts(t+"Capture",r)}function ts(t,r){for(wi[t]=r,t=0;t<r.length;t++)Fo.add(r[t])}var Pc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lc={},Da={};function zc(t){return wn.call(Da,t)?!0:wn.call(Lc,t)?!1:Pc.test(t)?Da[t]=!0:(Lc[t]=!0,!1)}function Us(t,r,i){if(zc(r))if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+i)}}function Ir(t,r,i){if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+i)}}function pn(t,r,i,c){if(c===null)t.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(r,i,""+c)}}var ja,Uc;function ns(t){if(ja===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);ja=r&&r[1]||"",Uc=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ja+t+Uc}var Si=!1;function Ai(t,r){if(!t||Si)return"";Si=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Y){var K=Y}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(Y){K=Y}t.call(ae.prototype)}}else{try{throw Error()}catch(Y){K=Y}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Y){if(Y&&K&&typeof Y.stack=="string")return[Y.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),b=m[0],T=m[1];if(b&&T){var D=b.split(`
`),G=T.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===G.length)for(c=D.length-1,f=G.length-1;1<=c&&0<=f&&D[c]!==G[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==G[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==G[f]){var te=`
`+D[c].replace(" at new "," at ");return t.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",t.displayName)),te}while(1<=c&&0<=f);break}}}finally{Si=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?ns(i):""}function $o(t){switch(t.tag){case 26:case 27:case 5:return ns(t.type);case 16:return ns("Lazy");case 13:return ns("Suspense");case 19:return ns("SuspenseList");case 0:case 15:return Ai(t.type,!1);case 11:return Ai(t.type.render,!1);case 1:return Ai(t.type,!0);case 31:return ns("Activity");default:return""}}function ki(t){try{var r="";do r+=$o(t),t=t.return;while(t);return r}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function jn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ko(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function fd(t){var r=Ko(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),c=""+t[r];if(!t.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var f=i.get,m=i.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){c=""+b,m.call(this,b)}}),Object.defineProperty(t,r,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ni(t){t._valueTracker||(t._valueTracker=fd(t))}function Yo(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),c="";return t&&(c=Ko(t)?t.checked?"true":"false":t.value),t=c,t!==i?(r.setValue(t),!0):!1}function Ma(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var md=/[\n"\\]/g;function Kt(t){return t.replace(md,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Gn(t,r,i,c,f,m,b,T){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),r!=null?b==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+jn(r)):t.value!==""+jn(r)&&(t.value=""+jn(r)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),r!=null?Bs(t,b,jn(r)):i!=null?Bs(t,b,jn(i)):c!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+jn(T):t.removeAttribute("name")}function Oa(t,r,i,c,f,m,b,T){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),r!=null||i!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;i=i!=null?""+jn(i):"",r=r!=null?""+jn(r):i,T||r===t.value||(t.value=r),t.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,t.checked=T?t.checked:!!c,t.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b)}function Bs(t,r,i){r==="number"&&Ma(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function rs(t,r,i,c){if(t=t.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<t.length;i++)f=r.hasOwnProperty("$"+t[i].value),t[i].selected!==f&&(t[i].selected=f),f&&c&&(t[i].defaultSelected=!0)}else{for(i=""+jn(i),r=null,f=0;f<t.length;f++){if(t[f].value===i){t[f].selected=!0,c&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function vt(t,r,i){if(r!=null&&(r=""+jn(r),r!==t.value&&(t.value=r),i==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=i!=null?""+jn(i):""}function Va(t,r,i,c){if(r==null){if(c!=null){if(i!=null)throw Error(a(92));if(_e(c)){if(1<c.length)throw Error(a(93));c=c[0]}i=c}i==null&&(i=""),r=i}i=jn(r),t.defaultValue=i,c=t.textContent,c===i&&c!==""&&c!==null&&(t.value=c)}function er(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var Pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bc(t,r,i){var c=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":c?t.setProperty(r,i):typeof i!="number"||i===0||Pa.has(r)?r==="float"?t.cssFloat=i:t[r]=(""+i).trim():t[r]=i+"px"}function Qo(t,r,i){if(r!=null&&typeof r!="object")throw Error(a(62));if(t=t.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?t.setProperty(c,""):c==="float"?t.cssFloat="":t[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&i[f]!==c&&Bc(t,f,c)}else for(var m in r)r.hasOwnProperty(m)&&Bc(t,m,r[m])}function Xo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),pd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ri(t){return pd.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ss=null;function tr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var as=null,is=null;function Zo(t){var r=Rr(t);if(r&&(t=r.stateNode)){var i=t[$t]||null;e:switch(t=r.stateNode,r.type){case"input":if(Gn(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Kt(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var c=i[r];if(c!==t&&c.form===t.form){var f=c[$t]||null;if(!f)throw Error(a(90));Gn(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<i.length;r++)c=i[r],c.form===t.form&&Yo(c)}break e;case"textarea":vt(t,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&rs(t,!!i.multiple,r,!1)}}}var Dr=!1;function qc(t,r,i){if(Dr)return t(r,i);Dr=!0;try{var c=t(r);return c}finally{if(Dr=!1,(as!==null||is!==null)&&(Ou(),as&&(r=as,t=is,is=as=null,Zo(r),t)))for(r=0;r<t.length;r++)Zo(t[r])}}function La(t,r){var i=t.stateNode;if(i===null)return null;var c=i[$t]||null;if(c===null)return null;i=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(t=t.type,c=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!c;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(a(231,r,typeof i));return i}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nr=!1;if(vr)try{var za={};Object.defineProperty(za,"passive",{get:function(){nr=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{nr=!1}var jr=null,qs=null,os=null;function Wo(){if(os)return os;var t,r=qs,i=r.length,c,f="value"in jr?jr.value:jr.textContent,m=f.length;for(t=0;t<i&&r[t]===f[t];t++);var b=i-t;for(c=1;c<=b&&r[i-c]===f[m-c];c++);return os=f.slice(t,1<c?1-c:void 0)}function Mr(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Or(){return!0}function Jo(){return!1}function un(t){function r(i,c,f,m,b){this._reactName=i,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=b,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(i=t[T],this[T]=i?i(m):m[T]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Or:Jo,this.isPropagationStopped=Jo,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),r}var ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=un(ct),Ua=_({},ct,{view:0,detail:0}),Hc=un(Ua),Ii,Di,Vr,Ba=_({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vr&&(Vr&&t.type==="mousemove"?(Ii=t.screenX-Vr.screenX,Di=t.screenY-Vr.screenY):Di=Ii=0,Vr=t),Ii)},movementY:function(t){return"movementY"in t?t.movementY:Di}}),rr=un(Ba),Gc=_({},Ba,{dataTransfer:0}),yd=un(Gc),qa=_({},Ua,{relatedTarget:0}),ji=un(qa),el=_({},ct,{animationName:0,elapsedTime:0,pseudoElement:0}),Mi=un(el),Fc=_({},ct,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Oi=un(Fc),vd=_({},ct,{data:0}),tl=un(vd),Ha={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nl(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Kc[t])?!!r[t]:!1}function Ga(){return nl}var Yc=_({},Ua,{key:function(t){if(t.key){var r=Ha[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Mr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$c[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(t){return t.type==="keypress"?Mr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vi=un(Yc),Qc=_({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rl=un(Qc),ls=_({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),Xc=un(ls),Zc=_({},ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wc=un(Zc),Jc=_({},Ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Pi=un(Jc),Mn=_({},ct,{newState:0,oldState:0}),eu=un(Mn),tu=[9,13,27,32],Pr=vr&&"CompositionEvent"in window,u=null;vr&&"documentMode"in document&&(u=document.documentMode);var v=vr&&"TextEvent"in window&&!u,x=vr&&(!Pr||u&&8<u&&11>=u),w=" ",q=!1;function W(t,r){switch(t){case"keyup":return tu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function de(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Je=!1;function nn(t,r){switch(t){case"compositionend":return de(r);case"keypress":return r.which!==32?null:(q=!0,w);case"textInput":return t=r.data,t===w&&q?null:t;default:return null}}function et(t,r){if(Je)return t==="compositionend"||!Pr&&W(t,r)?(t=Wo(),os=qs=jr=null,Je=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return x&&r.locale!=="ko"?null:r.data;default:return null}}var hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rn(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!hn[t.type]:r==="textarea"}function cs(t,r,i,c){as?is?is.push(c):is=[c]:as=c,r=Bu(r,"onChange"),0<r.length&&(i=new Ci("onChange","change",null,i,c),t.push({event:i,listeners:r}))}var yn=null,Lr=null;function sl(t){K0(t,0)}function nu(t){var r=Cr(t);if(Yo(r))return t}function mp(t,r){if(t==="change")return r}var gp=!1;if(vr){var _d;if(vr){var xd="oninput"in document;if(!xd){var pp=document.createElement("div");pp.setAttribute("oninput","return;"),xd=typeof pp.oninput=="function"}_d=xd}else _d=!1;gp=_d&&(!document.documentMode||9<document.documentMode)}function yp(){yn&&(yn.detachEvent("onpropertychange",vp),Lr=yn=null)}function vp(t){if(t.propertyName==="value"&&nu(Lr)){var r=[];cs(r,Lr,t,tr(t)),qc(sl,r)}}function wE(t,r,i){t==="focusin"?(yp(),yn=r,Lr=i,yn.attachEvent("onpropertychange",vp)):t==="focusout"&&yp()}function SE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nu(Lr)}function AE(t,r){if(t==="click")return nu(r)}function kE(t,r){if(t==="input"||t==="change")return nu(r)}function NE(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Fn=typeof Object.is=="function"?Object.is:NE;function al(t,r){if(Fn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),c=Object.keys(r);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var f=i[c];if(!wn.call(r,f)||!Fn(t[f],r[f]))return!1}return!0}function _p(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xp(t,r){var i=_p(t);t=0;for(var c;i;){if(i.nodeType===3){if(c=t+i.textContent.length,t<=r&&c>=r)return{node:i,offset:r-t};t=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=_p(i)}}function bp(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?bp(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ep(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ma(t.document);r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=Ma(t.document)}return r}function bd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var RE=vr&&"documentMode"in document&&11>=document.documentMode,Li=null,Ed=null,il=null,Td=!1;function Tp(t,r,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Td||Li==null||Li!==Ma(c)||(c=Li,"selectionStart"in c&&bd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),il&&al(il,c)||(il=c,c=Bu(Ed,"onSelect"),0<c.length&&(r=new Ci("onSelect","select",null,r,i),t.push({event:r,listeners:c}),r.target=Li)))}function Fa(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var zi={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},wd={},wp={};vr&&(wp=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function $a(t){if(wd[t])return wd[t];if(!zi[t])return t;var r=zi[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in wp)return wd[t]=r[i];return t}var Sp=$a("animationend"),Ap=$a("animationiteration"),kp=$a("animationstart"),CE=$a("transitionrun"),IE=$a("transitionstart"),DE=$a("transitioncancel"),Np=$a("transitionend"),Rp=new Map,Sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sd.push("scrollEnd");function _r(t,r){Rp.set(t,r),yr(r,[t])}var Cp=new WeakMap;function sr(t,r){if(typeof t=="object"&&t!==null){var i=Cp.get(t);return i!==void 0?i:(r={value:t,source:r,stack:ki(r)},Cp.set(t,r),r)}return{value:t,source:r,stack:ki(r)}}var ar=[],Ui=0,Ad=0;function ru(){for(var t=Ui,r=Ad=Ui=0;r<t;){var i=ar[r];ar[r++]=null;var c=ar[r];ar[r++]=null;var f=ar[r];ar[r++]=null;var m=ar[r];if(ar[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}m!==0&&Ip(i,f,m)}}function su(t,r,i,c){ar[Ui++]=t,ar[Ui++]=r,ar[Ui++]=i,ar[Ui++]=c,Ad|=c,t.lanes|=c,t=t.alternate,t!==null&&(t.lanes|=c)}function kd(t,r,i,c){return su(t,r,i,c),au(t)}function Bi(t,r){return su(t,null,null,r),au(t)}function Ip(t,r,i){t.lanes|=i;var c=t.alternate;c!==null&&(c.lanes|=i);for(var f=!1,m=t.return;m!==null;)m.childLanes|=i,c=m.alternate,c!==null&&(c.childLanes|=i),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&r!==null&&(f=31-ln(i),t=m.hiddenUpdates,c=t[f],c===null?t[f]=[r]:c.push(r),r.lane=i|536870912),m):null}function au(t){if(50<Il)throw Il=0,Mf=null,Error(a(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var qi={};function jE(t,r,i,c){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,r,i,c){return new jE(t,r,i,c)}function Nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function us(t,r){var i=t.alternate;return i===null?(i=$n(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function Dp(t,r){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,r=i.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function iu(t,r,i,c,f,m){var b=0;if(c=t,typeof t=="function")Nd(t)&&(b=1);else if(typeof t=="string")b=OT(t,i,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=$n(31,i,r,f),t.elementType=C,t.lanes=m,t;case B:return Ka(i.children,f,m,r);case z:b=8,f|=24;break;case j:return t=$n(12,i,r,f|2),t.elementType=j,t.lanes=m,t;case le:return t=$n(13,i,r,f),t.elementType=le,t.lanes=m,t;case he:return t=$n(19,i,r,f),t.elementType=he,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:case ce:b=10;break e;case X:b=9;break e;case ue:b=11;break e;case O:b=14;break e;case R:b=16,c=null;break e}b=29,i=Error(a(130,t===null?"null":typeof t,"")),c=null}return r=$n(b,i,r,f),r.elementType=t,r.type=c,r.lanes=m,r}function Ka(t,r,i,c){return t=$n(7,t,c,r),t.lanes=i,t}function Rd(t,r,i){return t=$n(6,t,null,r),t.lanes=i,t}function Cd(t,r,i){return r=$n(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Hi=[],Gi=0,ou=null,lu=0,ir=[],or=0,Ya=null,hs=1,ds="";function Qa(t,r){Hi[Gi++]=lu,Hi[Gi++]=ou,ou=t,lu=r}function jp(t,r,i){ir[or++]=hs,ir[or++]=ds,ir[or++]=Ya,Ya=t;var c=hs;t=ds;var f=32-ln(c)-1;c&=~(1<<f),i+=1;var m=32-ln(r)+f;if(30<m){var b=f-f%5;m=(c&(1<<b)-1).toString(32),c>>=b,f-=b,hs=1<<32-ln(r)+f|i<<f|c,ds=m+t}else hs=1<<m|i<<f|c,ds=t}function Id(t){t.return!==null&&(Qa(t,1),jp(t,1,0))}function Dd(t){for(;t===ou;)ou=Hi[--Gi],Hi[Gi]=null,lu=Hi[--Gi],Hi[Gi]=null;for(;t===Ya;)Ya=ir[--or],ir[or]=null,ds=ir[--or],ir[or]=null,hs=ir[--or],ir[or]=null}var On=null,Lt=null,lt=!1,Xa=null,zr=!1,jd=Error(a(519));function Za(t){var r=Error(a(418,""));throw cl(sr(r,t)),jd}function Mp(t){var r=t.stateNode,i=t.type,c=t.memoizedProps;switch(r[tn]=t,r[$t]=c,i){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<jl.length;i++)Fe(jl[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),Oa(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ni(r);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),Va(r,c.value,c.defaultValue,c.children),Ni(r)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||c.suppressHydrationWarning===!0||Z0(r.textContent,i)?(c.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),c.onScroll!=null&&Fe("scroll",r),c.onScrollEnd!=null&&Fe("scrollend",r),c.onClick!=null&&(r.onclick=qu),r=!0):r=!1,r||Za(t)}function Op(t){for(On=t.return;On;)switch(On.tag){case 5:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:On=On.return}}function ol(t){if(t!==On)return!1;if(!lt)return Op(t),lt=!0,!1;var r=t.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Xf(t.type,t.memoizedProps)),i=!i),i&&Lt&&Za(t),Op(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(i=t.data,i==="/$"){if(r===0){Lt=br(t.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++;t=t.nextSibling}Lt=null}}else r===27?(r=Lt,sa(t.type)?(t=em,em=null,Lt=t):Lt=r):Lt=On?br(t.stateNode.nextSibling):null;return!0}function ll(){Lt=On=null,lt=!1}function Vp(){var t=Xa;return t!==null&&(zn===null?zn=t:zn.push.apply(zn,t),Xa=null),t}function cl(t){Xa===null?Xa=[t]:Xa.push(t)}var Md=J(null),Wa=null,fs=null;function Hs(t,r,i){$(Md,r._currentValue),r._currentValue=i}function ms(t){t._currentValue=Md.current,Q(Md)}function Od(t,r,i){for(;t!==null;){var c=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),t===i)break;t=t.return}}function Vd(t,r,i,c){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var b=f.child;m=m.firstContext;e:for(;m!==null;){var T=m;m=f;for(var D=0;D<r.length;D++)if(T.context===r[D]){m.lanes|=i,T=m.alternate,T!==null&&(T.lanes|=i),Od(m.return,i,t),c||(b=null);break e}m=T.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(a(341));b.lanes|=i,m=b.alternate,m!==null&&(m.lanes|=i),Od(b,i,t),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===t){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function ul(t,r,i,c){t=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var T=f.type;Fn(f.pendingProps.value,b.value)||(t!==null?t.push(T):t=[T])}}else if(f===qe.current){if(b=f.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(zl):t=[zl])}f=f.return}t!==null&&Vd(r,t,i,c),r.flags|=262144}function cu(t){for(t=t.firstContext;t!==null;){if(!Fn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ja(t){Wa=t,fs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function An(t){return Pp(Wa,t)}function uu(t,r){return Wa===null&&Ja(t),Pp(t,r)}function Pp(t,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},fs===null){if(t===null)throw Error(a(308));fs=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else fs=fs.next=r;return i}var ME=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(i,c){t.push(c)}};this.abort=function(){r.aborted=!0,t.forEach(function(i){return i()})}},OE=s.unstable_scheduleCallback,VE=s.unstable_NormalPriority,sn={$$typeof:ce,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pd(){return{controller:new ME,data:new Map,refCount:0}}function hl(t){t.refCount--,t.refCount===0&&OE(VE,function(){t.controller.abort()})}var dl=null,Ld=0,Fi=0,$i=null;function PE(t,r){if(dl===null){var i=dl=[];Ld=0,Fi=Bf(),$i={status:"pending",value:void 0,then:function(c){i.push(c)}}}return Ld++,r.then(Lp,Lp),r}function Lp(){if(--Ld===0&&dl!==null){$i!==null&&($i.status="fulfilled");var t=dl;dl=null,Fi=0,$i=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function LE(t,r){var i=[],c={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return t.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<i.length;f++)(0,i[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),c}var zp=F.S;F.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&PE(t,r),zp!==null&&zp(t,r)};var ei=J(null);function zd(){var t=ei.current;return t!==null?t:At.pooledCache}function hu(t,r){r===null?$(ei,ei.current):$(ei,r.pool)}function Up(){var t=zd();return t===null?null:{parent:sn._currentValue,pool:t}}var fl=Error(a(460)),Bp=Error(a(474)),du=Error(a(542)),Ud={then:function(){}};function qp(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fu(){}function Hp(t,r,i){switch(i=t[i],i===void 0?t.push(r):i!==r&&(r.then(fu,fu),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Fp(t),t;default:if(typeof r.status=="string")r.then(fu,fu);else{if(t=At,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=r,t.status="pending",t.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Fp(t),t}throw ml=r,fl}}var ml=null;function Gp(){if(ml===null)throw Error(a(459));var t=ml;return ml=null,t}function Fp(t){if(t===fl||t===du)throw Error(a(483))}var Gs=!1;function Bd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function qd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fs(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $s(t,r,i){var c=t.updateQueue;if(c===null)return null;if(c=c.shared,(mt&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=au(t),Ip(t,null,i),r}return su(t,c,r,i),au(t)}function gl(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var c=r.lanes;c&=t.pendingLanes,i|=c,r.lanes=i,Ho(t,i)}}function Hd(t,r){var i=t.updateQueue,c=t.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var f=null,m=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};m===null?f=m=b:m=m.next=b,i=i.next}while(i!==null);m===null?f=m=r:m=m.next=r}else f=m=r;i={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}var Gd=!1;function pl(){if(Gd){var t=$i;if(t!==null)throw t}}function yl(t,r,i,c){Gd=!1;var f=t.updateQueue;Gs=!1;var m=f.firstBaseUpdate,b=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var D=T,G=D.next;D.next=null,b===null?m=G:b.next=G,b=D;var te=t.alternate;te!==null&&(te=te.updateQueue,T=te.lastBaseUpdate,T!==b&&(T===null?te.firstBaseUpdate=G:T.next=G,te.lastBaseUpdate=D))}if(m!==null){var ae=f.baseState;b=0,te=G=D=null,T=m;do{var K=T.lane&-536870913,Y=K!==T.lane;if(Y?(tt&K)===K:(c&K)===K){K!==0&&K===Fi&&(Gd=!0),te!==null&&(te=te.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ie=t,ke=T;K=r;var bt=i;switch(ke.tag){case 1:if(Ie=ke.payload,typeof Ie=="function"){ae=Ie.call(bt,ae,K);break e}ae=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=ke.payload,K=typeof Ie=="function"?Ie.call(bt,ae,K):Ie,K==null)break e;ae=_({},ae,K);break e;case 2:Gs=!0}}K=T.callback,K!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=f.callbacks,Y===null?f.callbacks=[K]:Y.push(K))}else Y={lane:K,tag:T.tag,payload:T.payload,callback:T.callback,next:null},te===null?(G=te=Y,D=ae):te=te.next=Y,b|=K;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;Y=T,T=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);te===null&&(D=ae),f.baseState=D,f.firstBaseUpdate=G,f.lastBaseUpdate=te,m===null&&(f.shared.lanes=0),ea|=b,t.lanes=b,t.memoizedState=ae}}function $p(t,r){if(typeof t!="function")throw Error(a(191,t));t.call(r)}function Kp(t,r){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)$p(i[t],r)}var Ki=J(null),mu=J(0);function Yp(t,r){t=bs,$(mu,t),$(Ki,r),bs=t|r.baseLanes}function Fd(){$(mu,bs),$(Ki,Ki.current)}function $d(){bs=mu.current,Q(Ki),Q(mu)}var Ks=0,Pe=null,_t=null,Yt=null,gu=!1,Yi=!1,ti=!1,pu=0,vl=0,Qi=null,zE=0;function Ht(){throw Error(a(321))}function Kd(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!Fn(t[i],r[i]))return!1;return!0}function Yd(t,r,i,c,f,m){return Ks=m,Pe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,F.H=t===null||t.memoizedState===null?Iy:Dy,ti=!1,m=i(c,f),ti=!1,Yi&&(m=Xp(r,i,c,f)),Qp(t),m}function Qp(t){F.H=Eu;var r=_t!==null&&_t.next!==null;if(Ks=0,Yt=_t=Pe=null,gu=!1,vl=0,Qi=null,r)throw Error(a(300));t===null||dn||(t=t.dependencies,t!==null&&cu(t)&&(dn=!0))}function Xp(t,r,i,c){Pe=t;var f=0;do{if(Yi&&(Qi=null),vl=0,Yi=!1,25<=f)throw Error(a(301));if(f+=1,Yt=_t=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}F.H=$E,m=r(i,c)}while(Yi);return m}function UE(){var t=F.H,r=t.useState()[0];return r=typeof r.then=="function"?_l(r):r,t=t.useState()[0],(_t!==null?_t.memoizedState:null)!==t&&(Pe.flags|=1024),r}function Qd(){var t=pu!==0;return pu=0,t}function Xd(t,r,i){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~i}function Zd(t){if(gu){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}gu=!1}Ks=0,Yt=_t=Pe=null,Yi=!1,vl=pu=0,Qi=null}function Pn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Pe.memoizedState=Yt=t:Yt=Yt.next=t,Yt}function Qt(){if(_t===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var r=Yt===null?Pe.memoizedState:Yt.next;if(r!==null)Yt=r,_t=t;else{if(t===null)throw Pe.alternate===null?Error(a(467)):Error(a(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Yt===null?Pe.memoizedState=Yt=t:Yt=Yt.next=t}return Yt}function Wd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(t){var r=vl;return vl+=1,Qi===null&&(Qi=[]),t=Hp(Qi,t,r),r=Pe,(Yt===null?r.memoizedState:Yt.next)===null&&(r=r.alternate,F.H=r===null||r.memoizedState===null?Iy:Dy),t}function yu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return _l(t);if(t.$$typeof===ce)return An(t)}throw Error(a(438,String(t)))}function Jd(t){var r=null,i=Pe.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=Wd(),Pe.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(t),c=0;c<t;c++)i[c]=M;return r.index++,i}function gs(t,r){return typeof r=="function"?r(t):r}function vu(t){var r=Qt();return ef(r,_t,t)}function ef(t,r,i){var c=t.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var f=t.baseQueue,m=c.pending;if(m!==null){if(f!==null){var b=f.next;f.next=m.next,m.next=b}r.baseQueue=f=m,c.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{r=f.next;var T=b=null,D=null,G=r,te=!1;do{var ae=G.lane&-536870913;if(ae!==G.lane?(tt&ae)===ae:(Ks&ae)===ae){var K=G.revertLane;if(K===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ae===Fi&&(te=!0);else if((Ks&K)===K){G=G.next,K===Fi&&(te=!0);continue}else ae={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=ae,b=m):D=D.next=ae,Pe.lanes|=K,ea|=K;ae=G.action,ti&&i(m,ae),m=G.hasEagerState?G.eagerState:i(m,ae)}else K={lane:ae,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(T=D=K,b=m):D=D.next=K,Pe.lanes|=ae,ea|=ae;G=G.next}while(G!==null&&G!==r);if(D===null?b=m:D.next=T,!Fn(m,t.memoizedState)&&(dn=!0,te&&(i=$i,i!==null)))throw i;t.memoizedState=m,t.baseState=b,t.baseQueue=D,c.lastRenderedState=m}return f===null&&(c.lanes=0),[t.memoizedState,c.dispatch]}function tf(t){var r=Qt(),i=r.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=t;var c=i.dispatch,f=i.pending,m=r.memoizedState;if(f!==null){i.pending=null;var b=f=f.next;do m=t(m,b.action),b=b.next;while(b!==f);Fn(m,r.memoizedState)||(dn=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),i.lastRenderedState=m}return[m,c]}function Zp(t,r,i){var c=Pe,f=Qt(),m=lt;if(m){if(i===void 0)throw Error(a(407));i=i()}else i=r();var b=!Fn((_t||f).memoizedState,i);b&&(f.memoizedState=i,dn=!0),f=f.queue;var T=ey.bind(null,c,f,t);if(xl(2048,8,T,[t]),f.getSnapshot!==r||b||Yt!==null&&Yt.memoizedState.tag&1){if(c.flags|=2048,Xi(9,_u(),Jp.bind(null,c,f,i,r),null),At===null)throw Error(a(349));m||(Ks&124)!==0||Wp(c,r,i)}return i}function Wp(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=Pe.updateQueue,r===null?(r=Wd(),Pe.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function Jp(t,r,i,c){r.value=i,r.getSnapshot=c,ty(r)&&ny(t)}function ey(t,r,i){return i(function(){ty(r)&&ny(t)})}function ty(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!Fn(t,i)}catch{return!0}}function ny(t){var r=Bi(t,2);r!==null&&Zn(r,t,2)}function nf(t){var r=Pn();if(typeof t=="function"){var i=t;if(t=i(),ti){In(!0);try{i()}finally{In(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:t},r}function ry(t,r,i,c){return t.baseState=i,ef(t,_t,typeof c=="function"?c:gs)}function BE(t,r,i,c,f){if(bu(t))throw Error(a(485));if(t=r.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){m.listeners.push(b)}};F.T!==null?i(!0):m.isTransition=!1,c(m),i=r.pending,i===null?(m.next=r.pending=m,sy(r,m)):(m.next=i.next,r.pending=i.next=m)}}function sy(t,r){var i=r.action,c=r.payload,f=t.state;if(r.isTransition){var m=F.T,b={};F.T=b;try{var T=i(f,c),D=F.S;D!==null&&D(b,T),ay(t,r,T)}catch(G){rf(t,r,G)}finally{F.T=m}}else try{m=i(f,c),ay(t,r,m)}catch(G){rf(t,r,G)}}function ay(t,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){iy(t,r,c)},function(c){return rf(t,r,c)}):iy(t,r,i)}function iy(t,r,i){r.status="fulfilled",r.value=i,oy(r),t.state=i,r=t.pending,r!==null&&(i=r.next,i===r?t.pending=null:(i=i.next,r.next=i,sy(t,i)))}function rf(t,r,i){var c=t.pending;if(t.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=i,oy(r),r=r.next;while(r!==c)}t.action=null}function oy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function ly(t,r){return r}function cy(t,r){if(lt){var i=At.formState;if(i!==null){e:{var c=Pe;if(lt){if(Lt){t:{for(var f=Lt,m=zr;f.nodeType!==8;){if(!m){f=null;break t}if(f=br(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Lt=br(f.nextSibling),c=f.data==="F!";break e}}Za(c)}c=!1}c&&(r=i[0])}}return i=Pn(),i.memoizedState=i.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ly,lastRenderedState:r},i.queue=c,i=Ny.bind(null,Pe,c),c.dispatch=i,c=nf(!1),m=cf.bind(null,Pe,!1,c.queue),c=Pn(),f={state:r,dispatch:null,action:t,pending:null},c.queue=f,i=BE.bind(null,Pe,f,m,i),f.dispatch=i,c.memoizedState=t,[r,i,!1]}function uy(t){var r=Qt();return hy(r,_t,t)}function hy(t,r,i){if(r=ef(t,r,ly)[0],t=vu(gs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=_l(r)}catch(b){throw b===fl?du:b}else c=r;r=Qt();var f=r.queue,m=f.dispatch;return i!==r.memoizedState&&(Pe.flags|=2048,Xi(9,_u(),qE.bind(null,f,i),null)),[c,m,t]}function qE(t,r){t.action=r}function dy(t){var r=Qt(),i=_t;if(i!==null)return hy(r,i,t);Qt(),r=r.memoizedState,i=Qt();var c=i.queue.dispatch;return i.memoizedState=t,[r,c,!1]}function Xi(t,r,i,c){return t={tag:t,create:i,deps:c,inst:r,next:null},r=Pe.updateQueue,r===null&&(r=Wd(),Pe.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=t.next=t:(c=i.next,i.next=t,t.next=c,r.lastEffect=t),t}function _u(){return{destroy:void 0,resource:void 0}}function fy(){return Qt().memoizedState}function xu(t,r,i,c){var f=Pn();c=c===void 0?null:c,Pe.flags|=t,f.memoizedState=Xi(1|r,_u(),i,c)}function xl(t,r,i,c){var f=Qt();c=c===void 0?null:c;var m=f.memoizedState.inst;_t!==null&&c!==null&&Kd(c,_t.memoizedState.deps)?f.memoizedState=Xi(r,m,i,c):(Pe.flags|=t,f.memoizedState=Xi(1|r,m,i,c))}function my(t,r){xu(8390656,8,t,r)}function gy(t,r){xl(2048,8,t,r)}function py(t,r){return xl(4,2,t,r)}function yy(t,r){return xl(4,4,t,r)}function vy(t,r){if(typeof r=="function"){t=t();var i=r(t);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function _y(t,r,i){i=i!=null?i.concat([t]):null,xl(4,4,vy.bind(null,r,t),i)}function sf(){}function xy(t,r){var i=Qt();r=r===void 0?null:r;var c=i.memoizedState;return r!==null&&Kd(r,c[1])?c[0]:(i.memoizedState=[t,r],t)}function by(t,r){var i=Qt();r=r===void 0?null:r;var c=i.memoizedState;if(r!==null&&Kd(r,c[1]))return c[0];if(c=t(),ti){In(!0);try{t()}finally{In(!1)}}return i.memoizedState=[c,r],c}function af(t,r,i){return i===void 0||(Ks&1073741824)!==0?t.memoizedState=r:(t.memoizedState=i,t=w0(),Pe.lanes|=t,ea|=t,i)}function Ey(t,r,i,c){return Fn(i,r)?i:Ki.current!==null?(t=af(t,i,c),Fn(t,r)||(dn=!0),t):(Ks&42)===0?(dn=!0,t.memoizedState=i):(t=w0(),Pe.lanes|=t,ea|=t,r)}function Ty(t,r,i,c,f){var m=se.p;se.p=m!==0&&8>m?m:8;var b=F.T,T={};F.T=T,cf(t,!1,r,i);try{var D=f(),G=F.S;if(G!==null&&G(T,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var te=LE(D,c);bl(t,r,te,Xn(t))}else bl(t,r,c,Xn(t))}catch(ae){bl(t,r,{then:function(){},status:"rejected",reason:ae},Xn())}finally{se.p=m,F.T=b}}function HE(){}function of(t,r,i,c){if(t.tag!==5)throw Error(a(476));var f=wy(t).queue;Ty(t,f,r,ee,i===null?HE:function(){return Sy(t),i(c)})}function wy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:ee},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:i},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Sy(t){var r=wy(t).next.queue;bl(t,r,{},Xn())}function lf(){return An(zl)}function Ay(){return Qt().memoizedState}function ky(){return Qt().memoizedState}function GE(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var i=Xn();t=Fs(i);var c=$s(r,t,i);c!==null&&(Zn(c,r,i),gl(c,r,i)),r={cache:Pd()},t.payload=r;return}r=r.return}}function FE(t,r,i){var c=Xn();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},bu(t)?Ry(r,i):(i=kd(t,r,i,c),i!==null&&(Zn(i,t,c),Cy(i,r,c)))}function Ny(t,r,i){var c=Xn();bl(t,r,i,c)}function bl(t,r,i,c){var f={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(bu(t))Ry(r,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var b=r.lastRenderedState,T=m(b,i);if(f.hasEagerState=!0,f.eagerState=T,Fn(T,b))return su(t,r,f,0),At===null&&ru(),!1}catch{}finally{}if(i=kd(t,r,f,c),i!==null)return Zn(i,t,c),Cy(i,r,c),!0}return!1}function cf(t,r,i,c){if(c={lane:2,revertLane:Bf(),action:c,hasEagerState:!1,eagerState:null,next:null},bu(t)){if(r)throw Error(a(479))}else r=kd(t,i,c,2),r!==null&&Zn(r,t,2)}function bu(t){var r=t.alternate;return t===Pe||r!==null&&r===Pe}function Ry(t,r){Yi=gu=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function Cy(t,r,i){if((i&4194048)!==0){var c=r.lanes;c&=t.pendingLanes,i|=c,r.lanes=i,Ho(t,i)}}var Eu={readContext:An,use:yu,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht},Iy={readContext:An,use:yu,useCallback:function(t,r){return Pn().memoizedState=[t,r===void 0?null:r],t},useContext:An,useEffect:my,useImperativeHandle:function(t,r,i){i=i!=null?i.concat([t]):null,xu(4194308,4,vy.bind(null,r,t),i)},useLayoutEffect:function(t,r){return xu(4194308,4,t,r)},useInsertionEffect:function(t,r){xu(4,2,t,r)},useMemo:function(t,r){var i=Pn();r=r===void 0?null:r;var c=t();if(ti){In(!0);try{t()}finally{In(!1)}}return i.memoizedState=[c,r],c},useReducer:function(t,r,i){var c=Pn();if(i!==void 0){var f=i(r);if(ti){In(!0);try{i(r)}finally{In(!1)}}}else f=r;return c.memoizedState=c.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},c.queue=t,t=t.dispatch=FE.bind(null,Pe,t),[c.memoizedState,t]},useRef:function(t){var r=Pn();return t={current:t},r.memoizedState=t},useState:function(t){t=nf(t);var r=t.queue,i=Ny.bind(null,Pe,r);return r.dispatch=i,[t.memoizedState,i]},useDebugValue:sf,useDeferredValue:function(t,r){var i=Pn();return af(i,t,r)},useTransition:function(){var t=nf(!1);return t=Ty.bind(null,Pe,t.queue,!0,!1),Pn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,i){var c=Pe,f=Pn();if(lt){if(i===void 0)throw Error(a(407));i=i()}else{if(i=r(),At===null)throw Error(a(349));(tt&124)!==0||Wp(c,r,i)}f.memoizedState=i;var m={value:i,getSnapshot:r};return f.queue=m,my(ey.bind(null,c,m,t),[t]),c.flags|=2048,Xi(9,_u(),Jp.bind(null,c,m,i,r),null),i},useId:function(){var t=Pn(),r=At.identifierPrefix;if(lt){var i=ds,c=hs;i=(c&~(1<<32-ln(c)-1)).toString(32)+i,r=""+r+"R"+i,i=pu++,0<i&&(r+="H"+i.toString(32)),r+=""}else i=zE++,r=""+r+"r"+i.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:lf,useFormState:cy,useActionState:cy,useOptimistic:function(t){var r=Pn();r.memoizedState=r.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=cf.bind(null,Pe,!0,i),i.dispatch=r,[t,r]},useMemoCache:Jd,useCacheRefresh:function(){return Pn().memoizedState=GE.bind(null,Pe)}},Dy={readContext:An,use:yu,useCallback:xy,useContext:An,useEffect:gy,useImperativeHandle:_y,useInsertionEffect:py,useLayoutEffect:yy,useMemo:by,useReducer:vu,useRef:fy,useState:function(){return vu(gs)},useDebugValue:sf,useDeferredValue:function(t,r){var i=Qt();return Ey(i,_t.memoizedState,t,r)},useTransition:function(){var t=vu(gs)[0],r=Qt().memoizedState;return[typeof t=="boolean"?t:_l(t),r]},useSyncExternalStore:Zp,useId:Ay,useHostTransitionStatus:lf,useFormState:uy,useActionState:uy,useOptimistic:function(t,r){var i=Qt();return ry(i,_t,t,r)},useMemoCache:Jd,useCacheRefresh:ky},$E={readContext:An,use:yu,useCallback:xy,useContext:An,useEffect:gy,useImperativeHandle:_y,useInsertionEffect:py,useLayoutEffect:yy,useMemo:by,useReducer:tf,useRef:fy,useState:function(){return tf(gs)},useDebugValue:sf,useDeferredValue:function(t,r){var i=Qt();return _t===null?af(i,t,r):Ey(i,_t.memoizedState,t,r)},useTransition:function(){var t=tf(gs)[0],r=Qt().memoizedState;return[typeof t=="boolean"?t:_l(t),r]},useSyncExternalStore:Zp,useId:Ay,useHostTransitionStatus:lf,useFormState:dy,useActionState:dy,useOptimistic:function(t,r){var i=Qt();return _t!==null?ry(i,_t,t,r):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Jd,useCacheRefresh:ky},Zi=null,El=0;function Tu(t){var r=El;return El+=1,Zi===null&&(Zi=[]),Hp(Zi,t,r)}function Tl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function wu(t,r){throw r.$$typeof===E?Error(a(525)):(t=Object.prototype.toString.call(r),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function jy(t){var r=t._init;return r(t._payload)}function My(t){function r(U,L){if(t){var H=U.deletions;H===null?(U.deletions=[L],U.flags|=16):H.push(L)}}function i(U,L){if(!t)return null;for(;L!==null;)r(U,L),L=L.sibling;return null}function c(U){for(var L=new Map;U!==null;)U.key!==null?L.set(U.key,U):L.set(U.index,U),U=U.sibling;return L}function f(U,L){return U=us(U,L),U.index=0,U.sibling=null,U}function m(U,L,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<L?(U.flags|=67108866,L):H):(U.flags|=67108866,L)):(U.flags|=1048576,L)}function b(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function T(U,L,H,re){return L===null||L.tag!==6?(L=Rd(H,U.mode,re),L.return=U,L):(L=f(L,H),L.return=U,L)}function D(U,L,H,re){var Ee=H.type;return Ee===B?te(U,L,H.props.children,re,H.key):L!==null&&(L.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&jy(Ee)===L.type)?(L=f(L,H.props),Tl(L,H),L.return=U,L):(L=iu(H.type,H.key,H.props,null,U.mode,re),Tl(L,H),L.return=U,L)}function G(U,L,H,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Cd(H,U.mode,re),L.return=U,L):(L=f(L,H.children||[]),L.return=U,L)}function te(U,L,H,re,Ee){return L===null||L.tag!==7?(L=Ka(H,U.mode,re,Ee),L.return=U,L):(L=f(L,H),L.return=U,L)}function ae(U,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Rd(""+L,U.mode,H),L.return=U,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return H=iu(L.type,L.key,L.props,null,U.mode,H),Tl(H,L),H.return=U,H;case V:return L=Cd(L,U.mode,H),L.return=U,L;case R:var re=L._init;return L=re(L._payload),ae(U,L,H)}if(_e(L)||I(L))return L=Ka(L,U.mode,H,null),L.return=U,L;if(typeof L.then=="function")return ae(U,Tu(L),H);if(L.$$typeof===ce)return ae(U,uu(U,L),H);wu(U,L)}return null}function K(U,L,H,re){var Ee=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ee!==null?null:T(U,L,""+H,re);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return H.key===Ee?D(U,L,H,re):null;case V:return H.key===Ee?G(U,L,H,re):null;case R:return Ee=H._init,H=Ee(H._payload),K(U,L,H,re)}if(_e(H)||I(H))return Ee!==null?null:te(U,L,H,re,null);if(typeof H.then=="function")return K(U,L,Tu(H),re);if(H.$$typeof===ce)return K(U,L,uu(U,H),re);wu(U,H)}return null}function Y(U,L,H,re,Ee){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return U=U.get(H)||null,T(L,U,""+re,Ee);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case A:return U=U.get(re.key===null?H:re.key)||null,D(L,U,re,Ee);case V:return U=U.get(re.key===null?H:re.key)||null,G(L,U,re,Ee);case R:var Be=re._init;return re=Be(re._payload),Y(U,L,H,re,Ee)}if(_e(re)||I(re))return U=U.get(H)||null,te(L,U,re,Ee,null);if(typeof re.then=="function")return Y(U,L,H,Tu(re),Ee);if(re.$$typeof===ce)return Y(U,L,H,uu(L,re),Ee);wu(L,re)}return null}function Ie(U,L,H,re){for(var Ee=null,Be=null,we=L,Ne=L=0,mn=null;we!==null&&Ne<H.length;Ne++){we.index>Ne?(mn=we,we=null):mn=we.sibling;var it=K(U,we,H[Ne],re);if(it===null){we===null&&(we=mn);break}t&&we&&it.alternate===null&&r(U,we),L=m(it,L,Ne),Be===null?Ee=it:Be.sibling=it,Be=it,we=mn}if(Ne===H.length)return i(U,we),lt&&Qa(U,Ne),Ee;if(we===null){for(;Ne<H.length;Ne++)we=ae(U,H[Ne],re),we!==null&&(L=m(we,L,Ne),Be===null?Ee=we:Be.sibling=we,Be=we);return lt&&Qa(U,Ne),Ee}for(we=c(we);Ne<H.length;Ne++)mn=Y(we,U,Ne,H[Ne],re),mn!==null&&(t&&mn.alternate!==null&&we.delete(mn.key===null?Ne:mn.key),L=m(mn,L,Ne),Be===null?Ee=mn:Be.sibling=mn,Be=mn);return t&&we.forEach(function(ca){return r(U,ca)}),lt&&Qa(U,Ne),Ee}function ke(U,L,H,re){if(H==null)throw Error(a(151));for(var Ee=null,Be=null,we=L,Ne=L=0,mn=null,it=H.next();we!==null&&!it.done;Ne++,it=H.next()){we.index>Ne?(mn=we,we=null):mn=we.sibling;var ca=K(U,we,it.value,re);if(ca===null){we===null&&(we=mn);break}t&&we&&ca.alternate===null&&r(U,we),L=m(ca,L,Ne),Be===null?Ee=ca:Be.sibling=ca,Be=ca,we=mn}if(it.done)return i(U,we),lt&&Qa(U,Ne),Ee;if(we===null){for(;!it.done;Ne++,it=H.next())it=ae(U,it.value,re),it!==null&&(L=m(it,L,Ne),Be===null?Ee=it:Be.sibling=it,Be=it);return lt&&Qa(U,Ne),Ee}for(we=c(we);!it.done;Ne++,it=H.next())it=Y(we,U,Ne,it.value,re),it!==null&&(t&&it.alternate!==null&&we.delete(it.key===null?Ne:it.key),L=m(it,L,Ne),Be===null?Ee=it:Be.sibling=it,Be=it);return t&&we.forEach(function(KT){return r(U,KT)}),lt&&Qa(U,Ne),Ee}function bt(U,L,H,re){if(typeof H=="object"&&H!==null&&H.type===B&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case A:e:{for(var Ee=H.key;L!==null;){if(L.key===Ee){if(Ee=H.type,Ee===B){if(L.tag===7){i(U,L.sibling),re=f(L,H.props.children),re.return=U,U=re;break e}}else if(L.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===R&&jy(Ee)===L.type){i(U,L.sibling),re=f(L,H.props),Tl(re,H),re.return=U,U=re;break e}i(U,L);break}else r(U,L);L=L.sibling}H.type===B?(re=Ka(H.props.children,U.mode,re,H.key),re.return=U,U=re):(re=iu(H.type,H.key,H.props,null,U.mode,re),Tl(re,H),re.return=U,U=re)}return b(U);case V:e:{for(Ee=H.key;L!==null;){if(L.key===Ee)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){i(U,L.sibling),re=f(L,H.children||[]),re.return=U,U=re;break e}else{i(U,L);break}else r(U,L);L=L.sibling}re=Cd(H,U.mode,re),re.return=U,U=re}return b(U);case R:return Ee=H._init,H=Ee(H._payload),bt(U,L,H,re)}if(_e(H))return Ie(U,L,H,re);if(I(H)){if(Ee=I(H),typeof Ee!="function")throw Error(a(150));return H=Ee.call(H),ke(U,L,H,re)}if(typeof H.then=="function")return bt(U,L,Tu(H),re);if(H.$$typeof===ce)return bt(U,L,uu(U,H),re);wu(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(i(U,L.sibling),re=f(L,H),re.return=U,U=re):(i(U,L),re=Rd(H,U.mode,re),re.return=U,U=re),b(U)):i(U,L)}return function(U,L,H,re){try{El=0;var Ee=bt(U,L,H,re);return Zi=null,Ee}catch(we){if(we===fl||we===du)throw we;var Be=$n(29,we,null,U.mode);return Be.lanes=re,Be.return=U,Be}finally{}}}var Wi=My(!0),Oy=My(!1),lr=J(null),Ur=null;function Ys(t){var r=t.alternate;$(an,an.current&1),$(lr,t),Ur===null&&(r===null||Ki.current!==null||r.memoizedState!==null)&&(Ur=t)}function Vy(t){if(t.tag===22){if($(an,an.current),$(lr,t),Ur===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Ur=t)}}else Qs()}function Qs(){$(an,an.current),$(lr,lr.current)}function ps(t){Q(lr),Ur===t&&(Ur=null),Q(an)}var an=J(0);function Su(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||Jf(i)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function uf(t,r,i,c){r=t.memoizedState,i=i(c,r),i=i==null?r:_({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var hf={enqueueSetState:function(t,r,i){t=t._reactInternals;var c=Xn(),f=Fs(c);f.payload=r,i!=null&&(f.callback=i),r=$s(t,f,c),r!==null&&(Zn(r,t,c),gl(r,t,c))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var c=Xn(),f=Fs(c);f.tag=1,f.payload=r,i!=null&&(f.callback=i),r=$s(t,f,c),r!==null&&(Zn(r,t,c),gl(r,t,c))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=Xn(),c=Fs(i);c.tag=2,r!=null&&(c.callback=r),r=$s(t,c,i),r!==null&&(Zn(r,t,i),gl(r,t,i))}};function Py(t,r,i,c,f,m,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(c,m,b):r.prototype&&r.prototype.isPureReactComponent?!al(i,c)||!al(f,m):!0}function Ly(t,r,i,c){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,c),r.state!==t&&hf.enqueueReplaceState(r,r.state,null)}function ni(t,r){var i=r;if("ref"in r){i={};for(var c in r)c!=="ref"&&(i[c]=r[c])}if(t=t.defaultProps){i===r&&(i=_({},i));for(var f in t)i[f]===void 0&&(i[f]=t[f])}return i}var Au=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function zy(t){Au(t)}function Uy(t){console.error(t)}function By(t){Au(t)}function ku(t,r){try{var i=t.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function qy(t,r,i){try{var c=t.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function df(t,r,i){return i=Fs(i),i.tag=3,i.payload={element:null},i.callback=function(){ku(t,r)},i}function Hy(t){return t=Fs(t),t.tag=3,t}function Gy(t,r,i,c){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;t.payload=function(){return f(m)},t.callback=function(){qy(r,i,c)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){qy(r,i,c),typeof f!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var T=c.stack;this.componentDidCatch(c.value,{componentStack:T!==null?T:""})})}function KE(t,r,i,c,f){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=i.alternate,r!==null&&ul(r,i,f,!0),i=lr.current,i!==null){switch(i.tag){case 13:return Ur===null?Vf():i.alternate===null&&zt===0&&(zt=3),i.flags&=-257,i.flags|=65536,i.lanes=f,c===Ud?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([c]):r.add(c),Lf(t,c,f)),!1;case 22:return i.flags|=65536,c===Ud?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([c]):i.add(c)),Lf(t,c,f)),!1}throw Error(a(435,i.tag))}return Lf(t,c,f),Vf(),!1}if(lt)return r=lr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==jd&&(t=Error(a(422),{cause:c}),cl(sr(t,i)))):(c!==jd&&(r=Error(a(423),{cause:c}),cl(sr(r,i))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,c=sr(c,i),f=df(t.stateNode,c,f),Hd(t,f),zt!==4&&(zt=2)),!1;var m=Error(a(520),{cause:c});if(m=sr(m,i),Cl===null?Cl=[m]:Cl.push(m),zt!==4&&(zt=2),r===null)return!0;c=sr(c,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,t=f&-f,i.lanes|=t,t=df(i.stateNode,c,t),Hd(i,t),!1;case 1:if(r=i.type,m=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ta===null||!ta.has(m))))return i.flags|=65536,f&=-f,i.lanes|=f,f=Hy(f),Gy(f,t,i,c),Hd(i,f),!1}i=i.return}while(i!==null);return!1}var Fy=Error(a(461)),dn=!1;function vn(t,r,i,c){r.child=t===null?Oy(r,null,i,c):Wi(r,t.child,i,c)}function $y(t,r,i,c,f){i=i.render;var m=r.ref;if("ref"in c){var b={};for(var T in c)T!=="ref"&&(b[T]=c[T])}else b=c;return Ja(r),c=Yd(t,r,i,b,m,f),T=Qd(),t!==null&&!dn?(Xd(t,r,f),ys(t,r,f)):(lt&&T&&Id(r),r.flags|=1,vn(t,r,c,f),r.child)}function Ky(t,r,i,c,f){if(t===null){var m=i.type;return typeof m=="function"&&!Nd(m)&&m.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=m,Yy(t,r,m,c,f)):(t=iu(i.type,null,c,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(m=t.child,!xf(t,f)){var b=m.memoizedProps;if(i=i.compare,i=i!==null?i:al,i(b,c)&&t.ref===r.ref)return ys(t,r,f)}return r.flags|=1,t=us(m,c),t.ref=r.ref,t.return=r,r.child=t}function Yy(t,r,i,c,f){if(t!==null){var m=t.memoizedProps;if(al(m,c)&&t.ref===r.ref)if(dn=!1,r.pendingProps=c=m,xf(t,f))(t.flags&131072)!==0&&(dn=!0);else return r.lanes=t.lanes,ys(t,r,f)}return ff(t,r,i,c,f)}function Qy(t,r,i){var c=r.pendingProps,f=c.children,m=t!==null?t.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=m!==null?m.baseLanes|i:i,t!==null){for(f=r.child=t.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~c}else r.childLanes=0,r.child=null;return Xy(t,r,c,i)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&hu(r,m!==null?m.cachePool:null),m!==null?Yp(r,m):Fd(),Vy(r);else return r.lanes=r.childLanes=536870912,Xy(t,r,m!==null?m.baseLanes|i:i,i)}else m!==null?(hu(r,m.cachePool),Yp(r,m),Qs(),r.memoizedState=null):(t!==null&&hu(r,null),Fd(),Qs());return vn(t,r,f,i),r.child}function Xy(t,r,i,c){var f=zd();return f=f===null?null:{parent:sn._currentValue,pool:f},r.memoizedState={baseLanes:i,cachePool:f},t!==null&&hu(r,null),Fd(),Vy(r),t!==null&&ul(t,r,c,!0),null}function Nu(t,r){var i=r.ref;if(i===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(t===null||t.ref!==i)&&(r.flags|=4194816)}}function ff(t,r,i,c,f){return Ja(r),i=Yd(t,r,i,c,void 0,f),c=Qd(),t!==null&&!dn?(Xd(t,r,f),ys(t,r,f)):(lt&&c&&Id(r),r.flags|=1,vn(t,r,i,f),r.child)}function Zy(t,r,i,c,f,m){return Ja(r),r.updateQueue=null,i=Xp(r,c,i,f),Qp(t),c=Qd(),t!==null&&!dn?(Xd(t,r,m),ys(t,r,m)):(lt&&c&&Id(r),r.flags|=1,vn(t,r,i,m),r.child)}function Wy(t,r,i,c,f){if(Ja(r),r.stateNode===null){var m=qi,b=i.contextType;typeof b=="object"&&b!==null&&(m=An(b)),m=new i(c,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=hf,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=c,m.state=r.memoizedState,m.refs={},Bd(r),b=i.contextType,m.context=typeof b=="object"&&b!==null?An(b):qi,m.state=r.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(uf(r,i,b,c),m.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(b=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),b!==m.state&&hf.enqueueReplaceState(m,m.state,null),yl(r,c,m,f),pl(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(t===null){m=r.stateNode;var T=r.memoizedProps,D=ni(i,T);m.props=D;var G=m.context,te=i.contextType;b=qi,typeof te=="object"&&te!==null&&(b=An(te));var ae=i.getDerivedStateFromProps;te=typeof ae=="function"||typeof m.getSnapshotBeforeUpdate=="function",T=r.pendingProps!==T,te||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T||G!==b)&&Ly(r,m,c,b),Gs=!1;var K=r.memoizedState;m.state=K,yl(r,c,m,f),pl(),G=r.memoizedState,T||K!==G||Gs?(typeof ae=="function"&&(uf(r,i,ae,c),G=r.memoizedState),(D=Gs||Py(r,i,D,c,K,G,b))?(te||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=G),m.props=c,m.state=G,m.context=b,c=D):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{m=r.stateNode,qd(t,r),b=r.memoizedProps,te=ni(i,b),m.props=te,ae=r.pendingProps,K=m.context,G=i.contextType,D=qi,typeof G=="object"&&G!==null&&(D=An(G)),T=i.getDerivedStateFromProps,(G=typeof T=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(b!==ae||K!==D)&&Ly(r,m,c,D),Gs=!1,K=r.memoizedState,m.state=K,yl(r,c,m,f),pl();var Y=r.memoizedState;b!==ae||K!==Y||Gs||t!==null&&t.dependencies!==null&&cu(t.dependencies)?(typeof T=="function"&&(uf(r,i,T,c),Y=r.memoizedState),(te=Gs||Py(r,i,te,c,K,Y,D)||t!==null&&t.dependencies!==null&&cu(t.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,Y,D),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,Y,D)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Y),m.props=c,m.state=Y,m.context=D,c=te):(typeof m.componentDidUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&K===t.memoizedState||(r.flags|=1024),c=!1)}return m=c,Nu(t,r),c=(r.flags&128)!==0,m||c?(m=r.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,t!==null&&c?(r.child=Wi(r,t.child,null,f),r.child=Wi(r,null,i,f)):vn(t,r,i,f),r.memoizedState=m.state,t=r.child):t=ys(t,r,f),t}function Jy(t,r,i,c){return ll(),r.flags|=256,vn(t,r,i,c),r.child}var mf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function gf(t){return{baseLanes:t,cachePool:Up()}}function pf(t,r,i){return t=t!==null?t.childLanes&~i:0,r&&(t|=cr),t}function e0(t,r,i){var c=r.pendingProps,f=!1,m=(r.flags&128)!==0,b;if((b=m)||(b=t!==null&&t.memoizedState===null?!1:(an.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,t===null){if(lt){if(f?Ys(r):Qs(),lt){var T=Lt,D;if(D=T){e:{for(D=T,T=zr;D.nodeType!==8;){if(!T){T=null;break e}if(D=br(D.nextSibling),D===null){T=null;break e}}T=D}T!==null?(r.memoizedState={dehydrated:T,treeContext:Ya!==null?{id:hs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},D=$n(18,null,null,0),D.stateNode=T,D.return=r,r.child=D,On=r,Lt=null,D=!0):D=!1}D||Za(r)}if(T=r.memoizedState,T!==null&&(T=T.dehydrated,T!==null))return Jf(T)?r.lanes=32:r.lanes=536870912,null;ps(r)}return T=c.children,c=c.fallback,f?(Qs(),f=r.mode,T=Ru({mode:"hidden",children:T},f),c=Ka(c,f,i,null),T.return=r,c.return=r,T.sibling=c,r.child=T,f=r.child,f.memoizedState=gf(i),f.childLanes=pf(t,b,i),r.memoizedState=mf,c):(Ys(r),yf(r,T))}if(D=t.memoizedState,D!==null&&(T=D.dehydrated,T!==null)){if(m)r.flags&256?(Ys(r),r.flags&=-257,r=vf(t,r,i)):r.memoizedState!==null?(Qs(),r.child=t.child,r.flags|=128,r=null):(Qs(),f=c.fallback,T=r.mode,c=Ru({mode:"visible",children:c.children},T),f=Ka(f,T,i,null),f.flags|=2,c.return=r,f.return=r,c.sibling=f,r.child=c,Wi(r,t.child,null,i),c=r.child,c.memoizedState=gf(i),c.childLanes=pf(t,b,i),r.memoizedState=mf,r=f);else if(Ys(r),Jf(T)){if(b=T.nextSibling&&T.nextSibling.dataset,b)var G=b.dgst;b=G,c=Error(a(419)),c.stack="",c.digest=b,cl({value:c,source:null,stack:null}),r=vf(t,r,i)}else if(dn||ul(t,r,i,!1),b=(i&t.childLanes)!==0,dn||b){if(b=At,b!==null&&(c=i&-i,c=(c&42)!==0?1:Vs(c),c=(c&(b.suspendedLanes|i))!==0?0:c,c!==0&&c!==D.retryLane))throw D.retryLane=c,Bi(t,c),Zn(b,t,c),Fy;T.data==="$?"||Vf(),r=vf(t,r,i)}else T.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,Lt=br(T.nextSibling),On=r,lt=!0,Xa=null,zr=!1,t!==null&&(ir[or++]=hs,ir[or++]=ds,ir[or++]=Ya,hs=t.id,ds=t.overflow,Ya=r),r=yf(r,c.children),r.flags|=4096);return r}return f?(Qs(),f=c.fallback,T=r.mode,D=t.child,G=D.sibling,c=us(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,G!==null?f=us(G,f):(f=Ka(f,T,i,null),f.flags|=2),f.return=r,c.return=r,c.sibling=f,r.child=c,c=f,f=r.child,T=t.child.memoizedState,T===null?T=gf(i):(D=T.cachePool,D!==null?(G=sn._currentValue,D=D.parent!==G?{parent:G,pool:G}:D):D=Up(),T={baseLanes:T.baseLanes|i,cachePool:D}),f.memoizedState=T,f.childLanes=pf(t,b,i),r.memoizedState=mf,c):(Ys(r),i=t.child,t=i.sibling,i=us(i,{mode:"visible",children:c.children}),i.return=r,i.sibling=null,t!==null&&(b=r.deletions,b===null?(r.deletions=[t],r.flags|=16):b.push(t)),r.child=i,r.memoizedState=null,i)}function yf(t,r){return r=Ru({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ru(t,r){return t=$n(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function vf(t,r,i){return Wi(r,t.child,null,i),t=yf(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function t0(t,r,i){t.lanes|=r;var c=t.alternate;c!==null&&(c.lanes|=r),Od(t.return,r,i)}function _f(t,r,i,c,f){var m=t.memoizedState;m===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=c,m.tail=i,m.tailMode=f)}function n0(t,r,i){var c=r.pendingProps,f=c.revealOrder,m=c.tail;if(vn(t,r,c.children,i),c=an.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&t0(t,i,r);else if(t.tag===19)t0(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}c&=1}switch($(an,c),f){case"forwards":for(i=r.child,f=null;i!==null;)t=i.alternate,t!==null&&Su(t)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),_f(r,!1,f,i,m);break;case"backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Su(t)===null){r.child=f;break}t=f.sibling,f.sibling=i,i=f,f=t}_f(r,!0,i,null,m);break;case"together":_f(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ys(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),ea|=r.lanes,(i&r.childLanes)===0)if(t!==null){if(ul(t,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(a(153));if(r.child!==null){for(t=r.child,i=us(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=us(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function xf(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&cu(t)))}function YE(t,r,i){switch(r.tag){case 3:$e(r,r.stateNode.containerInfo),Hs(r,sn,t.memoizedState.cache),ll();break;case 27:case 5:rt(r);break;case 4:$e(r,r.stateNode.containerInfo);break;case 10:Hs(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ys(r),r.flags|=128,null):(i&r.child.childLanes)!==0?e0(t,r,i):(Ys(r),t=ys(t,r,i),t!==null?t.sibling:null);Ys(r);break;case 19:var f=(t.flags&128)!==0;if(c=(i&r.childLanes)!==0,c||(ul(t,r,i,!1),c=(i&r.childLanes)!==0),f){if(c)return n0(t,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),$(an,an.current),c)break;return null;case 22:case 23:return r.lanes=0,Qy(t,r,i);case 24:Hs(r,sn,t.memoizedState.cache)}return ys(t,r,i)}function r0(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps)dn=!0;else{if(!xf(t,i)&&(r.flags&128)===0)return dn=!1,YE(t,r,i);dn=(t.flags&131072)!==0}else dn=!1,lt&&(r.flags&1048576)!==0&&jp(r,lu,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var c=r.elementType,f=c._init;if(c=f(c._payload),r.type=c,typeof c=="function")Nd(c)?(t=ni(c,t),r.tag=1,r=Wy(null,r,c,t,i)):(r.tag=0,r=ff(null,r,c,t,i));else{if(c!=null){if(f=c.$$typeof,f===ue){r.tag=11,r=$y(null,r,c,t,i);break e}else if(f===O){r.tag=14,r=Ky(null,r,c,t,i);break e}}throw r=Ae(c)||c,Error(a(306,r,""))}}return r;case 0:return ff(t,r,r.type,r.pendingProps,i);case 1:return c=r.type,f=ni(c,r.pendingProps),Wy(t,r,c,f,i);case 3:e:{if($e(r,r.stateNode.containerInfo),t===null)throw Error(a(387));c=r.pendingProps;var m=r.memoizedState;f=m.element,qd(t,r),yl(r,c,null,i);var b=r.memoizedState;if(c=b.cache,Hs(r,sn,c),c!==m.cache&&Vd(r,[sn],i,!0),pl(),c=b.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=Jy(t,r,c,i);break e}else if(c!==f){f=sr(Error(a(424)),r),cl(f),r=Jy(t,r,c,i);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Lt=br(t.firstChild),On=r,lt=!0,Xa=null,zr=!0,i=Oy(r,null,c,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ll(),c===f){r=ys(t,r,i);break e}vn(t,r,c,i)}r=r.child}return r;case 26:return Nu(t,r),t===null?(i=ov(r.type,null,r.pendingProps,null))?r.memoizedState=i:lt||(i=r.type,t=r.pendingProps,c=Hu(pe.current).createElement(i),c[tn]=r,c[$t]=t,xn(c,i,t),qt(c),r.stateNode=c):r.memoizedState=ov(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return rt(r),t===null&&lt&&(c=r.stateNode=sv(r.type,r.pendingProps,pe.current),On=r,zr=!0,f=Lt,sa(r.type)?(em=f,Lt=br(c.firstChild)):Lt=f),vn(t,r,r.pendingProps.children,i),Nu(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&lt&&((f=c=Lt)&&(c=ET(c,r.type,r.pendingProps,zr),c!==null?(r.stateNode=c,On=r,Lt=br(c.firstChild),zr=!1,f=!0):f=!1),f||Za(r)),rt(r),f=r.type,m=r.pendingProps,b=t!==null?t.memoizedProps:null,c=m.children,Xf(f,m)?c=null:b!==null&&Xf(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Yd(t,r,UE,null,null,i),zl._currentValue=f),Nu(t,r),vn(t,r,c,i),r.child;case 6:return t===null&&lt&&((t=i=Lt)&&(i=TT(i,r.pendingProps,zr),i!==null?(r.stateNode=i,On=r,Lt=null,t=!0):t=!1),t||Za(r)),null;case 13:return e0(t,r,i);case 4:return $e(r,r.stateNode.containerInfo),c=r.pendingProps,t===null?r.child=Wi(r,null,c,i):vn(t,r,c,i),r.child;case 11:return $y(t,r,r.type,r.pendingProps,i);case 7:return vn(t,r,r.pendingProps,i),r.child;case 8:return vn(t,r,r.pendingProps.children,i),r.child;case 12:return vn(t,r,r.pendingProps.children,i),r.child;case 10:return c=r.pendingProps,Hs(r,r.type,c.value),vn(t,r,c.children,i),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,Ja(r),f=An(f),c=c(f),r.flags|=1,vn(t,r,c,i),r.child;case 14:return Ky(t,r,r.type,r.pendingProps,i);case 15:return Yy(t,r,r.type,r.pendingProps,i);case 19:return n0(t,r,i);case 31:return c=r.pendingProps,i=r.mode,c={mode:c.mode,children:c.children},t===null?(i=Ru(c,i),i.ref=r.ref,r.child=i,i.return=r,r=i):(i=us(t.child,c),i.ref=r.ref,r.child=i,i.return=r,r=i),r;case 22:return Qy(t,r,i);case 24:return Ja(r),c=An(sn),t===null?(f=zd(),f===null&&(f=At,m=Pd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=i),f=m),r.memoizedState={parent:c,cache:f},Bd(r),Hs(r,sn,f)):((t.lanes&i)!==0&&(qd(t,r),yl(r,null,null,i),pl()),f=t.memoizedState,m=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Hs(r,sn,c)):(c=m.cache,Hs(r,sn,c),c!==f.cache&&Vd(r,[sn],i,!0))),vn(t,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function vs(t){t.flags|=4}function s0(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!dv(r)){if(r=lr.current,r!==null&&((tt&4194048)===tt?Ur!==null:(tt&62914560)!==tt&&(tt&536870912)===0||r!==Ur))throw ml=Ud,Bp;t.flags|=8192}}function Cu(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ft():536870912,t.lanes|=r,no|=r)}function wl(t,r){if(!lt)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:c.sibling=null}}function Vt(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,c=0;if(r)for(var f=t.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=c,t.childLanes=i,r}function QE(t,r,i){var c=r.pendingProps;switch(Dd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(r),null;case 1:return Vt(r),null;case 3:return i=r.stateNode,c=null,t!==null&&(c=t.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ms(sn),pt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ol(r)?vs(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Vp())),Vt(r),null;case 26:return i=r.memoizedState,t===null?(vs(r),i!==null?(Vt(r),s0(r,i)):(Vt(r),r.flags&=-16777217)):i?i!==t.memoizedState?(vs(r),Vt(r),s0(r,i)):(Vt(r),r.flags&=-16777217):(t.memoizedProps!==c&&vs(r),Vt(r),r.flags&=-16777217),null;case 27:wt(r),i=pe.current;var f=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==c&&vs(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Vt(r),null}t=oe.current,ol(r)?Mp(r):(t=sv(f,c,i),r.stateNode=t,vs(r))}return Vt(r),null;case 5:if(wt(r),i=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==c&&vs(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Vt(r),null}if(t=oe.current,ol(r))Mp(r);else{switch(f=Hu(pe.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?t.multiple=!0:c.size&&(t.size=c.size);break;default:t=typeof c.is=="string"?f.createElement(i,{is:c.is}):f.createElement(i)}}t[tn]=r,t[$t]=c;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=t;e:switch(xn(t,i,c),i){case"button":case"input":case"select":case"textarea":t=!!c.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&vs(r)}}return Vt(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==c&&vs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(t=pe.current,ol(r)){if(t=r.stateNode,i=r.memoizedProps,c=null,f=On,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}t[tn]=r,t=!!(t.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||Z0(t.nodeValue,i)),t||Za(r)}else t=Hu(t).createTextNode(c),t[tn]=r,r.stateNode=t}return Vt(r),null;case 13:if(c=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=ol(r),c!==null&&c.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[tn]=r}else ll(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Vt(r),f=!1}else f=Vp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(ps(r),r):(ps(r),null)}if(ps(r),(r.flags&128)!==0)return r.lanes=i,r;if(i=c!==null,t=t!==null&&t.memoizedState!==null,i){c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var m=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)}return i!==t&&i&&(r.child.flags|=8192),Cu(r,r.updateQueue),Vt(r),null;case 4:return pt(),t===null&&Ff(r.stateNode.containerInfo),Vt(r),null;case 10:return ms(r.type),Vt(r),null;case 19:if(Q(an),f=r.memoizedState,f===null)return Vt(r),null;if(c=(r.flags&128)!==0,m=f.rendering,m===null)if(c)wl(f,!1);else{if(zt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(m=Su(t),m!==null){for(r.flags|=128,wl(f,!1),t=m.updateQueue,r.updateQueue=t,Cu(r,t),r.subtreeFlags=0,t=i,i=r.child;i!==null;)Dp(i,t),i=i.sibling;return $(an,an.current&1|2),r.child}t=t.sibling}f.tail!==null&&xe()>ju&&(r.flags|=128,c=!0,wl(f,!1),r.lanes=4194304)}else{if(!c)if(t=Su(m),t!==null){if(r.flags|=128,c=!0,t=t.updateQueue,r.updateQueue=t,Cu(r,t),wl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!lt)return Vt(r),null}else 2*xe()-f.renderingStartTime>ju&&i!==536870912&&(r.flags|=128,c=!0,wl(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(t=f.last,t!==null?t.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=xe(),r.sibling=null,t=an.current,$(an,c?t&1|2:t&1),r):(Vt(r),null);case 22:case 23:return ps(r),$d(),c=r.memoizedState!==null,t!==null?t.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(i&536870912)!==0&&(r.flags&128)===0&&(Vt(r),r.subtreeFlags&6&&(r.flags|=8192)):Vt(r),i=r.updateQueue,i!==null&&Cu(r,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==i&&(r.flags|=2048),t!==null&&Q(ei),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),ms(sn),Vt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function XE(t,r){switch(Dd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ms(sn),pt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return wt(r),null;case 13:if(ps(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(a(340));ll()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Q(an),null;case 4:return pt(),null;case 10:return ms(r.type),null;case 22:case 23:return ps(r),$d(),t!==null&&Q(ei),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ms(sn),null;case 25:return null;default:return null}}function a0(t,r){switch(Dd(r),r.tag){case 3:ms(sn),pt();break;case 26:case 27:case 5:wt(r);break;case 4:pt();break;case 13:ps(r);break;case 19:Q(an);break;case 10:ms(r.type);break;case 22:case 23:ps(r),$d(),t!==null&&Q(ei);break;case 24:ms(sn)}}function Sl(t,r){try{var i=r.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var f=c.next;i=f;do{if((i.tag&t)===t){c=void 0;var m=i.create,b=i.inst;c=m(),b.destroy=c}i=i.next}while(i!==f)}}catch(T){Tt(r,r.return,T)}}function Xs(t,r,i){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&t)===t){var b=c.inst,T=b.destroy;if(T!==void 0){b.destroy=void 0,f=r;var D=i,G=T;try{G()}catch(te){Tt(f,D,te)}}}c=c.next}while(c!==m)}}catch(te){Tt(r,r.return,te)}}function i0(t){var r=t.updateQueue;if(r!==null){var i=t.stateNode;try{Kp(r,i)}catch(c){Tt(t,t.return,c)}}}function o0(t,r,i){i.props=ni(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(c){Tt(t,r,c)}}function Al(t,r){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var c=t.stateNode;break;case 30:c=t.stateNode;break;default:c=t.stateNode}typeof i=="function"?t.refCleanup=i(c):i.current=c}}catch(f){Tt(t,r,f)}}function Br(t,r){var i=t.ref,c=t.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(f){Tt(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Tt(t,r,f)}else i.current=null}function l0(t){var r=t.type,i=t.memoizedProps,c=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(f){Tt(t,t.return,f)}}function bf(t,r,i){try{var c=t.stateNode;yT(c,t.type,i,r),c[$t]=r}catch(f){Tt(t,t.return,f)}}function c0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&sa(t.type)||t.tag===4}function Ef(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&sa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tf(t,r,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(t),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=qu));else if(c!==4&&(c===27&&sa(t.type)&&(i=t.stateNode,r=null),t=t.child,t!==null))for(Tf(t,r,i),t=t.sibling;t!==null;)Tf(t,r,i),t=t.sibling}function Iu(t,r,i){var c=t.tag;if(c===5||c===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(c!==4&&(c===27&&sa(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Iu(t,r,i),t=t.sibling;t!==null;)Iu(t,r,i),t=t.sibling}function u0(t){var r=t.stateNode,i=t.memoizedProps;try{for(var c=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);xn(r,c,i),r[tn]=t,r[$t]=i}catch(m){Tt(t,t.return,m)}}var _s=!1,Gt=!1,wf=!1,h0=typeof WeakSet=="function"?WeakSet:Set,fn=null;function ZE(t,r){if(t=t.containerInfo,Yf=Qu,t=Ep(t),bd(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{i.nodeType,m.nodeType}catch{i=null;break e}var b=0,T=-1,D=-1,G=0,te=0,ae=t,K=null;t:for(;;){for(var Y;ae!==i||f!==0&&ae.nodeType!==3||(T=b+f),ae!==m||c!==0&&ae.nodeType!==3||(D=b+c),ae.nodeType===3&&(b+=ae.nodeValue.length),(Y=ae.firstChild)!==null;)K=ae,ae=Y;for(;;){if(ae===t)break t;if(K===i&&++G===f&&(T=b),K===m&&++te===c&&(D=b),(Y=ae.nextSibling)!==null)break;ae=K,K=ae.parentNode}ae=Y}i=T===-1||D===-1?null:{start:T,end:D}}else i=null}i=i||{start:0,end:0}}else i=null;for(Qf={focusedElem:t,selectionRange:i},Qu=!1,fn=r;fn!==null;)if(r=fn,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,fn=t;else for(;fn!==null;){switch(r=fn,m=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,i=r,f=m.memoizedProps,m=m.memoizedState,c=i.stateNode;try{var Ie=ni(i.type,f,i.elementType===i.type);t=c.getSnapshotBeforeUpdate(Ie,m),c.__reactInternalSnapshotBeforeUpdate=t}catch(ke){Tt(i,i.return,ke)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,i=t.nodeType,i===9)Wf(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Wf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=r.sibling,t!==null){t.return=r.return,fn=t;break}fn=r.return}}function d0(t,r,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:Zs(t,i),c&4&&Sl(5,i);break;case 1:if(Zs(t,i),c&4)if(t=i.stateNode,r===null)try{t.componentDidMount()}catch(b){Tt(i,i.return,b)}else{var f=ni(i.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Tt(i,i.return,b)}}c&64&&i0(i),c&512&&Al(i,i.return);break;case 3:if(Zs(t,i),c&64&&(t=i.updateQueue,t!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{Kp(t,r)}catch(b){Tt(i,i.return,b)}}break;case 27:r===null&&c&4&&u0(i);case 26:case 5:Zs(t,i),r===null&&c&4&&l0(i),c&512&&Al(i,i.return);break;case 12:Zs(t,i);break;case 13:Zs(t,i),c&4&&g0(t,i),c&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=iT.bind(null,i),wT(t,i))));break;case 22:if(c=i.memoizedState!==null||_s,!c){r=r!==null&&r.memoizedState!==null||Gt,f=_s;var m=Gt;_s=c,(Gt=r)&&!m?Ws(t,i,(i.subtreeFlags&8772)!==0):Zs(t,i),_s=f,Gt=m}break;case 30:break;default:Zs(t,i)}}function f0(t){var r=t.alternate;r!==null&&(t.alternate=null,f0(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&zs(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Dt=null,Ln=!1;function xs(t,r,i){for(i=i.child;i!==null;)m0(t,r,i),i=i.sibling}function m0(t,r,i){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(Rt,i)}catch{}switch(i.tag){case 26:Gt||Br(i,r),xs(t,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Gt||Br(i,r);var c=Dt,f=Ln;sa(i.type)&&(Dt=i.stateNode,Ln=!1),xs(t,r,i),Ol(i.stateNode),Dt=c,Ln=f;break;case 5:Gt||Br(i,r);case 6:if(c=Dt,f=Ln,Dt=null,xs(t,r,i),Dt=c,Ln=f,Dt!==null)if(Ln)try{(Dt.nodeType===9?Dt.body:Dt.nodeName==="HTML"?Dt.ownerDocument.body:Dt).removeChild(i.stateNode)}catch(m){Tt(i,r,m)}else try{Dt.removeChild(i.stateNode)}catch(m){Tt(i,r,m)}break;case 18:Dt!==null&&(Ln?(t=Dt,nv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Hl(t)):nv(Dt,i.stateNode));break;case 4:c=Dt,f=Ln,Dt=i.stateNode.containerInfo,Ln=!0,xs(t,r,i),Dt=c,Ln=f;break;case 0:case 11:case 14:case 15:Gt||Xs(2,i,r),Gt||Xs(4,i,r),xs(t,r,i);break;case 1:Gt||(Br(i,r),c=i.stateNode,typeof c.componentWillUnmount=="function"&&o0(i,r,c)),xs(t,r,i);break;case 21:xs(t,r,i);break;case 22:Gt=(c=Gt)||i.memoizedState!==null,xs(t,r,i),Gt=c;break;default:xs(t,r,i)}}function g0(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Hl(t)}catch(i){Tt(r,r.return,i)}}function WE(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new h0),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new h0),r;default:throw Error(a(435,t.tag))}}function Sf(t,r){var i=WE(t);r.forEach(function(c){var f=oT.bind(null,t,c);i.has(c)||(i.add(c),c.then(f,f))})}function Kn(t,r){var i=r.deletions;if(i!==null)for(var c=0;c<i.length;c++){var f=i[c],m=t,b=r,T=b;e:for(;T!==null;){switch(T.tag){case 27:if(sa(T.type)){Dt=T.stateNode,Ln=!1;break e}break;case 5:Dt=T.stateNode,Ln=!1;break e;case 3:case 4:Dt=T.stateNode.containerInfo,Ln=!0;break e}T=T.return}if(Dt===null)throw Error(a(160));m0(m,b,f),Dt=null,Ln=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)p0(r,t),r=r.sibling}var xr=null;function p0(t,r){var i=t.alternate,c=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Kn(r,t),Yn(t),c&4&&(Xs(3,t,t.return),Sl(3,t),Xs(5,t,t.return));break;case 1:Kn(r,t),Yn(t),c&512&&(Gt||i===null||Br(i,i.return)),c&64&&_s&&(t=t.updateQueue,t!==null&&(c=t.callbacks,c!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var f=xr;if(Kn(r,t),Yn(t),c&512&&(Gt||i===null||Br(i,i.return)),c&4){var m=i!==null?i.memoizedState:null;if(c=t.memoizedState,i===null)if(c===null)if(t.stateNode===null){e:{c=t.type,i=t.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[Ia]||m[tn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),xn(m,c,i),m[tn]=t,qt(m),c=m;break e;case"link":var b=uv("link","href",f).get(c+(i.href||""));if(b){for(var T=0;T<b.length;T++)if(m=b[T],m.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&m.getAttribute("rel")===(i.rel==null?null:i.rel)&&m.getAttribute("title")===(i.title==null?null:i.title)&&m.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(T,1);break t}}m=f.createElement(c),xn(m,c,i),f.head.appendChild(m);break;case"meta":if(b=uv("meta","content",f).get(c+(i.content||""))){for(T=0;T<b.length;T++)if(m=b[T],m.getAttribute("content")===(i.content==null?null:""+i.content)&&m.getAttribute("name")===(i.name==null?null:i.name)&&m.getAttribute("property")===(i.property==null?null:i.property)&&m.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&m.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(T,1);break t}}m=f.createElement(c),xn(m,c,i),f.head.appendChild(m);break;default:throw Error(a(468,c))}m[tn]=t,qt(m),c=m}t.stateNode=c}else hv(f,t.type,t.stateNode);else t.stateNode=cv(f,c,t.memoizedProps);else m!==c?(m===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):m.count--,c===null?hv(f,t.type,t.stateNode):cv(f,c,t.memoizedProps)):c===null&&t.stateNode!==null&&bf(t,t.memoizedProps,i.memoizedProps)}break;case 27:Kn(r,t),Yn(t),c&512&&(Gt||i===null||Br(i,i.return)),i!==null&&c&4&&bf(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Kn(r,t),Yn(t),c&512&&(Gt||i===null||Br(i,i.return)),t.flags&32){f=t.stateNode;try{er(f,"")}catch(Y){Tt(t,t.return,Y)}}c&4&&t.stateNode!=null&&(f=t.memoizedProps,bf(t,f,i!==null?i.memoizedProps:f)),c&1024&&(wf=!0);break;case 6:if(Kn(r,t),Yn(t),c&4){if(t.stateNode===null)throw Error(a(162));c=t.memoizedProps,i=t.stateNode;try{i.nodeValue=c}catch(Y){Tt(t,t.return,Y)}}break;case 3:if($u=null,f=xr,xr=Gu(r.containerInfo),Kn(r,t),xr=f,Yn(t),c&4&&i!==null&&i.memoizedState.isDehydrated)try{Hl(r.containerInfo)}catch(Y){Tt(t,t.return,Y)}wf&&(wf=!1,y0(t));break;case 4:c=xr,xr=Gu(t.stateNode.containerInfo),Kn(r,t),Yn(t),xr=c;break;case 12:Kn(r,t),Yn(t);break;case 13:Kn(r,t),Yn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(If=xe()),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Sf(t,c)));break;case 22:f=t.memoizedState!==null;var D=i!==null&&i.memoizedState!==null,G=_s,te=Gt;if(_s=G||f,Gt=te||D,Kn(r,t),Gt=te,_s=G,Yn(t),c&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(i===null||D||_s||Gt||ri(t)),i=null,r=t;;){if(r.tag===5||r.tag===26){if(i===null){D=i=r;try{if(m=D.stateNode,f)b=m.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{T=D.stateNode;var ae=D.memoizedProps.style,K=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;T.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Y){Tt(D,D.return,Y)}}}else if(r.tag===6){if(i===null){D=r;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(Y){Tt(D,D.return,Y)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=t.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,Sf(t,i))));break;case 19:Kn(r,t),Yn(t),c&4&&(c=t.updateQueue,c!==null&&(t.updateQueue=null,Sf(t,c)));break;case 30:break;case 21:break;default:Kn(r,t),Yn(t)}}function Yn(t){var r=t.flags;if(r&2){try{for(var i,c=t.return;c!==null;){if(c0(c)){i=c;break}c=c.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var f=i.stateNode,m=Ef(t);Iu(t,m,f);break;case 5:var b=i.stateNode;i.flags&32&&(er(b,""),i.flags&=-33);var T=Ef(t);Iu(t,T,b);break;case 3:case 4:var D=i.stateNode.containerInfo,G=Ef(t);Tf(t,G,D);break;default:throw Error(a(161))}}catch(te){Tt(t,t.return,te)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function y0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;y0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Zs(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)d0(t,r.alternate,r),r=r.sibling}function ri(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Xs(4,r,r.return),ri(r);break;case 1:Br(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&o0(r,r.return,i),ri(r);break;case 27:Ol(r.stateNode);case 26:case 5:Br(r,r.return),ri(r);break;case 22:r.memoizedState===null&&ri(r);break;case 30:ri(r);break;default:ri(r)}t=t.sibling}}function Ws(t,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=t,m=r,b=m.flags;switch(m.tag){case 0:case 11:case 15:Ws(f,m,i),Sl(4,m);break;case 1:if(Ws(f,m,i),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){Tt(c,c.return,G)}if(c=m,f=c.updateQueue,f!==null){var T=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)$p(D[f],T)}catch(G){Tt(c,c.return,G)}}i&&b&64&&i0(m),Al(m,m.return);break;case 27:u0(m);case 26:case 5:Ws(f,m,i),i&&c===null&&b&4&&l0(m),Al(m,m.return);break;case 12:Ws(f,m,i);break;case 13:Ws(f,m,i),i&&b&4&&g0(f,m);break;case 22:m.memoizedState===null&&Ws(f,m,i),Al(m,m.return);break;case 30:break;default:Ws(f,m,i)}r=r.sibling}}function Af(t,r){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&hl(i))}function kf(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&hl(t))}function qr(t,r,i,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)v0(t,r,i,c),r=r.sibling}function v0(t,r,i,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:qr(t,r,i,c),f&2048&&Sl(9,r);break;case 1:qr(t,r,i,c);break;case 3:qr(t,r,i,c),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&hl(t)));break;case 12:if(f&2048){qr(t,r,i,c),t=r.stateNode;try{var m=r.memoizedProps,b=m.id,T=m.onPostCommit;typeof T=="function"&&T(b,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){Tt(r,r.return,D)}}else qr(t,r,i,c);break;case 13:qr(t,r,i,c);break;case 23:break;case 22:m=r.stateNode,b=r.alternate,r.memoizedState!==null?m._visibility&2?qr(t,r,i,c):kl(t,r):m._visibility&2?qr(t,r,i,c):(m._visibility|=2,Ji(t,r,i,c,(r.subtreeFlags&10256)!==0)),f&2048&&Af(b,r);break;case 24:qr(t,r,i,c),f&2048&&kf(r.alternate,r);break;default:qr(t,r,i,c)}}function Ji(t,r,i,c,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=t,b=r,T=i,D=c,G=b.flags;switch(b.tag){case 0:case 11:case 15:Ji(m,b,T,D,f),Sl(8,b);break;case 23:break;case 22:var te=b.stateNode;b.memoizedState!==null?te._visibility&2?Ji(m,b,T,D,f):kl(m,b):(te._visibility|=2,Ji(m,b,T,D,f)),f&&G&2048&&Af(b.alternate,b);break;case 24:Ji(m,b,T,D,f),f&&G&2048&&kf(b.alternate,b);break;default:Ji(m,b,T,D,f)}r=r.sibling}}function kl(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=t,c=r,f=c.flags;switch(c.tag){case 22:kl(i,c),f&2048&&Af(c.alternate,c);break;case 24:kl(i,c),f&2048&&kf(c.alternate,c);break;default:kl(i,c)}r=r.sibling}}var Nl=8192;function eo(t){if(t.subtreeFlags&Nl)for(t=t.child;t!==null;)_0(t),t=t.sibling}function _0(t){switch(t.tag){case 26:eo(t),t.flags&Nl&&t.memoizedState!==null&&PT(xr,t.memoizedState,t.memoizedProps);break;case 5:eo(t);break;case 3:case 4:var r=xr;xr=Gu(t.stateNode.containerInfo),eo(t),xr=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Nl,Nl=16777216,eo(t),Nl=r):eo(t));break;default:eo(t)}}function x0(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Rl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];fn=c,E0(c,t)}x0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)b0(t),t=t.sibling}function b0(t){switch(t.tag){case 0:case 11:case 15:Rl(t),t.flags&2048&&Xs(9,t,t.return);break;case 3:Rl(t);break;case 12:Rl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Du(t)):Rl(t);break;default:Rl(t)}}function Du(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];fn=c,E0(c,t)}x0(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Xs(8,r,r.return),Du(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,Du(r));break;default:Du(r)}t=t.sibling}}function E0(t,r){for(;fn!==null;){var i=fn;switch(i.tag){case 0:case 11:case 15:Xs(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:hl(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,fn=c;else e:for(i=t;fn!==null;){c=fn;var f=c.sibling,m=c.return;if(f0(c),c===i){fn=null;break e}if(f!==null){f.return=m,fn=f;break e}fn=m}}}var JE={getCacheForType:function(t){var r=An(sn),i=r.data.get(t);return i===void 0&&(i=t(),r.data.set(t,i)),i}},eT=typeof WeakMap=="function"?WeakMap:Map,mt=0,At=null,Ge=null,tt=0,gt=0,Qn=null,Js=!1,to=!1,Nf=!1,bs=0,zt=0,ea=0,si=0,Rf=0,cr=0,no=0,Cl=null,zn=null,Cf=!1,If=0,ju=1/0,Mu=null,ta=null,_n=0,na=null,ro=null,so=0,Df=0,jf=null,T0=null,Il=0,Mf=null;function Xn(){if((mt&2)!==0&&tt!==0)return tt&-tt;if(F.T!==null){var t=Fi;return t!==0?t:Bf()}return Ps()}function w0(){cr===0&&(cr=(tt&536870912)===0||lt?cn():536870912);var t=lr.current;return t!==null&&(t.flags|=32),cr}function Zn(t,r,i){(t===At&&(gt===2||gt===9)||t.cancelPendingCommit!==null)&&(ao(t,0),ra(t,tt,cr,!1)),yt(t,i),((mt&2)===0||t!==At)&&(t===At&&((mt&2)===0&&(si|=i),zt===4&&ra(t,tt,cr,!1)),Hr(t))}function S0(t,r,i){if((mt&6)!==0)throw Error(a(327));var c=!i&&(r&124)===0&&(r&t.expiredLanes)===0||Et(t,r),f=c?rT(t,r):Pf(t,r,!0),m=c;do{if(f===0){to&&!c&&ra(t,r,0,!1);break}else{if(i=t.current.alternate,m&&!tT(i)){f=Pf(t,r,!1),m=!1;continue}if(f===2){if(m=r,t.errorRecoveryDisabledLanes&m)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var T=t;f=Cl;var D=T.current.memoizedState.isDehydrated;if(D&&(ao(T,b).flags|=256),b=Pf(T,b,!1),b!==2){if(Nf&&!D){T.errorRecoveryDisabledLanes|=m,si|=m,f=4;break e}m=zn,zn=f,m!==null&&(zn===null?zn=m:zn.push.apply(zn,m))}f=b}if(m=!1,f!==2)continue}}if(f===1){ao(t,0),ra(t,r,0,!0);break}e:{switch(c=t,m=f,m){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:ra(c,r,cr,!Js);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=If+300-xe(),10<f)){if(ra(c,r,cr,!Js),Ke(c,0,!0)!==0)break e;c.timeoutHandle=ev(A0.bind(null,c,i,zn,Mu,Cf,r,cr,si,no,Js,m,2,-0,0),f);break e}A0(c,i,zn,Mu,Cf,r,cr,si,no,Js,m,0,-0,0)}}break}while(!0);Hr(t)}function A0(t,r,i,c,f,m,b,T,D,G,te,ae,K,Y){if(t.timeoutHandle=-1,ae=r.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(Ll={stylesheets:null,count:0,unsuspend:VT},_0(r),ae=LT(),ae!==null)){t.cancelPendingCommit=ae(j0.bind(null,t,r,m,i,c,f,b,T,D,te,1,K,Y)),ra(t,m,b,!G);return}j0(t,r,m,i,c,f,b,T,D)}function tT(t){for(var r=t;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var f=i[c],m=f.getSnapshot;f=f.value;try{if(!Fn(m(),f))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ra(t,r,i,c){r&=~Rf,r&=~si,t.suspendedLanes|=r,t.pingedLanes&=~r,c&&(t.warmLanes|=r),c=t.expirationTimes;for(var f=r;0<f;){var m=31-ln(f),b=1<<m;c[m]=-1,f&=~b}i!==0&&Sn(t,i,r)}function Ou(){return(mt&6)===0?(Dl(0),!1):!0}function Of(){if(Ge!==null){if(gt===0)var t=Ge.return;else t=Ge,fs=Wa=null,Zd(t),Zi=null,El=0,t=Ge;for(;t!==null;)a0(t.alternate,t),t=t.return;Ge=null}}function ao(t,r){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,_T(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Of(),At=t,Ge=i=us(t.current,null),tt=r,gt=0,Qn=null,Js=!1,to=Et(t,r),Nf=!1,no=cr=Rf=si=ea=zt=0,zn=Cl=null,Cf=!1,(r&8)!==0&&(r|=r&32);var c=t.entangledLanes;if(c!==0)for(t=t.entanglements,c&=r;0<c;){var f=31-ln(c),m=1<<f;r|=t[f],c&=~m}return bs=r,ru(),i}function k0(t,r){Pe=null,F.H=Eu,r===fl||r===du?(r=Gp(),gt=3):r===Bp?(r=Gp(),gt=4):gt=r===Fy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Qn=r,Ge===null&&(zt=1,ku(t,sr(r,t.current)))}function N0(){var t=F.H;return F.H=Eu,t===null?Eu:t}function R0(){var t=F.A;return F.A=JE,t}function Vf(){zt=4,Js||(tt&4194048)!==tt&&lr.current!==null||(to=!0),(ea&134217727)===0&&(si&134217727)===0||At===null||ra(At,tt,cr,!1)}function Pf(t,r,i){var c=mt;mt|=2;var f=N0(),m=R0();(At!==t||tt!==r)&&(Mu=null,ao(t,r)),r=!1;var b=zt;e:do try{if(gt!==0&&Ge!==null){var T=Ge,D=Qn;switch(gt){case 8:Of(),b=6;break e;case 3:case 2:case 9:case 6:lr.current===null&&(r=!0);var G=gt;if(gt=0,Qn=null,io(t,T,D,G),i&&to){b=0;break e}break;default:G=gt,gt=0,Qn=null,io(t,T,D,G)}}nT(),b=zt;break}catch(te){k0(t,te)}while(!0);return r&&t.shellSuspendCounter++,fs=Wa=null,mt=c,F.H=f,F.A=m,Ge===null&&(At=null,tt=0,ru()),b}function nT(){for(;Ge!==null;)C0(Ge)}function rT(t,r){var i=mt;mt|=2;var c=N0(),f=R0();At!==t||tt!==r?(Mu=null,ju=xe()+500,ao(t,r)):to=Et(t,r);e:do try{if(gt!==0&&Ge!==null){r=Ge;var m=Qn;t:switch(gt){case 1:gt=0,Qn=null,io(t,r,m,1);break;case 2:case 9:if(qp(m)){gt=0,Qn=null,I0(r);break}r=function(){gt!==2&&gt!==9||At!==t||(gt=7),Hr(t)},m.then(r,r);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:qp(m)?(gt=0,Qn=null,I0(r)):(gt=0,Qn=null,io(t,r,m,7));break;case 5:var b=null;switch(Ge.tag){case 26:b=Ge.memoizedState;case 5:case 27:var T=Ge;if(!b||dv(b)){gt=0,Qn=null;var D=T.sibling;if(D!==null)Ge=D;else{var G=T.return;G!==null?(Ge=G,Vu(G)):Ge=null}break t}}gt=0,Qn=null,io(t,r,m,5);break;case 6:gt=0,Qn=null,io(t,r,m,6);break;case 8:Of(),zt=6;break e;default:throw Error(a(462))}}sT();break}catch(te){k0(t,te)}while(!0);return fs=Wa=null,F.H=c,F.A=f,mt=i,Ge!==null?0:(At=null,tt=0,ru(),zt)}function sT(){for(;Ge!==null&&!Me();)C0(Ge)}function C0(t){var r=r0(t.alternate,t,bs);t.memoizedProps=t.pendingProps,r===null?Vu(t):Ge=r}function I0(t){var r=t,i=r.alternate;switch(r.tag){case 15:case 0:r=Zy(i,r,r.pendingProps,r.type,void 0,tt);break;case 11:r=Zy(i,r,r.pendingProps,r.type.render,r.ref,tt);break;case 5:Zd(r);default:a0(i,r),r=Ge=Dp(r,bs),r=r0(i,r,bs)}t.memoizedProps=t.pendingProps,r===null?Vu(t):Ge=r}function io(t,r,i,c){fs=Wa=null,Zd(r),Zi=null,El=0;var f=r.return;try{if(KE(t,f,r,i,tt)){zt=1,ku(t,sr(i,t.current)),Ge=null;return}}catch(m){if(f!==null)throw Ge=f,m;zt=1,ku(t,sr(i,t.current)),Ge=null;return}r.flags&32768?(lt||c===1?t=!0:to||(tt&536870912)!==0?t=!1:(Js=t=!0,(c===2||c===9||c===3||c===6)&&(c=lr.current,c!==null&&c.tag===13&&(c.flags|=16384))),D0(r,t)):Vu(r)}function Vu(t){var r=t;do{if((r.flags&32768)!==0){D0(r,Js);return}t=r.return;var i=QE(r.alternate,r,bs);if(i!==null){Ge=i;return}if(r=r.sibling,r!==null){Ge=r;return}Ge=r=t}while(r!==null);zt===0&&(zt=5)}function D0(t,r){do{var i=XE(t.alternate,t);if(i!==null){i.flags&=32767,Ge=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(t=t.sibling,t!==null)){Ge=t;return}Ge=t=i}while(t!==null);zt=6,Ge=null}function j0(t,r,i,c,f,m,b,T,D){t.cancelPendingCommit=null;do Pu();while(_n!==0);if((mt&6)!==0)throw Error(a(327));if(r!==null){if(r===t.current)throw Error(a(177));if(m=r.lanes|r.childLanes,m|=Ad,Bt(t,i,m,b,T,D),t===At&&(Ge=At=null,tt=0),ro=r,na=t,so=i,Df=m,jf=f,T0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,lT(St,function(){return L0(),null})):(t.callbackNode=null,t.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=F.T,F.T=null,f=se.p,se.p=2,b=mt,mt|=4;try{ZE(t,r,i)}finally{mt=b,se.p=f,F.T=c}}_n=1,M0(),O0(),V0()}}function M0(){if(_n===1){_n=0;var t=na,r=ro,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=F.T,F.T=null;var c=se.p;se.p=2;var f=mt;mt|=4;try{p0(r,t);var m=Qf,b=Ep(t.containerInfo),T=m.focusedElem,D=m.selectionRange;if(b!==T&&T&&T.ownerDocument&&bp(T.ownerDocument.documentElement,T)){if(D!==null&&bd(T)){var G=D.start,te=D.end;if(te===void 0&&(te=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(te,T.value.length);else{var ae=T.ownerDocument||document,K=ae&&ae.defaultView||window;if(K.getSelection){var Y=K.getSelection(),Ie=T.textContent.length,ke=Math.min(D.start,Ie),bt=D.end===void 0?ke:Math.min(D.end,Ie);!Y.extend&&ke>bt&&(b=bt,bt=ke,ke=b);var U=xp(T,ke),L=xp(T,bt);if(U&&L&&(Y.rangeCount!==1||Y.anchorNode!==U.node||Y.anchorOffset!==U.offset||Y.focusNode!==L.node||Y.focusOffset!==L.offset)){var H=ae.createRange();H.setStart(U.node,U.offset),Y.removeAllRanges(),ke>bt?(Y.addRange(H),Y.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),Y.addRange(H))}}}}for(ae=[],Y=T;Y=Y.parentNode;)Y.nodeType===1&&ae.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ae.length;T++){var re=ae[T];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Qu=!!Yf,Qf=Yf=null}finally{mt=f,se.p=c,F.T=i}}t.current=r,_n=2}}function O0(){if(_n===2){_n=0;var t=na,r=ro,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=F.T,F.T=null;var c=se.p;se.p=2;var f=mt;mt|=4;try{d0(t,r.alternate,r)}finally{mt=f,se.p=c,F.T=i}}_n=3}}function V0(){if(_n===4||_n===3){_n=0,ye();var t=na,r=ro,i=so,c=T0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?_n=5:(_n=0,ro=na=null,P0(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ta=null),Ti(i),r=r.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(Rt,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=F.T,f=se.p,se.p=2,F.T=null;try{for(var m=t.onRecoverableError,b=0;b<c.length;b++){var T=c[b];m(T.value,{componentStack:T.stack})}}finally{F.T=r,se.p=f}}(so&3)!==0&&Pu(),Hr(t),f=t.pendingLanes,(i&4194090)!==0&&(f&42)!==0?t===Mf?Il++:(Il=0,Mf=t):Il=0,Dl(0)}}function P0(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,hl(r)))}function Pu(t){return M0(),O0(),V0(),L0()}function L0(){if(_n!==5)return!1;var t=na,r=Df;Df=0;var i=Ti(so),c=F.T,f=se.p;try{se.p=32>i?32:i,F.T=null,i=jf,jf=null;var m=na,b=so;if(_n=0,ro=na=null,so=0,(mt&6)!==0)throw Error(a(331));var T=mt;if(mt|=4,b0(m.current),v0(m,m.current,b,i),mt=T,Dl(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(Rt,m)}catch{}return!0}finally{se.p=f,F.T=c,P0(t,r)}}function z0(t,r,i){r=sr(i,r),r=df(t.stateNode,r,2),t=$s(t,r,2),t!==null&&(yt(t,2),Hr(t))}function Tt(t,r,i){if(t.tag===3)z0(t,t,i);else for(;r!==null;){if(r.tag===3){z0(r,t,i);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ta===null||!ta.has(c))){t=sr(i,t),i=Hy(2),c=$s(r,i,2),c!==null&&(Gy(i,c,r,t),yt(c,2),Hr(c));break}}r=r.return}}function Lf(t,r,i){var c=t.pingCache;if(c===null){c=t.pingCache=new eT;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(i)||(Nf=!0,f.add(i),t=aT.bind(null,t,r,i),r.then(t,t))}function aT(t,r,i){var c=t.pingCache;c!==null&&c.delete(r),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,At===t&&(tt&i)===i&&(zt===4||zt===3&&(tt&62914560)===tt&&300>xe()-If?(mt&2)===0&&ao(t,0):Rf|=i,no===tt&&(no=0)),Hr(t)}function U0(t,r){r===0&&(r=ft()),t=Bi(t,r),t!==null&&(yt(t,r),Hr(t))}function iT(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),U0(t,i)}function oT(t,r){var i=0;switch(t.tag){case 13:var c=t.stateNode,f=t.memoizedState;f!==null&&(i=f.retryLane);break;case 19:c=t.stateNode;break;case 22:c=t.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),U0(t,i)}function lT(t,r){return en(t,r)}var Lu=null,oo=null,zf=!1,zu=!1,Uf=!1,ai=0;function Hr(t){t!==oo&&t.next===null&&(oo===null?Lu=oo=t:oo=oo.next=t),zu=!0,zf||(zf=!0,uT())}function Dl(t,r){if(!Uf&&zu){Uf=!0;do for(var i=!1,c=Lu;c!==null;){if(t!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var b=c.suspendedLanes,T=c.pingedLanes;m=(1<<31-ln(42|t)+1)-1,m&=f&~(b&~T),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(i=!0,G0(c,m))}else m=tt,m=Ke(c,c===At?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||Et(c,m)||(i=!0,G0(c,m));c=c.next}while(i);Uf=!1}}function cT(){B0()}function B0(){zu=zf=!1;var t=0;ai!==0&&(vT()&&(t=ai),ai=0);for(var r=xe(),i=null,c=Lu;c!==null;){var f=c.next,m=q0(c,r);m===0?(c.next=null,i===null?Lu=f:i.next=f,f===null&&(oo=i)):(i=c,(t!==0||(m&3)!==0)&&(zu=!0)),c=f}Dl(t)}function q0(t,r){for(var i=t.suspendedLanes,c=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var b=31-ln(m),T=1<<b,D=f[b];D===-1?((T&i)===0||(T&c)!==0)&&(f[b]=ot(T,r)):D<=r&&(t.expiredLanes|=T),m&=~T}if(r=At,i=tt,i=Ke(t,t===r?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c=t.callbackNode,i===0||t===r&&(gt===2||gt===9)||t.cancelPendingCommit!==null)return c!==null&&c!==null&&qn(c),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Et(t,i)){if(r=i&-i,r===t.callbackPriority)return r;switch(c!==null&&qn(c),Ti(i)){case 2:case 8:i=De;break;case 32:i=St;break;case 268435456:i=ht;break;default:i=St}return c=H0.bind(null,t),i=en(i,c),t.callbackPriority=r,t.callbackNode=i,r}return c!==null&&c!==null&&qn(c),t.callbackPriority=2,t.callbackNode=null,2}function H0(t,r){if(_n!==0&&_n!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Pu()&&t.callbackNode!==i)return null;var c=tt;return c=Ke(t,t===At?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),c===0?null:(S0(t,c,r),q0(t,xe()),t.callbackNode!=null&&t.callbackNode===i?H0.bind(null,t):null)}function G0(t,r){if(Pu())return null;S0(t,r,!0)}function uT(){xT(function(){(mt&6)!==0?en(Ot,cT):B0()})}function Bf(){return ai===0&&(ai=cn()),ai}function F0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ri(""+t)}function $0(t,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,t.id&&i.setAttribute("form",t.id),r.parentNode.insertBefore(i,r),t=new FormData(t),i.parentNode.removeChild(i),t}function hT(t,r,i,c,f){if(r==="submit"&&i&&i.stateNode===f){var m=F0((f[$t]||null).action),b=c.submitter;b&&(r=(r=b[$t]||null)?F0(r.formAction):b.getAttribute("formAction"),r!==null&&(m=r,b=null));var T=new Ci("action","action",null,c,f);t.push({event:T,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ai!==0){var D=b?$0(f,b):new FormData(f);of(i,{pending:!0,data:D,method:f.method,action:m},null,D)}}else typeof m=="function"&&(T.preventDefault(),D=b?$0(f,b):new FormData(f),of(i,{pending:!0,data:D,method:f.method,action:m},m,D))},currentTarget:f}]})}}for(var qf=0;qf<Sd.length;qf++){var Hf=Sd[qf],dT=Hf.toLowerCase(),fT=Hf[0].toUpperCase()+Hf.slice(1);_r(dT,"on"+fT)}_r(Sp,"onAnimationEnd"),_r(Ap,"onAnimationIteration"),_r(kp,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(CE,"onTransitionRun"),_r(IE,"onTransitionStart"),_r(DE,"onTransitionCancel"),_r(Np,"onTransitionEnd"),ts("onMouseEnter",["mouseout","mouseover"]),ts("onMouseLeave",["mouseout","mouseover"]),ts("onPointerEnter",["pointerout","pointerover"]),ts("onPointerLeave",["pointerout","pointerover"]),yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function K0(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var c=t[i],f=c.event;c=c.listeners;e:{var m=void 0;if(r)for(var b=c.length-1;0<=b;b--){var T=c[b],D=T.instance,G=T.currentTarget;if(T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=G;try{m(f)}catch(te){Au(te)}f.currentTarget=null,m=D}else for(b=0;b<c.length;b++){if(T=c[b],D=T.instance,G=T.currentTarget,T=T.listener,D!==m&&f.isPropagationStopped())break e;m=T,f.currentTarget=G;try{m(f)}catch(te){Au(te)}f.currentTarget=null,m=D}}}}function Fe(t,r){var i=r[Go];i===void 0&&(i=r[Go]=new Set);var c=t+"__bubble";i.has(c)||(Y0(r,t,2,!1),i.add(c))}function Gf(t,r,i){var c=0;r&&(c|=4),Y0(i,t,c,r)}var Uu="_reactListening"+Math.random().toString(36).slice(2);function Ff(t){if(!t[Uu]){t[Uu]=!0,Fo.forEach(function(i){i!=="selectionchange"&&(mT.has(i)||Gf(i,!1,t),Gf(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Uu]||(r[Uu]=!0,Gf("selectionchange",!1,r))}}function Y0(t,r,i,c){switch(vv(r)){case 2:var f=BT;break;case 8:f=qT;break;default:f=am}i=f.bind(null,r,i,t),f=void 0,!nr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?t.addEventListener(r,i,{capture:!0,passive:f}):t.addEventListener(r,i,!0):f!==void 0?t.addEventListener(r,i,{passive:f}):t.addEventListener(r,i,!1)}function $f(t,r,i,c,f){var m=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var T=c.stateNode.containerInfo;if(T===f)break;if(b===4)for(b=c.return;b!==null;){var D=b.tag;if((D===3||D===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;T!==null;){if(b=es(T),b===null)return;if(D=b.tag,D===5||D===6||D===26||D===27){c=m=b;continue e}T=T.parentNode}}c=c.return}qc(function(){var G=m,te=tr(i),ae=[];e:{var K=Rp.get(t);if(K!==void 0){var Y=Ci,Ie=t;switch(t){case"keypress":if(Mr(i)===0)break e;case"keydown":case"keyup":Y=Vi;break;case"focusin":Ie="focus",Y=ji;break;case"focusout":Ie="blur",Y=ji;break;case"beforeblur":case"afterblur":Y=ji;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=yd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=Xc;break;case Sp:case Ap:case kp:Y=Mi;break;case Np:Y=Wc;break;case"scroll":case"scrollend":Y=Hc;break;case"wheel":Y=Pi;break;case"copy":case"cut":case"paste":Y=Oi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=rl;break;case"toggle":case"beforetoggle":Y=eu}var ke=(r&4)!==0,bt=!ke&&(t==="scroll"||t==="scrollend"),U=ke?K!==null?K+"Capture":null:K;ke=[];for(var L=G,H;L!==null;){var re=L;if(H=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||H===null||U===null||(re=La(L,U),re!=null&&ke.push(Ml(L,re,H))),bt)break;L=L.return}0<ke.length&&(K=new Y(K,Ie,null,i,te),ae.push({event:K,listeners:ke}))}}if((r&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",K&&i!==ss&&(Ie=i.relatedTarget||i.fromElement)&&(es(Ie)||Ie[Jn]))break e;if((Y||K)&&(K=te.window===te?te:(K=te.ownerDocument)?K.defaultView||K.parentWindow:window,Y?(Ie=i.relatedTarget||i.toElement,Y=G,Ie=Ie?es(Ie):null,Ie!==null&&(bt=l(Ie),ke=Ie.tag,Ie!==bt||ke!==5&&ke!==27&&ke!==6)&&(Ie=null)):(Y=null,Ie=G),Y!==Ie)){if(ke=rr,re="onMouseLeave",U="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(ke=rl,re="onPointerLeave",U="onPointerEnter",L="pointer"),bt=Y==null?K:Cr(Y),H=Ie==null?K:Cr(Ie),K=new ke(re,L+"leave",Y,i,te),K.target=bt,K.relatedTarget=H,re=null,es(te)===G&&(ke=new ke(U,L+"enter",Ie,i,te),ke.target=H,ke.relatedTarget=bt,re=ke),bt=re,Y&&Ie)t:{for(ke=Y,U=Ie,L=0,H=ke;H;H=lo(H))L++;for(H=0,re=U;re;re=lo(re))H++;for(;0<L-H;)ke=lo(ke),L--;for(;0<H-L;)U=lo(U),H--;for(;L--;){if(ke===U||U!==null&&ke===U.alternate)break t;ke=lo(ke),U=lo(U)}ke=null}else ke=null;Y!==null&&Q0(ae,K,Y,ke,!1),Ie!==null&&bt!==null&&Q0(ae,bt,Ie,ke,!0)}}e:{if(K=G?Cr(G):window,Y=K.nodeName&&K.nodeName.toLowerCase(),Y==="select"||Y==="input"&&K.type==="file")var Ee=mp;else if(rn(K))if(gp)Ee=kE;else{Ee=SE;var Be=wE}else Y=K.nodeName,!Y||Y.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?G&&Xo(G.elementType)&&(Ee=mp):Ee=AE;if(Ee&&(Ee=Ee(t,G))){cs(ae,Ee,i,te);break e}Be&&Be(t,K,G),t==="focusout"&&G&&K.type==="number"&&G.memoizedProps.value!=null&&Bs(K,"number",K.value)}switch(Be=G?Cr(G):window,t){case"focusin":(rn(Be)||Be.contentEditable==="true")&&(Li=Be,Ed=G,il=null);break;case"focusout":il=Ed=Li=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Tp(ae,i,te);break;case"selectionchange":if(RE)break;case"keydown":case"keyup":Tp(ae,i,te)}var we;if(Pr)e:{switch(t){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Je?W(t,i)&&(Ne="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Ne="onCompositionStart");Ne&&(x&&i.locale!=="ko"&&(Je||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Je&&(we=Wo()):(jr=te,qs="value"in jr?jr.value:jr.textContent,Je=!0)),Be=Bu(G,Ne),0<Be.length&&(Ne=new tl(Ne,t,null,i,te),ae.push({event:Ne,listeners:Be}),we?Ne.data=we:(we=de(i),we!==null&&(Ne.data=we)))),(we=v?nn(t,i):et(t,i))&&(Ne=Bu(G,"onBeforeInput"),0<Ne.length&&(Be=new tl("onBeforeInput","beforeinput",null,i,te),ae.push({event:Be,listeners:Ne}),Be.data=we)),hT(ae,t,G,i,te)}K0(ae,r)})}function Ml(t,r,i){return{instance:t,listener:r,currentTarget:i}}function Bu(t,r){for(var i=r+"Capture",c=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=La(t,i),f!=null&&c.unshift(Ml(t,f,m)),f=La(t,r),f!=null&&c.push(Ml(t,f,m))),t.tag===3)return c;t=t.return}return[]}function lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Q0(t,r,i,c,f){for(var m=r._reactName,b=[];i!==null&&i!==c;){var T=i,D=T.alternate,G=T.stateNode;if(T=T.tag,D!==null&&D===c)break;T!==5&&T!==26&&T!==27||G===null||(D=G,f?(G=La(i,m),G!=null&&b.unshift(Ml(i,G,D))):f||(G=La(i,m),G!=null&&b.push(Ml(i,G,D)))),i=i.return}b.length!==0&&t.push({event:r,listeners:b})}var gT=/\r\n?/g,pT=/\u0000|\uFFFD/g;function X0(t){return(typeof t=="string"?t:""+t).replace(gT,`
`).replace(pT,"")}function Z0(t,r){return r=X0(r),X0(t)===r}function qu(){}function xt(t,r,i,c,f,m){switch(i){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||er(t,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&er(t,""+c);break;case"className":Ir(t,"class",c);break;case"tabIndex":Ir(t,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ir(t,i,c);break;case"style":Qo(t,c,m);break;case"data":if(r!=="object"){Ir(t,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||i!=="href")){t.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(i);break}c=Ri(""+c),t.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(i==="formAction"?(r!=="input"&&xt(t,r,"name",f.name,f,null),xt(t,r,"formEncType",f.formEncType,f,null),xt(t,r,"formMethod",f.formMethod,f,null),xt(t,r,"formTarget",f.formTarget,f,null)):(xt(t,r,"encType",f.encType,f,null),xt(t,r,"method",f.method,f,null),xt(t,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){t.removeAttribute(i);break}c=Ri(""+c),t.setAttribute(i,c);break;case"onClick":c!=null&&(t.onclick=qu);break;case"onScroll":c!=null&&Fe("scroll",t);break;case"onScrollEnd":c!=null&&Fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"multiple":t.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":t.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){t.removeAttribute("xlink:href");break}i=Ri(""+c),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,""+c):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":c===!0?t.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?t.setAttribute(i,c):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?t.setAttribute(i,c):t.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?t.removeAttribute(i):t.setAttribute(i,c);break;case"popover":Fe("beforetoggle",t),Fe("toggle",t),Us(t,"popover",c);break;case"xlinkActuate":pn(t,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":pn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":pn(t,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":pn(t,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":pn(t,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":pn(t,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":pn(t,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":pn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":pn(t,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Us(t,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=gd.get(i)||i,Us(t,i,c))}}function Kf(t,r,i,c,f,m){switch(i){case"style":Qo(t,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"children":typeof c=="string"?er(t,c):(typeof c=="number"||typeof c=="bigint")&&er(t,""+c);break;case"onScroll":c!=null&&Fe("scroll",t);break;case"onScrollEnd":c!=null&&Fe("scrollend",t);break;case"onClick":c!=null&&(t.onclick=qu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!wi.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),r=i.slice(2,f?i.length-7:void 0),m=t[$t]||null,m=m!=null?m[i]:null,typeof m=="function"&&t.removeEventListener(r,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(r,c,f);break e}i in t?t[i]=c:c===!0?t.setAttribute(i,""):Us(t,i,c)}}}function xn(t,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",t),Fe("load",t);var c=!1,f=!1,m;for(m in i)if(i.hasOwnProperty(m)){var b=i[m];if(b!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:xt(t,r,m,b,i,null)}}f&&xt(t,r,"srcSet",i.srcSet,i,null),c&&xt(t,r,"src",i.src,i,null);return;case"input":Fe("invalid",t);var T=m=b=f=null,D=null,G=null;for(c in i)if(i.hasOwnProperty(c)){var te=i[c];if(te!=null)switch(c){case"name":f=te;break;case"type":b=te;break;case"checked":D=te;break;case"defaultChecked":G=te;break;case"value":m=te;break;case"defaultValue":T=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,r));break;default:xt(t,r,c,te,i,null)}}Oa(t,m,T,D,G,b,f,!1),Ni(t);return;case"select":Fe("invalid",t),c=b=m=null;for(f in i)if(i.hasOwnProperty(f)&&(T=i[f],T!=null))switch(f){case"value":m=T;break;case"defaultValue":b=T;break;case"multiple":c=T;default:xt(t,r,f,T,i,null)}r=m,i=b,t.multiple=!!c,r!=null?rs(t,!!c,r,!1):i!=null&&rs(t,!!c,i,!0);return;case"textarea":Fe("invalid",t),m=f=c=null;for(b in i)if(i.hasOwnProperty(b)&&(T=i[b],T!=null))switch(b){case"value":c=T;break;case"defaultValue":f=T;break;case"children":m=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:xt(t,r,b,T,i,null)}Va(t,c,f,m),Ni(t);return;case"option":for(D in i)if(i.hasOwnProperty(D)&&(c=i[D],c!=null))switch(D){case"selected":t.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:xt(t,r,D,c,i,null)}return;case"dialog":Fe("beforetoggle",t),Fe("toggle",t),Fe("cancel",t),Fe("close",t);break;case"iframe":case"object":Fe("load",t);break;case"video":case"audio":for(c=0;c<jl.length;c++)Fe(jl[c],t);break;case"image":Fe("error",t),Fe("load",t);break;case"details":Fe("toggle",t);break;case"embed":case"source":case"link":Fe("error",t),Fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in i)if(i.hasOwnProperty(G)&&(c=i[G],c!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:xt(t,r,G,c,i,null)}return;default:if(Xo(r)){for(te in i)i.hasOwnProperty(te)&&(c=i[te],c!==void 0&&Kf(t,r,te,c,i,void 0));return}}for(T in i)i.hasOwnProperty(T)&&(c=i[T],c!=null&&xt(t,r,T,c,i,null))}function yT(t,r,i,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,b=null,T=null,D=null,G=null,te=null;for(Y in i){var ae=i[Y];if(i.hasOwnProperty(Y)&&ae!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":D=ae;default:c.hasOwnProperty(Y)||xt(t,r,Y,null,c,ae)}}for(var K in c){var Y=c[K];if(ae=i[K],c.hasOwnProperty(K)&&(Y!=null||ae!=null))switch(K){case"type":m=Y;break;case"name":f=Y;break;case"checked":G=Y;break;case"defaultChecked":te=Y;break;case"value":b=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(a(137,r));break;default:Y!==ae&&xt(t,r,K,Y,c,ae)}}Gn(t,b,T,D,G,te,m,f);return;case"select":Y=b=T=K=null;for(m in i)if(D=i[m],i.hasOwnProperty(m)&&D!=null)switch(m){case"value":break;case"multiple":Y=D;default:c.hasOwnProperty(m)||xt(t,r,m,null,c,D)}for(f in c)if(m=c[f],D=i[f],c.hasOwnProperty(f)&&(m!=null||D!=null))switch(f){case"value":K=m;break;case"defaultValue":T=m;break;case"multiple":b=m;default:m!==D&&xt(t,r,f,m,c,D)}r=T,i=b,c=Y,K!=null?rs(t,!!i,K,!1):!!c!=!!i&&(r!=null?rs(t,!!i,r,!0):rs(t,!!i,i?[]:"",!1));return;case"textarea":Y=K=null;for(T in i)if(f=i[T],i.hasOwnProperty(T)&&f!=null&&!c.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:xt(t,r,T,null,c,f)}for(b in c)if(f=c[b],m=i[b],c.hasOwnProperty(b)&&(f!=null||m!=null))switch(b){case"value":K=f;break;case"defaultValue":Y=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==m&&xt(t,r,b,f,c,m)}vt(t,K,Y);return;case"option":for(var Ie in i)if(K=i[Ie],i.hasOwnProperty(Ie)&&K!=null&&!c.hasOwnProperty(Ie))switch(Ie){case"selected":t.selected=!1;break;default:xt(t,r,Ie,null,c,K)}for(D in c)if(K=c[D],Y=i[D],c.hasOwnProperty(D)&&K!==Y&&(K!=null||Y!=null))switch(D){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:xt(t,r,D,K,c,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in i)K=i[ke],i.hasOwnProperty(ke)&&K!=null&&!c.hasOwnProperty(ke)&&xt(t,r,ke,null,c,K);for(G in c)if(K=c[G],Y=i[G],c.hasOwnProperty(G)&&K!==Y&&(K!=null||Y!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,r));break;default:xt(t,r,G,K,c,Y)}return;default:if(Xo(r)){for(var bt in i)K=i[bt],i.hasOwnProperty(bt)&&K!==void 0&&!c.hasOwnProperty(bt)&&Kf(t,r,bt,void 0,c,K);for(te in c)K=c[te],Y=i[te],!c.hasOwnProperty(te)||K===Y||K===void 0&&Y===void 0||Kf(t,r,te,K,c,Y);return}}for(var U in i)K=i[U],i.hasOwnProperty(U)&&K!=null&&!c.hasOwnProperty(U)&&xt(t,r,U,null,c,K);for(ae in c)K=c[ae],Y=i[ae],!c.hasOwnProperty(ae)||K===Y||K==null&&Y==null||xt(t,r,ae,K,c,Y)}var Yf=null,Qf=null;function Hu(t){return t.nodeType===9?t:t.ownerDocument}function W0(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function J0(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Xf(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Zf=null;function vT(){var t=window.event;return t&&t.type==="popstate"?t===Zf?!1:(Zf=t,!0):(Zf=null,!1)}var ev=typeof setTimeout=="function"?setTimeout:void 0,_T=typeof clearTimeout=="function"?clearTimeout:void 0,tv=typeof Promise=="function"?Promise:void 0,xT=typeof queueMicrotask=="function"?queueMicrotask:typeof tv<"u"?function(t){return tv.resolve(null).then(t).catch(bT)}:ev;function bT(t){setTimeout(function(){throw t})}function sa(t){return t==="head"}function nv(t,r){var i=r,c=0,f=0;do{var m=i.nextSibling;if(t.removeChild(i),m&&m.nodeType===8)if(i=m.data,i==="/$"){if(0<c&&8>c){i=c;var b=t.ownerDocument;if(i&1&&Ol(b.documentElement),i&2&&Ol(b.body),i&4)for(i=b.head,Ol(i),b=i.firstChild;b;){var T=b.nextSibling,D=b.nodeName;b[Ia]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||i.removeChild(b),b=T}}if(f===0){t.removeChild(m),Hl(r);return}f--}else i==="$"||i==="$?"||i==="$!"?f++:c=i.charCodeAt(0)-48;else c=0;i=m}while(i);Hl(r)}function Wf(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Wf(i),zs(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function ET(t,r,i,c){for(;t.nodeType===1;){var f=i;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(c){if(!t[Ia])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=br(t.nextSibling),t===null)break}return null}function TT(t,r,i){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=br(t.nextSibling),t===null))return null;return t}function Jf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function wT(t,r){var i=t.ownerDocument;if(t.data!=="$?"||i.readyState==="complete")r();else{var c=function(){r(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),t._reactRetry=c}}function br(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var em=null;function rv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return t;r--}else i==="/$"&&r++}t=t.previousSibling}return null}function sv(t,r,i){switch(r=Hu(i),t){case"html":if(t=r.documentElement,!t)throw Error(a(452));return t;case"head":if(t=r.head,!t)throw Error(a(453));return t;case"body":if(t=r.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Ol(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);zs(t)}var ur=new Map,av=new Set;function Gu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Es=se.d;se.d={f:ST,r:AT,D:kT,C:NT,L:RT,m:CT,X:DT,S:IT,M:jT};function ST(){var t=Es.f(),r=Ou();return t||r}function AT(t){var r=Rr(t);r!==null&&r.tag===5&&r.type==="form"?Sy(r):Es.r(t)}var co=typeof document>"u"?null:document;function iv(t,r,i){var c=co;if(c&&typeof r=="string"&&r){var f=Kt(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),av.has(f)||(av.add(f),t={rel:t,crossOrigin:i,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),xn(r,"link",t),qt(r),c.head.appendChild(r)))}}function kT(t){Es.D(t),iv("dns-prefetch",t,null)}function NT(t,r){Es.C(t,r),iv("preconnect",t,r)}function RT(t,r,i){Es.L(t,r,i);var c=co;if(c&&t&&r){var f='link[rel="preload"][as="'+Kt(r)+'"]';r==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+Kt(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+Kt(i.imageSizes)+'"]')):f+='[href="'+Kt(t)+'"]';var m=f;switch(r){case"style":m=uo(t);break;case"script":m=ho(t)}ur.has(m)||(t=_({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:t,as:r},i),ur.set(m,t),c.querySelector(f)!==null||r==="style"&&c.querySelector(Vl(m))||r==="script"&&c.querySelector(Pl(m))||(r=c.createElement("link"),xn(r,"link",t),qt(r),c.head.appendChild(r)))}}function CT(t,r){Es.m(t,r);var i=co;if(i&&t){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Kt(c)+'"][href="'+Kt(t)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ho(t)}if(!ur.has(m)&&(t=_({rel:"modulepreload",href:t},r),ur.set(m,t),i.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Pl(m)))return}c=i.createElement("link"),xn(c,"link",t),qt(c),i.head.appendChild(c)}}}function IT(t,r,i){Es.S(t,r,i);var c=co;if(c&&t){var f=Dn(c).hoistableStyles,m=uo(t);r=r||"default";var b=f.get(m);if(!b){var T={loading:0,preload:null};if(b=c.querySelector(Vl(m)))T.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},i),(i=ur.get(m))&&tm(t,i);var D=b=c.createElement("link");qt(D),xn(D,"link",t),D._p=new Promise(function(G,te){D.onload=G,D.onerror=te}),D.addEventListener("load",function(){T.loading|=1}),D.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fu(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:T},f.set(m,b)}}}function DT(t,r){Es.X(t,r);var i=co;if(i&&t){var c=Dn(i).hoistableScripts,f=ho(t),m=c.get(f);m||(m=i.querySelector(Pl(f)),m||(t=_({src:t,async:!0},r),(r=ur.get(f))&&nm(t,r),m=i.createElement("script"),qt(m),xn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function jT(t,r){Es.M(t,r);var i=co;if(i&&t){var c=Dn(i).hoistableScripts,f=ho(t),m=c.get(f);m||(m=i.querySelector(Pl(f)),m||(t=_({src:t,async:!0,type:"module"},r),(r=ur.get(f))&&nm(t,r),m=i.createElement("script"),qt(m),xn(m,"link",t),i.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function ov(t,r,i,c){var f=(f=pe.current)?Gu(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=uo(i.href),i=Dn(f).hoistableStyles,c=i.get(r),c||(c={type:"style",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=uo(i.href);var m=Dn(f).hoistableStyles,b=m.get(t);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,b),(m=f.querySelector(Vl(t)))&&!m._p&&(b.instance=m,b.state.loading=5),ur.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ur.set(t,i),m||MT(f,t,i,b.state))),r&&c===null)throw Error(a(528,""));return b}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=ho(i),i=Dn(f).hoistableScripts,c=i.get(r),c||(c={type:"script",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function uo(t){return'href="'+Kt(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function lv(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function MT(t,r,i,c){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=t.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),xn(r,"link",i),qt(r),t.head.appendChild(r))}function ho(t){return'[src="'+Kt(t)+'"]'}function Pl(t){return"script[async]"+t}function cv(t,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var c=t.querySelector('style[data-href~="'+Kt(i.href)+'"]');if(c)return r.instance=c,qt(c),c;var f=_({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(t.ownerDocument||t).createElement("style"),qt(c),xn(c,"style",f),Fu(c,i.precedence,t),r.instance=c;case"stylesheet":f=uo(i.href);var m=t.querySelector(Vl(f));if(m)return r.state.loading|=4,r.instance=m,qt(m),m;c=lv(i),(f=ur.get(f))&&tm(c,f),m=(t.ownerDocument||t).createElement("link"),qt(m);var b=m;return b._p=new Promise(function(T,D){b.onload=T,b.onerror=D}),xn(m,"link",c),r.state.loading|=4,Fu(m,i.precedence,t),r.instance=m;case"script":return m=ho(i.src),(f=t.querySelector(Pl(m)))?(r.instance=f,qt(f),f):(c=i,(f=ur.get(m))&&(c=_({},i),nm(c,f)),t=t.ownerDocument||t,f=t.createElement("script"),qt(f),xn(f,"link",c),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Fu(c,i.precedence,t));return r.instance}function Fu(t,r,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,b=0;b<c.length;b++){var T=c[b];if(T.dataset.precedence===r)m=T;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(t,r.firstChild))}function tm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function nm(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var $u=null;function uv(t,r,i){if($u===null){var c=new Map,f=$u=new Map;f.set(i,c)}else f=$u,c=f.get(i),c||(c=new Map,f.set(i,c));if(c.has(t))return c;for(c.set(t,null),i=i.getElementsByTagName(t),f=0;f<i.length;f++){var m=i[f];if(!(m[Ia]||m[tn]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var b=m.getAttribute(r)||"";b=t+b;var T=c.get(b);T?T.push(m):c.set(b,[m])}}return c}function hv(t,r,i){t=t.ownerDocument||t,t.head.insertBefore(i,r==="title"?t.querySelector("head > title"):null)}function OT(t,r,i){if(i===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function dv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Ll=null;function VT(){}function PT(t,r,i){if(Ll===null)throw Error(a(475));var c=Ll;if(r.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=uo(i.href),m=t.querySelector(Vl(f));if(m){t=m._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(c.count++,c=Ku.bind(c),t.then(c,c)),r.state.loading|=4,r.instance=m,qt(m);return}m=t.ownerDocument||t,i=lv(i),(f=ur.get(f))&&tm(i,f),m=m.createElement("link"),qt(m);var b=m;b._p=new Promise(function(T,D){b.onload=T,b.onerror=D}),xn(m,"link",i),r.instance=m}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=Ku.bind(c),t.addEventListener("load",r),t.addEventListener("error",r))}}function LT(){if(Ll===null)throw Error(a(475));var t=Ll;return t.stylesheets&&t.count===0&&rm(t,t.stylesheets),0<t.count?function(r){var i=setTimeout(function(){if(t.stylesheets&&rm(t,t.stylesheets),t.unsuspend){var c=t.unsuspend;t.unsuspend=null,c()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(i)}}:null}function Ku(){if(this.count--,this.count===0){if(this.stylesheets)rm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Yu=null;function rm(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Yu=new Map,r.forEach(zT,t),Yu=null,Ku.call(t))}function zT(t,r){if(!(r.state.loading&4)){var i=Yu.get(t);if(i)var c=i.get(null);else{i=new Map,Yu.set(t,i);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var b=f[m];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),c=b)}c&&i.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),m=i.get(b)||c,m===c&&i.set(null,f),i.set(b,f),this.count++,c=Ku.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var zl={$$typeof:ce,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function UT(t,r,i,c,f,m,b,T){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hn(0),this.hiddenUpdates=Hn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function fv(t,r,i,c,f,m,b,T,D,G,te,ae){return t=new UT(t,r,i,b,T,D,G,ae),r=1,m===!0&&(r|=24),m=$n(3,null,null,r),t.current=m,m.stateNode=t,r=Pd(),r.refCount++,t.pooledCache=r,r.refCount++,m.memoizedState={element:c,isDehydrated:i,cache:r},Bd(m),t}function mv(t){return t?(t=qi,t):qi}function gv(t,r,i,c,f,m){f=mv(f),c.context===null?c.context=f:c.pendingContext=f,c=Fs(r),c.payload={element:i},m=m===void 0?null:m,m!==null&&(c.callback=m),i=$s(t,c,r),i!==null&&(Zn(i,t,r),gl(i,t,r))}function pv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function sm(t,r){pv(t,r),(t=t.alternate)&&pv(t,r)}function yv(t){if(t.tag===13){var r=Bi(t,67108864);r!==null&&Zn(r,t,67108864),sm(t,67108864)}}var Qu=!0;function BT(t,r,i,c){var f=F.T;F.T=null;var m=se.p;try{se.p=2,am(t,r,i,c)}finally{se.p=m,F.T=f}}function qT(t,r,i,c){var f=F.T;F.T=null;var m=se.p;try{se.p=8,am(t,r,i,c)}finally{se.p=m,F.T=f}}function am(t,r,i,c){if(Qu){var f=im(c);if(f===null)$f(t,r,c,Xu,i),_v(t,c);else if(GT(f,t,r,i,c))c.stopPropagation();else if(_v(t,c),r&4&&-1<HT.indexOf(t)){for(;f!==null;){var m=Rr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var b=Ct(m.pendingLanes);if(b!==0){var T=m;for(T.pendingLanes|=2,T.entangledLanes|=2;b;){var D=1<<31-ln(b);T.entanglements[1]|=D,b&=~D}Hr(m),(mt&6)===0&&(ju=xe()+500,Dl(0))}}break;case 13:T=Bi(m,2),T!==null&&Zn(T,m,2),Ou(),sm(m,2)}if(m=im(c),m===null&&$f(t,r,c,Xu,i),m===f)break;f=m}f!==null&&c.stopPropagation()}else $f(t,r,c,null,i)}}function im(t){return t=tr(t),om(t)}var Xu=null;function om(t){if(Xu=null,t=es(t),t!==null){var r=l(t);if(r===null)t=null;else{var i=r.tag;if(i===13){if(t=h(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Xu=t,null}function vv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case Ot:return 2;case De:return 8;case St:case He:return 32;case ht:return 268435456;default:return 32}default:return 32}}var lm=!1,aa=null,ia=null,oa=null,Ul=new Map,Bl=new Map,la=[],HT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _v(t,r){switch(t){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":Ul.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(r.pointerId)}}function ql(t,r,i,c,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:r,domEventName:i,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},r!==null&&(r=Rr(r),r!==null&&yv(r)),t):(t.eventSystemFlags|=c,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function GT(t,r,i,c,f){switch(r){case"focusin":return aa=ql(aa,t,r,i,c,f),!0;case"dragenter":return ia=ql(ia,t,r,i,c,f),!0;case"mouseover":return oa=ql(oa,t,r,i,c,f),!0;case"pointerover":var m=f.pointerId;return Ul.set(m,ql(Ul.get(m)||null,t,r,i,c,f)),!0;case"gotpointercapture":return m=f.pointerId,Bl.set(m,ql(Bl.get(m)||null,t,r,i,c,f)),!0}return!1}function xv(t){var r=es(t.target);if(r!==null){var i=l(r);if(i!==null){if(r=i.tag,r===13){if(r=h(i),r!==null){t.blockedOn=r,Oc(t.priority,function(){if(i.tag===13){var c=Xn();c=Vs(c);var f=Bi(i,c);f!==null&&Zn(f,i,c),sm(i,c)}});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=im(t.nativeEvent);if(i===null){i=t.nativeEvent;var c=new i.constructor(i.type,i);ss=c,i.target.dispatchEvent(c),ss=null}else return r=Rr(i),r!==null&&yv(r),t.blockedOn=i,!1;r.shift()}return!0}function bv(t,r,i){Zu(t)&&i.delete(r)}function FT(){lm=!1,aa!==null&&Zu(aa)&&(aa=null),ia!==null&&Zu(ia)&&(ia=null),oa!==null&&Zu(oa)&&(oa=null),Ul.forEach(bv),Bl.forEach(bv)}function Wu(t,r){t.blockedOn===r&&(t.blockedOn=null,lm||(lm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,FT)))}var Ju=null;function Ev(t){Ju!==t&&(Ju=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Ju===t&&(Ju=null);for(var r=0;r<t.length;r+=3){var i=t[r],c=t[r+1],f=t[r+2];if(typeof c!="function"){if(om(c||i)===null)continue;break}var m=Rr(i);m!==null&&(t.splice(r,3),r-=3,of(m,{pending:!0,data:f,method:i.method,action:c},c,f))}}))}function Hl(t){function r(D){return Wu(D,t)}aa!==null&&Wu(aa,t),ia!==null&&Wu(ia,t),oa!==null&&Wu(oa,t),Ul.forEach(r),Bl.forEach(r);for(var i=0;i<la.length;i++){var c=la[i];c.blockedOn===t&&(c.blockedOn=null)}for(;0<la.length&&(i=la[0],i.blockedOn===null);)xv(i),i.blockedOn===null&&la.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var f=i[c],m=i[c+1],b=f[$t]||null;if(typeof m=="function")b||Ev(i);else if(b){var T=null;if(m&&m.hasAttribute("formAction")){if(f=m,b=m[$t]||null)T=b.formAction;else if(om(f)!==null)continue}else T=b.action;typeof T=="function"?i[c+1]=T:(i.splice(c,3),c-=3),Ev(i)}}}function cm(t){this._internalRoot=t}eh.prototype.render=cm.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(a(409));var i=r.current,c=Xn();gv(i,c,t,r,null,null)},eh.prototype.unmount=cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;gv(t.current,2,null,t,null,null),Ou(),r[Jn]=null}};function eh(t){this._internalRoot=t}eh.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ps();t={blockedOn:null,target:t,priority:r};for(var i=0;i<la.length&&r!==0&&r<la[i].priority;i++);la.splice(i,0,t),i===0&&xv(t)}};var Tv=e.version;if(Tv!=="19.1.1")throw Error(a(527,Tv,"19.1.1"));se.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=p(r),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var $T={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Rt=th.inject($T),at=th}catch{}}return Fl.createRoot=function(t,r){if(!o(t))throw Error(a(299));var i=!1,c="",f=zy,m=Uy,b=By,T=null;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(T=r.unstable_transitionCallbacks)),r=fv(t,1,!1,null,null,i,c,f,m,b,T,null),t[Jn]=r.current,Ff(t),new cm(r)},Fl.hydrateRoot=function(t,r,i){if(!o(t))throw Error(a(299));var c=!1,f="",m=zy,b=Uy,T=By,D=null,G=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(T=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(D=i.unstable_transitionCallbacks),i.formState!==void 0&&(G=i.formState)),r=fv(t,1,!0,r,i??null,c,f,m,b,T,D,G),r.context=mv(null),i=r.current,c=Xn(),c=Vs(c),f=Fs(c),f.callback=null,$s(i,f,c),i=c,r.current.lanes=i,yt(r,i),Hr(r),t[Jn]=r.current,Ff(t),new eh(r)},Fl.version="19.1.1",Fl}var jv;function rw(){if(jv)return hm.exports;jv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),hm.exports=nw(),hm.exports}var sw=rw();const aw=YT(sw);var S=ig();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Mv="popstate";function iw(s={}){function e(a,o){let{pathname:l,search:h,hash:g}=a.location;return Im("",{pathname:l,search:h,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:ac(o)}return lw(e,n,null,s)}function Mt(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Sr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ow(){return Math.random().toString(36).substring(2,10)}function Ov(s,e){return{usr:s.state,key:s.key,idx:e}}function Im(s,e,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Do(e):e,state:n,key:e&&e.key||a||ow()}}function ac({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Do(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function lw(s,e,n,a={}){let{window:o=document.defaultView,v5Compat:l=!1}=a,h=o.history,g="POP",p=null,y=_();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function _(){return(h.state||{idx:null}).idx}function E(){g="POP";let j=_(),Z=j==null?null:j-y;y=j,p&&p({action:g,location:z.location,delta:Z})}function A(j,Z){g="PUSH";let X=Im(z.location,j,Z);y=_()+1;let ce=Ov(X,y),ue=z.createHref(X);try{h.pushState(ce,"",ue)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(ue)}l&&p&&p({action:g,location:z.location,delta:1})}function V(j,Z){g="REPLACE";let X=Im(z.location,j,Z);y=_();let ce=Ov(X,y),ue=z.createHref(X);h.replaceState(ce,"",ue),l&&p&&p({action:g,location:z.location,delta:0})}function B(j){return cw(j)}let z={get action(){return g},get location(){return s(o,h)},listen(j){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Mv,E),p=j,()=>{o.removeEventListener(Mv,E),p=null}},createHref(j){return e(o,j)},createURL:B,encodeLocation(j){let Z=B(j);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:A,replace:V,go(j){return h.go(j)}};return z}function cw(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Mt(n,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:ac(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function Ex(s,e,n="/"){return uw(s,e,n,!1)}function uw(s,e,n,a){let o=typeof e=="string"?Do(e):e,l=Cs(o.pathname||"/",n);if(l==null)return null;let h=Tx(s);hw(h);let g=null;for(let p=0;g==null&&p<h.length;++p){let y=Ew(l);g=xw(h[p],y,a)}return g}function Tx(s,e=[],n=[],a="",o=!1){let l=(h,g,p=o,y)=>{let _={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:g,route:h};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(a)&&p)return;Mt(_.relativePath.startsWith(a),`Absolute route path "${_.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(a.length)}let E=Ss([a,_.relativePath]),A=n.concat(_);h.children&&h.children.length>0&&(Mt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Tx(h.children,e,A,E,p)),!(h.path==null&&!h.index)&&e.push({path:E,score:vw(E,h.index),routesMeta:A})};return s.forEach((h,g)=>{if(h.path===""||!h.path?.includes("?"))l(h,g);else for(let p of wx(h.path))l(h,g,!0,p)}),e}function wx(s){let e=s.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(a.length===0)return o?[l,""]:[l];let h=wx(a.join("/")),g=[];return g.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&g.push(...h),g.map(p=>s.startsWith("/")&&p===""?"/":p)}function hw(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:_w(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var dw=/^:[\w-]+$/,fw=3,mw=2,gw=1,pw=10,yw=-2,Vv=s=>s==="*";function vw(s,e){let n=s.split("/"),a=n.length;return n.some(Vv)&&(a+=yw),e&&(a+=mw),n.filter(o=>!Vv(o)).reduce((o,l)=>o+(dw.test(l)?fw:l===""?gw:pw),a)}function _w(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function xw(s,e,n=!1){let{routesMeta:a}=s,o={},l="/",h=[];for(let g=0;g<a.length;++g){let p=a[g],y=g===a.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=Eh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),A=p.route;if(!E&&y&&n&&!a[a.length-1].route.index&&(E=Eh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:Ss([l,E.pathname]),pathnameBase:Aw(Ss([l,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(l=Ss([l,E.pathnameBase]))}return h}function Eh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=bw(s.path,s.caseSensitive,s.end),o=e.match(n);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:a.reduce((y,{paramName:_,isOptional:E},A)=>{if(_==="*"){let B=g[A]||"";h=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const V=g[A];return E&&!V?y[_]=void 0:y[_]=(V||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:s}}function bw(s,e=!1,n=!0){Sr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,p)=>(a.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function Ew(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Cs(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}function Tw(s,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof s=="string"?Do(s):s;return{pathname:n?n.startsWith("/")?n:ww(n,e):e,search:kw(a),hash:Nw(o)}}function ww(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function pm(s,e,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Sw(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function og(s){let e=Sw(s);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function lg(s,e,n,a=!1){let o;typeof s=="string"?o=Do(s):(o={...s},Mt(!o.pathname||!o.pathname.includes("?"),pm("?","pathname","search",o)),Mt(!o.pathname||!o.pathname.includes("#"),pm("#","pathname","hash",o)),Mt(!o.search||!o.search.includes("#"),pm("#","search","hash",o)));let l=s===""||o.pathname==="",h=l?"/":o.pathname,g;if(h==null)g=n;else{let E=e.length-1;if(!a&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),E-=1;o.pathname=A.join("/")}g=E>=0?e[E]:"/"}let p=Tw(o,g),y=h&&h!=="/"&&h.endsWith("/"),_=(l||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}var Ss=s=>s.join("/").replace(/\/\/+/g,"/"),Aw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),kw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Nw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Rw(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var Sx=["POST","PUT","PATCH","DELETE"];new Set(Sx);var Cw=["GET",...Sx];new Set(Cw);var jo=S.createContext(null);jo.displayName="DataRouter";var Bh=S.createContext(null);Bh.displayName="DataRouterState";S.createContext(!1);var Ax=S.createContext({isTransitioning:!1});Ax.displayName="ViewTransition";var Iw=S.createContext(new Map);Iw.displayName="Fetchers";var Dw=S.createContext(null);Dw.displayName="Await";var Nr=S.createContext(null);Nr.displayName="Navigation";var xc=S.createContext(null);xc.displayName="Location";var Wr=S.createContext({outlet:null,matches:[],isDataRoute:!1});Wr.displayName="Route";var cg=S.createContext(null);cg.displayName="RouteError";function jw(s,{relative:e}={}){Mt(Mo(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=S.useContext(Nr),{hash:o,pathname:l,search:h}=bc(s,{relative:e}),g=l;return n!=="/"&&(g=l==="/"?n:Ss([n,l])),a.createHref({pathname:g,search:h,hash:o})}function Mo(){return S.useContext(xc)!=null}function Na(){return Mt(Mo(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(xc).location}var kx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Nx(s){S.useContext(Nr).static||S.useLayoutEffect(s)}function Rx(){let{isDataRoute:s}=S.useContext(Wr);return s?$w():Mw()}function Mw(){Mt(Mo(),"useNavigate() may be used only in the context of a <Router> component.");let s=S.useContext(jo),{basename:e,navigator:n}=S.useContext(Nr),{matches:a}=S.useContext(Wr),{pathname:o}=Na(),l=JSON.stringify(og(a)),h=S.useRef(!1);return Nx(()=>{h.current=!0}),S.useCallback((p,y={})=>{if(Sr(h.current,kx),!h.current)return;if(typeof p=="number"){n.go(p);return}let _=lg(p,JSON.parse(l),o,y.relative==="path");s==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ss([e,_.pathname])),(y.replace?n.replace:n.push)(_,y.state,y)},[e,n,l,o,s])}S.createContext(null);function bc(s,{relative:e}={}){let{matches:n}=S.useContext(Wr),{pathname:a}=Na(),o=JSON.stringify(og(n));return S.useMemo(()=>lg(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function Ow(s,e){return Cx(s,e)}function Cx(s,e,n,a,o){Mt(Mo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=S.useContext(Nr),{matches:h}=S.useContext(Wr),g=h[h.length-1],p=g?g.params:{},y=g?g.pathname:"/",_=g?g.pathnameBase:"/",E=g&&g.route;{let X=E&&E.path||"";Ix(y,!E||X.endsWith("*")||X.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${X}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${X}"> to <Route path="${X==="/"?"*":`${X}/*`}">.`)}let A=Na(),V;if(e){let X=typeof e=="string"?Do(e):e;Mt(_==="/"||X.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${X.pathname}" was given in the \`location\` prop.`),V=X}else V=A;let B=V.pathname||"/",z=B;if(_!=="/"){let X=_.replace(/^\//,"").split("/");z="/"+B.replace(/^\//,"").split("/").slice(X.length).join("/")}let j=Ex(s,{pathname:z});Sr(E||j!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),Sr(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Z=Uw(j&&j.map(X=>Object.assign({},X,{params:Object.assign({},p,X.params),pathname:Ss([_,l.encodeLocation?l.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?_:Ss([_,l.encodeLocation?l.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),h,n,a,o);return e&&Z?S.createElement(xc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},Z):Z}function Vw(){let s=Fw(),e=Rw(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",s),h=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:l},"ErrorBoundary")," or"," ",S.createElement("code",{style:l},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:o},n):null,h)}var Pw=S.createElement(Vw,null),Lw=class extends S.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.unstable_onError?this.props.unstable_onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?S.createElement(Wr.Provider,{value:this.props.routeContext},S.createElement(cg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function zw({routeContext:s,match:e,children:n}){let a=S.useContext(jo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Wr.Provider,{value:s},n)}function Uw(s,e=[],n=null,a=null,o=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let l=s,h=n?.errors;if(h!=null){let y=l.findIndex(_=>_.route.id&&h?.[_.route.id]!==void 0);Mt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let g=!1,p=-1;if(n)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=y),_.route.id){let{loaderData:E,errors:A}=n,V=_.route.loader&&!E.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||V){g=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((y,_,E)=>{let A,V=!1,B=null,z=null;n&&(A=h&&_.route.id?h[_.route.id]:void 0,B=_.route.errorElement||Pw,g&&(p<0&&E===0?(Ix("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,z=null):p===E&&(V=!0,z=_.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,E+1)),Z=()=>{let X;return A?X=B:V?X=z:_.route.Component?X=S.createElement(_.route.Component,null):_.route.element?X=_.route.element:X=y,S.createElement(zw,{match:_,routeContext:{outlet:y,matches:j,isDataRoute:n!=null},children:X})};return n&&(_.route.ErrorBoundary||_.route.errorElement||E===0)?S.createElement(Lw,{location:n.location,revalidation:n.revalidation,component:B,error:A,children:Z(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:a}):Z()},null)}function ug(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Bw(s){let e=S.useContext(jo);return Mt(e,ug(s)),e}function qw(s){let e=S.useContext(Bh);return Mt(e,ug(s)),e}function Hw(s){let e=S.useContext(Wr);return Mt(e,ug(s)),e}function hg(s){let e=Hw(s),n=e.matches[e.matches.length-1];return Mt(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function Gw(){return hg("useRouteId")}function Fw(){let s=S.useContext(cg),e=qw("useRouteError"),n=hg("useRouteError");return s!==void 0?s:e.errors?.[n]}function $w(){let{router:s}=Bw("useNavigate"),e=hg("useNavigate"),n=S.useRef(!1);return Nx(()=>{n.current=!0}),S.useCallback(async(o,l={})=>{Sr(n.current,kx),n.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...l}))},[s,e])}var Pv={};function Ix(s,e,n){!e&&!Pv[s]&&(Pv[s]=!0,Sr(!1,n))}S.memo(Kw);function Kw({routes:s,future:e,state:n,unstable_onError:a}){return Cx(s,void 0,n,a,e)}function ic({to:s,replace:e,state:n,relative:a}){Mt(Mo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=S.useContext(Nr);Sr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=S.useContext(Wr),{pathname:h}=Na(),g=Rx(),p=lg(s,og(l),h,a==="path"),y=JSON.stringify(p);return S.useEffect(()=>{g(JSON.parse(y),{replace:e,state:n,relative:a})},[g,y,a,e,n]),null}function fo(s){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Yw({basename:s="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:l=!1}){Mt(!Mo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=s.replace(/^\/*/,"/"),g=S.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof n=="string"&&(n=Do(n));let{pathname:p="/",search:y="",hash:_="",state:E=null,key:A="default"}=n,V=S.useMemo(()=>{let B=Cs(p,h);return B==null?null:{location:{pathname:B,search:y,hash:_,state:E,key:A},navigationType:a}},[h,p,y,_,E,A,a]);return Sr(V!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:S.createElement(Nr.Provider,{value:g},S.createElement(xc.Provider,{children:e,value:V}))}function Qw({children:s,location:e}){return Ow(Dm(s),e)}function Dm(s,e=[]){let n=[];return S.Children.forEach(s,(a,o)=>{if(!S.isValidElement(a))return;let l=[...e,o];if(a.type===S.Fragment){n.push.apply(n,Dm(a.props.children,l));return}Mt(a.type===fo,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!a.props.index||!a.props.children,"An index route cannot have child routes.");let h={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=Dm(a.props.children,l)),n.push(h)}),n}var uh="get",hh="application/x-www-form-urlencoded";function qh(s){return s!=null&&typeof s.tagName=="string"}function Xw(s){return qh(s)&&s.tagName.toLowerCase()==="button"}function Zw(s){return qh(s)&&s.tagName.toLowerCase()==="form"}function Ww(s){return qh(s)&&s.tagName.toLowerCase()==="input"}function Jw(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function eS(s,e){return s.button===0&&(!e||e==="_self")&&!Jw(s)}var nh=null;function tS(){if(nh===null)try{new FormData(document.createElement("form"),0),nh=!1}catch{nh=!0}return nh}var nS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ym(s){return s!=null&&!nS.has(s)?(Sr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hh}"`),null):s}function rS(s,e){let n,a,o,l,h;if(Zw(s)){let g=s.getAttribute("action");a=g?Cs(g,e):null,n=s.getAttribute("method")||uh,o=ym(s.getAttribute("enctype"))||hh,l=new FormData(s)}else if(Xw(s)||Ww(s)&&(s.type==="submit"||s.type==="image")){let g=s.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||g.getAttribute("action");if(a=p?Cs(p,e):null,n=s.getAttribute("formmethod")||g.getAttribute("method")||uh,o=ym(s.getAttribute("formenctype"))||ym(g.getAttribute("enctype"))||hh,l=new FormData(g,s),!tS()){let{name:y,type:_,value:E}=s;if(_==="image"){let A=y?`${y}.`:"";l.append(`${A}x`,"0"),l.append(`${A}y`,"0")}else y&&l.append(y,E)}}else{if(qh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=uh,a=null,o=hh,h=s}return l&&o==="text/plain"&&(h=l,l=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:l,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function dg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function sS(s,e,n){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${n}`:e&&Cs(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function aS(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function oS(s,e,n){let a=await Promise.all(s.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await aS(l,n);return h.links?h.links():[]}return[]}));return hS(a.flat(1).filter(iS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Lv(s,e,n,a,o,l){let h=(p,y)=>n[y]?p.route.id!==n[y].route.id:!0,g=(p,y)=>n[y].pathname!==p.pathname||n[y].route.path?.endsWith("*")&&n[y].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,y)=>h(p,y)||g(p,y)):l==="data"?e.filter((p,y)=>{let _=a.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(h(p,y)||g(p,y))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function lS(s,e,{includeHydrateFallback:n}={}){return cS(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function cS(s){return[...new Set(s)]}function uS(s){let e={},n=Object.keys(s).sort();for(let a of n)e[a]=s[a];return e}function hS(s,e){let n=new Set;return new Set(e),s.reduce((a,o)=>{let l=JSON.stringify(uS(o));return n.has(l)||(n.add(l),a.push({key:l,link:o})),a},[])}function Dx(){let s=S.useContext(jo);return dg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function dS(){let s=S.useContext(Bh);return dg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var fg=S.createContext(void 0);fg.displayName="FrameworkContext";function jx(){let s=S.useContext(fg);return dg(s,"You must render this element inside a <HydratedRouter> element"),s}function fS(s,e){let n=S.useContext(fg),[a,o]=S.useState(!1),[l,h]=S.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:y,onMouseLeave:_,onTouchStart:E}=e,A=S.useRef(null);S.useEffect(()=>{if(s==="render"&&h(!0),s==="viewport"){let z=Z=>{Z.forEach(X=>{h(X.isIntersecting)})},j=new IntersectionObserver(z,{threshold:.5});return A.current&&j.observe(A.current),()=>{j.disconnect()}}},[s]),S.useEffect(()=>{if(a){let z=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(z)}}},[a]);let V=()=>{o(!0)},B=()=>{o(!1),h(!1)};return n?s!=="intent"?[l,A,{}]:[l,A,{onFocus:$l(g,V),onBlur:$l(p,B),onMouseEnter:$l(y,V),onMouseLeave:$l(_,B),onTouchStart:$l(E,V)}]:[!1,A,{}]}function $l(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function mS({page:s,...e}){let{router:n}=Dx(),a=S.useMemo(()=>Ex(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?S.createElement(pS,{page:s,matches:a,...e}):null}function gS(s){let{manifest:e,routeModules:n}=jx(),[a,o]=S.useState([]);return S.useEffect(()=>{let l=!1;return oS(s,e,n).then(h=>{l||o(h)}),()=>{l=!0}},[s,e,n]),a}function pS({page:s,matches:e,...n}){let a=Na(),{manifest:o,routeModules:l}=jx(),{basename:h}=Dx(),{loaderData:g,matches:p}=dS(),y=S.useMemo(()=>Lv(s,e,p,o,a,"data"),[s,e,p,o,a]),_=S.useMemo(()=>Lv(s,e,p,o,a,"assets"),[s,e,p,o,a]),E=S.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let B=new Set,z=!1;if(e.forEach(Z=>{let X=o.routes[Z.route.id];!X||!X.hasLoader||(!y.some(ce=>ce.route.id===Z.route.id)&&Z.route.id in g&&l[Z.route.id]?.shouldRevalidate||X.hasClientLoader?z=!0:B.add(Z.route.id))}),B.size===0)return[];let j=sS(s,h,"data");return z&&B.size>0&&j.searchParams.set("_routes",e.filter(Z=>B.has(Z.route.id)).map(Z=>Z.route.id).join(",")),[j.pathname+j.search]},[h,g,a,o,y,e,s,l]),A=S.useMemo(()=>lS(_,o),[_,o]),V=gS(_);return S.createElement(S.Fragment,null,E.map(B=>S.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),A.map(B=>S.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),V.map(({key:B,link:z})=>S.createElement("link",{key:B,nonce:n.nonce,...z})))}function yS(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Mx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Mx&&(window.__reactRouterVersion="7.9.1")}catch{}function vS({basename:s,children:e,window:n}){let a=S.useRef();a.current==null&&(a.current=iw({window:n,v5Compat:!0}));let o=a.current,[l,h]=S.useState({action:o.action,location:o.location}),g=S.useCallback(p=>{S.startTransition(()=>h(p))},[h]);return S.useLayoutEffect(()=>o.listen(g),[o,g]),S.createElement(Yw,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:o})}var Ox=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vx=S.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:l,replace:h,state:g,target:p,to:y,preventScrollReset:_,viewTransition:E,...A},V){let{basename:B}=S.useContext(Nr),z=typeof y=="string"&&Ox.test(y),j,Z=!1;if(typeof y=="string"&&z&&(j=y,Mx))try{let C=new URL(window.location.href),M=y.startsWith("//")?new URL(C.protocol+y):new URL(y),P=Cs(M.pathname,B);M.origin===C.origin&&P!=null?y=P+M.search+M.hash:Z=!0}catch{Sr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let X=jw(y,{relative:o}),[ce,ue,le]=fS(a,A),he=ES(y,{replace:h,state:g,target:p,preventScrollReset:_,relative:o,viewTransition:E});function O(C){e&&e(C),C.defaultPrevented||he(C)}let R=S.createElement("a",{...A,...le,href:j||X,onClick:Z||l?e:O,ref:yS(V,ue),target:p,"data-discover":!z&&n==="render"?"true":void 0});return ce&&!z?S.createElement(S.Fragment,null,R,S.createElement(mS,{page:X})):R});Vx.displayName="Link";var _S=S.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:l,to:h,viewTransition:g,children:p,...y},_){let E=bc(h,{relative:y.relative}),A=Na(),V=S.useContext(Bh),{navigator:B,basename:z}=S.useContext(Nr),j=V!=null&&kS(E)&&g===!0,Z=B.encodeLocation?B.encodeLocation(E).pathname:E.pathname,X=A.pathname,ce=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;n||(X=X.toLowerCase(),ce=ce?ce.toLowerCase():null,Z=Z.toLowerCase()),ce&&z&&(ce=Cs(ce,z)||ce);const ue=Z!=="/"&&Z.endsWith("/")?Z.length-1:Z.length;let le=X===Z||!o&&X.startsWith(Z)&&X.charAt(ue)==="/",he=ce!=null&&(ce===Z||!o&&ce.startsWith(Z)&&ce.charAt(Z.length)==="/"),O={isActive:le,isPending:he,isTransitioning:j},R=le?e:void 0,C;typeof a=="function"?C=a(O):C=[a,le?"active":null,he?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(O):l;return S.createElement(Vx,{...y,"aria-current":R,className:C,ref:_,style:M,to:h,viewTransition:g},typeof p=="function"?p(O):p)});_S.displayName="NavLink";var xS=S.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:l,method:h=uh,action:g,onSubmit:p,relative:y,preventScrollReset:_,viewTransition:E,...A},V)=>{let B=SS(),z=AS(g,{relative:y}),j=h.toLowerCase()==="get"?"get":"post",Z=typeof g=="string"&&Ox.test(g),X=ce=>{if(p&&p(ce),ce.defaultPrevented)return;ce.preventDefault();let ue=ce.nativeEvent.submitter,le=ue?.getAttribute("formmethod")||h;B(ue||ce.currentTarget,{fetcherKey:e,method:le,navigate:n,replace:o,state:l,relative:y,preventScrollReset:_,viewTransition:E})};return S.createElement("form",{ref:V,method:j,action:z,onSubmit:a?p:X,...A,"data-discover":!Z&&s==="render"?"true":void 0})});xS.displayName="Form";function bS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Px(s){let e=S.useContext(jo);return Mt(e,bS(s)),e}function ES(s,{target:e,replace:n,state:a,preventScrollReset:o,relative:l,viewTransition:h}={}){let g=Rx(),p=Na(),y=bc(s,{relative:l});return S.useCallback(_=>{if(eS(_,e)){_.preventDefault();let E=n!==void 0?n:ac(p)===ac(y);g(s,{replace:E,state:a,preventScrollReset:o,relative:l,viewTransition:h})}},[p,g,y,n,a,e,s,o,l,h])}var TS=0,wS=()=>`__${String(++TS)}__`;function SS(){let{router:s}=Px("useSubmit"),{basename:e}=S.useContext(Nr),n=Gw();return S.useCallback(async(a,o={})=>{let{action:l,method:h,encType:g,formData:p,body:y}=rS(a,e);if(o.navigate===!1){let _=o.fetcherKey||wS();await s.fetch(_,n,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||g,flushSync:o.flushSync})}else await s.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,n])}function AS(s,{relative:e}={}){let{basename:n}=S.useContext(Nr),a=S.useContext(Wr);Mt(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),l={...bc(s||".",{relative:e})},h=Na();if(s==null){l.search=h.search;let g=new URLSearchParams(l.search),p=g.getAll("index");if(p.some(_=>_==="")){g.delete("index"),p.filter(E=>E).forEach(E=>g.append("index",E));let _=g.toString();l.search=_?`?${_}`:""}}return(!s||s===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:Ss([n,l.pathname])),ac(l)}function kS(s,{relative:e}={}){let n=S.useContext(Ax);Mt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Px("useViewTransitionState"),o=bc(s,{relative:e});if(!n.isTransitioning)return!1;let l=Cs(n.currentLocation.pathname,a)||n.currentLocation.pathname,h=Cs(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Eh(o.pathname,h)!=null||Eh(o.pathname,l)!=null}const NS=()=>{};var zv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx=function(s){const e=[];let n=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},RS=function(s){const e=[];let n=0,a=0;for(;n<s.length;){const o=s[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[n++];e[a++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[n++],h=s[n++],g=s[n++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|g&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=s[n++],h=s[n++];e[a++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},zx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const l=s[o],h=o+1<s.length,g=h?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,_=l>>2,E=(l&3)<<4|g>>4;let A=(g&15)<<2|y>>6,V=y&63;p||(V=64,h||(A=64)),a.push(n[_],n[E],n[A],n[V])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Lx(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):RS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const l=n[s.charAt(o++)],g=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const E=o<s.length?n[s.charAt(o)]:64;if(++o,l==null||g==null||y==null||E==null)throw new CS;const A=l<<2|g>>4;if(a.push(A),y!==64){const V=g<<4&240|y>>2;if(a.push(V),E!==64){const B=y<<6&192|E;a.push(B)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class CS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IS=function(s){const e=Lx(s);return zx.encodeByteArray(e,!0)},Ux=function(s){return IS(s).replace(/\./g,"")},Bx=function(s){try{return zx.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=()=>DS().__FIREBASE_DEFAULTS__,MS=()=>{if(typeof process>"u"||typeof zv>"u")return;const s=zv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},OS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&Bx(s[1]);return e&&JSON.parse(e)},Hh=()=>{try{return NS()||jS()||MS()||OS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},VS=s=>Hh()?.emulatorHosts?.[s],qx=()=>Hh()?.config,Hx=s=>Hh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gx(s){return(await fetch(s,{credentials:"include"})).ok}const Jl={};function LS(){const s={prod:[],emulator:[]};for(const e of Object.keys(Jl))Jl[e]?s.emulator.push(e):s.prod.push(e);return s}function zS(s){let e=document.getElementById(s),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),n=!0),{created:n,element:e}}let Uv=!1;function US(s,e){if(typeof window>"u"||typeof document>"u"||!Oo(window.location.host)||Jl[s]===e||Jl[s]||Uv)return;Jl[s]=e;function n(A){return`__firebase__banner__${A}`}const a="__firebase__banner",l=LS().prod.length>0;function h(){const A=document.getElementById(a);A&&A.remove()}function g(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,V){A.setAttribute("width","24"),A.setAttribute("id",V),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Uv=!0,h()},A}function _(A,V){A.setAttribute("id",V),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function E(){const A=zS(a),V=n("text"),B=document.getElementById(V)||document.createElement("span"),z=n("learnmore"),j=document.getElementById(z)||document.createElement("a"),Z=n("preprendIcon"),X=document.getElementById(Z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const ce=A.element;g(ce),_(j,z);const ue=y();p(X,Z),ce.append(X,B,j,ue),document.body.appendChild(ce)}l?(B.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function qS(){const s=Hh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GS(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function FS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $S(){const s=Cn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function KS(){return!qS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YS(){try{return typeof indexedDB=="object"}catch{return!1}}function QS(){return new Promise((s,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="FirebaseError";class Os extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=XS,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ec.prototype.create)}}class Ec{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?ZS(l,a):"Error",g=`${this.serviceName}: ${h} (${o}).`;return new Os(o,g,a)}}function ZS(s,e){return s.replace(WS,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const WS=/\{\$([^}]+)}/g;function JS(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ci(s,e){if(s===e)return!0;const n=Object.keys(s),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const l=s[o],h=e[o];if(Bv(l)&&Bv(h)){if(!ci(l,h))return!1}else if(l!==h)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function Bv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(s){const e=[];for(const[n,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Kl(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,l]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Yl(s){const e=s.indexOf("?");if(!e)return"";const n=s.indexOf("#",e);return s.substring(e,n>0?n:void 0)}function eA(s,e){const n=new tA(s,e);return n.subscribe.bind(n)}class tA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");nA(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=vm),o.error===void 0&&(o.error=vm),o.complete===void 0&&(o.complete=vm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nA(s,e){if(typeof s!="object"||s===null)return!1;for(const n of e)if(n in s&&typeof s[n]=="function")return!0;return!1}function vm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(s){return s&&s._delegate?s._delegate:s}class ui{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new PS;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(aA(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:o});a.resolve(l)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[l,h]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(l);a===g&&h.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const l=this.instances.get(a);return l&&e(l,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:sA(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sA(s){return s===ii?void 0:s}function aA(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ye||(Ye={}));const oA={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},lA=Ye.INFO,cA={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},uA=(s,e,...n)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=cA[e];if(o)console[o](`[${a}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mg{constructor(e){this.name=e,this._logLevel=lA,this._logHandler=uA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const hA=(s,e)=>e.some(n=>s instanceof n);let qv,Hv;function dA(){return qv||(qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fA(){return Hv||(Hv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fx=new WeakMap,jm=new WeakMap,$x=new WeakMap,_m=new WeakMap,gg=new WeakMap;function mA(s){const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",h)},l=()=>{n(pa(s.result)),o()},h=()=>{a(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Fx.set(n,s)}).catch(()=>{}),gg.set(e,s),e}function gA(s){if(jm.has(s))return;const e=new Promise((n,a)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",h),s.removeEventListener("abort",h)},l=()=>{n(),o()},h=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",h),s.addEventListener("abort",h)});jm.set(s,e)}let Mm={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return jm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||$x.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pa(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function pA(s){Mm=s(Mm)}function yA(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=s.call(xm(this),e,...n);return $x.set(a,e.sort?e.sort():[e]),pa(a)}:fA().includes(s)?function(...e){return s.apply(xm(this),e),pa(Fx.get(this))}:function(...e){return pa(s.apply(xm(this),e))}}function vA(s){return typeof s=="function"?yA(s):(s instanceof IDBTransaction&&gA(s),hA(s,dA())?new Proxy(s,Mm):s)}function pa(s){if(s instanceof IDBRequest)return mA(s);if(_m.has(s))return _m.get(s);const e=vA(s);return e!==s&&(_m.set(s,e),gg.set(e,s)),e}const xm=s=>gg.get(s);function _A(s,e,{blocked:n,upgrade:a,blocking:o,terminated:l}={}){const h=indexedDB.open(s,e),g=pa(h);return a&&h.addEventListener("upgradeneeded",p=>{a(pa(h.result),p.oldVersion,p.newVersion,pa(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),g.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),g}const xA=["get","getKey","getAll","getAllKeys","count"],bA=["put","add","delete","clear"],bm=new Map;function Gv(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(bm.get(e))return bm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=bA.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||xA.includes(n)))return;const l=async function(h,...g){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(g.shift())),(await Promise.all([y[n](...g),o&&p.done]))[0]};return bm.set(e,l),l}pA(s=>({...s,get:(e,n,a)=>Gv(e,n)||s.get(e,n,a),has:(e,n)=>!!Gv(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TA(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function TA(s){return s.getComponent()?.type==="VERSION"}const Om="@firebase/app",Fv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new mg("@firebase/app"),wA="@firebase/app-compat",SA="@firebase/analytics-compat",AA="@firebase/analytics",kA="@firebase/app-check-compat",NA="@firebase/app-check",RA="@firebase/auth",CA="@firebase/auth-compat",IA="@firebase/database",DA="@firebase/data-connect",jA="@firebase/database-compat",MA="@firebase/functions",OA="@firebase/functions-compat",VA="@firebase/installations",PA="@firebase/installations-compat",LA="@firebase/messaging",zA="@firebase/messaging-compat",UA="@firebase/performance",BA="@firebase/performance-compat",qA="@firebase/remote-config",HA="@firebase/remote-config-compat",GA="@firebase/storage",FA="@firebase/storage-compat",$A="@firebase/firestore",KA="@firebase/ai",YA="@firebase/firestore-compat",QA="firebase",XA="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm="[DEFAULT]",ZA={[Om]:"fire-core",[wA]:"fire-core-compat",[AA]:"fire-analytics",[SA]:"fire-analytics-compat",[NA]:"fire-app-check",[kA]:"fire-app-check-compat",[RA]:"fire-auth",[CA]:"fire-auth-compat",[IA]:"fire-rtdb",[DA]:"fire-data-connect",[jA]:"fire-rtdb-compat",[MA]:"fire-fn",[OA]:"fire-fn-compat",[VA]:"fire-iid",[PA]:"fire-iid-compat",[LA]:"fire-fcm",[zA]:"fire-fcm-compat",[UA]:"fire-perf",[BA]:"fire-perf-compat",[qA]:"fire-rc",[HA]:"fire-rc-compat",[GA]:"fire-gcs",[FA]:"fire-gcs-compat",[$A]:"fire-fst",[YA]:"fire-fst-compat",[KA]:"fire-vertex","fire-js":"fire-js",[QA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oc=new Map,WA=new Map,Pm=new Map;function $v(s,e){try{s.container.addComponent(e)}catch(n){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function wo(s){const e=s.name;if(Pm.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;Pm.set(e,s);for(const n of oc.values())$v(n,s);for(const n of WA.values())$v(n,s);return!0}function pg(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}function dr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new Ec("app","Firebase",JA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=XA;function Kx(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const a={name:Vm,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw ya.create("bad-app-name",{appName:String(o)});if(n||(n=qx()),!n)throw ya.create("no-options");const l=oc.get(o);if(l){if(ci(n,l.options)&&ci(a,l.config))return l;throw ya.create("duplicate-app",{appName:o})}const h=new iA(o);for(const p of Pm.values())h.addComponent(p);const g=new ek(n,a,h);return oc.set(o,g),g}function Yx(s=Vm){const e=oc.get(s);if(!e&&s===Vm&&qx())return Kx();if(!e)throw ya.create("no-app",{appName:s});return e}function tk(){return Array.from(oc.values())}function va(s,e,n){let a=ZA[s]??s;n&&(a+=`-${n}`);const o=a.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(h.join(" "));return}wo(new ui(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="firebase-heartbeat-database",rk=1,lc="firebase-heartbeat-store";let Em=null;function Qx(){return Em||(Em=_A(nk,rk,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(lc)}catch(n){console.warn(n)}}}}).catch(s=>{throw ya.create("idb-open",{originalErrorMessage:s.message})})),Em}async function sk(s){try{const n=(await Qx()).transaction(lc),a=await n.objectStore(lc).get(Xx(s));return await n.done,a}catch(e){if(e instanceof Os)Is.warn(e.message);else{const n=ya.create("idb-get",{originalErrorMessage:e?.message});Is.warn(n.message)}}}async function Kv(s,e){try{const a=(await Qx()).transaction(lc,"readwrite");await a.objectStore(lc).put(e,Xx(s)),await a.done}catch(n){if(n instanceof Os)Is.warn(n.message);else{const a=ya.create("idb-set",{originalErrorMessage:n?.message});Is.warn(a.message)}}}function Xx(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=1024,ik=30;class ok{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ck(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Yv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>ik){const o=uk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Is.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Yv(),{heartbeatsToSend:n,unsentEntries:a}=lk(this._heartbeatsCache.heartbeats),o=Ux(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Is.warn(e),""}}}function Yv(){return new Date().toISOString().substring(0,10)}function lk(s,e=ak){const n=[];let a=s.slice();for(const o of s){const l=n.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),Qv(n)>e){l.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),Qv(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class ck{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YS()?QS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Qv(s){return Ux(JSON.stringify({version:2,heartbeats:s})).length}function uk(s){if(s.length===0)return-1;let e=0,n=s[0].date;for(let a=1;a<s.length;a++)s[a].date<n&&(n=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(s){wo(new ui("platform-logger",e=>new EA(e),"PRIVATE")),wo(new ui("heartbeat",e=>new ok(e),"PRIVATE")),va(Om,Fv,s),va(Om,Fv,"esm2020"),va("fire-js","")}hk("");function Zx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dk=Zx,Wx=new Ec("auth","Firebase",Zx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new mg("@firebase/auth");function fk(s,...e){Th.logLevel<=Ye.WARN&&Th.warn(`Auth (${Vo}): ${s}`,...e)}function dh(s,...e){Th.logLevel<=Ye.ERROR&&Th.error(`Auth (${Vo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(s,...e){throw yg(s,...e)}function Fr(s,...e){return yg(s,...e)}function Jx(s,e,n){const a={...dk(),[e]:n};return new Ec("auth","Firebase",a).create(e,{appName:s.name})}function As(s){return Jx(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yg(s,...e){if(typeof s!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(n,...a)}return Wx.create(s,...e)}function Re(s,e,...n){if(!s)throw yg(e,...n)}function Ts(s){const e="INTERNAL ASSERTION FAILED: "+s;throw dh(e),new Error(e)}function Ds(s,e){s||Ts(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(){return typeof self<"u"&&self.location?.href||""}function mk(){return Xv()==="http:"||Xv()==="https:"}function Xv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(mk()||GS()||"connection"in navigator)?navigator.onLine:!0}function pk(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ds(n>e,"Short delay should be less than long delay!"),this.isMobile=BS()||FS()}get(){return gk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(s,e){Ds(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ts("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ts("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ts("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_k=new wc(3e4,6e4);function Ra(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ca(s,e,n,a,o={}){return tb(s,o,async()=>{let l={},h={};a&&(e==="GET"?h=a:l={body:JSON.stringify(a)});const g=Tc({key:s.config.apiKey,...h}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...l};return HS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Oo(s.emulatorConfig.host)&&(y.credentials="include"),eb.fetch()(await nb(s,s.config.apiHost,n,g),y)})}async function tb(s,e,n){s._canInitEmulator=!1;const a={...yk,...e};try{const o=new bk(s),l=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw rh(s,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const g=l.ok?h.errorMessage:h.error.message,[p,y]=g.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(s,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw rh(s,"email-already-in-use",h);if(p==="USER_DISABLED")throw rh(s,"user-disabled",h);const _=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Jx(s,_,y);Ar(s,_)}}catch(o){if(o instanceof Os)throw o;Ar(s,"network-request-failed",{message:String(o)})}}async function Sc(s,e,n,a,o={}){const l=await Ca(s,e,n,a,o);return"mfaPendingCredential"in l&&Ar(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function nb(s,e,n,a){const o=`${e}${n}?${a}`,l=s,h=l.config.emulator?vg(s.config,o):`${s.config.apiScheme}://${o}`;return vk.includes(n)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(h).toString():h}function xk(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class bk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Fr(this.auth,"network-request-failed")),_k.get())})}}function rh(s,e,n){const a={appName:s.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=Fr(s,e,a);return o.customData._tokenResponse=n,o}function Zv(s){return s!==void 0&&s.enterprise!==void 0}class Ek{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return xk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Tk(s,e){return Ca(s,"GET","/v2/recaptchaConfig",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(s,e){return Ca(s,"POST","/v1/accounts:delete",e)}async function wh(s,e){return Ca(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Sk(s,e=!1){const n=Vn(s),a=await n.getIdToken(e),o=_g(a);Re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l?.sign_in_provider;return{claims:o,token:a,authTime:ec(Tm(o.auth_time)),issuedAtTime:ec(Tm(o.iat)),expirationTime:ec(Tm(o.exp)),signInProvider:h||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Tm(s){return Number(s)*1e3}function _g(s){const[e,n,a]=s.split(".");if(e===void 0||n===void 0||a===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Bx(n);return o?JSON.parse(o):(dh("Failed to decode base64 JWT payload"),null)}catch(o){return dh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Wv(s){const e=_g(s);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(s,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Os&&Ak(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function Ak({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ec(this.lastLoginAt),this.creationTime=ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(s){const e=s.auth,n=await s.getIdToken(),a=await cc(s,wh(e,{idToken:n}));Re(a?.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const l=o.providerUserInfo?.length?rb(o.providerUserInfo):[],h=Rk(s.providerData,l),g=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!h?.length,y=g?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,_)}async function Nk(s){const e=Vn(s);await Sh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Rk(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function rb(s){return s.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(s,e){const n=await tb(s,{},async()=>{const a=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=s.config,h=await nb(s,o,"/v1/token",`key=${l}`),g=await s._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:g,body:a};return s.emulatorConfig&&Oo(s.emulatorConfig.host)&&(p.credentials="include"),eb.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ik(s,e){return Ca(s,"POST","/v2/accounts:revokeToken",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=Wv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:l}=await Ck(e,n);this.updateTokensAndExpiration(a,o,Number(l))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:l}=n,h=new _o;return a&&(Re(typeof a=="string","internal-error",{appName:e}),h.refreshToken=a),o&&(Re(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(Re(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _o,this.toJSON())}_performRefresh(){return Ts("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(s,e){Re(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Er{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new kk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new zm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await cc(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Sk(this,e)}reload(){return Nk(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await Sh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await cc(this,wk(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,l=n.phoneNumber??void 0,h=n.photoURL??void 0,g=n.tenantId??void 0,p=n._redirectEventId??void 0,y=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:E,emailVerified:A,isAnonymous:V,providerData:B,stsTokenManager:z}=n;Re(E&&z,e,"internal-error");const j=_o.fromJSON(this.name,z);Re(typeof E=="string",e,"internal-error"),ua(a,e.name),ua(o,e.name),Re(typeof A=="boolean",e,"internal-error"),Re(typeof V=="boolean",e,"internal-error"),ua(l,e.name),ua(h,e.name),ua(g,e.name),ua(p,e.name),ua(y,e.name),ua(_,e.name);const Z=new Er({uid:E,auth:e,email:o,emailVerified:A,displayName:a,isAnonymous:V,photoURL:h,phoneNumber:l,tenantId:g,stsTokenManager:j,createdAt:y,lastLoginAt:_});return B&&Array.isArray(B)&&(Z.providerData=B.map(X=>({...X}))),p&&(Z._redirectEventId=p),Z}static async _fromIdTokenResponse(e,n,a=!1){const o=new _o;o.updateFromServerResponse(n);const l=new Er({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await Sh(l),l}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];Re(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?rb(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!l?.length,g=new _o;g.updateFromIdToken(a);const p=new Er({uid:o.localId,auth:e,stsTokenManager:g,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new zm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=new Map;function ws(s){Ds(s instanceof Function,"Expected a class definition");let e=Jv.get(s);return e?(Ds(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,Jv.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}sb.type="NONE";const e_=sb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(s,e,n){return`firebase:${s}:${e}:${n}`}class xo{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:l}=this.auth;this.fullUserKey=fh(this.userKey,o.apiKey,l),this.fullPersistenceKey=fh("persistence",o.apiKey,l),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wh(this.auth,{idToken:e}).catch(()=>{});return n?Er._fromGetAccountInfoResponse(this.auth,n,e):null}return Er._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new xo(ws(e_),e,a);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||ws(e_);const h=fh(a,e.config.apiKey,e.name);let g=null;for(const y of n)try{const _=await y._get(h);if(_){let E;if(typeof _=="string"){const A=await wh(e,{idToken:_}).catch(()=>{});if(!A)break;E=await Er._fromGetAccountInfoResponse(e,A,_)}else E=Er._fromJSON(e,_);y!==l&&(g=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new xo(l,e,a):(l=p[0],g&&await l._set(h,g.toJSON()),await Promise.all(n.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new xo(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ab(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ub(e))return"Blackberry";if(hb(e))return"Webos";if(ib(e))return"Safari";if((e.includes("chrome/")||ob(e))&&!e.includes("edge/"))return"Chrome";if(cb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(n);if(a?.length===2)return a[1]}return"Other"}function ab(s=Cn()){return/firefox\//i.test(s)}function ib(s=Cn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ob(s=Cn()){return/crios\//i.test(s)}function lb(s=Cn()){return/iemobile/i.test(s)}function cb(s=Cn()){return/android/i.test(s)}function ub(s=Cn()){return/blackberry/i.test(s)}function hb(s=Cn()){return/webos/i.test(s)}function xg(s=Cn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Dk(s=Cn()){return xg(s)&&!!window.navigator?.standalone}function jk(){return $S()&&document.documentMode===10}function db(s=Cn()){return xg(s)||cb(s)||hb(s)||ub(s)||/windows phone/i.test(s)||lb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(s,e=[]){let n;switch(s){case"Browser":n=t_(Cn());break;case"Worker":n=`${t_(Cn())}-${s}`;break;default:n=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vo}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=l=>new Promise((h,g)=>{try{const p=e(l);h(p)}catch(p){g(p)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(s,e={}){return Ca(s,"GET","/v2/passwordPolicy",Ra(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=6;class Pk{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Vk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new n_(this),this.idTokenSubscription=new n_(this),this.beforeStateQueue=new Mk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Wx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ws(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await xo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wh(this,{idToken:e}),a=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,h=a?._redirectEventId,g=await this.tryRedirectSignIn(e);(!l||l===h)&&g?.user&&(a=g.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=pk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(As(this));const n=e?Vn(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ok(this),n=new Pk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ec("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await Ik(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&ws(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await xo.create(this,[ws(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const l=typeof n=="function"?n:n.next.bind(n);let h=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(g,this,"internal-error"),g.then(()=>{h||l(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,a,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&fk(`Error while retrieving App Check token: ${e.error}`),e?.token}}function gi(s){return Vn(s)}class n_{constructor(e){this.auth=e,this.observer=null,this.addObserver=eA(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zk(s){Gh=s}function mb(s){return Gh.loadJS(s)}function Uk(){return Gh.recaptchaEnterpriseScript}function Bk(){return Gh.gapiScript}function qk(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class Hk{constructor(){this.enterprise=new Gk}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class Gk{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const Fk="recaptcha-enterprise",gb="NO_RECAPTCHA";class $k{constructor(e){this.type=Fk,this.auth=gi(e)}async verify(e="verify",n=!1){async function a(l){if(!n){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,g)=>{Tk(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)g(new Error("recaptcha Enterprise site key undefined"));else{const y=new Ek(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{g(p)})})}function o(l,h,g){const p=window.grecaptcha;Zv(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(gb)})}):g(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Hk().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{a(this.auth).then(g=>{if(!n&&Zv(window.grecaptcha))o(g,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=Uk();p.length!==0&&(p+=g),mb(p).then(()=>{o(g,l,h)}).catch(y=>{h(y)})}}).catch(g=>{h(g)})})}}async function r_(s,e,n,a=!1,o=!1){const l=new $k(s);let h;if(o)h=gb;else try{h=await l.verify(n)}catch{h=await l.verify(n,!0)}const g={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in g){const p=g.phoneEnrollmentInfo.phoneNumber,y=g.phoneEnrollmentInfo.recaptchaToken;Object.assign(g,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in g){const p=g.phoneSignInInfo.recaptchaToken;Object.assign(g,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return g}return a?Object.assign(g,{captchaResp:h}):Object.assign(g,{captchaResponse:h}),Object.assign(g,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(g,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),g}async function Um(s,e,n,a,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await r_(s,e,n,n==="getOobCode");return a(s,l)}else return a(s,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await r_(s,e,n,n==="getOobCode");return a(s,h)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(s,e){const n=pg(s,"auth");if(n.isInitialized()){const o=n.getImmediate(),l=n.getOptions();if(ci(l,e??{}))return o;Ar(o,"already-initialized")}return n.initialize({options:e})}function Yk(s,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(ws);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function Qk(s,e,n){const a=gi(s);Re(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,l=pb(e),{host:h,port:g}=Xk(e),p=g===null?"":`:${g}`,y={url:`${l}//${h}${p}/`},_=Object.freeze({host:h,port:g,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Re(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Re(ci(y,a.config.emulator)&&ci(_,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=_,a.settings.appVerificationDisabledForTesting=!0,Oo(h)?(Gx(`${l}//${h}${p}`),US("Auth",!0)):Zk()}function pb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function Xk(s){const e=pb(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const l=o[1];return{host:l,port:s_(a.substr(l.length+1))}}else{const[l,h]=a.split(":");return{host:l,port:s_(h)}}}function s_(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function Zk(){function s(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ts("not implemented")}_getIdTokenResponse(e){return Ts("not implemented")}_linkToIdToken(e,n){return Ts("not implemented")}_getReauthenticationResolver(e){return Ts("not implemented")}}async function Wk(s,e){return Ca(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(s,e){return Sc(s,"POST","/v1/accounts:signInWithPassword",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2(s,e){return Sc(s,"POST","/v1/accounts:signInWithEmailLink",Ra(s,e))}async function t2(s,e){return Sc(s,"POST","/v1/accounts:signInWithEmailLink",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc extends bg{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new uc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new uc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,n,"signInWithPassword",Jk);case"emailLink":return e2(e,{email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Um(e,a,"signUpPassword",Wk);case"emailLink":return t2(e,{idToken:n,email:this._email,oobCode:this._password});default:Ar(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(s,e){return Sc(s,"POST","/v1/accounts:signInWithIdp",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="http://localhost";class hi extends bg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ar("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...l}=n;if(!a||!o)return null;const h=new hi(a,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return bo(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,bo(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,bo(e,n)}buildRequest(){const e={requestUri:n2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function s2(s){const e=Kl(Yl(s)).link,n=e?Kl(Yl(e)).deep_link_id:null,a=Kl(Yl(s)).deep_link_id;return(a?Kl(Yl(a)).link:null)||a||n||e||s}class Eg{constructor(e){const n=Kl(Yl(e)),a=n.apiKey??null,o=n.oobCode??null,l=r2(n.mode??null);Re(a&&o&&l,"argument-error"),this.apiKey=a,this.operation=l,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=s2(e);try{return new Eg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.providerId=Po.PROVIDER_ID}static credential(e,n){return uc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Eg.parseLink(n);return Re(a,"argument-error"),uc._fromEmailAndCode(e,a.code,a.tenantId)}}Po.PROVIDER_ID="password";Po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends yb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Ac{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return da.credential(n,a)}catch{return null}}}da.GOOGLE_SIGN_IN_METHOD="google.com";da.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Ac{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fa.credential(e.oauthAccessToken)}catch{return null}}}fa.GITHUB_SIGN_IN_METHOD="github.com";fa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Ac{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return ma.credential(n,a)}catch{return null}}}ma.TWITTER_SIGN_IN_METHOD="twitter.com";ma.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(s,e){return Sc(s,"POST","/v1/accounts:signUp",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const l=await Er._fromIdTokenResponse(e,a,o),h=a_(a);return new di({user:l,providerId:h,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=a_(a);return new di({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function a_(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends Os{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Ah.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new Ah(e,n,a,o)}}function vb(s,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Ah._fromErrorAndOperation(s,l,e,a):l})}async function i2(s,e,n=!1){const a=await cc(s,e._linkToIdToken(s.auth,await s.getIdToken()),n);return di._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(s,e,n=!1){const{auth:a}=s;if(dr(a.app))return Promise.reject(As(a));const o="reauthenticate";try{const l=await cc(s,vb(a,o,e,s),n);Re(l.idToken,a,"internal-error");const h=_g(l.idToken);Re(h,a,"internal-error");const{sub:g}=h;return Re(s.uid===g,a,"user-mismatch"),di._forOperation(s,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ar(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _b(s,e,n=!1){if(dr(s.app))return Promise.reject(As(s));const a="signIn",o=await vb(s,a,e),l=await di._fromIdTokenResponse(s,a,o);return n||await s._updateCurrentUser(l.user),l}async function l2(s,e){return _b(gi(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xb(s){const e=gi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function c2(s,e,n){if(dr(s.app))return Promise.reject(As(s));const a=gi(s),h=await Um(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",a2).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&xb(s),p}),g=await di._fromIdTokenResponse(a,"signIn",h);return await a._updateCurrentUser(g.user),g}function u2(s,e,n){return dr(s.app)?Promise.reject(As(s)):l2(Vn(s),Po.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&xb(s),a})}function h2(s,e,n,a){return Vn(s).onIdTokenChanged(e,n,a)}function d2(s,e,n){return Vn(s).beforeAuthStateChanged(e,n)}function f2(s,e,n,a){return Vn(s).onAuthStateChanged(e,n,a)}function m2(s){return Vn(s).signOut()}const kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=1e3,p2=10;class Eb extends bb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=db(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,g,p)=>{this.notifyListeners(h,p)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(a);!n&&this.localCache[a]===h||this.notifyListeners(a,h)},l=this.storage.getItem(a);jk()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,p2):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},g2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Eb.type="LOCAL";const y2=Eb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb extends bb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Tb.type="SESSION";const wb=Tb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Fh(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:l}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const g=Array.from(h).map(async y=>y(n.origin,l)),p=await v2(g);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(s="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((g,p)=>{const y=Tg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},a);h={messageChannel:o,onMessage(E){const A=E;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),g(A.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(){return window}function x2(s){$r().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(){return typeof $r().WorkerGlobalScope<"u"&&typeof $r().importScripts=="function"}async function b2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function E2(){return navigator?.serviceWorker?.controller||null}function T2(){return Sb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="firebaseLocalStorageDb",w2=1,Nh="firebaseLocalStorage",kb="fbase_key";class kc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $h(s,e){return s.transaction([Nh],e?"readwrite":"readonly").objectStore(Nh)}function S2(){const s=indexedDB.deleteDatabase(Ab);return new kc(s).toPromise()}function Bm(){const s=indexedDB.open(Ab,w2);return new Promise((e,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Nh,{keyPath:kb})}catch(o){n(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Nh)?e(a):(a.close(),await S2(),e(await Bm()))})})}async function i_(s,e,n){const a=$h(s,!0).put({[kb]:e,value:n});return new kc(a).toPromise()}async function A2(s,e){const n=$h(s,!1).get(e),a=await new kc(n).toPromise();return a===void 0?null:a.value}function o_(s,e){const n=$h(s,!0).delete(e);return new kc(n).toPromise()}const k2=800,N2=3;class Nb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>N2)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Sb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fh._getInstance(T2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await b2(),!this.activeServiceWorker)return;this.sender=new _2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||E2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bm();return await i_(e,kh,"1"),await o_(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>i_(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>A2(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>o_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=$h(o,!1).getAll();return new kc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),k2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Nb.type="LOCAL";const R2=Nb;new wc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(s,e){return e?ws(e):(Re(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends bg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function I2(s){return _b(s.auth,new wg(s),s.bypassAuthState)}function D2(s){const{auth:e,user:n}=s;return Re(n,e,"internal-error"),o2(n,new wg(s),s.bypassAuthState)}async function j2(s){const{auth:e,user:n}=s;return Re(n,e,"internal-error"),i2(n,new wg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,n,a,o,l=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:l,error:h,type:g}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:a,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return I2;case"linkViaPopup":case"linkViaRedirect":return j2;case"reauthViaPopup":case"reauthViaRedirect":return D2;default:Ar(this.auth,"internal-error")}}resolve(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=new wc(2e3,1e4);class vo extends Rb{constructor(e,n,a,o,l){super(e,n,o,l),this.provider=a,this.authWindow=null,this.pollId=null,vo.currentPopupAction&&vo.currentPopupAction.cancel(),vo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Ds(this.filter.length===1,"Popup operations only handle one event");const e=Tg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,vo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M2.get())};e()}}vo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2="pendingRedirect",mh=new Map;class V2 extends Rb{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=mh.get(this.auth._key());if(!e){try{const a=await P2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}mh.set(this.auth._key(),e)}return this.bypassAuthState||mh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function P2(s,e){const n=U2(e),a=z2(s);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function L2(s,e){mh.set(s._key(),e)}function z2(s){return ws(s._redirectPersistence)}function U2(s){return fh(O2,s.config.apiKey,s.name)}async function B2(s,e,n=!1){if(dr(s.app))return Promise.reject(As(s));const a=gi(s),o=C2(a,e),h=await new V2(a,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await a._persistUserIfCurrent(h.user),await a._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=600*1e3;class H2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!G2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Cb(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Fr(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=q2&&this.cachedEventUids.clear(),this.cachedEventUids.has(l_(e))}saveEventToCache(e){this.cachedEventUids.add(l_(e)),this.lastProcessedEventTime=Date.now()}}function l_(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Cb({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function G2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Cb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(s,e={}){return Ca(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,K2=/^https?/;async function Y2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await F2(s);for(const n of e)try{if(Q2(n))return}catch{}Ar(s,"unauthorized-domain")}function Q2(s){const e=Lm(),{protocol:n,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const h=new URL(s);return h.hostname===""&&a===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===a}if(!K2.test(n))return!1;if($2.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new wc(3e4,6e4);function c_(){const s=$r().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function Z2(s){return new Promise((e,n)=>{function a(){c_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{c_(),n(Fr(s,"network-request-failed"))},timeout:X2.get()})}if($r().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if($r().gapi?.load)a();else{const o=qk("iframefcb");return $r()[o]=()=>{gapi.load?a():n(Fr(s,"network-request-failed"))},mb(`${Bk()}?onload=${o}`).catch(l=>n(l))}}).catch(e=>{throw gh=null,e})}let gh=null;function W2(s){return gh=gh||Z2(s),gh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=new wc(5e3,15e3),eN="__/auth/iframe",tN="emulator/auth/iframe",nN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sN(s){const e=s.config;Re(e.authDomain,s,"auth-domain-config-required");const n=e.emulator?vg(e,tN):`https://${s.config.authDomain}/${eN}`,a={apiKey:e.apiKey,appName:s.name,v:Vo},o=rN.get(s.config.apiHost);o&&(a.eid=o);const l=s._getFrameworks();return l.length&&(a.fw=l.join(",")),`${n}?${Tc(a).slice(1)}`}async function aN(s){const e=await W2(s),n=$r().gapi;return Re(n,s,"internal-error"),e.open({where:document.body,url:sN(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nN,dontclear:!0},a=>new Promise(async(o,l)=>{await a.restyle({setHideOnLeave:!1});const h=Fr(s,"network-request-failed"),g=$r().setTimeout(()=>{l(h)},J2.get());function p(){$r().clearTimeout(g),o(a)}a.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oN=500,lN=600,cN="_blank",uN="http://localhost";class u_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hN(s,e,n,a=oN,o=lN){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-a)/2,0).toString();let g="";const p={...iN,width:a.toString(),height:o.toString(),top:l,left:h},y=Cn().toLowerCase();n&&(g=ob(y)?cN:n),ab(y)&&(e=e||uN,p.scrollbars="yes");const _=Object.entries(p).reduce((A,[V,B])=>`${A}${V}=${B},`,"");if(Dk(y)&&g!=="_self")return dN(e||"",g),new u_(null);const E=window.open(e||"",g,_);Re(E,s,"popup-blocked");try{E.focus()}catch{}return new u_(E)}function dN(s,e){const n=document.createElement("a");n.href=s,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="__/auth/handler",mN="emulator/auth/handler",gN=encodeURIComponent("fac");async function h_(s,e,n,a,o,l){Re(s.config.authDomain,s,"auth-domain-config-required"),Re(s.config.apiKey,s,"invalid-api-key");const h={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:a,v:Vo,eventId:o};if(e instanceof yb){e.setDefaultLanguage(s.languageCode),h.providerId=e.providerId||"",JS(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))h[_]=E}if(e instanceof Ac){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(h.scopes=_.join(","))}s.tenantId&&(h.tid=s.tenantId);const g=h;for(const _ of Object.keys(g))g[_]===void 0&&delete g[_];const p=await s._getAppCheckToken(),y=p?`#${gN}=${encodeURIComponent(p)}`:"";return`${pN(s)}?${Tc(g).slice(1)}${y}`}function pN({config:s}){return s.emulator?vg(s,mN):`https://${s.authDomain}/${fN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="webStorageSupport";class yN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wb,this._completeRedirectFn=B2,this._overrideRedirectResult=L2}async _openPopup(e,n,a,o){Ds(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await h_(e,n,a,Lm(),o);return hN(e,l,Tg())}async _openRedirect(e,n,a,o){await this._originValidation(e);const l=await h_(e,n,a,Lm(),o);return x2(l),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:l}=this.eventManagers[n];return o?Promise.resolve(o):(Ds(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await aN(e),a=new H2(e);return n.register("authEvent",o=>(Re(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wm,{type:wm},o=>{const l=o?.[0]?.[wm];l!==void 0&&n(!!l),Ar(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Y2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return db()||ib()||xg()}}const vN=yN;var d_="@firebase/auth",f_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bN(s){wo(new ui("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:g}=a.options;Re(h&&!h.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:h,authDomain:g,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fb(s)},y=new Lk(a,o,l,p);return Yk(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),wo(new ui("auth-internal",e=>{const n=gi(e.getProvider("auth").getImmediate());return(a=>new _N(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),va(d_,f_,xN(s)),va(d_,f_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=300,TN=Hx("authIdTokenMaxAge")||EN;let m_=null;const wN=s=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>TN)return;const o=n?.token;m_!==o&&(m_=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function SN(s=Yx()){const e=pg(s,"auth");if(e.isInitialized())return e.getImmediate();const n=Kk(s,{popupRedirectResolver:vN,persistence:[R2,y2,wb]}),a=Hx("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const h=wN(l.toString());d2(n,h,()=>h(n.currentUser)),h2(n,g=>h(g))}}const o=VS("auth");return o&&Qk(n,`http://${o}`),n}function AN(){return document.getElementsByTagName("head")?.[0]??document}zk({loadJS(s){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const l=Fr("internal-error");l.customData=o,n(l)},a.type="text/javascript",a.charset="UTF-8",AN().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bN("Browser");var kN="firebase",NN="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */va(kN,NN,"app");var g_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _a,Ib;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(O,R){function C(){}C.prototype=R.prototype,O.D=R.prototype,O.prototype=new C,O.prototype.constructor=O,O.C=function(M,P,I){for(var k=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)k[Ae-2]=arguments[Ae];return R.prototype[P].apply(M,k)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,n),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(O,R,C){C||(C=0);var M=Array(16);if(typeof R=="string")for(var P=0;16>P;++P)M[P]=R.charCodeAt(C++)|R.charCodeAt(C++)<<8|R.charCodeAt(C++)<<16|R.charCodeAt(C++)<<24;else for(P=0;16>P;++P)M[P]=R[C++]|R[C++]<<8|R[C++]<<16|R[C++]<<24;R=O.g[0],C=O.g[1],P=O.g[2];var I=O.g[3],k=R+(I^C&(P^I))+M[0]+3614090360&4294967295;R=C+(k<<7&4294967295|k>>>25),k=I+(P^R&(C^P))+M[1]+3905402710&4294967295,I=R+(k<<12&4294967295|k>>>20),k=P+(C^I&(R^C))+M[2]+606105819&4294967295,P=I+(k<<17&4294967295|k>>>15),k=C+(R^P&(I^R))+M[3]+3250441966&4294967295,C=P+(k<<22&4294967295|k>>>10),k=R+(I^C&(P^I))+M[4]+4118548399&4294967295,R=C+(k<<7&4294967295|k>>>25),k=I+(P^R&(C^P))+M[5]+1200080426&4294967295,I=R+(k<<12&4294967295|k>>>20),k=P+(C^I&(R^C))+M[6]+2821735955&4294967295,P=I+(k<<17&4294967295|k>>>15),k=C+(R^P&(I^R))+M[7]+4249261313&4294967295,C=P+(k<<22&4294967295|k>>>10),k=R+(I^C&(P^I))+M[8]+1770035416&4294967295,R=C+(k<<7&4294967295|k>>>25),k=I+(P^R&(C^P))+M[9]+2336552879&4294967295,I=R+(k<<12&4294967295|k>>>20),k=P+(C^I&(R^C))+M[10]+4294925233&4294967295,P=I+(k<<17&4294967295|k>>>15),k=C+(R^P&(I^R))+M[11]+2304563134&4294967295,C=P+(k<<22&4294967295|k>>>10),k=R+(I^C&(P^I))+M[12]+1804603682&4294967295,R=C+(k<<7&4294967295|k>>>25),k=I+(P^R&(C^P))+M[13]+4254626195&4294967295,I=R+(k<<12&4294967295|k>>>20),k=P+(C^I&(R^C))+M[14]+2792965006&4294967295,P=I+(k<<17&4294967295|k>>>15),k=C+(R^P&(I^R))+M[15]+1236535329&4294967295,C=P+(k<<22&4294967295|k>>>10),k=R+(P^I&(C^P))+M[1]+4129170786&4294967295,R=C+(k<<5&4294967295|k>>>27),k=I+(C^P&(R^C))+M[6]+3225465664&4294967295,I=R+(k<<9&4294967295|k>>>23),k=P+(R^C&(I^R))+M[11]+643717713&4294967295,P=I+(k<<14&4294967295|k>>>18),k=C+(I^R&(P^I))+M[0]+3921069994&4294967295,C=P+(k<<20&4294967295|k>>>12),k=R+(P^I&(C^P))+M[5]+3593408605&4294967295,R=C+(k<<5&4294967295|k>>>27),k=I+(C^P&(R^C))+M[10]+38016083&4294967295,I=R+(k<<9&4294967295|k>>>23),k=P+(R^C&(I^R))+M[15]+3634488961&4294967295,P=I+(k<<14&4294967295|k>>>18),k=C+(I^R&(P^I))+M[4]+3889429448&4294967295,C=P+(k<<20&4294967295|k>>>12),k=R+(P^I&(C^P))+M[9]+568446438&4294967295,R=C+(k<<5&4294967295|k>>>27),k=I+(C^P&(R^C))+M[14]+3275163606&4294967295,I=R+(k<<9&4294967295|k>>>23),k=P+(R^C&(I^R))+M[3]+4107603335&4294967295,P=I+(k<<14&4294967295|k>>>18),k=C+(I^R&(P^I))+M[8]+1163531501&4294967295,C=P+(k<<20&4294967295|k>>>12),k=R+(P^I&(C^P))+M[13]+2850285829&4294967295,R=C+(k<<5&4294967295|k>>>27),k=I+(C^P&(R^C))+M[2]+4243563512&4294967295,I=R+(k<<9&4294967295|k>>>23),k=P+(R^C&(I^R))+M[7]+1735328473&4294967295,P=I+(k<<14&4294967295|k>>>18),k=C+(I^R&(P^I))+M[12]+2368359562&4294967295,C=P+(k<<20&4294967295|k>>>12),k=R+(C^P^I)+M[5]+4294588738&4294967295,R=C+(k<<4&4294967295|k>>>28),k=I+(R^C^P)+M[8]+2272392833&4294967295,I=R+(k<<11&4294967295|k>>>21),k=P+(I^R^C)+M[11]+1839030562&4294967295,P=I+(k<<16&4294967295|k>>>16),k=C+(P^I^R)+M[14]+4259657740&4294967295,C=P+(k<<23&4294967295|k>>>9),k=R+(C^P^I)+M[1]+2763975236&4294967295,R=C+(k<<4&4294967295|k>>>28),k=I+(R^C^P)+M[4]+1272893353&4294967295,I=R+(k<<11&4294967295|k>>>21),k=P+(I^R^C)+M[7]+4139469664&4294967295,P=I+(k<<16&4294967295|k>>>16),k=C+(P^I^R)+M[10]+3200236656&4294967295,C=P+(k<<23&4294967295|k>>>9),k=R+(C^P^I)+M[13]+681279174&4294967295,R=C+(k<<4&4294967295|k>>>28),k=I+(R^C^P)+M[0]+3936430074&4294967295,I=R+(k<<11&4294967295|k>>>21),k=P+(I^R^C)+M[3]+3572445317&4294967295,P=I+(k<<16&4294967295|k>>>16),k=C+(P^I^R)+M[6]+76029189&4294967295,C=P+(k<<23&4294967295|k>>>9),k=R+(C^P^I)+M[9]+3654602809&4294967295,R=C+(k<<4&4294967295|k>>>28),k=I+(R^C^P)+M[12]+3873151461&4294967295,I=R+(k<<11&4294967295|k>>>21),k=P+(I^R^C)+M[15]+530742520&4294967295,P=I+(k<<16&4294967295|k>>>16),k=C+(P^I^R)+M[2]+3299628645&4294967295,C=P+(k<<23&4294967295|k>>>9),k=R+(P^(C|~I))+M[0]+4096336452&4294967295,R=C+(k<<6&4294967295|k>>>26),k=I+(C^(R|~P))+M[7]+1126891415&4294967295,I=R+(k<<10&4294967295|k>>>22),k=P+(R^(I|~C))+M[14]+2878612391&4294967295,P=I+(k<<15&4294967295|k>>>17),k=C+(I^(P|~R))+M[5]+4237533241&4294967295,C=P+(k<<21&4294967295|k>>>11),k=R+(P^(C|~I))+M[12]+1700485571&4294967295,R=C+(k<<6&4294967295|k>>>26),k=I+(C^(R|~P))+M[3]+2399980690&4294967295,I=R+(k<<10&4294967295|k>>>22),k=P+(R^(I|~C))+M[10]+4293915773&4294967295,P=I+(k<<15&4294967295|k>>>17),k=C+(I^(P|~R))+M[1]+2240044497&4294967295,C=P+(k<<21&4294967295|k>>>11),k=R+(P^(C|~I))+M[8]+1873313359&4294967295,R=C+(k<<6&4294967295|k>>>26),k=I+(C^(R|~P))+M[15]+4264355552&4294967295,I=R+(k<<10&4294967295|k>>>22),k=P+(R^(I|~C))+M[6]+2734768916&4294967295,P=I+(k<<15&4294967295|k>>>17),k=C+(I^(P|~R))+M[13]+1309151649&4294967295,C=P+(k<<21&4294967295|k>>>11),k=R+(P^(C|~I))+M[4]+4149444226&4294967295,R=C+(k<<6&4294967295|k>>>26),k=I+(C^(R|~P))+M[11]+3174756917&4294967295,I=R+(k<<10&4294967295|k>>>22),k=P+(R^(I|~C))+M[2]+718787259&4294967295,P=I+(k<<15&4294967295|k>>>17),k=C+(I^(P|~R))+M[9]+3951481745&4294967295,O.g[0]=O.g[0]+R&4294967295,O.g[1]=O.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,O.g[2]=O.g[2]+P&4294967295,O.g[3]=O.g[3]+I&4294967295}a.prototype.u=function(O,R){R===void 0&&(R=O.length);for(var C=R-this.blockSize,M=this.B,P=this.h,I=0;I<R;){if(P==0)for(;I<=C;)o(this,O,I),I+=this.blockSize;if(typeof O=="string"){for(;I<R;)if(M[P++]=O.charCodeAt(I++),P==this.blockSize){o(this,M),P=0;break}}else for(;I<R;)if(M[P++]=O[I++],P==this.blockSize){o(this,M),P=0;break}}this.h=P,this.o+=R},a.prototype.v=function(){var O=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);O[0]=128;for(var R=1;R<O.length-8;++R)O[R]=0;var C=8*this.o;for(R=O.length-8;R<O.length;++R)O[R]=C&255,C/=256;for(this.u(O),O=Array(16),R=C=0;4>R;++R)for(var M=0;32>M;M+=8)O[C++]=this.g[R]>>>M&255;return O};function l(O,R){var C=g;return Object.prototype.hasOwnProperty.call(C,O)?C[O]:C[O]=R(O)}function h(O,R){this.h=R;for(var C=[],M=!0,P=O.length-1;0<=P;P--){var I=O[P]|0;M&&I==R||(C[P]=I,M=!1)}this.g=C}var g={};function p(O){return-128<=O&&128>O?l(O,function(R){return new h([R|0],0>R?-1:0)}):new h([O|0],0>O?-1:0)}function y(O){if(isNaN(O)||!isFinite(O))return E;if(0>O)return j(y(-O));for(var R=[],C=1,M=0;O>=C;M++)R[M]=O/C|0,C*=4294967296;return new h(R,0)}function _(O,R){if(O.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(O.charAt(0)=="-")return j(_(O.substring(1),R));if(0<=O.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(R,8)),M=E,P=0;P<O.length;P+=8){var I=Math.min(8,O.length-P),k=parseInt(O.substring(P,P+I),R);8>I?(I=y(Math.pow(R,I)),M=M.j(I).add(y(k))):(M=M.j(C),M=M.add(y(k)))}return M}var E=p(0),A=p(1),V=p(16777216);s=h.prototype,s.m=function(){if(z(this))return-j(this).m();for(var O=0,R=1,C=0;C<this.g.length;C++){var M=this.i(C);O+=(0<=M?M:4294967296+M)*R,R*=4294967296}return O},s.toString=function(O){if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(B(this))return"0";if(z(this))return"-"+j(this).toString(O);for(var R=y(Math.pow(O,6)),C=this,M="";;){var P=ue(C,R).g;C=Z(C,P.j(R));var I=((0<C.g.length?C.g[0]:C.h)>>>0).toString(O);if(C=P,B(C))return I+M;for(;6>I.length;)I="0"+I;M=I+M}},s.i=function(O){return 0>O?0:O<this.g.length?this.g[O]:this.h};function B(O){if(O.h!=0)return!1;for(var R=0;R<O.g.length;R++)if(O.g[R]!=0)return!1;return!0}function z(O){return O.h==-1}s.l=function(O){return O=Z(this,O),z(O)?-1:B(O)?0:1};function j(O){for(var R=O.g.length,C=[],M=0;M<R;M++)C[M]=~O.g[M];return new h(C,~O.h).add(A)}s.abs=function(){return z(this)?j(this):this},s.add=function(O){for(var R=Math.max(this.g.length,O.g.length),C=[],M=0,P=0;P<=R;P++){var I=M+(this.i(P)&65535)+(O.i(P)&65535),k=(I>>>16)+(this.i(P)>>>16)+(O.i(P)>>>16);M=k>>>16,I&=65535,k&=65535,C[P]=k<<16|I}return new h(C,C[C.length-1]&-2147483648?-1:0)};function Z(O,R){return O.add(j(R))}s.j=function(O){if(B(this)||B(O))return E;if(z(this))return z(O)?j(this).j(j(O)):j(j(this).j(O));if(z(O))return j(this.j(j(O)));if(0>this.l(V)&&0>O.l(V))return y(this.m()*O.m());for(var R=this.g.length+O.g.length,C=[],M=0;M<2*R;M++)C[M]=0;for(M=0;M<this.g.length;M++)for(var P=0;P<O.g.length;P++){var I=this.i(M)>>>16,k=this.i(M)&65535,Ae=O.i(P)>>>16,_e=O.i(P)&65535;C[2*M+2*P]+=k*_e,X(C,2*M+2*P),C[2*M+2*P+1]+=I*_e,X(C,2*M+2*P+1),C[2*M+2*P+1]+=k*Ae,X(C,2*M+2*P+1),C[2*M+2*P+2]+=I*Ae,X(C,2*M+2*P+2)}for(M=0;M<R;M++)C[M]=C[2*M+1]<<16|C[2*M];for(M=R;M<2*R;M++)C[M]=0;return new h(C,0)};function X(O,R){for(;(O[R]&65535)!=O[R];)O[R+1]+=O[R]>>>16,O[R]&=65535,R++}function ce(O,R){this.g=O,this.h=R}function ue(O,R){if(B(R))throw Error("division by zero");if(B(O))return new ce(E,E);if(z(O))return R=ue(j(O),R),new ce(j(R.g),j(R.h));if(z(R))return R=ue(O,j(R)),new ce(j(R.g),R.h);if(30<O.g.length){if(z(O)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var C=A,M=R;0>=M.l(O);)C=le(C),M=le(M);var P=he(C,1),I=he(M,1);for(M=he(M,2),C=he(C,2);!B(M);){var k=I.add(M);0>=k.l(O)&&(P=P.add(C),I=k),M=he(M,1),C=he(C,1)}return R=Z(O,P.j(R)),new ce(P,R)}for(P=E;0<=O.l(R);){for(C=Math.max(1,Math.floor(O.m()/R.m())),M=Math.ceil(Math.log(C)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),I=y(C),k=I.j(R);z(k)||0<k.l(O);)C-=M,I=y(C),k=I.j(R);B(I)&&(I=A),P=P.add(I),O=Z(O,k)}return new ce(P,O)}s.A=function(O){return ue(this,O).h},s.and=function(O){for(var R=Math.max(this.g.length,O.g.length),C=[],M=0;M<R;M++)C[M]=this.i(M)&O.i(M);return new h(C,this.h&O.h)},s.or=function(O){for(var R=Math.max(this.g.length,O.g.length),C=[],M=0;M<R;M++)C[M]=this.i(M)|O.i(M);return new h(C,this.h|O.h)},s.xor=function(O){for(var R=Math.max(this.g.length,O.g.length),C=[],M=0;M<R;M++)C[M]=this.i(M)^O.i(M);return new h(C,this.h^O.h)};function le(O){for(var R=O.g.length+1,C=[],M=0;M<R;M++)C[M]=O.i(M)<<1|O.i(M-1)>>>31;return new h(C,O.h)}function he(O,R){var C=R>>5;R%=32;for(var M=O.g.length-C,P=[],I=0;I<M;I++)P[I]=0<R?O.i(I+C)>>>R|O.i(I+C+1)<<32-R:O.i(I+C);return new h(P,O.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Ib=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=_,_a=h}).apply(typeof g_<"u"?g_:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Db,Ql,jb,ph,qm,Mb,Ob,Vb;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,v,x){return u==Array.prototype||u==Object.prototype||(u[v]=x.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var v=0;v<u.length;++v){var x=u[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var a=n(this);function o(u,v){if(v)e:{var x=a;u=u.split(".");for(var w=0;w<u.length-1;w++){var q=u[w];if(!(q in x))break e;x=x[q]}u=u[u.length-1],w=x[u],v=v(w),v!=w&&v!=null&&e(x,u,{configurable:!0,writable:!0,value:v})}}function l(u,v){u instanceof String&&(u+="");var x=0,w=!1,q={next:function(){if(!w&&x<u.length){var W=x++;return{value:v(W,u[W]),done:!1}}return w=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(u){return u||function(){return l(this,function(v,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},g=this||self;function p(u){var v=typeof u;return v=v!="object"?v:u?Array.isArray(u)?"array":v:"null",v=="array"||v=="object"&&typeof u.length=="number"}function y(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function _(u,v,x){return u.call.apply(u.bind,arguments)}function E(u,v,x){if(!u)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,w),u.apply(v,q)}}return function(){return u.apply(v,arguments)}}function A(u,v,x){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,A.apply(null,arguments)}function V(u,v){var x=Array.prototype.slice.call(arguments,1);return function(){var w=x.slice();return w.push.apply(w,arguments),u.apply(this,w)}}function B(u,v){function x(){}x.prototype=v.prototype,u.aa=v.prototype,u.prototype=new x,u.prototype.constructor=u,u.Qb=function(w,q,W){for(var de=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)de[Je-2]=arguments[Je];return v.prototype[q].apply(w,de)}}function z(u){const v=u.length;if(0<v){const x=Array(v);for(let w=0;w<v;w++)x[w]=u[w];return x}return[]}function j(u,v){for(let x=1;x<arguments.length;x++){const w=arguments[x];if(p(w)){const q=u.length||0,W=w.length||0;u.length=q+W;for(let de=0;de<W;de++)u[q+de]=w[de]}else u.push(w)}}class Z{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function X(u){return/^[\s\xa0]*$/.test(u)}function ce(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function ue(u){return ue[" "](u),u}ue[" "]=function(){};var le=ce().indexOf("Gecko")!=-1&&!(ce().toLowerCase().indexOf("webkit")!=-1&&ce().indexOf("Edge")==-1)&&!(ce().indexOf("Trident")!=-1||ce().indexOf("MSIE")!=-1)&&ce().indexOf("Edge")==-1;function he(u,v,x){for(const w in u)v.call(x,u[w],w,u)}function O(u,v){for(const x in u)v.call(void 0,u[x],x,u)}function R(u){const v={};for(const x in u)v[x]=u[x];return v}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(u,v){let x,w;for(let q=1;q<arguments.length;q++){w=arguments[q];for(x in w)u[x]=w[x];for(let W=0;W<C.length;W++)x=C[W],Object.prototype.hasOwnProperty.call(w,x)&&(u[x]=w[x])}}function P(u){var v=1;u=u.split(":");const x=[];for(;0<v&&u.length;)x.push(u.shift()),v--;return u.length&&x.push(u.join(":")),x}function I(u){g.setTimeout(()=>{throw u},0)}function k(){var u=me;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class Ae{constructor(){this.h=this.g=null}add(v,x){const w=_e.get();w.set(v,x),this.h?this.h.next=w:this.g=w,this.h=w}}var _e=new Z(()=>new F,u=>u.reset());class F{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let se,ee=!1,me=new Ae,N=()=>{const u=g.Promise.resolve(void 0);se=()=>{u.then(J)}};var J=()=>{for(var u;u=k();){try{u.h.call(u.g)}catch(x){I(x)}var v=_e;v.j(u),100>v.h&&(v.h++,u.next=v.g,v.g=u)}ee=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var oe=(function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const x=()=>{};g.addEventListener("test",x,v),g.removeEventListener("test",x,v)}catch{}return u})();function fe(u,v){if($.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var x=this.type=u.type,w=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget){if(le){e:{try{ue(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else x=="mouseover"?v=u.fromElement:x=="mouseout"&&(v=u.toElement);this.relatedTarget=v,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&fe.aa.h.call(this)}}B(fe,$);var pe={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),$e=0;function pt(u,v,x,w,q){this.listener=u,this.proxy=null,this.src=v,this.type=x,this.capture=!!w,this.ha=q,this.key=++$e,this.da=this.fa=!1}function rt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function wt(u){this.src=u,this.g={},this.h=0}wt.prototype.add=function(u,v,x,w,q){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var de=en(u,v,w,q);return-1<de?(v=u[de],x||(v.fa=!1)):(v=new pt(v,this.src,W,!!w,q),v.fa=x,u.push(v)),v};function wn(u,v){var x=v.type;if(x in u.g){var w=u.g[x],q=Array.prototype.indexOf.call(w,v,void 0),W;(W=0<=q)&&Array.prototype.splice.call(w,q,1),W&&(rt(v),u.g[x].length==0&&(delete u.g[x],u.h--))}}function en(u,v,x,w){for(var q=0;q<u.length;++q){var W=u[q];if(!W.da&&W.listener==v&&W.capture==!!x&&W.ha==w)return q}return-1}var qn="closure_lm_"+(1e6*Math.random()|0),Me={};function ye(u,v,x,w,q){if(Array.isArray(v)){for(var W=0;W<v.length;W++)ye(u,v[W],x,w,q);return null}return x=Ei(x),u&&u[qe]?u.K(v,x,y(w)?!!w.capture:!1,q):xe(u,v,x,!1,w,q)}function xe(u,v,x,w,q,W){if(!v)throw Error("Invalid event type");var de=y(q)?!!q.capture:!!q,Je=ht(u);if(Je||(u[qn]=Je=new wt(u)),x=Je.add(v,x,w,de,W),x.proxy)return x;if(w=st(),x.proxy=w,w.src=u,w.listener=x,u.addEventListener)oe||(q=de),q===void 0&&(q=!1),u.addEventListener(v.toString(),w,q);else if(u.attachEvent)u.attachEvent(St(v.toString()),w);else if(u.addListener&&u.removeListener)u.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return x}function st(){function u(x){return v.call(u.src,u.listener,x)}const v=He;return u}function Ot(u,v,x,w,q){if(Array.isArray(v))for(var W=0;W<v.length;W++)Ot(u,v[W],x,w,q);else w=y(w)?!!w.capture:!!w,x=Ei(x),u&&u[qe]?(u=u.i,v=String(v).toString(),v in u.g&&(W=u.g[v],x=en(W,x,w,q),-1<x&&(rt(W[x]),Array.prototype.splice.call(W,x,1),W.length==0&&(delete u.g[v],u.h--)))):u&&(u=ht(u))&&(v=u.g[v.toString()],u=-1,v&&(u=en(v,x,w,q)),(x=-1<u?v[u]:null)&&De(x))}function De(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[qe])wn(v.i,u);else{var x=u.type,w=u.proxy;v.removeEventListener?v.removeEventListener(x,w,u.capture):v.detachEvent?v.detachEvent(St(x),w):v.addListener&&v.removeListener&&v.removeListener(w),(x=ht(v))?(wn(x,u),x.h==0&&(x.src=null,v[qn]=null)):rt(u)}}}function St(u){return u in Me?Me[u]:Me[u]="on"+u}function He(u,v){if(u.da)u=!0;else{v=new fe(v,this);var x=u.listener,w=u.ha||u.src;u.fa&&De(u),u=x.call(w,v)}return u}function ht(u){return u=u[qn],u instanceof wt?u:null}var pr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ei(u){return typeof u=="function"?u:(u[pr]||(u[pr]=function(v){return u.handleEvent(v)}),u[pr])}function Rt(){Q.call(this),this.i=new wt(this),this.M=this,this.F=null}B(Rt,Q),Rt.prototype[qe]=!0,Rt.prototype.removeEventListener=function(u,v,x,w){Ot(this,u,v,x,w)};function at(u,v){var x,w=u.F;if(w)for(x=[];w;w=w.F)x.push(w);if(u=u.M,w=v.type||v,typeof v=="string")v=new $(v,u);else if(v instanceof $)v.target=v.target||u;else{var q=v;v=new $(w,u),M(v,q)}if(q=!0,x)for(var W=x.length-1;0<=W;W--){var de=v.g=x[W];q=In(de,w,!0,v)&&q}if(de=v.g=u,q=In(de,w,!0,v)&&q,q=In(de,w,!1,v)&&q,x)for(W=0;W<x.length;W++)de=v.g=x[W],q=In(de,w,!1,v)&&q}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var u=this.i,v;for(v in u.g){for(var x=u.g[v],w=0;w<x.length;w++)rt(x[w]);delete u.g[v],u.h--}}this.F=null},Rt.prototype.K=function(u,v,x,w){return this.i.add(String(u),v,!1,x,w)},Rt.prototype.L=function(u,v,x,w){return this.i.add(String(u),v,!0,x,w)};function In(u,v,x,w){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,W=0;W<v.length;++W){var de=v[W];if(de&&!de.da&&de.capture==x){var Je=de.listener,nn=de.ha||de.src;de.fa&&wn(u.i,de),q=Je.call(nn,w)!==!1&&q}}return q&&!w.defaultPrevented}function ln(u,v,x){if(typeof u=="function")x&&(u=A(u,x));else if(u&&typeof u.handleEvent=="function")u=A(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:g.setTimeout(u,v||0)}function be(u){u.g=ln(()=>{u.g=null,u.i&&(u.i=!1,be(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class Te extends Q{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:be(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(u){Q.call(this),this.h=u,this.g={}}B(ze,Q);var Ue=[];function dt(u){he(u.g,function(v,x){this.g.hasOwnProperty(x)&&De(v)},u),u.g={}}ze.prototype.N=function(){ze.aa.N.call(this),dt(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ct=g.JSON.stringify,Ke=g.JSON.parse,Et=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function ot(){}ot.prototype.h=null;function cn(u){return u.h||(u.h=u.i())}function ft(){}var Hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yt(){$.call(this,"d")}B(yt,$);function Bt(){$.call(this,"c")}B(Bt,$);var Sn={},Ho=null;function Vs(){return Ho=Ho||new Rt}Sn.La="serverreachability";function Ti(u){$.call(this,Sn.La,u)}B(Ti,$);function Ps(u){const v=Vs();at(v,new Ti(v))}Sn.STAT_EVENT="statevent";function Oc(u,v){$.call(this,Sn.STAT_EVENT,u),this.stat=v}B(Oc,$);function It(u){const v=Vs();at(v,new Oc(v,u))}Sn.Ma="timingevent";function tn(u,v){$.call(this,Sn.Ma,u),this.size=v}B(tn,$);function $t(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},v)}function Jn(){this.g=!0}Jn.prototype.xa=function(){this.g=!1};function Go(u,v,x,w,q,W){u.info(function(){if(u.g)if(W)for(var de="",Je=W.split("&"),nn=0;nn<Je.length;nn++){var et=Je[nn].split("=");if(1<et.length){var hn=et[0];et=et[1];var rn=hn.split("_");de=2<=rn.length&&rn[1]=="type"?de+(hn+"="+et+"&"):de+(hn+"=redacted&")}}else de=null;else de=W;return"XMLHTTP REQ ("+w+") [attempt "+q+"]: "+v+`
`+x+`
`+de})}function dd(u,v,x,w,q,W,de){u.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+q+"]: "+v+`
`+x+`
`+W+" "+de})}function Ls(u,v,x,w){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ia(u,x)+(w?" "+w:"")})}function Vc(u,v){u.info(function(){return"TIMEOUT: "+v})}Jn.prototype.info=function(){};function Ia(u,v){if(!u.g)return v;if(!v)return null;try{var x=JSON.parse(v);if(x){for(u=0;u<x.length;u++)if(Array.isArray(x[u])){var w=x[u];if(!(2>w.length)){var q=w[1];if(Array.isArray(q)&&!(1>q.length)){var W=q[0];if(W!="noop"&&W!="stop"&&W!="close")for(var de=1;de<q.length;de++)q[de]=""}}}}return Ct(x)}catch{return v}}var zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},es={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rr;function Cr(){}B(Cr,ot),Cr.prototype.g=function(){return new XMLHttpRequest},Cr.prototype.i=function(){return{}},Rr=new Cr;function Dn(u,v,x,w){this.j=u,this.i=v,this.l=x,this.R=w||1,this.U=new ze(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qt}function qt(){this.i=null,this.g="",this.h=!1}var Fo={},wi={};function yr(u,v,x){u.L=1,u.v=Va(Gn(v)),u.m=x,u.P=!0,ts(u,null)}function ts(u,v){u.F=Date.now(),Da(u),u.A=Gn(u.v);var x=u.A,w=u.R;Array.isArray(w)||(w=[String(w)]),Zo(x.i,"t",w),u.C=0,x=u.j.J,u.h=new qt,u.g=Wc(u.j,x?v:null,!u.m),0<u.O&&(u.M=new Te(A(u.Y,u,u.g),u.O)),v=u.U,x=u.g,w=u.ca;var q="readystatechange";Array.isArray(q)||(q&&(Ue[0]=q.toString()),q=Ue);for(var W=0;W<q.length;W++){var de=ye(x,q[W],w||v.handleEvent,!1,v.h||v);if(!de)break;v.g[de.key]=de}v=u.H?R(u.H):{},u.m?(u.u||(u.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,v)):(u.u="GET",u.g.ea(u.A,u.u,null,v)),Ps(),Go(u.i,u.u,u.A,u.l,u.R,u.m)}Dn.prototype.ca=function(u){u=u.target;const v=this.M;v&&rr(u)==3?v.j():this.Y(u)},Dn.prototype.Y=function(u){try{if(u==this.g)e:{const rn=rr(this.g);var v=this.g.Ba();const cs=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||Gc(this.g)))){this.J||rn!=4||v==7||(v==8||0>=cs?Ps(3):Ps(2)),Us(this);var x=this.g.Z();this.X=x;t:if(Pc(this)){var w=Gc(this.g);u="";var q=w.length,W=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),Ir(this);var de="";break t}this.h.i=new g.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,u+=this.h.i.decode(w[v],{stream:!(W&&v==q-1)});w.length=0,this.h.g+=u,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=x==200,dd(this.i,this.u,this.A,this.l,this.R,rn,x),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,nn=this.g;if((Je=nn.g?nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(Je)){var et=Je;break t}}et=null}if(x=et)Ls(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ja(this,x);else{this.o=!1,this.s=3,It(12),pn(this),Ir(this);break e}}if(this.P){x=!0;let yn;for(;!this.J&&this.C<de.length;)if(yn=Lc(this,de),yn==wi){rn==4&&(this.s=4,It(14),x=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Fo){this.s=4,It(15),Ls(this.i,this.l,de,"[Invalid Chunk]"),x=!1;break}else Ls(this.i,this.l,yn,null),ja(this,yn);if(Pc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||de.length!=0||this.h.h||(this.s=1,It(16),x=!1),this.o=this.o&&x,!x)Ls(this.i,this.l,de,"[Invalid Chunked Response]"),pn(this),Ir(this);else if(0<de.length&&!this.W){this.W=!0;var hn=this.j;hn.g==this&&hn.ba&&!hn.M&&(hn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),Ga(hn),hn.M=!0,It(11))}}else Ls(this.i,this.l,de,null),ja(this,de);rn==4&&pn(this),this.o&&!this.J&&(rn==4?Qc(this.j,this):(this.o=!1,Da(this)))}else yd(this.g),x==400&&0<de.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),pn(this),Ir(this)}}}catch{}finally{}};function Pc(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Lc(u,v){var x=u.C,w=v.indexOf(`
`,x);return w==-1?wi:(x=Number(v.substring(x,w)),isNaN(x)?Fo:(w+=1,w+x>v.length?wi:(v=v.slice(w,w+x),u.C=w+x,v)))}Dn.prototype.cancel=function(){this.J=!0,pn(this)};function Da(u){u.S=Date.now()+u.I,zc(u,u.I)}function zc(u,v){if(u.B!=null)throw Error("WatchDog timer not null");u.B=$t(A(u.ba,u),v)}function Us(u){u.B&&(g.clearTimeout(u.B),u.B=null)}Dn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(Vc(this.i,this.A),this.L!=2&&(Ps(),It(17)),pn(this),this.s=2,Ir(this)):zc(this,this.S-u)};function Ir(u){u.j.G==0||u.J||Qc(u.j,u)}function pn(u){Us(u);var v=u.M;v&&typeof v.ma=="function"&&v.ma(),u.M=null,dt(u.U),u.g&&(v=u.g,u.g=null,v.abort(),v.ma())}function ja(u,v){try{var x=u.j;if(x.G!=0&&(x.g==u||$o(x.h,u))){if(!u.K&&$o(x.h,u)&&x.G==3){try{var w=x.Da.g.parse(v)}catch{w=null}if(Array.isArray(w)&&w.length==3){var q=w;if(q[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<u.F)Vi(x),Mi(x);else break e;nl(x),It(18)}}else x.za=q[1],0<x.za-x.T&&37500>q[2]&&x.F&&x.v==0&&!x.C&&(x.C=$t(A(x.Za,x),6e3));if(1>=Ai(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else ls(x,11)}else if((u.K||x.g==u)&&Vi(x),!X(v))for(q=x.Da.g.parse(v),v=0;v<q.length;v++){let et=q[v];if(x.T=et[0],et=et[1],x.G==2)if(et[0]=="c"){x.K=et[1],x.ia=et[2];const hn=et[3];hn!=null&&(x.la=hn,x.j.info("VER="+x.la));const rn=et[4];rn!=null&&(x.Aa=rn,x.j.info("SVER="+x.Aa));const cs=et[5];cs!=null&&typeof cs=="number"&&0<cs&&(w=1.5*cs,x.L=w,x.j.info("backChannelRequestTimeoutMs_="+w)),w=x;const yn=u.g;if(yn){const Lr=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lr){var W=w.h;W.g||Lr.indexOf("spdy")==-1&&Lr.indexOf("quic")==-1&&Lr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ki(W,W.h),W.h=null))}if(w.D){const sl=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;sl&&(w.ya=sl,vt(w.I,w.D,sl))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-u.F,x.j.info("Handshake RTT: "+x.R+"ms")),w=x;var de=u;if(w.qa=Zc(w,w.J?w.ia:null,w.W),de.K){jn(w.h,de);var Je=de,nn=w.L;nn&&(Je.I=nn),Je.B&&(Us(Je),Da(Je)),w.g=de}else Kc(w);0<x.i.length&&Oi(x)}else et[0]!="stop"&&et[0]!="close"||ls(x,7);else x.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?ls(x,7):el(x):et[0]!="noop"&&x.l&&x.l.ta(et),x.v=0)}}Ps(4)}catch{}}var Uc=class{constructor(u,v){this.g=u,this.map=v}};function ns(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Si(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ai(u){return u.h?1:u.g?u.g.size:0}function $o(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function ki(u,v){u.g?u.g.add(v):u.h=v}function jn(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}ns.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ko(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const x of u.g.values())v=v.concat(x.D);return v}return z(u.i)}function fd(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var v=[],x=u.length,w=0;w<x;w++)v.push(u[w]);return v}v=[],x=0;for(w in u)v[x++]=u[w];return v}function Ni(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var v=[];u=u.length;for(var x=0;x<u;x++)v.push(x);return v}v=[],x=0;for(const w in u)v[x++]=w;return v}}}function Yo(u,v){if(u.forEach&&typeof u.forEach=="function")u.forEach(v,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,v,void 0);else for(var x=Ni(u),w=fd(u),q=w.length,W=0;W<q;W++)v.call(void 0,w[W],x&&x[W],u)}var Ma=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function md(u,v){if(u){u=u.split("&");for(var x=0;x<u.length;x++){var w=u[x].indexOf("="),q=null;if(0<=w){var W=u[x].substring(0,w);q=u[x].substring(w+1)}else W=u[x];v(W,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function Kt(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Kt){this.h=u.h,Oa(this,u.j),this.o=u.o,this.g=u.g,Bs(this,u.s),this.l=u.l;var v=u.i,x=new ss;x.i=v.i,v.g&&(x.g=new Map(v.g),x.h=v.h),rs(this,x),this.m=u.m}else u&&(v=String(u).match(Ma))?(this.h=!1,Oa(this,v[1]||"",!0),this.o=er(v[2]||""),this.g=er(v[3]||"",!0),Bs(this,v[4]),this.l=er(v[5]||"",!0),rs(this,v[6]||"",!0),this.m=er(v[7]||"")):(this.h=!1,this.i=new ss(null,this.h))}Kt.prototype.toString=function(){var u=[],v=this.j;v&&u.push(Pa(v,Qo,!0),":");var x=this.g;return(x||v=="file")&&(u.push("//"),(v=this.o)&&u.push(Pa(v,Qo,!0),"@"),u.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&u.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&u.push("/"),u.push(Pa(x,x.charAt(0)=="/"?gd:Xo,!0))),(x=this.i.toString())&&u.push("?",x),(x=this.m)&&u.push("#",Pa(x,Ri)),u.join("")};function Gn(u){return new Kt(u)}function Oa(u,v,x){u.j=x?er(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function Bs(u,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);u.s=v}else u.s=null}function rs(u,v,x){v instanceof ss?(u.i=v,qc(u.i,u.h)):(x||(v=Pa(v,pd)),u.i=new ss(v,u.h))}function vt(u,v,x){u.i.set(v,x)}function Va(u){return vt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function er(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Pa(u,v,x){return typeof u=="string"?(u=encodeURI(u).replace(v,Bc),x&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Bc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Qo=/[#\/\?@]/g,Xo=/[#\?:]/g,gd=/[#\?]/g,pd=/[#\?@]/g,Ri=/#/g;function ss(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function tr(u){u.g||(u.g=new Map,u.h=0,u.i&&md(u.i,function(v,x){u.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}s=ss.prototype,s.add=function(u,v){tr(this),this.i=null,u=Dr(this,u);var x=this.g.get(u);return x||this.g.set(u,x=[]),x.push(v),this.h+=1,this};function as(u,v){tr(u),v=Dr(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function is(u,v){return tr(u),v=Dr(u,v),u.g.has(v)}s.forEach=function(u,v){tr(this),this.g.forEach(function(x,w){x.forEach(function(q){u.call(v,q,w,this)},this)},this)},s.na=function(){tr(this);const u=Array.from(this.g.values()),v=Array.from(this.g.keys()),x=[];for(let w=0;w<v.length;w++){const q=u[w];for(let W=0;W<q.length;W++)x.push(v[w])}return x},s.V=function(u){tr(this);let v=[];if(typeof u=="string")is(this,u)&&(v=v.concat(this.g.get(Dr(this,u))));else{u=Array.from(this.g.values());for(let x=0;x<u.length;x++)v=v.concat(u[x])}return v},s.set=function(u,v){return tr(this),this.i=null,u=Dr(this,u),is(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},s.get=function(u,v){return u?(u=this.V(u),0<u.length?String(u[0]):v):v};function Zo(u,v,x){as(u,v),0<x.length&&(u.i=null,u.g.set(Dr(u,v),z(x)),u.h+=x.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(var x=0;x<v.length;x++){var w=v[x];const W=encodeURIComponent(String(w)),de=this.V(w);for(w=0;w<de.length;w++){var q=W;de[w]!==""&&(q+="="+encodeURIComponent(String(de[w]))),u.push(q)}}return this.i=u.join("&")};function Dr(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function qc(u,v){v&&!u.j&&(tr(u),u.i=null,u.g.forEach(function(x,w){var q=w.toLowerCase();w!=q&&(as(this,w),Zo(this,q,x))},u)),u.j=v}function La(u,v){const x=new Jn;if(g.Image){const w=new Image;w.onload=V(nr,x,"TestLoadImage: loaded",!0,v,w),w.onerror=V(nr,x,"TestLoadImage: error",!1,v,w),w.onabort=V(nr,x,"TestLoadImage: abort",!1,v,w),w.ontimeout=V(nr,x,"TestLoadImage: timeout",!1,v,w),g.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=u}else v(!1)}function vr(u,v){const x=new Jn,w=new AbortController,q=setTimeout(()=>{w.abort(),nr(x,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:w.signal}).then(W=>{clearTimeout(q),W.ok?nr(x,"TestPingServer: ok",!0,v):nr(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),nr(x,"TestPingServer: error",!1,v)})}function nr(u,v,x,w,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),w(x)}catch{}}function za(){this.g=new Et}function jr(u,v,x){const w=x||"";try{Yo(u,function(q,W){let de=q;y(q)&&(de=Ct(q)),v.push(w+W+"="+encodeURIComponent(de))})}catch(q){throw v.push(w+"type="+encodeURIComponent("_badmap")),q}}function qs(u){this.l=u.Ub||null,this.j=u.eb||!1}B(qs,ot),qs.prototype.g=function(){return new os(this.l,this.j)},qs.prototype.i=(function(u){return function(){return u}})({});function os(u,v){Rt.call(this),this.D=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(os,Rt),s=os.prototype,s.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=v,this.readyState=1,Or(this)},s.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(v.body=u),(this.D||g).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},s.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wo(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wo(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}s.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?Mr(this):Or(this),this.readyState==3&&Wo(this)}},s.Ra=function(u){this.g&&(this.response=this.responseText=u,Mr(this))},s.Qa=function(u){this.g&&(this.response=u,Mr(this))},s.ga=function(){this.g&&Mr(this)};function Mr(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Or(u)}s.setRequestHeader=function(u,v){this.u.append(u,v)},s.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,u.push(x[0]+": "+x[1]),x=v.next();return u.join(`\r
`)};function Or(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(os.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Jo(u){let v="";return he(u,function(x,w){v+=w,v+=":",v+=x,v+=`\r
`}),v}function un(u,v,x){e:{for(w in x){var w=!1;break e}w=!0}w||(x=Jo(x),typeof u=="string"?x!=null&&encodeURIComponent(String(x)):vt(u,v,x))}function ct(u){Rt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(ct,Rt);var Ci=/^https?$/i,Ua=["POST","PUT"];s=ct.prototype,s.Ha=function(u){this.J=u},s.ea=function(u,v,x,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rr.g(),this.v=this.o?cn(this.o):cn(Rr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(W){Hc(this,W);return}if(u=x||"",x=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var q in w)x.set(q,w[q]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const W of w.keys())x.set(W,w.get(W));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(x.keys()).find(W=>W.toLowerCase()=="content-type"),q=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(Ua,v,void 0))||w||q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,de]of x)this.g.setRequestHeader(W,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ba(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Hc(this,W)}};function Hc(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.m=5,Ii(u),Vr(u)}function Ii(u){u.A||(u.A=!0,at(u,"complete"),at(u,"error"))}s.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,at(this,"complete"),at(this,"abort"),Vr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vr(this,!0)),ct.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Di(this):this.bb())},s.bb=function(){Di(this)};function Di(u){if(u.h&&typeof h<"u"&&(!u.v[1]||rr(u)!=4||u.Z()!=2)){if(u.u&&rr(u)==4)ln(u.Ea,0,u);else if(at(u,"readystatechange"),rr(u)==4){u.h=!1;try{const de=u.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var w;if(w=de===0){var q=String(u.D).match(Ma)[1]||null;!q&&g.self&&g.self.location&&(q=g.self.location.protocol.slice(0,-1)),w=!Ci.test(q?q.toLowerCase():"")}x=w}if(x)at(u,"complete"),at(u,"success");else{u.m=6;try{var W=2<rr(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Ii(u)}}finally{Vr(u)}}}}function Vr(u,v){if(u.g){Ba(u);const x=u.g,w=u.v[0]?()=>{}:null;u.g=null,u.v=null,v||at(u,"ready");try{x.onreadystatechange=w}catch{}}}function Ba(u){u.I&&(g.clearTimeout(u.I),u.I=null)}s.isActive=function(){return!!this.g};function rr(u){return u.g?u.g.readyState:0}s.Z=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Ke(v)}};function Gc(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yd(u){const v={};u=(u.g&&2<=rr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<u.length;w++){if(X(u[w]))continue;var x=P(u[w]);const q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const W=v[q]||[];v[q]=W,W.push(x)}O(v,function(w){return w.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qa(u,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[u]||v}function ji(u){this.Aa=0,this.i=[],this.j=new Jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qa("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qa("baseRetryDelayMs",5e3,u),this.cb=qa("retryDelaySeedMs",1e4,u),this.Wa=qa("forwardChannelMaxRetries",2,u),this.wa=qa("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ns(u&&u.concurrentRequestLimit),this.Da=new za,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ji.prototype,s.la=8,s.G=1,s.connect=function(u,v,x,w){It(0),this.W=u,this.H=v||{},x&&w!==void 0&&(this.H.OSID=x,this.H.OAID=w),this.F=this.X,this.I=Zc(this,null,this.W),Oi(this)};function el(u){if(Fc(u),u.G==3){var v=u.U++,x=Gn(u.I);if(vt(x,"SID",u.K),vt(x,"RID",v),vt(x,"TYPE","terminate"),Ha(u,x),v=new Dn(u,u.j,v),v.L=2,v.v=Va(Gn(x)),x=!1,g.navigator&&g.navigator.sendBeacon)try{x=g.navigator.sendBeacon(v.v.toString(),"")}catch{}!x&&g.Image&&(new Image().src=v.v,x=!0),x||(v.g=Wc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Da(v)}Xc(u)}function Mi(u){u.g&&(Ga(u),u.g.cancel(),u.g=null)}function Fc(u){Mi(u),u.u&&(g.clearTimeout(u.u),u.u=null),Vi(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function Oi(u){if(!Si(u.h)&&!u.s){u.s=!0;var v=u.Ga;se||N(),ee||(se(),ee=!0),me.add(v,u),u.B=0}}function vd(u,v){return Ai(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=v.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=$t(A(u.Ga,u,v),rl(u,u.B)),u.B++,!0)}s.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const q=new Dn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=R(W),M(W,this.S)):W=this.S),this.m!==null||this.O||(q.H=W,W=null),this.P)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var w=this.i[x];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(v+=w,4096<v){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=$c(this,q,v),x=Gn(this.I),vt(x,"RID",u),vt(x,"CVER",22),this.D&&vt(x,"X-HTTP-Session-Id",this.D),Ha(this,x),W&&(this.O?v="headers="+encodeURIComponent(String(Jo(W)))+"&"+v:this.m&&un(x,this.m,W)),ki(this.h,q),this.Ua&&vt(x,"TYPE","init"),this.P?(vt(x,"$req",v),vt(x,"SID","null"),q.T=!0,yr(q,x,null)):yr(q,x,v),this.G=2}}else this.G==3&&(u?tl(this,u):this.i.length==0||Si(this.h)||tl(this))};function tl(u,v){var x;v?x=v.l:x=u.U++;const w=Gn(u.I);vt(w,"SID",u.K),vt(w,"RID",x),vt(w,"AID",u.T),Ha(u,w),u.m&&u.o&&un(w,u.m,u.o),x=new Dn(u,u.j,x,u.B+1),u.m===null&&(x.H=u.o),v&&(u.i=v.D.concat(u.i)),v=$c(u,x,1e3),x.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ki(u.h,x),yr(x,w,v)}function Ha(u,v){u.H&&he(u.H,function(x,w){vt(v,w,x)}),u.l&&Yo({},function(x,w){vt(v,w,x)})}function $c(u,v,x){x=Math.min(u.i.length,x);var w=u.l?A(u.l.Na,u.l,u):null;e:{var q=u.i;let W=-1;for(;;){const de=["count="+x];W==-1?0<x?(W=q[0].g,de.push("ofs="+W)):W=0:de.push("ofs="+W);let Je=!0;for(let nn=0;nn<x;nn++){let et=q[nn].g;const hn=q[nn].map;if(et-=W,0>et)W=Math.max(0,q[nn].g-100),Je=!1;else try{jr(hn,de,"req"+et+"_")}catch{w&&w(hn)}}if(Je){w=de.join("&");break e}}}return u=u.i.splice(0,x),v.D=u,w}function Kc(u){if(!u.g&&!u.u){u.Y=1;var v=u.Fa;se||N(),ee||(se(),ee=!0),me.add(v,u),u.v=0}}function nl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=$t(A(u.Fa,u),rl(u,u.v)),u.v++,!0)}s.Fa=function(){if(this.u=null,Yc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=$t(A(this.ab,this),u)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),Mi(this),Yc(this))};function Ga(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function Yc(u){u.g=new Dn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var v=Gn(u.qa);vt(v,"RID","rpc"),vt(v,"SID",u.K),vt(v,"AID",u.T),vt(v,"CI",u.F?"0":"1"),!u.F&&u.ja&&vt(v,"TO",u.ja),vt(v,"TYPE","xmlhttp"),Ha(u,v),u.m&&u.o&&un(v,u.m,u.o),u.L&&(u.g.I=u.L);var x=u.g;u=u.ia,x.L=1,x.v=Va(Gn(v)),x.m=null,x.P=!0,ts(x,u)}s.Za=function(){this.C!=null&&(this.C=null,Mi(this),nl(this),It(19))};function Vi(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function Qc(u,v){var x=null;if(u.g==v){Vi(u),Ga(u),u.g=null;var w=2}else if($o(u.h,v))x=v.D,jn(u.h,v),w=1;else return;if(u.G!=0){if(v.o)if(w==1){x=v.m?v.m.length:0,v=Date.now()-v.F;var q=u.B;w=Vs(),at(w,new tn(w,x)),Oi(u)}else Kc(u);else if(q=v.s,q==3||q==0&&0<v.X||!(w==1&&vd(u,v)||w==2&&nl(u)))switch(x&&0<x.length&&(v=u.h,v.i=v.i.concat(x)),q){case 1:ls(u,5);break;case 4:ls(u,10);break;case 3:ls(u,6);break;default:ls(u,2)}}}function rl(u,v){let x=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(x*=2),x*v}function ls(u,v){if(u.j.info("Error code "+v),v==2){var x=A(u.fb,u),w=u.Xa;const q=!w;w=new Kt(w||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||Oa(w,"https"),Va(w),q?La(w.toString(),x):vr(w.toString(),x)}else It(2);u.G=0,u.l&&u.l.sa(v),Xc(u),Fc(u)}s.fb=function(u){u?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Xc(u){if(u.G=0,u.ka=[],u.l){const v=Ko(u.h);(v.length!=0||u.i.length!=0)&&(j(u.ka,v),j(u.ka,u.i),u.h.i.length=0,z(u.i),u.i.length=0),u.l.ra()}}function Zc(u,v,x){var w=x instanceof Kt?Gn(x):new Kt(x);if(w.g!="")v&&(w.g=v+"."+w.g),Bs(w,w.s);else{var q=g.location;w=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var W=new Kt(null);w&&Oa(W,w),v&&(W.g=v),q&&Bs(W,q),x&&(W.l=x),w=W}return x=u.D,v=u.ya,x&&v&&vt(w,x,v),vt(w,"VER",u.la),Ha(u,w),w}function Wc(u,v,x){if(v&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Ca&&!u.pa?new ct(new qs({eb:x})):new ct(u.pa),v.Ha(u.J),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jc(){}s=Jc.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Pi(){}Pi.prototype.g=function(u,v){return new Mn(u,v)};function Mn(u,v){Rt.call(this),this.g=new ji(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(u?u["X-WebChannel-Client-Profile"]=v.va:u={"X-WebChannel-Client-Profile":v.va}),this.g.S=u,(u=v&&v.Sb)&&!X(u)&&(this.g.m=u),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!X(v)&&(this.g.D=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new Pr(this)}B(Mn,Rt),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){el(this.g)},Mn.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var x={};x.__data__=u,u=x}else this.u&&(x={},x.__data__=Ct(u),u=x);v.i.push(new Uc(v.Ya++,u)),v.G==3&&Oi(v)},Mn.prototype.N=function(){this.g.l=null,delete this.j,el(this.g),delete this.g,Mn.aa.N.call(this)};function eu(u){yt.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const x in v){u=x;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}B(eu,yt);function tu(){Bt.call(this),this.status=1}B(tu,Bt);function Pr(u){this.g=u}B(Pr,Jc),Pr.prototype.ua=function(){at(this.g,"a")},Pr.prototype.ta=function(u){at(this.g,new eu(u))},Pr.prototype.sa=function(u){at(this.g,new tu)},Pr.prototype.ra=function(){at(this.g,"b")},Pi.prototype.createWebChannel=Pi.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,Vb=function(){return new Pi},Ob=function(){return Vs()},Mb=Sn,qm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,ph=zs,es.COMPLETE="complete",jb=es,ft.EventType=Hn,Hn.OPEN="a",Hn.CLOSE="b",Hn.ERROR="c",Hn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,Ql=ft,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,Db=ct}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});const p_="@firebase/firestore",y_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Un=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Un.UNAUTHENTICATED=new Un(null),Un.GOOGLE_CREDENTIALS=new Un("google-credentials-uid"),Un.FIRST_PARTY=new Un("first-party-uid"),Un.MOCK_USER=new Un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new mg("@firebase/firestore");function mo(){return fi.logLevel}function ve(s,...e){if(fi.logLevel<=Ye.DEBUG){const n=e.map(Sg);fi.debug(`Firestore (${Lo}): ${s}`,...n)}}function js(s,...e){if(fi.logLevel<=Ye.ERROR){const n=e.map(Sg);fi.error(`Firestore (${Lo}): ${s}`,...n)}}function hc(s,...e){if(fi.logLevel<=Ye.WARN){const n=e.map(Sg);fi.warn(`Firestore (${Lo}): ${s}`,...n)}}function Sg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(s,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,Pb(s,a,n)}function Pb(s,e,n){let a=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw js(a),new Error(a)}function ut(s,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,s||Pb(e,o,a)}function Oe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class CN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Un.UNAUTHENTICATED)))}shutdown(){}}class IN{constructor(e){this.t=e,this.currentUser=Un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ut(this.o===void 0,42304);let a=this.i;const o=p=>this.i!==a?(a=this.i,n(p)):Promise.resolve();let l=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new ks,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},g=p=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>g(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?g(p):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new ks)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ut(typeof a.accessToken=="string",31837,{l:a}),new RN(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new Un(e)}}class DN{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=Un.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class jN{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new DN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class v_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class MN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ut(this.o===void 0,3512);const a=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new v_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ut(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new v_(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<s;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=ON(40);for(let l=0;l<o.length;++l)a.length<20&&o[l]<n&&(a+=e.charAt(o[l]%62))}return a}}function Qe(s,e){return s<e?-1:s>e?1:0}function Hm(s,e){const n=Math.min(s.length,e.length);for(let a=0;a<n;a++){const o=s.charAt(a),l=e.charAt(a);if(o!==l)return Sm(o)===Sm(l)?Qe(o,l):Sm(o)?1:-1}return Qe(s.length,e.length)}const VN=55296,PN=57343;function Sm(s){const e=s.charCodeAt(0);return e>=VN&&e<=PN}function So(s,e,n){return s.length===e.length&&s.every(((a,o)=>n(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="__name__";class Gr{constructor(e,n,a){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Ce(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Gr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gr?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const l=Gr.compareSegments(e.get(o),n.get(o));if(l!==0)return l}return Qe(e.length,n.length)}static compareSegments(e,n){const a=Gr.isNumericId(e),o=Gr.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Gr.extractNumericId(e).compare(Gr.extractNumericId(n)):Hm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _a.fromString(e.substring(4,e.length-2))}}class kt extends Gr{construct(e,n,a){return new kt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new ge(ne.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new kt(n)}static emptyPath(){return new kt([])}}const LN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends Gr{construct(e,n,a){return new En(e,n,a)}static isValidIdentifier(e){return LN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===__}static keyField(){return new En([__])}static fromServerFormat(e){const n=[];let a="",o=0;const l=()=>{if(a.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let h=!1;for(;o<e.length;){const g=e[o];if(g==="\\"){if(o+1===e.length)throw new ge(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,o+=2}else g==="`"?(h=!h,o++):g!=="."||h?(a+=g,o++):(l(),o++)}if(l(),h)throw new ge(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(n)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(kt.fromString(e))}static fromName(e){return new Se(kt.fromString(e).popFirst(5))}static empty(){return new Se(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(s,e,n){if(!n)throw new ge(ne.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function zN(s,e,n,a){if(e===!0&&a===!0)throw new ge(ne.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function x_(s){if(!Se.isDocumentKey(s))throw new ge(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function b_(s){if(Se.isDocumentKey(s))throw new ge(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function zb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Kh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ce(12329,{type:typeof s})}function Ao(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ge(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kh(s);throw new ge(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(s,e){const n={typeString:s};return e&&(n.value=e),n}function Nc(s,e){if(!zb(s))throw new ge(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){n=`JSON missing required field: '${a}'`;break}const h=s[a];if(o&&typeof h!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){n=`Expected '${a}' field to equal '${l.value}'`;break}}if(n)throw new ge(ne.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=-62135596800,T_=1e6;class Nt{static now(){return Nt.fromMillis(Date.now())}static fromDate(e){return Nt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*T_);return new Nt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<E_)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/T_}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Nt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nc(e,Nt._jsonSchema))return new Nt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-E_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Nt._jsonSchemaVersion="firestore/timestamp/1.0",Nt._jsonSchema={type:Wt("string",Nt._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new Nt(0,0))}static max(){return new je(new Nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function UN(s,e){const n=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=je.fromTimestamp(a===1e9?new Nt(n+1,0):new Nt(n,a));return new ba(o,Se.empty(),e)}function BN(s){return new ba(s.readTime,s.key,dc)}class ba{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new ba(je.min(),Se.empty(),dc)}static max(){return new ba(je.max(),Se.empty(),dc)}}function qN(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=Se.comparator(s.documentKey,e.documentKey),n!==0?n:Qe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(s){if(s.code!==ne.FAILED_PRECONDITION||s.message!==HN)throw s;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((a,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,o)},this.catchCallback=l=>{this.wrapFailure(n,l).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,a)=>{n(e)}))}static reject(e){return new ie(((n,a)=>{a(e)}))}static waitFor(e){return new ie(((n,a)=>{let o=0,l=0,h=!1;e.forEach((g=>{++o,g.next((()=>{++l,h&&l===o&&n()}),(p=>a(p)))})),h=!0,l===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const a of e)n=n.next((o=>o?ie.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,l)=>{a.push(n.call(this,o,l))})),this.waitFor(a)}static mapArray(e,n){return new ie(((a,o)=>{const l=e.length,h=new Array(l);let g=0;for(let p=0;p<l;p++){const y=p;n(e[y]).next((_=>{h[y]=_,++g,g===l&&a(h)}),(_=>o(_)))}}))}static doWhile(e,n){return new ie(((a,o)=>{const l=()=>{e()===!0?n().next((()=>{l()}),o):a()};l()}))}}function FN(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Uo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Yh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=-1;function Qh(s){return s==null}function Rh(s){return s===0&&1/s==-1/0}function $N(s){return typeof s=="number"&&Number.isInteger(s)&&!Rh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="";function KN(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=w_(e)),e=YN(s.get(n),e);return w_(e)}function YN(s,e){let n=e;const a=s.length;for(let o=0;o<a;o++){const l=s.charAt(o);switch(l){case"\0":n+="";break;case Ub:n+="";break;default:n+=l}}return n}function w_(s){return s+Ub+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function pi(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Bb(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.comparator=e,this.root=n||bn.EMPTY}insert(e,n){return new Pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=n?a(e.key,n):1,n&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,n,a,o,l){this.key=e,this.value=n,this.color=a??bn.RED,this.left=o??bn.EMPTY,this.right=l??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,l){return new bn(e??this.key,n??this.value,a??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const l=a(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,n,a),null):l===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return bn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,a,o,l){return this}insert(e,n,a){return new bn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new A_(this.data.getIterator())}getIteratorFrom(e){return new A_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=a.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new on(this.comparator);return n.data=e,n}}class A_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new Tr([])}unionWith(e){let n=new on(En.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Tr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return So(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new qb("Invalid base64 string: "+l):l}})(e);return new Tn(n)}static fromUint8Array(e){const n=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const QN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ea(s){if(ut(!!s,39018),typeof s=="string"){let e=0;const n=QN.exec(s);if(ut(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ft(s.seconds),nanos:Ft(s.nanos)}}function Ft(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ta(s){return typeof s=="string"?Tn.fromBase64String(s):Tn.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="server_timestamp",Gb="__type__",Fb="__previous_value__",$b="__local_write_time__";function Ng(s){return(s?.mapValue?.fields||{})[Gb]?.stringValue===Hb}function Xh(s){const e=s.mapValue.fields[Fb];return Ng(e)?Xh(e):e}function fc(s){const e=Ea(s.mapValue.fields[$b].timestampValue);return new Nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,a,o,l,h,g,p,y,_){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=g,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_}}const Ch="(default)";class mc{constructor(e,n){this.projectId=e,this.database=n||Ch}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database===Ch}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="__type__",ZN="__max__",ih={mapValue:{}},Yb="__vector__",Ih="value";function wa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ng(s)?4:JN(s)?9007199254740991:WN(s)?10:11:Ce(28295,{value:s})}function Zr(s,e){if(s===e)return!0;const n=wa(s);if(n!==wa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return fc(s).isEqual(fc(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=Ea(o.timestampValue),g=Ea(l.timestampValue);return h.seconds===g.seconds&&h.nanos===g.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,l){return Ta(o.bytesValue).isEqual(Ta(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,l){return Ft(o.geoPointValue.latitude)===Ft(l.geoPointValue.latitude)&&Ft(o.geoPointValue.longitude)===Ft(l.geoPointValue.longitude)})(s,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Ft(o.integerValue)===Ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=Ft(o.doubleValue),g=Ft(l.doubleValue);return h===g?Rh(h)===Rh(g):isNaN(h)&&isNaN(g)}return!1})(s,e);case 9:return So(s.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},g=l.mapValue.fields||{};if(S_(h)!==S_(g))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(g[p]===void 0||!Zr(h[p],g[p])))return!1;return!0})(s,e);default:return Ce(52216,{left:s})}}function gc(s,e){return(s.values||[]).find((n=>Zr(n,e)))!==void 0}function ko(s,e){if(s===e)return 0;const n=wa(s),a=wa(e);if(n!==a)return Qe(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qe(s.booleanValue,e.booleanValue);case 2:return(function(l,h){const g=Ft(l.integerValue||l.doubleValue),p=Ft(h.integerValue||h.doubleValue);return g<p?-1:g>p?1:g===p?0:isNaN(g)?isNaN(p)?0:-1:1})(s,e);case 3:return k_(s.timestampValue,e.timestampValue);case 4:return k_(fc(s),fc(e));case 5:return Hm(s.stringValue,e.stringValue);case 6:return(function(l,h){const g=Ta(l),p=Ta(h);return g.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,h){const g=l.split("/"),p=h.split("/");for(let y=0;y<g.length&&y<p.length;y++){const _=Qe(g[y],p[y]);if(_!==0)return _}return Qe(g.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,h){const g=Qe(Ft(l.latitude),Ft(h.latitude));return g!==0?g:Qe(Ft(l.longitude),Ft(h.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return N_(s.arrayValue,e.arrayValue);case 10:return(function(l,h){const g=l.fields||{},p=h.fields||{},y=g[Ih]?.arrayValue,_=p[Ih]?.arrayValue,E=Qe(y?.values?.length||0,_?.values?.length||0);return E!==0?E:N_(y,_)})(s.mapValue,e.mapValue);case 11:return(function(l,h){if(l===ih.mapValue&&h===ih.mapValue)return 0;if(l===ih.mapValue)return 1;if(h===ih.mapValue)return-1;const g=l.fields||{},p=Object.keys(g),y=h.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const A=Hm(p[E],_[E]);if(A!==0)return A;const V=ko(g[p[E]],y[_[E]]);if(V!==0)return V}return Qe(p.length,_.length)})(s.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function k_(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Qe(s,e);const n=Ea(s),a=Ea(e),o=Qe(n.seconds,a.seconds);return o!==0?o:Qe(n.nanos,a.nanos)}function N_(s,e){const n=s.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const l=ko(n[o],a[o]);if(l)return l}return Qe(n.length,a.length)}function No(s){return Gm(s)}function Gm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const a=Ea(n);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return Ta(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Se.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let a="[",o=!0;for(const l of n.values||[])o?o=!1:a+=",",a+=Gm(l);return a+"]"})(s.arrayValue):"mapValue"in s?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",l=!0;for(const h of a)l?l=!1:o+=",",o+=`${h}:${Gm(n.fields[h])}`;return o+"}"})(s.mapValue):Ce(61005,{value:s})}function yh(s){switch(wa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Xh(s);return e?16+yh(e):16;case 5:return 2*s.stringValue.length;case 6:return Ta(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,l)=>o+yh(l)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return pi(a.fields,((l,h)=>{o+=l.length+yh(h)})),o})(s.mapValue);default:throw Ce(13486,{value:s})}}function R_(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Fm(s){return!!s&&"integerValue"in s}function Rg(s){return!!s&&"arrayValue"in s}function C_(s){return!!s&&"nullValue"in s}function I_(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function vh(s){return!!s&&"mapValue"in s}function WN(s){return(s?.mapValue?.fields||{})[Kb]?.stringValue===Yb}function tc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return pi(s.mapValue.fields,((n,a)=>e.mapValue.fields[n]=tc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tc(s.arrayValue.values[n]);return e}return{...s}}function JN(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===ZN}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.value=e}static empty(){return new fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!vh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(n)}setAll(e){let n=En.emptyPath(),a={},o=[];e.forEach(((h,g)=>{if(!n.isImmediateParentOf(g)){const p=this.getFieldsMap(n);this.applyChanges(p,a,o),a={},o=[],n=g.popLast()}h?a[g.lastSegment()]=tc(h):o.push(g.lastSegment())}));const l=this.getFieldsMap(n);this.applyChanges(l,a,o)}delete(e){const n=this.field(e.popLast());vh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];vh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){pi(n,((o,l)=>e[o]=l));for(const o of a)delete e[o]}clone(){return new fr(tc(this.value))}}function Qb(s){const e=[];return pi(s.fields,((n,a)=>{const o=new En([n]);if(vh(a)){const l=Qb(a.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new Tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n,a,o,l,h,g){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=l,this.data=h,this.documentState=g}static newInvalidDocument(e){return new Rn(e,0,je.min(),je.min(),je.min(),fr.empty(),0)}static newFoundDocument(e,n,a,o){return new Rn(e,1,n,je.min(),a,o,0)}static newNoDocument(e,n){return new Rn(e,2,n,je.min(),je.min(),fr.empty(),0)}static newUnknownDocument(e,n){return new Rn(e,3,n,je.min(),je.min(),fr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n){this.position=e,this.inclusive=n}}function D_(s,e,n){let a=0;for(let o=0;o<s.position.length;o++){const l=e[o],h=s.position[o];if(l.field.isKeyField()?a=Se.comparator(Se.fromName(h.referenceValue),n.key):a=ko(h,n.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function j_(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Zr(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n="asc"){this.field=e,this.dir=n}}function eR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{}class Zt extends Xb{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new nR(e,n,a):n==="array-contains"?new aR(e,a):n==="in"?new iR(e,a):n==="not-in"?new oR(e,a):n==="array-contains-any"?new lR(e,a):new Zt(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new rR(e,a):new sR(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ko(n,this.value)):n!==null&&wa(this.value)===wa(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends Xb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new kr(e,n)}matches(e){return Zb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Zb(s){return s.op==="and"}function Wb(s){return tR(s)&&Zb(s)}function tR(s){for(const e of s.filters)if(e instanceof kr)return!1;return!0}function $m(s){if(s instanceof Zt)return s.field.canonicalString()+s.op.toString()+No(s.value);if(Wb(s))return s.filters.map((e=>$m(e))).join(",");{const e=s.filters.map((n=>$m(n))).join(",");return`${s.op}(${e})`}}function Jb(s,e){return s instanceof Zt?(function(a,o){return o instanceof Zt&&a.op===o.op&&a.field.isEqual(o.field)&&Zr(a.value,o.value)})(s,e):s instanceof kr?(function(a,o){return o instanceof kr&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((l,h,g)=>l&&Jb(h,o.filters[g])),!0):!1})(s,e):void Ce(19439)}function e1(s){return s instanceof Zt?(function(n){return`${n.field.canonicalString()} ${n.op} ${No(n.value)}`})(s):s instanceof kr?(function(n){return n.op.toString()+" {"+n.getFilters().map(e1).join(" ,")+"}"})(s):"Filter"}class nR extends Zt{constructor(e,n,a){super(e,n,a),this.key=Se.fromName(a.referenceValue)}matches(e){const n=Se.comparator(e.key,this.key);return this.matchesComparison(n)}}class rR extends Zt{constructor(e,n){super(e,"in",n),this.keys=t1("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class sR extends Zt{constructor(e,n){super(e,"not-in",n),this.keys=t1("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function t1(s,e){return(e.arrayValue?.values||[]).map((n=>Se.fromName(n.referenceValue)))}class aR extends Zt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rg(n)&&gc(n.arrayValue,this.value)}}class iR extends Zt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class oR extends Zt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!gc(this.value.arrayValue,n)}}class lR extends Zt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>gc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n=null,a=[],o=[],l=null,h=null,g=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=l,this.startAt=h,this.endAt=g,this.Te=null}}function M_(s,e=null,n=[],a=[],o=null,l=null,h=null){return new cR(s,e,n,a,o,l,h)}function Cg(s){const e=Oe(s);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>$m(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Qh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>No(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>No(a))).join(",")),e.Te=n}return e.Te}function Ig(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!eR(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!Jb(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!j_(s.startAt,e.startAt)&&j_(s.endAt,e.endAt)}function Km(s){return Se.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,n=null,a=[],o=[],l=null,h="F",g=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=l,this.limitType=h,this.startAt=g,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uR(s,e,n,a,o,l,h,g){return new Bo(s,e,n,a,o,l,h,g)}function Dg(s){return new Bo(s)}function O_(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function n1(s){return s.collectionGroup!==null}function nc(s){const e=Oe(s);if(e.Ie===null){e.Ie=[];const n=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),n.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let g=new on(En.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(g=g.add(y.field))}))})),g})(e).forEach((l=>{n.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new pc(l,a))})),n.has(En.keyField().canonicalString())||e.Ie.push(new pc(En.keyField(),a))}return e.Ie}function Kr(s){const e=Oe(s);return e.Ee||(e.Ee=hR(e,nc(s))),e.Ee}function hR(s,e){if(s.limitType==="F")return M_(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new pc(o.field,l)}));const n=s.endAt?new Dh(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Dh(s.startAt.position,s.startAt.inclusive):null;return M_(s.path,s.collectionGroup,e,s.filters,s.limit,n,a)}}function Ym(s,e){const n=s.filters.concat([e]);return new Bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function Qm(s,e,n){return new Bo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function Zh(s,e){return Ig(Kr(s),Kr(e))&&s.limitType===e.limitType}function r1(s){return`${Cg(Kr(s))}|lt:${s.limitType}`}function go(s){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>e1(o))).join(", ")}]`),Qh(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>No(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>No(o))).join(",")),`Target(${a})`})(Kr(s))}; limitType=${s.limitType})`}function Wh(s,e){return e.isFoundDocument()&&(function(a,o){const l=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):Se.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(s,e)&&(function(a,o){for(const l of nc(a))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const l of a.filters)if(!l.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(h,g,p){const y=D_(h,g,p);return h.inclusive?y<=0:y<0})(a.startAt,nc(a),o)||a.endAt&&!(function(h,g,p){const y=D_(h,g,p);return h.inclusive?y>=0:y>0})(a.endAt,nc(a),o))})(s,e)}function dR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function s1(s){return(e,n)=>{let a=!1;for(const o of nc(s)){const l=fR(o,e,n);if(l!==0)return l;a=a||o.field.isKeyField()}return 0}}function fR(s,e,n){const a=s.field.isKeyField()?Se.comparator(e.key,n.key):(function(l,h,g){const p=h.data.field(l),y=g.data.field(l);return p!==null&&y!==null?ko(p,y):Ce(42886)})(s.field,e,n);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ce(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,l]of a)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,((n,a)=>{for(const[o,l]of a)e(o,l)}))}isEmpty(){return Bb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new Pt(Se.comparator);function Ms(){return mR}const a1=new Pt(Se.comparator);function Xl(...s){let e=a1;for(const n of s)e=e.insert(n.key,n);return e}function i1(s){let e=a1;return s.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function oi(){return rc()}function o1(){return rc()}function rc(){return new yi((s=>s.toString()),((s,e)=>s.isEqual(e)))}const gR=new Pt(Se.comparator),pR=new on(Se.comparator);function Xe(...s){let e=pR;for(const n of s)e=e.add(n);return e}const yR=new on(Qe);function vR(){return yR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rh(e)?"-0":e}}function l1(s){return{integerValue:""+s}}function _R(s,e){return $N(e)?l1(e):jg(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(){this._=void 0}}function xR(s,e,n){return s instanceof yc?(function(o,l){const h={fields:{[Gb]:{stringValue:Hb},[$b]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Ng(l)&&(l=Xh(l)),l&&(h.fields[Fb]=l),{mapValue:h}})(n,e):s instanceof vc?u1(s,e):s instanceof _c?h1(s,e):(function(o,l){const h=c1(o,l),g=V_(h)+V_(o.Ae);return Fm(h)&&Fm(o.Ae)?l1(g):jg(o.serializer,g)})(s,e)}function bR(s,e,n){return s instanceof vc?u1(s,e):s instanceof _c?h1(s,e):n}function c1(s,e){return s instanceof jh?(function(a){return Fm(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class yc extends Jh{}class vc extends Jh{constructor(e){super(),this.elements=e}}function u1(s,e){const n=d1(e);for(const a of s.elements)n.some((o=>Zr(o,a)))||n.push(a);return{arrayValue:{values:n}}}class _c extends Jh{constructor(e){super(),this.elements=e}}function h1(s,e){let n=d1(e);for(const a of s.elements)n=n.filter((o=>!Zr(o,a)));return{arrayValue:{values:n}}}class jh extends Jh{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function V_(s){return Ft(s.integerValue||s.doubleValue)}function d1(s){return Rg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,n){this.field=e,this.transform=n}}function TR(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof vc&&o instanceof vc||a instanceof _c&&o instanceof _c?So(a.elements,o.elements,Zr):a instanceof jh&&o instanceof jh?Zr(a.Ae,o.Ae):a instanceof yc&&o instanceof yc})(s.transform,e.transform)}class wR{constructor(e,n){this.version=e,this.transformResults=n}}class Ns{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ns}static exists(e){return new Ns(void 0,e)}static updateTime(e){return new Ns(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _h(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ed{}function f1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new g1(s.key,Ns.none()):new Rc(s.key,s.data,Ns.none());{const n=s.data,a=fr.empty();let o=new on(En.comparator);for(let l of e.fields)if(!o.has(l)){let h=n.field(l);h===null&&l.length>1&&(l=l.popLast(),h=n.field(l)),h===null?a.delete(l):a.set(l,h),o=o.add(l)}return new vi(s.key,a,new Tr(o.toArray()),Ns.none())}}function SR(s,e,n){s instanceof Rc?(function(o,l,h){const g=o.value.clone(),p=L_(o.fieldTransforms,l,h.transformResults);g.setAll(p),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,e,n):s instanceof vi?(function(o,l,h){if(!_h(o.precondition,l))return void l.convertToUnknownDocument(h.version);const g=L_(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(m1(o)),p.setAll(g),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(s,e,n):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function sc(s,e,n,a){return s instanceof Rc?(function(l,h,g,p){if(!_h(l.precondition,h))return g;const y=l.value.clone(),_=z_(l.fieldTransforms,p,h);return y.setAll(_),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,e,n,a):s instanceof vi?(function(l,h,g,p){if(!_h(l.precondition,h))return g;const y=z_(l.fieldTransforms,p,h),_=h.data;return _.setAll(m1(l)),_.setAll(y),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),g===null?null:g.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(s,e,n,a):(function(l,h,g){return _h(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):g})(s,e,n)}function AR(s,e){let n=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),l=c1(a.transform,o||null);l!=null&&(n===null&&(n=fr.empty()),n.set(a.field,l))}return n||null}function P_(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&So(a,o,((l,h)=>TR(l,h)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Rc extends ed{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class vi extends ed{constructor(e,n,a,o,l=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function m1(s){const e=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=s.data.field(n);e.set(n,a)}})),e}function L_(s,e,n){const a=new Map;ut(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const l=s[o],h=l.transform,g=e.data.field(l.field);a.set(l.field,bR(h,g,n[o]))}return a}function z_(s,e,n){const a=new Map;for(const o of s){const l=o.transform,h=n.data.field(o.field);a.set(o.field,xR(l,h,e))}return a}class g1 extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kR extends ed{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&SR(l,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=sc(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=sc(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=o1();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let g=this.applyToLocalView(h,l.mutatedFields);g=n.has(o.key)?null:g;const p=f1(h,g);p!==null&&a.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(je.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&So(this.mutations,e.mutations,((n,a)=>P_(n,a)))&&So(this.baseMutations,e.baseMutations,((n,a)=>P_(n,a)))}}class Mg{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){ut(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return gR})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,a[h].version);return new Mg(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,nt;function IR(s){switch(s){case ne.OK:return Ce(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ce(15467,{code:s})}}function p1(s){if(s===void 0)return js("GRPC error has no .code"),ne.UNKNOWN;switch(s){case Xt.OK:return ne.OK;case Xt.CANCELLED:return ne.CANCELLED;case Xt.UNKNOWN:return ne.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return ne.INTERNAL;case Xt.UNAVAILABLE:return ne.UNAVAILABLE;case Xt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Xt.NOT_FOUND:return ne.NOT_FOUND;case Xt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Xt.ABORTED:return ne.ABORTED;case Xt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Xt.DATA_LOSS:return ne.DATA_LOSS;default:return Ce(39323,{code:s})}}(nt=Xt||(Xt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new _a([4294967295,4294967295],0);function U_(s){const e=DR().encode(s),n=new Ib;return n.update(e),new Uint8Array(n.digest())}function B_(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new _a([n,a],0),new _a([o,l],0)]}class Og{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new Zl(`Invalid padding: ${n}`);if(a<0)throw new Zl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Zl(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new Zl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=_a.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(_a.fromNumber(a)));return o.compare(jR)===1&&(o=new _a([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=U_(e),[a,o]=B_(n);for(let l=0;l<this.hashCount;l++){const h=this.ye(a,o,l);if(!this.we(h))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Og(l,o,n);return a.forEach((g=>h.insert(g))),h}insert(e){if(this.ge===0)return;const n=U_(e),[a,o]=B_(n);for(let l=0;l<this.hashCount;l++){const h=this.ye(a,o,l);this.Se(h)}}Se(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class Zl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,n,a,o,l){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,Cc.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new td(je.min(),o,new Pt(Qe),Ms(),Xe())}}class Cc{constructor(e,n,a,o,l){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Cc(a,n,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,a,o){this.be=e,this.removedTargetIds=n,this.key=a,this.De=o}}class y1{constructor(e,n){this.targetId=e,this.Ce=n}}class v1{constructor(e,n,a=Tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class q_{constructor(){this.ve=0,this.Fe=H_(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),n=Xe(),a=Xe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Ce(38017,{changeType:l})}})),new Cc(this.Me,this.xe,e,n,a)}qe(){this.Oe=!1,this.Fe=H_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class MR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ms(),this.Je=oh(),this.He=oh(),this.Ye=new Pt(Qe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const l=o.target;if(Km(l))if(a===0){const h=new Se(l.path);this.et(n,h,Rn.newNoDocument(h,je.min()))}else ut(a===1,20013,{expectedCount:a});else{const h=this._t(n);if(h!==a){const g=this.ut(e),p=g?this.ct(g,e,h):1;if(p!==0){this.it(n);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:l=0}=n;let h,g;try{h=Ta(a).toUint8Array()}catch(p){if(p instanceof qb)return hc("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{g=new Og(h,o,l)}catch(p){return hc(p instanceof Zl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return g.ge===0?null:g}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((l=>{const h=this.Ge.ht(),g=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(g)||(this.et(n,l,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((l,h)=>{const g=this.ot(h);if(g){if(l.current&&Km(g.target)){const p=new Se(g.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,Rn.newNoDocument(p,e))}l.Be&&(n.set(h,l.ke()),l.qe())}}));let a=Xe();this.He.forEach(((l,h)=>{let g=!0;h.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)})),g&&(a=a.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new td(e,n,this.Ye,this.je,a);return this.je=Ms(),this.Je=oh(),this.He=oh(),this.Ye=new Pt(Qe),o}Xe(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,a),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new q_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new on(Qe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new on(Qe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ve("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new q_),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function oh(){return new Pt(Se.comparator)}function H_(){return new Pt(Se.comparator)}const OR={asc:"ASCENDING",desc:"DESCENDING"},VR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PR={and:"AND",or:"OR"};class LR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xm(s,e){return s.useProto3Json||Qh(e)?e:{value:e}}function Mh(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function zR(s,e){return Mh(s,e.toTimestamp())}function Yr(s){return ut(!!s,49232),je.fromTimestamp((function(n){const a=Ea(n);return new Nt(a.seconds,a.nanos)})(s))}function Vg(s,e){return Zm(s,e).canonicalString()}function Zm(s,e){const n=(function(o){return new kt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?n:n.child(e)}function x1(s){const e=kt.fromString(s);return ut(S1(e),10190,{key:e.toString()}),e}function Wm(s,e){return Vg(s.databaseId,e.path)}function Am(s,e){const n=x1(e);if(n.get(1)!==s.databaseId.projectId)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Se(E1(n))}function b1(s,e){return Vg(s.databaseId,e)}function UR(s){const e=x1(s);return e.length===4?kt.emptyPath():E1(e)}function Jm(s){return new kt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function E1(s){return ut(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function G_(s,e,n){return{name:Wm(s,e),fields:n.value.mapValue.fields}}function BR(s,e){let n;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(ut(_===void 0||typeof _=="string",58123),Tn.fromBase64String(_||"")):(ut(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Tn.fromUint8Array(_||new Uint8Array))})(s,e.targetChange.resumeToken),h=e.targetChange.cause,g=h&&(function(y){const _=y.code===void 0?ne.UNKNOWN:p1(y.code);return new ge(_,y.message||"")})(h);n=new v1(a,o,l,g||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Am(s,a.document.name),l=Yr(a.document.updateTime),h=a.document.createTime?Yr(a.document.createTime):je.min(),g=new fr({mapValue:{fields:a.document.fields}}),p=Rn.newFoundDocument(o,l,h,g),y=a.targetIds||[],_=a.removedTargetIds||[];n=new xh(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Am(s,a.document),l=a.readTime?Yr(a.readTime):je.min(),h=Rn.newNoDocument(o,l),g=a.removedTargetIds||[];n=new xh([],g,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Am(s,a.document),l=a.removedTargetIds||[];n=new xh([],l,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:l}=a,h=new CR(o,l),g=a.targetId;n=new y1(g,h)}}return n}function qR(s,e){let n;if(e instanceof Rc)n={update:G_(s,e.key,e.value)};else if(e instanceof g1)n={delete:Wm(s,e.key)};else if(e instanceof vi)n={update:G_(s,e.key,e.data),updateMask:ZR(e.fieldMask)};else{if(!(e instanceof kR))return Ce(16599,{Vt:e.type});n={verify:Wm(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(l,h){const g=h.transform;if(g instanceof yc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof vc)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof _c)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof jh)return{fieldPath:h.field.canonicalString(),increment:g.Ae};throw Ce(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:zR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(s,e.precondition)),n}function HR(s,e){return s&&s.length>0?(ut(e!==void 0,14353),s.map((n=>(function(o,l){let h=o.updateTime?Yr(o.updateTime):Yr(l);return h.isEqual(je.min())&&(h=Yr(l)),new wR(h,o.transformResults||[])})(n,e)))):[]}function GR(s,e){return{documents:[b1(s,e.path)]}}function FR(s,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=b1(s,o);const l=(function(y){if(y.length!==0)return w1(kr.create(y,"and"))})(e.filters);l&&(n.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((_=>(function(A){return{field:po(A.field),direction:YR(A.dir)}})(_)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const g=Xm(s,e.limit);return g!==null&&(n.structuredQuery.limit=g),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function $R(s){let e=UR(s.parent);const n=s.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){ut(a===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];n.where&&(l=(function(E){const A=T1(E);return A instanceof kr&&Wb(A)?A.getFilters():[A]})(n.where));let h=[];n.orderBy&&(h=(function(E){return E.map((A=>(function(B){return new pc(yo(B.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(A)))})(n.orderBy));let g=null;n.limit&&(g=(function(E){let A;return A=typeof E=="object"?E.value:E,Qh(A)?null:A})(n.limit));let p=null;n.startAt&&(p=(function(E){const A=!!E.before,V=E.values||[];return new Dh(V,A)})(n.startAt));let y=null;return n.endAt&&(y=(function(E){const A=!E.before,V=E.values||[];return new Dh(V,A)})(n.endAt)),uR(e,o,h,l,g,"F",p,y)}function KR(s,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function T1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=yo(n.unaryFilter.field);return Zt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(n.unaryFilter.field);return Zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=yo(n.unaryFilter.field);return Zt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=yo(n.unaryFilter.field);return Zt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Zt.create(yo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return kr.create(n.compositeFilter.filters.map((a=>T1(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(n.compositeFilter.op))})(s):Ce(30097,{filter:s})}function YR(s){return OR[s]}function QR(s){return VR[s]}function XR(s){return PR[s]}function po(s){return{fieldPath:s.canonicalString()}}function yo(s){return En.fromServerFormat(s.fieldPath)}function w1(s){return s instanceof Zt?(function(n){if(n.op==="=="){if(I_(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NAN"}};if(C_(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(I_(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NAN"}};if(C_(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(n.field),op:QR(n.op),value:n.value}}})(s):s instanceof kr?(function(n){const a=n.getFilters().map((o=>w1(o)));return a.length===1?a[0]:{compositeFilter:{op:XR(n.op),filters:a}}})(s):Ce(54877,{filter:s})}function ZR(s){const e=[];return s.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function S1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,a,o,l=je.min(),h=je.min(),g=Tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=g,this.expectedCount=p}withSequenceNumber(e){return new ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.yt=e}}function JR(s){const e=$R({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Qm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(){this.Cn=new tC}addToCollectionParentIndex(e,n){return this.Cn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(ba.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(ba.min())}updateCollectionGroup(e,n,a){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class tC{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new on(kt.comparator),l=!o.has(a);return this.index[n]=o.add(a),l}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new on(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},A1=41943040;class Bn{static withCacheSize(e){return new Bn(e,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bn.DEFAULT_COLLECTION_PERCENTILE=10,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bn.DEFAULT=new Bn(A1,Bn.DEFAULT_COLLECTION_PERCENTILE,Bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bn.DISABLED=new Bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ro(0)}static cr(){return new Ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="LruGarbageCollector",k1=1048576;function K_([s,e],[n,a]){const o=Qe(s,n);return o===0?Qe(e,a):o}class nC{constructor(e){this.Ir=e,this.buffer=new on(K_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();K_(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class rC{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve($_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Uo(n)?ve($_,"Ignoring IndexedDB error during garbage collection: ",n):await zo(n)}await this.Vr(3e5)}))}}class sC{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(Yh.ce);const a=new nC(n);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.mr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(F_)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),F_):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let a,o,l,h,g,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(a=E,g=Date.now(),this.removeTargets(e,a,n)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((E=>(y=Date.now(),mo()<=Ye.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(g-h)+`ms
	Removed ${l} targets in `+(p-g)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function aC(s,e){return new sC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.changes=new yi((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ie.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&sc(a.mutation,o,Tr.empty(),Nt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,Xe()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=Xe()){const o=oi();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((l=>{let h=Xl();return l.forEach(((g,p)=>{h=h.insert(g,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const a=oi();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,Xe())))}populateOverlays(e,n,a){const o=[];return a.forEach((l=>{n.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,g)=>{n.set(h,g)}))}))}computeViews(e,n,a,o){let l=Ms();const h=rc(),g=(function(){return rc()})();return n.forEach(((p,y)=>{const _=a.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof vi)?l=l.insert(y.key,y):_!==void 0?(h.set(y.key,_.mutation.getFieldMask()),sc(_.mutation,y,_.mutation.getFieldMask(),Nt.now())):h.set(y.key,Tr.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>h.set(y,_))),n.forEach(((y,_)=>g.set(y,new oC(_,h.get(y)??null)))),g)))}recalculateAndSaveOverlays(e,n){const a=rc();let o=new Pt(((h,g)=>h-g)),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const g of h)g.keys().forEach((p=>{const y=n.get(p);if(y===null)return;let _=a.get(p)||Tr.empty();_=g.applyToLocalView(y,_),a.set(p,_);const E=(o.get(g.batchId)||Xe()).add(p);o=o.insert(g.batchId,E)}))})).next((()=>{const h=[],g=o.getReverseIterator();for(;g.hasNext();){const p=g.getNext(),y=p.key,_=p.value,E=o1();_.forEach((A=>{if(!l.has(A)){const V=f1(n.get(A),a.get(A));V!==null&&E.set(A,V),l=l.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return ie.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return(function(h){return Se.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):n1(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-l.size):ie.resolve(oi());let g=dc,p=l;return h.next((y=>ie.forEach(y,((_,E)=>(g<E.largestBatchId&&(g=E.largestBatchId),l.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{p=p.insert(_,A)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,Xe()))).next((_=>({batchId:g,changes:i1(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Se(n)).next((a=>{let o=Xl();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const l=n.collectionGroup;let h=Xl();return this.indexManager.getCollectionParents(e,l).next((g=>ie.forEach(g,(p=>{const y=(function(E,A){return new Bo(A,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((_=>{_.forEach(((E,A)=>{h=h.insert(E,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,l,o)))).next((h=>{l.forEach(((p,y)=>{const _=y.getKey();h.get(_)===null&&(h=h.insert(_,Rn.newInvalidDocument(_)))}));let g=Xl();return h.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&sc(_.mutation,y,Tr.empty(),Nt.now()),Wh(n,y)&&(g=g.insert(p,y))})),g}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ie.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Yr(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:JR(o.bundledQuery),readTime:Yr(o.readTime)}})(n)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.overlays=new Pt(Se.comparator),this.qr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const a=oi();return ie.forEach(n,(o=>this.getOverlay(e,o).next((l=>{l!==null&&a.set(o,l)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,l)=>{this.St(e,n,l)})),ie.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(a)),ie.resolve()}getOverlaysForCollection(e,n,a){const o=oi(),l=n.length+1,h=new Se(n.child("")),g=this.overlays.getIteratorFrom(h);for(;g.hasNext();){const p=g.getNext().value,y=p.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>a&&o.set(p.getKey(),p)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let l=new Pt(((y,_)=>y-_));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>a){let _=l.get(y.largestBatchId);_===null&&(_=oi(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const g=oi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>g.set(y,_))),!(g.size()>=o)););return ie.resolve(g)}St(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new RR(n,a));let l=this.qr.get(n);l===void 0&&(l=Xe(),this.qr.set(n,l)),this.qr.set(n,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(){this.Qr=new on(gn.$r),this.Ur=new on(gn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const a=new gn(e,n);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Gr(new gn(e,n))}zr(e,n){e.forEach((a=>this.removeReference(a,n)))}jr(e){const n=new Se(new kt([])),a=new gn(n,e),o=new gn(n,e+1),l=[];return this.Ur.forEachInRange([a,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Se(new kt([])),a=new gn(n,e),o=new gn(n,e+1);let l=Xe();return this.Ur.forEachInRange([a,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const n=new gn(e,0),a=this.Qr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class gn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Se.comparator(e.key,n.key)||Qe(e.Yr,n.Yr)}static Kr(e,n){return Qe(e.Yr,n.Yr)||Se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new on(gn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new NR(l,n,a,o);this.mutationQueue.push(h);for(const g of o)this.Zr=this.Zr.add(new gn(g.key,l)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,n){return ie.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.ei(a),l=o<0?0:o;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?kg:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new gn(n,0),o=new gn(n,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([a,o],(h=>{const g=this.Xr(h.Yr);l.push(g)})),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new on(Qe);return n.forEach((o=>{const l=new gn(o,0),h=new gn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(g=>{a=a.add(g.Yr)}))})),ie.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let l=a;Se.isDocumentKey(l)||(l=l.child(""));const h=new gn(new Se(l),0);let g=new on(Qe);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(g=g.add(p.Yr)),!0)}),h),ie.resolve(this.ti(g))}ti(e){const n=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){ut(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ie.forEach(n.mutations,(o=>{const l=new gn(o.key,n.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,n){const a=new gn(n,0),o=this.Zr.firstAfterOrEqual(a);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e){this.ri=e,this.docs=(function(){return new Pt(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),l=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ie.resolve(a?a.document.mutableCopy():Rn.newInvalidDocument(n))}getEntries(e,n){let a=Ms();return n.forEach((o=>{const l=this.docs.get(o);a=a.insert(o,l?l.document.mutableCopy():Rn.newInvalidDocument(o))})),ie.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let l=Ms();const h=n.path,g=new Se(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(g);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||qN(BN(_),a)<=0||(o.has(_.key)||Wh(n,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,n,a,o){Ce(9500)}ii(e,n){return ie.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new mC(this)}getSize(e){return ie.resolve(this.size)}}class mC extends iC{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),ie.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.persistence=e,this.si=new yi((n=>Cg(n)),Ig),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new Pg,this.targetCount=0,this.ai=Ro.ur()}forEachTarget(e,n){return this.si.forEach(((a,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.oi&&(this.oi=n),ie.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ro(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.Pr(n),ie.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,a){let o=0;const l=[];return this.si.forEach(((h,g)=>{g.sequenceNumber<=n&&a.get(g.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)})),ie.waitFor(l).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const a=this.si.get(n)||null;return ie.resolve(a)}addMatchingKeys(e,n,a){return this._i.Wr(n,a),ie.resolve()}removeMatchingKeys(e,n,a){this._i.zr(n,a);const o=this.persistence.referenceDelegate,l=[];return o&&n.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),ie.waitFor(l)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const a=this._i.Hr(n);return ie.resolve(a)}containsKey(e,n){return ie.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(e,n){this.ui={},this.overlays={},this.ci=new Yh(0),this.li=!1,this.li=!0,this.hi=new hC,this.referenceDelegate=e(this),this.Pi=new gC(this),this.indexManager=new eC,this.remoteDocumentCache=(function(o){return new fC(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new WR(n),this.Ii=new cC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.ui[e.toKey()];return a||(a=new dC(n,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,a){ve("MemoryPersistence","Starting transaction:",e);const o=new pC(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,n){return ie.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,n))))}}class pC extends GN{constructor(e){super(),this.currentSequenceNumber=e}}class Lg{constructor(e){this.persistence=e,this.Ri=new Pg,this.Vi=null}static mi(e){return new Lg(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.fi.delete(a.toString()),ie.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.fi.add(a.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>a.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(a=>{const o=Se.fromPath(a);return this.gi(e,o).next((l=>{l||n.removeEntry(o,je.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((a=>{a?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Oh{constructor(e,n){this.persistence=e,this.pi=new yi((a=>KN(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=aC(this,n)}static mi(e,n){return new Oh(e,n)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}wr(e){let n=0;return this.pr(e,(a=>{n++})).next((()=>n))}pr(e,n){return ie.forEach(this.pi,((a,o)=>this.br(e,a,o).next((l=>l?ie.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,n).next((g=>{g||(a++,l.removeEntry(h,je.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,a){return this.pi.set(a,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ie.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yh(e.data.value)),n}br(e,n,a){return ie.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return ie.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Es=a,this.ds=o}static As(e,n){let a=Xe(),o=Xe();for(const l of n.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new zg(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KS()?8:FN(Cn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const l={result:null};return this.ys(e,n).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,n,o,a).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new yC;return this.Ss(e,n,h).next((g=>{if(l.result=g,this.Vs)return this.bs(e,n,h,g.size)}))})).next((()=>l.result))}bs(e,n,a,o){return a.documentReadCount<this.fs?(mo()<=Ye.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(mo()<=Ye.DEBUG&&ve("QueryEngine","Query:",go(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(mo()<=Ye.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kr(n))):ie.resolve())}ys(e,n){if(O_(n))return ie.resolve(null);let a=Kr(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Qm(n,null,"F"),a=Kr(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const h=Xe(...l);return this.ps.getDocuments(e,h).next((g=>this.indexManager.getMinOffset(e,a).next((p=>{const y=this.Ds(n,g);return this.Cs(n,y,h,p.readTime)?this.ys(e,Qm(n,null,"F")):this.vs(e,y,n,p)}))))})))))}ws(e,n,a,o){return O_(n)||o.isEqual(je.min())?ie.resolve(null):this.ps.getDocuments(e,a).next((l=>{const h=this.Ds(n,l);return this.Cs(n,h,a,o)?ie.resolve(null):(mo()<=Ye.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),go(n)),this.vs(e,h,n,UN(o,dc)).next((g=>g)))}))}Ds(e,n){let a=new on(s1(e));return n.forEach(((o,l)=>{Wh(e,l)&&(a=a.add(l))})),a}Cs(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const l=e.limitType==="F"?n.last():n.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,n,a){return mo()<=Ye.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",go(n)),this.ps.getDocumentsMatchingQuery(e,n,ba.min(),a)}vs(e,n,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((l=>(n.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="LocalStore",_C=3e8;class xC{constructor(e,n,a,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new Pt(Qe),this.xs=new yi((l=>Cg(l)),Ig),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function bC(s,e,n,a){return new xC(s,e,n,a)}async function R1(s,e){const n=Oe(s);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((l=>(o=l,n.Bs(e),n.mutationQueue.getAllMutationBatches(a)))).next((l=>{const h=[],g=[];let p=Xe();for(const y of o){h.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){g.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return n.localDocuments.getDocuments(a,p).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:g})))}))}))}function EC(s,e){const n=Oe(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),l=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(g,p,y,_){const E=y.batch,A=E.keys();let V=ie.resolve();return A.forEach((B=>{V=V.next((()=>_.getEntry(p,B))).next((z=>{const j=y.docVersions.get(B);ut(j!==null,48541),z.version.compareTo(j)<0&&(E.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),_.addEntry(z)))}))})),V.next((()=>g.mutationQueue.removeMutationBatch(p,E)))})(n,a,e,l).next((()=>l.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(g){let p=Xe();for(let y=0;y<g.mutationResults.length;++y)g.mutationResults[y].transformResults.length>0&&(p=p.add(g.batch.mutations[y].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function C1(s){const e=Oe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function TC(s,e){const n=Oe(s),a=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const g=[];e.targetChanges.forEach(((_,E)=>{const A=o.get(E);if(!A)return;g.push(n.Pi.removeMatchingKeys(l,_.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(l,_.addedDocuments,E))));let V=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?V=V.withResumeToken(Tn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):_.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(_.resumeToken,a)),o=o.insert(E,V),(function(z,j,Z){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=_C?!0:Z.addedDocuments.size+Z.modifiedDocuments.size+Z.removedDocuments.size>0})(A,V,_)&&g.push(n.Pi.updateTargetData(l,V))}));let p=Ms(),y=Xe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&g.push(n.persistence.referenceDelegate.updateLimboDocument(l,_))})),g.push(wC(l,h,e.documentUpdates).next((_=>{p=_.ks,y=_.qs}))),!a.isEqual(je.min())){const _=n.Pi.getLastRemoteSnapshotVersion(l).next((E=>n.Pi.setTargetsMetadata(l,l.currentSequenceNumber,a)));g.push(_)}return ie.waitFor(g).next((()=>h.apply(l))).next((()=>n.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(n.Ms=o,l)))}function wC(s,e,n){let a=Xe(),o=Xe();return n.forEach((l=>a=a.add(l))),e.getEntries(s,a).next((l=>{let h=Ms();return n.forEach(((g,p)=>{const y=l.get(g);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(g)),p.isNoDocument()&&p.version.isEqual(je.min())?(e.removeEntry(g,p.readTime),h=h.insert(g,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(g,p)):ve(Ug,"Ignoring outdated watch update for ",g,". Current version:",y.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function SC(s,e){const n=Oe(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=kg),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function AC(s,e){const n=Oe(s);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.Pi.getTargetData(a,e).next((l=>l?(o=l,ie.resolve(o)):n.Pi.allocateTargetId(a).next((h=>(o=new ga(e,h,"TargetPurposeListen",a.currentSequenceNumber),n.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(a.targetId,a),n.xs.set(e,a.targetId)),a}))}async function eg(s,e,n){const a=Oe(s),o=a.Ms.get(e),l=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",l,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Uo(h))throw h;ve(Ug,`Failed to update sequence numbers for target ${e}: ${h}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function Y_(s,e,n){const a=Oe(s);let o=je.min(),l=Xe();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,_){const E=Oe(p),A=E.xs.get(_);return A!==void 0?ie.resolve(E.Ms.get(A)):E.Pi.getTargetData(y,_)})(a,h,Kr(e)).next((g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(h,g.targetId).next((p=>{l=p}))})).next((()=>a.Fs.getDocumentsMatchingQuery(h,e,n?o:je.min(),n?l:Xe()))).next((g=>(kC(a,dR(e),g),{documents:g,Qs:l})))))}function kC(s,e,n){let a=s.Os.get(e)||je.min();n.forEach(((o,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),s.Os.set(e,a)}class Q_{constructor(){this.activeTargetIds=vR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NC{constructor(){this.Mo=new Q_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,a){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Q_,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="ConnectivityMonitor";class Z_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(X_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(X_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lh=null;function tg(){return lh===null?lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():lh++,"0x"+lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const km="RestConnection",CC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Ch?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,n,a,o,l){const h=tg(),g=this.zo(e,n.toUriEncodedString());ve(km,`Sending RPC '${e}' ${h}:`,g,a);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:y}=new URL(g),_=Oo(y);return this.Jo(e,g,p,a,_).then((E=>(ve(km,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw hc(km,`RPC '${e}' ${h} failed with error: `,E,"url: ",g,"request:",a),E}))}Ho(e,n,a,o,l,h){return this.Go(e,n,a,o,l)}jo(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,l)=>e[l]=o)),a&&a.headers.forEach(((o,l)=>e[l]=o))}zo(e,n){const a=CC[e];return`${this.Uo}/v1/${n}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="WebChannelConnection";class jC extends IC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,a,o,l){const h=tg();return new Promise(((g,p)=>{const y=new Db;y.setWithCredentials(!0),y.listenOnce(jb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case ph.NO_ERROR:const E=y.getResponseJson();ve(Nn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),g(E);break;case ph.TIMEOUT:ve(Nn,`RPC '${e}' ${h} timed out`),p(new ge(ne.DEADLINE_EXCEEDED,"Request time out"));break;case ph.HTTP_ERROR:const A=y.getStatus();if(ve(Nn,`RPC '${e}' ${h} failed with status:`,A,"response text:",y.getResponseText()),A>0){let V=y.getResponseJson();Array.isArray(V)&&(V=V[0]);const B=V?.error;if(B&&B.status&&B.message){const z=(function(Z){const X=Z.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(X)>=0?X:ne.UNKNOWN})(B.status);p(new ge(z,B.message))}else p(new ge(ne.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ge(ne.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ve(Nn,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);ve(Nn,`RPC '${e}' ${h} sending request:`,o),y.send(n,"POST",_,a,15)}))}T_(e,n,a){const o=tg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Vb(),g=Ob(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,n,a),p.encodeInitMessageHeaders=!0;const _=l.join("");ve(Nn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=h.createWebChannel(_,p);this.I_(E);let A=!1,V=!1;const B=new DC({Yo:j=>{V?ve(Nn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(A||(ve(Nn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),A=!0),ve(Nn,`RPC '${e}' stream ${o} sending:`,j),E.send(j))},Zo:()=>E.close()}),z=(j,Z,X)=>{j.listen(Z,(ce=>{try{X(ce)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return z(E,Ql.EventType.OPEN,(()=>{V||(ve(Nn,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),z(E,Ql.EventType.CLOSE,(()=>{V||(V=!0,ve(Nn,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(E))})),z(E,Ql.EventType.ERROR,(j=>{V||(V=!0,hc(Nn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),B.a_(new ge(ne.UNAVAILABLE,"The operation could not be completed")))})),z(E,Ql.EventType.MESSAGE,(j=>{if(!V){const Z=j.data[0];ut(!!Z,16349);const X=Z,ce=X?.error||X[0]?.error;if(ce){ve(Nn,`RPC '${e}' stream ${o} received error:`,ce);const ue=ce.status;let le=(function(R){const C=Xt[R];if(C!==void 0)return p1(C)})(ue),he=ce.message;le===void 0&&(le=ne.INTERNAL,he="Unknown error status: "+ue+" with message "+ce.message),V=!0,B.a_(new ge(le,he)),E.close()}else ve(Nn,`RPC '${e}' stream ${o} received:`,Z),B.u_(Z)}})),z(g,Mb.STAT_EVENT,(j=>{j.stat===qm.PROXY?ve(Nn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===qm.NOPROXY&&ve(Nn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Nm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(s){return new LR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,a=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=n,this.d_=a,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="PersistentStream";class D1{constructor(e,n,a,o,l,h,g,p){this.Mi=e,this.S_=a,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=g,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new I1(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(js(n.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new ge(ne.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(W_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ve(W_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MC extends D1{constructor(e,n,a,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,h),this.serializer=l}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=BR(this.serializer,e),a=(function(l){if(!("targetChange"in l))return je.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?je.min():h.readTime?Yr(h.readTime):je.min()})(e);return this.listener.H_(n,a)}Y_(e){const n={};n.database=Jm(this.serializer),n.addTarget=(function(l,h){let g;const p=h.target;if(g=Km(p)?{documents:GR(l,p)}:{query:FR(l,p).ft},g.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){g.resumeToken=_1(l,h.resumeToken);const y=Xm(l,h.expectedCount);y!==null&&(g.expectedCount=y)}else if(h.snapshotVersion.compareTo(je.min())>0){g.readTime=Mh(l,h.snapshotVersion.toTimestamp());const y=Xm(l,h.expectedCount);y!==null&&(g.expectedCount=y)}return g})(this.serializer,e);const a=KR(this.serializer,e);a&&(n.labels=a),this.q_(n)}Z_(e){const n={};n.database=Jm(this.serializer),n.removeTarget=e,this.q_(n)}}class OC extends D1{constructor(e,n,a,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=HR(e.writeResults,e.commitTime),a=Yr(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=Jm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>qR(this.serializer,a)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{}class PC extends VC{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,Zm(n,a),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ne.UNKNOWN,l.toString())}))}Ho(e,n,a,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,g])=>this.connection.Ho(e,Zm(n,a),o,h,g,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ge(ne.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class LC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(js(n),this.aa=!1):ve("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi="RemoteStore";class zC{constructor(e,n,a,o,l){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{a.enqueueAndForget((async()=>{_i(this)&&(ve(mi,"Restarting streams for network reachability change."),await(async function(p){const y=Oe(p);y.Ea.add(4),await Ic(y),y.Ra.set("Unknown"),y.Ea.delete(4),await rd(y)})(this))}))})),this.Ra=new LC(a,o)}}async function rd(s){if(_i(s))for(const e of s.da)await e(!0)}async function Ic(s){for(const e of s.da)await e(!1)}function j1(s,e){const n=Oe(s);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gg(n)?Hg(n):qo(n).O_()&&qg(n,e))}function Bg(s,e){const n=Oe(s),a=qo(n);n.Ia.delete(e),a.O_()&&M1(n,e),n.Ia.size===0&&(a.O_()?a.L_():_i(n)&&n.Ra.set("Unknown"))}function qg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qo(s).Y_(e)}function M1(s,e){s.Va.Ue(e),qo(s).Z_(e)}function Hg(s){s.Va=new MR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),qo(s).start(),s.Ra.ua()}function Gg(s){return _i(s)&&!qo(s).x_()&&s.Ia.size>0}function _i(s){return Oe(s).Ea.size===0}function O1(s){s.Va=void 0}async function UC(s){s.Ra.set("Online")}async function BC(s){s.Ia.forEach(((e,n)=>{qg(s,e)}))}async function qC(s,e){O1(s),Gg(s)?(s.Ra.ha(e),Hg(s)):s.Ra.set("Unknown")}async function HC(s,e,n){if(s.Ra.set("Online"),e instanceof v1&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const g of l.targetIds)o.Ia.has(g)&&(await o.remoteSyncer.rejectListen(g,h),o.Ia.delete(g),o.Va.removeTarget(g))})(s,e)}catch(a){ve(mi,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Vh(s,a)}else if(e instanceof xh?s.Va.Ze(e):e instanceof y1?s.Va.st(e):s.Va.tt(e),!n.isEqual(je.min()))try{const a=await C1(s.localStore);n.compareTo(a)>=0&&await(function(l,h){const g=l.Va.Tt(h);return g.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(y);_&&l.Ia.set(y,_.withResumeToken(p.resumeToken,h))}})),g.targetMismatches.forEach(((p,y)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(Tn.EMPTY_BYTE_STRING,_.snapshotVersion)),M1(l,p);const E=new ga(_.target,p,y,_.sequenceNumber);qg(l,E)})),l.remoteSyncer.applyRemoteEvent(g)})(s,n)}catch(a){ve(mi,"Failed to raise snapshot:",a),await Vh(s,a)}}async function Vh(s,e,n){if(!Uo(e))throw e;s.Ea.add(1),await Ic(s),s.Ra.set("Offline"),n||(n=()=>C1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ve(mi,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await rd(s)}))}function V1(s,e){return e().catch((n=>Vh(s,n,e)))}async function sd(s){const e=Oe(s),n=Sa(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kg;for(;GC(e);)try{const o=await SC(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,FC(e,o)}catch(o){await Vh(e,o)}P1(e)&&L1(e)}function GC(s){return _i(s)&&s.Ta.length<10}function FC(s,e){s.Ta.push(e);const n=Sa(s);n.O_()&&n.X_&&n.ea(e.mutations)}function P1(s){return _i(s)&&!Sa(s).x_()&&s.Ta.length>0}function L1(s){Sa(s).start()}async function $C(s){Sa(s).ra()}async function KC(s){const e=Sa(s);for(const n of s.Ta)e.ea(n.mutations)}async function YC(s,e,n){const a=s.Ta.shift(),o=Mg.from(a,e,n);await V1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await sd(s)}async function QC(s,e){e&&Sa(s).X_&&await(async function(a,o){if((function(h){return IR(h)&&h!==ne.ABORTED})(o.code)){const l=a.Ta.shift();Sa(a).B_(),await V1(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,o))),await sd(a)}})(s,e),P1(s)&&L1(s)}async function J_(s,e){const n=Oe(s);n.asyncQueue.verifyOperationInProgress(),ve(mi,"RemoteStore received new credentials");const a=_i(n);n.Ea.add(3),await Ic(n),a&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await rd(n)}async function XC(s,e){const n=Oe(s);e?(n.Ea.delete(2),await rd(n)):e||(n.Ea.add(2),await Ic(n),n.Ra.set("Unknown"))}function qo(s){return s.ma||(s.ma=(function(n,a,o){const l=Oe(n);return l.sa(),new MC(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(s.datastore,s.asyncQueue,{Xo:UC.bind(null,s),t_:BC.bind(null,s),r_:qC.bind(null,s),H_:HC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Gg(s)?Hg(s):s.Ra.set("Unknown")):(await s.ma.stop(),O1(s))}))),s.ma}function Sa(s){return s.fa||(s.fa=(function(n,a,o){const l=Oe(n);return l.sa(),new OC(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:$C.bind(null,s),r_:QC.bind(null,s),ta:KC.bind(null,s),na:YC.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await sd(s)):(await s.fa.stop(),s.Ta.length>0&&(ve(mi,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,a,o,l){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=l,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,l){const h=Date.now()+a,g=new Fg(e,n,h,o,l);return g.start(a),g}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $g(s,e){if(js("AsyncQueue",`${e}: ${s}`),Uo(s))return new ge(ne.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{static emptySet(e){return new Eo(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Se.comparator(n.key,a.key):(n,a)=>Se.comparator(n.key,a.key),this.keyedMap=Xl(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,l=a.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Eo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(){this.ga=new Pt(Se.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class Co{constructor(e,n,a,o,l,h,g,p,y){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=g,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,n,a,o,l){const h=[];return n.forEach((g=>{h.push({type:0,doc:g})})),new Co(e,n,Eo.emptySet(n),h,a,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class WC{constructor(){this.queries=tx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Oe(n),l=o.queries;o.queries=tx(),l.forEach(((h,g)=>{for(const p of g.Sa)p.onError(a)}))})(this,new ge(ne.ABORTED,"Firestore shutting down"))}}function tx(){return new yi((s=>r1(s)),Zh)}async function z1(s,e){const n=Oe(s);let a=3;const o=e.query;let l=n.queries.get(o);l?!l.ba()&&e.Da()&&(a=2):(l=new ZC,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await n.onListen(o,!0);break;case 1:l.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const g=$g(h,`Initialization of query '${go(e.query)}' failed`);return void e.onError(g)}n.queries.set(o,l),l.Sa.push(e),e.va(n.onlineState),l.wa&&e.Fa(l.wa)&&Kg(n)}async function U1(s,e){const n=Oe(s),a=e.query;let o=3;const l=n.queries.get(a);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function JC(s,e){const n=Oe(s);let a=!1;for(const o of e){const l=o.query,h=n.queries.get(l);if(h){for(const g of h.Sa)g.Fa(o)&&(a=!0);h.wa=o}}a&&Kg(n)}function eI(s,e,n){const a=Oe(s),o=a.queries.get(e);if(o)for(const l of o.Sa)l.onError(n);a.queries.delete(e)}function Kg(s){s.Ca.forEach((e=>{e.next()}))}var ng,nx;(nx=ng||(ng={})).Ma="default",nx.Cache="cache";class B1{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Co(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ng.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(e){this.key=e}}class H1{constructor(e){this.key=e}}class tI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=s1(e),this.tu=new Eo(this.eu)}get nu(){return this.Ya}ru(e,n){const a=n?n.iu:new ex,o=n?n.tu:this.tu;let l=n?n.mutatedKeys:this.mutatedKeys,h=o,g=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const A=o.get(_),V=Wh(this.query,E)?E:null,B=!!A&&this.mutatedKeys.has(A.key),z=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let j=!1;A&&V?A.data.isEqual(V.data)?B!==z&&(a.track({type:3,doc:V}),j=!0):this.su(A,V)||(a.track({type:2,doc:V}),j=!0,(p&&this.eu(V,p)>0||y&&this.eu(V,y)<0)&&(g=!0)):!A&&V?(a.track({type:0,doc:V}),j=!0):A&&!V&&(a.track({type:1,doc:A}),j=!0,(p||y)&&(g=!0)),j&&(V?(h=h.add(V),l=z?l.add(_):l.delete(_)):(h=h.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),l=l.delete(_.key),a.track({type:1,doc:_})}return{tu:h,iu:a,Cs:g,mutatedKeys:l}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,E)=>(function(V,B){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:j})}};return z(V)-z(B)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(a),o=o??!1;const g=n&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,h.length!==0||y?{snapshot:new Co(this.query,e.tu,l,h,e.mutatedKeys,p===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ex,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Xe(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const n=[];return e.forEach((a=>{this.Xa.has(a)||n.push(new H1(a))})),this.Xa.forEach((a=>{e.has(a)||n.push(new q1(a))})),n}cu(e){this.Ya=e.Qs,this.Xa=Xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Co.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Yg="SyncEngine";class nI{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class rI{constructor(e){this.key=e,this.hu=!1}}class sI{constructor(e,n,a,o,l,h){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new yi((g=>r1(g)),Zh),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(Se.comparator),this.Au=new Map,this.Ru=new Pg,this.Vu={},this.mu=new Map,this.fu=Ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function aI(s,e,n=!0){const a=Q1(s);let o;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await G1(a,e,n,!0),o}async function iI(s,e){const n=Q1(s);await G1(n,e,!0,!1)}async function G1(s,e,n,a){const o=await AC(s.localStore,Kr(e)),l=o.targetId,h=s.sharedClientState.addLocalQueryTarget(l,n);let g;return a&&(g=await oI(s,e,l,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&j1(s.remoteStore,o),g}async function oI(s,e,n,a,o){s.pu=(E,A,V)=>(async function(z,j,Z,X){let ce=j.view.ru(Z);ce.Cs&&(ce=await Y_(z.localStore,j.query,!1).then((({documents:O})=>j.view.ru(O,ce))));const ue=X&&X.targetChanges.get(j.targetId),le=X&&X.targetMismatches.get(j.targetId)!=null,he=j.view.applyChanges(ce,z.isPrimaryClient,ue,le);return sx(z,j.targetId,he.au),he.snapshot})(s,E,A,V);const l=await Y_(s.localStore,e,!0),h=new tI(e,l.Qs),g=h.ru(l.documents),p=Cc.createSynthesizedTargetChangeForCurrentChange(n,a&&s.onlineState!=="Offline",o),y=h.applyChanges(g,s.isPrimaryClient,p);sx(s,n,y.au);const _=new nI(e,n,h);return s.Tu.set(e,_),s.Iu.has(n)?s.Iu.get(n).push(e):s.Iu.set(n,[e]),y.snapshot}async function lI(s,e,n){const a=Oe(s),o=a.Tu.get(e),l=a.Iu.get(o.targetId);if(l.length>1)return a.Iu.set(o.targetId,l.filter((h=>!Zh(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await eg(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&Bg(a.remoteStore,o.targetId),rg(a,o.targetId)})).catch(zo)):(rg(a,o.targetId),await eg(a.localStore,o.targetId,!0))}async function cI(s,e){const n=Oe(s),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),Bg(n.remoteStore,a.targetId))}async function uI(s,e,n){const a=yI(s);try{const o=await(function(h,g){const p=Oe(h),y=Nt.now(),_=g.reduce(((V,B)=>V.add(B.key)),Xe());let E,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let B=Ms(),z=Xe();return p.Ns.getEntries(V,_).next((j=>{B=j,B.forEach(((Z,X)=>{X.isValidDocument()||(z=z.add(Z))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,B))).next((j=>{E=j;const Z=[];for(const X of g){const ce=AR(X,E.get(X.key).overlayedDocument);ce!=null&&Z.push(new vi(X.key,ce,Qb(ce.value.mapValue),Ns.exists(!0)))}return p.mutationQueue.addMutationBatch(V,y,Z,g)})).next((j=>{A=j;const Z=j.applyToLocalDocumentSet(E,z);return p.documentOverlayCache.saveOverlays(V,j.batchId,Z)}))})).then((()=>({batchId:A.batchId,changes:i1(E)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,g,p){let y=h.Vu[h.currentUser.toKey()];y||(y=new Pt(Qe)),y=y.insert(g,p),h.Vu[h.currentUser.toKey()]=y})(a,o.batchId,n),await Dc(a,o.changes),await sd(a.remoteStore)}catch(o){const l=$g(o,"Failed to persist write");n.reject(l)}}async function F1(s,e){const n=Oe(s);try{const a=await TC(n.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=n.Au.get(l);h&&(ut(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?ut(h.hu,14607):o.removedDocuments.size>0&&(ut(h.hu,42227),h.hu=!1))})),await Dc(n,a,e)}catch(a){await zo(a)}}function rx(s,e,n){const a=Oe(s);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((l,h)=>{const g=h.view.va(e);g.snapshot&&o.push(g.snapshot)})),(function(h,g){const p=Oe(h);p.onlineState=g;let y=!1;p.queries.forEach(((_,E)=>{for(const A of E.Sa)A.va(g)&&(y=!0)})),y&&Kg(p)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function hI(s,e,n){const a=Oe(s);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),l=o&&o.key;if(l){let h=new Pt(Se.comparator);h=h.insert(l,Rn.newNoDocument(l,je.min()));const g=Xe().add(l),p=new td(je.min(),new Map,new Pt(Qe),h,g);await F1(a,p),a.du=a.du.remove(l),a.Au.delete(e),Qg(a)}else await eg(a.localStore,e,!1).then((()=>rg(a,e,n))).catch(zo)}async function dI(s,e){const n=Oe(s),a=e.batch.batchId;try{const o=await EC(n.localStore,e);K1(n,a,null),$1(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Dc(n,o)}catch(o){await zo(o)}}async function fI(s,e,n){const a=Oe(s);try{const o=await(function(h,g){const p=Oe(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,g).next((E=>(ut(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,g))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(a.localStore,e);K1(a,e,n),$1(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await Dc(a,o)}catch(o){await zo(o)}}function $1(s,e){(s.mu.get(e)||[]).forEach((n=>{n.resolve()})),s.mu.delete(e)}function K1(s,e,n){const a=Oe(s);let o=a.Vu[a.currentUser.toKey()];if(o){const l=o.get(e);l&&(n?l.reject(n):l.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function rg(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),n&&s.Pu.yu(a,n);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||Y1(s,a)}))}function Y1(s,e){s.Eu.delete(e.path.canonicalString());const n=s.du.get(e);n!==null&&(Bg(s.remoteStore,n),s.du=s.du.remove(e),s.Au.delete(n),Qg(s))}function sx(s,e,n){for(const a of n)a instanceof q1?(s.Ru.addReference(a.key,e),mI(s,a)):a instanceof H1?(ve(Yg,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||Y1(s,a.key)):Ce(19791,{wu:a})}function mI(s,e){const n=e.key,a=n.path.canonicalString();s.du.get(n)||s.Eu.has(a)||(ve(Yg,"New document in limbo: "+n),s.Eu.add(a),Qg(s))}function Qg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const n=new Se(kt.fromString(e)),a=s.fu.next();s.Au.set(a,new rI(n)),s.du=s.du.insert(n,a),j1(s.remoteStore,new ga(Kr(Dg(n.path)),a,"TargetPurposeLimboResolution",Yh.ce))}}async function Dc(s,e,n){const a=Oe(s),o=[],l=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((g,p)=>{h.push(a.pu(p,e,n).then((y=>{if((y||n)&&a.isPrimaryClient){const _=y?!y.fromCache:n?.targetChanges.get(p.targetId)?.current;a.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(y){o.push(y);const _=zg.As(p.targetId,y);l.push(_)}})))})),await Promise.all(h),a.Pu.H_(o),await(async function(p,y){const _=Oe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>ie.forEach(y,(A=>ie.forEach(A.Es,(V=>_.persistence.referenceDelegate.addReference(E,A.targetId,V))).next((()=>ie.forEach(A.ds,(V=>_.persistence.referenceDelegate.removeReference(E,A.targetId,V)))))))))}catch(E){if(!Uo(E))throw E;ve(Ug,"Failed to update sequence numbers: "+E)}for(const E of y){const A=E.targetId;if(!E.fromCache){const V=_.Ms.get(A),B=V.snapshotVersion,z=V.withLastLimboFreeSnapshotVersion(B);_.Ms=_.Ms.insert(A,z)}}})(a.localStore,l))}async function gI(s,e){const n=Oe(s);if(!n.currentUser.isEqual(e)){ve(Yg,"User change. New user:",e.toKey());const a=await R1(n.localStore,e);n.currentUser=e,(function(l,h){l.mu.forEach((g=>{g.forEach((p=>{p.reject(new ge(ne.CANCELLED,h))}))})),l.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Dc(n,a.Ls)}}function pI(s,e){const n=Oe(s),a=n.Au.get(e);if(a&&a.hu)return Xe().add(a.key);{let o=Xe();const l=n.Iu.get(e);if(!l)return o;for(const h of l){const g=n.Tu.get(h);o=o.unionWith(g.view.nu)}return o}}function Q1(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=F1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hI.bind(null,e),e.Pu.H_=JC.bind(null,e.eventManager),e.Pu.yu=eI.bind(null,e.eventManager),e}function yI(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fI.bind(null,e),e}class Ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return bC(this.persistence,new vC,e.initialUser,this.serializer)}Cu(e){return new N1(Lg.mi,this.serializer)}Du(e){return new NC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ph.provider={build:()=>new Ph};class vI extends Ph{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ut(this.persistence.referenceDelegate instanceof Oh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new rC(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Bn.withCacheSize(this.cacheSizeBytes):Bn.DEFAULT;return new N1((a=>Oh.mi(a,n)),this.serializer)}}class sg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>rx(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=gI.bind(null,this.syncEngine),await XC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new WC})()}createDatastore(e){const n=nd(e.databaseInfo.databaseId),a=(function(l){return new jC(l)})(e.databaseInfo);return(function(l,h,g,p){return new PC(l,h,g,p)})(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,l,h,g){return new zC(a,o,l,h,g)})(this.localStore,this.datastore,e.asyncQueue,(n=>rx(this.syncEngine,n,0)),(function(){return Z_.v()?new Z_:new RC})())}createSyncEngine(e,n){return(function(o,l,h,g,p,y,_){const E=new sI(o,l,h,g,p,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=Oe(n);ve(mi,"RemoteStore shutting down."),a.Ea.add(5),await Ic(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}sg.provider={build:()=>new sg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):js("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="FirestoreClient";class _I{constructor(e,n,a,o,l){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=o,this.user=Un.UNAUTHENTICATED,this.clientId=Ag.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async h=>{ve(Aa,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(ve(Aa,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=$g(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Rm(s,e){s.asyncQueue.verifyOperationInProgress(),ve(Aa,"Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let a=n.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await R1(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function ax(s,e){s.asyncQueue.verifyOperationInProgress();const n=await xI(s);ve(Aa,"Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener((a=>J_(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>J_(e.remoteStore,o))),s._onlineComponents=e}async function xI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ve(Aa,"Using user provided OfflineComponentProvider");try{await Rm(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;hc("Error using user provided cache. Falling back to memory cache: "+n),await Rm(s,new Ph)}}else ve(Aa,"Using default OfflineComponentProvider"),await Rm(s,new vI(void 0));return s._offlineComponents}async function Z1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ve(Aa,"Using user provided OnlineComponentProvider"),await ax(s,s._uninitializedComponentsProvider._online)):(ve(Aa,"Using default OnlineComponentProvider"),await ax(s,new sg))),s._onlineComponents}function bI(s){return Z1(s).then((e=>e.syncEngine))}async function W1(s){const e=await Z1(s),n=e.eventManager;return n.onListen=aI.bind(null,e.syncEngine),n.onUnlisten=lI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=iI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=cI.bind(null,e.syncEngine),n}function EI(s,e,n={}){const a=new ks;return s.asyncQueue.enqueueAndForget((async()=>(function(l,h,g,p,y){const _=new X1({next:A=>{_.Nu(),h.enqueueAndForget((()=>U1(l,E)));const V=A.docs.has(g);!V&&A.fromCache?y.reject(new ge(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&A.fromCache&&p&&p.source==="server"?y.reject(new ge(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new B1(Dg(g.path),_,{includeMetadataChanges:!0,qa:!0});return z1(l,E)})(await W1(s),s.asyncQueue,e,n,a))),a.promise}function TI(s,e,n={}){const a=new ks;return s.asyncQueue.enqueueAndForget((async()=>(function(l,h,g,p,y){const _=new X1({next:A=>{_.Nu(),h.enqueueAndForget((()=>U1(l,E))),A.fromCache&&p.source==="server"?y.reject(new ge(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),E=new B1(g,_,{includeMetadataChanges:!0,qa:!0});return z1(l,E)})(await W1(s),s.asyncQueue,e,n,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J1(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="firestore.googleapis.com",ox=!0;class lx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wI,this.ssl=ox}else this.host=e.host,this.ssl=e.ssl??ox;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=A1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k1)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=J1(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xg{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new CN;switch(a.type){case"firstParty":return new jN(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ge(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=ix.get(n);a&&(ve("ComponentProvider","Removing Datastore"),ix.delete(n),a.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new xi(this.firestore,e,this._query)}}class Jt{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(Nc(n,Jt._jsonSchema))return new Jt(e,a||null,new Se(kt.fromString(n.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:Wt("string",Jt._jsonSchemaVersion),referencePath:Wt("string")};class xa extends xi{constructor(e,n,a){super(e,n,Dg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new Se(e))}withConverter(e){return new xa(this.firestore,e,this._path)}}function Zg(s,e,...n){if(s=Vn(s),Lb("collection","path",e),s instanceof Xg){const a=kt.fromString(e,...n);return b_(a),new xa(s,null,a)}{if(!(s instanceof Jt||s instanceof xa))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(kt.fromString(e,...n));return b_(a),new xa(s.firestore,null,a)}}function eE(s,e,...n){if(s=Vn(s),arguments.length===1&&(e=Ag.newId()),Lb("doc","path",e),s instanceof Xg){const a=kt.fromString(e,...n);return x_(a),new Jt(s,null,new Se(a))}{if(!(s instanceof Jt||s instanceof xa))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(kt.fromString(e,...n));return x_(a),new Jt(s.firestore,s instanceof xa?s.converter:null,new Se(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx="AsyncQueue";class ux{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new I1(this,"async_queue_retry"),this._c=()=>{const a=Nm();a&&ve(cx,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Uo(e))throw e;ve(cx,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,js("INTERNAL UNHANDLED ERROR: ",hx(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Fg.createAndSchedule(this,e,n,a,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:hx(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function hx(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class ad extends Xg{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new ux,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ux(e),this._firestoreClient=void 0,await e}}}function SI(s,e,n){n||(n=Ch);const a=pg(s,"firestore");if(a.isInitialized(n)){const o=a.getImmediate({identifier:n}),l=a.getOptions(n);if(ci(l,e))return o;throw new ge(ne.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ge(ne.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<k1)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Oo(e.host)&&Gx(e.host),a.initialize({options:e,instanceIdentifier:n})}function Wg(s){if(s._terminated)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||AI(s),s._firestoreClient}function AI(s){const e=s._freezeSettings(),n=(function(o,l,h,g){return new XN(o,l,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,J1(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new _I(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mr(Tn.fromBase64String(e))}catch(n){throw new ge(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new mr(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nc(e,mr._jsonSchema))return mr.fromBase64String(e.bytes)}}mr._jsonSchemaVersion="firestore/bytes/1.0",mr._jsonSchema={type:Wt("string",mr._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qr._jsonSchemaVersion}}static fromJSON(e){if(Nc(e,Qr._jsonSchema))return new Qr(e.latitude,e.longitude)}}Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:Wt("string",Qr._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Xr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nc(e,Xr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Xr(e.vectorValues);throw new ge(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xr._jsonSchemaVersion="firestore/vectorValue/1.0",Xr._jsonSchema={type:Wt("string",Xr._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=/^__.*__$/;class NI{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new vi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Rc(e,this.data,n,this.fieldTransforms)}}function tE(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:s})}}class tp{constructor(e,n,a,o,l,h){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new tp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),a=this.Vc({path:n,fc:!1});return a.gc(e),a}yc(e){const n=this.path?.child(e),a=this.Vc({path:n,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Lh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(tE(this.Ac)&&kI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class RI{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||nd(e)}Cc(e,n,a,o=!1){return new tp({Ac:e,methodName:n,Dc:a,path:En.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nE(s){const e=s._freezeSettings(),n=nd(s._databaseId);return new RI(s._databaseId,!!e.ignoreUndefinedProperties,n)}function CI(s,e,n,a,o,l={}){const h=s.Cc(l.merge||l.mergeFields?2:0,e,n,o);aE("Data must be an object, but it was:",h,a);const g=rE(a,h);let p,y;if(l.merge)p=new Tr(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const A=DI(e,E,n);if(!h.contains(A))throw new ge(ne.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);MI(_,A)||_.push(A)}p=new Tr(_),y=h.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=h.fieldTransforms;return new NI(new fr(g),p,y)}class np extends ep{_toFieldTransform(e){return new ER(e.path,new yc)}isEqual(e){return e instanceof np}}function II(s,e,n,a=!1){return rp(n,s.Cc(a?4:3,e))}function rp(s,e){if(sE(s=Vn(s)))return aE("Unsupported field value:",e,s),rE(s,e);if(s instanceof ep)return(function(a,o){if(!tE(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const l=[];let h=0;for(const g of a){let p=rp(g,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}})(s,e)}return(function(a,o){if((a=Vn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return _R(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=Nt.fromDate(a);return{timestampValue:Mh(o.serializer,l)}}if(a instanceof Nt){const l=new Nt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Mh(o.serializer,l)}}if(a instanceof Qr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof mr)return{bytesValue:_1(o.serializer,a._byteString)};if(a instanceof Jt){const l=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Vg(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Xr)return(function(h,g){return{mapValue:{fields:{[Kb]:{stringValue:Yb},[Ih]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw g.Sc("VectorValues must only contain numeric values.");return jg(g.serializer,y)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${Kh(a)}`)})(s,e)}function rE(s,e){const n={};return Bb(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(s,((a,o)=>{const l=rp(o,e.mc(a));l!=null&&(n[a]=l)})),{mapValue:{fields:n}}}function sE(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Nt||s instanceof Qr||s instanceof mr||s instanceof Jt||s instanceof ep||s instanceof Xr)}function aE(s,e,n){if(!sE(n)||!zb(n)){const a=Kh(n);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function DI(s,e,n){if((e=Vn(e))instanceof Jg)return e._internalPath;if(typeof e=="string")return iE(s,e);throw Lh("Field path arguments must be of type string or ",s,!1,void 0,n)}const jI=new RegExp("[~\\*/\\[\\]]");function iE(s,e,n){if(e.search(jI)>=0)throw Lh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Jg(...e.split("."))._internalPath}catch{throw Lh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Lh(s,e,n,a,o){const l=a&&!a.isEmpty(),h=o!==void 0;let g=`Function ${e}() called with invalid data`;n&&(g+=" (via `toFirestore()`)"),g+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${a}`),h&&(p+=` in document ${o}`),p+=")"),new ge(ne.INVALID_ARGUMENT,g+s+p)}function MI(s,e){return s.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n,a,o,l){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new OI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(id("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class OI extends oE{data(){return super.data()}}function id(s,e){return typeof e=="string"?iE(s,e):e instanceof Jg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ge(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sp{}class lE extends sp{}function ap(s,e,...n){let a=[];e instanceof sp&&a.push(e),a=a.concat(n),(function(l){const h=l.filter((p=>p instanceof op)).length,g=l.filter((p=>p instanceof od)).length;if(h>1||h>0&&g>0)throw new ge(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class od extends lE{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new od(e,n,a)}_apply(e){const n=this._parse(e);return uE(e._query,n),new xi(e.firestore,e.converter,Ym(e._query,n))}_parse(e){const n=nE(e.firestore);return(function(l,h,g,p,y,_,E){let A;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){fx(E,_);const B=[];for(const z of E)B.push(dx(p,l,z));A={arrayValue:{values:B}}}else A=dx(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||fx(E,_),A=II(g,h,E,_==="in"||_==="not-in");return Zt.create(y,_,A)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ip(s,e,n){const a=e,o=id("where",s);return od._create(o,a,n)}class op extends sp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new op(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:kr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,l){let h=o;const g=l.getFlattenedFilters();for(const p of g)uE(h,p),h=Ym(h,p)})(e._query,n),new xi(e.firestore,e.converter,Ym(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class lp extends lE{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new lp(e,n)}_apply(e){const n=(function(o,l,h){if(o.startAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pc(l,h)})(e._query,this._field,this._direction);return new xi(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new Bo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function cE(s,e="asc"){const n=e,a=id("orderBy",s);return lp._create(a,n)}function dx(s,e,n){if(typeof(n=Vn(n))=="string"){if(n==="")throw new ge(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n1(e)&&n.indexOf("/")!==-1)throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(kt.fromString(n));if(!Se.isDocumentKey(a))throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return R_(s,new Se(a))}if(n instanceof Jt)return R_(s,n._key);throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(n)}.`)}function fx(s,e){if(!Array.isArray(s)||s.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uE(s,e){const n=(function(o,l){for(const h of o)for(const g of h.getFlattenedFilters())if(l.indexOf(g.op)>=0)return g.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class PI{convertValue(e,n="none"){switch(wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ta(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return pi(e,((o,l)=>{a[o]=this.convertValue(l,n)})),a}convertVectorValue(e){const n=e.fields?.[Ih].arrayValue?.values?.map((a=>Ft(a.doubleValue)));return new Xr(n)}convertGeoPoint(e){return new Qr(Ft(e.latitude),Ft(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=Xh(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){const n=Ea(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=kt.fromString(e);ut(S1(a),9688,{name:e});const o=new mc(a.get(1),a.get(3)),l=new Se(a.popFirst(5));return o.isEqual(n)||js(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(s,e,n){let a;return a=s?n&&(n.merge||n.mergeFields)?s.toFirestore(e,n):s.toFirestore(e):e,a}class Wl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class li extends oE{constructor(e,n,a,o,l,h){super(e,n,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(id("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=li._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}li._jsonSchemaVersion="firestore/documentSnapshot/1.0",li._jsonSchema={type:Wt("string",li._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class bh extends li{data(e={}){return super.data(e)}}class To{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Wl(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new bh(this._firestore,this._userDataWriter,a.key,a,new Wl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((g=>{const p=new bh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Wl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);return g.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((g=>l||g.type!==3)).map((g=>{const p=new bh(o._firestore,o._userDataWriter,g.doc.key,g.doc,new Wl(o._snapshot.mutatedKeys.has(g.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return g.type!==0&&(y=h.indexOf(g.doc.key),h=h.delete(g.doc.key)),g.type!==1&&(h=h.add(g.doc),_=h.indexOf(g.doc.key)),{type:zI(g.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=To._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ag.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(n.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zI(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(s){s=Ao(s,Jt);const e=Ao(s.firestore,ad);return EI(Wg(e),s._key).then((n=>qI(e,s,n)))}To._jsonSchemaVersion="firestore/querySnapshot/1.0",To._jsonSchema={type:Wt("string",To._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class dE extends PI{constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function cp(s){s=Ao(s,xi);const e=Ao(s.firestore,ad),n=Wg(e),a=new dE(e);return VI(s._query),TI(n,s._query).then((o=>new To(e,a,s,o)))}function UI(s,e,n){s=Ao(s,Jt);const a=Ao(s.firestore,ad),o=LI(s.converter,e,n);return BI(a,[CI(nE(a),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,Ns.none())])}function BI(s,e){return(function(a,o){const l=new ks;return a.asyncQueue.enqueueAndForget((async()=>uI(await bI(a),o,l))),l.promise})(Wg(s),e)}function qI(s,e,n){const a=n.docs.get(e._key),o=new dE(s);return new li(s,o,e._key,a,new Wl(n.hasPendingWrites,n.fromCache),e.converter)}function HI(){return new np("serverTimestamp")}(function(e,n=!0){(function(o){Lo=o})(Vo),wo(new ui("firestore",((a,{instanceIdentifier:o,options:l})=>{const h=a.getProvider("app").getImmediate(),g=new ad(new IN(a.getProvider("auth-internal")),new MN(h,a.getProvider("app-check-internal")),(function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(y.options.projectId,_)})(h,o),h);return l={useFetchStreams:n,...l},g._setSettings(l),g}),"PUBLIC").setMultipleInstances(!0)),va(p_,y_,e),va(p_,y_,"esm2020")})();const GI={apiKey:"AIzaSyBj5D2l-lSzekgRUF6w164G5xawAbqKV58",authDomain:"neurolearn-c8df8.firebaseapp.com",projectId:"neurolearn-c8df8",storageBucket:"neurolearn-c8df8.firebasestorage.app",messagingSenderId:"1060414258301",appId:"1:1060414258301:web:86a11e8b84e7d05de10514",measurementId:"G-ZBX8RCHB1X"},fE=tk().length?Yx():Kx(GI),ch=SN(fE),FI={experimentalForceLongPolling:!0,experimentalLongPollingOptions:{timeoutSeconds:10}},jc=globalThis.__FIREBASE_DB__??(globalThis.__FIREBASE_DB__=SI(fE,FI)),$I=async(s,e)=>{if(!s)throw new Error("UID bo geldi");const n=eE(jc,"users",s);return await UI(n,{uid:s,...e,createdAt:HI()},{merge:!0}),(await hE(n)).data()},KI=async s=>{const e=eE(jc,"users",s),n=await hE(e);return n.exists()?{id:n.id,...n.data(),createdAt:n.data().createdAt.toDate()}:null},YI=async s=>{const e=ap(Zg(jc,"students"),ip("teacherId","==",s),cE("createdAt","desc"));return(await cp(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt.toDate()}))},QI=async s=>{const e=ap(Zg(jc,"ai_insights"),ip("studentId","==",s),cE("createdAt","desc"));return(await cp(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt.toDate()}))},mE=S.createContext(void 0),Jr=()=>{const s=S.useContext(mE);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},XI=({children:s})=>{const[e,n]=S.useState(null),[a,o]=S.useState(!0);S.useEffect(()=>f2(ch,async _=>{if(_){const E=await KI(_.uid);n(E||{id:_.uid,name:_.displayName||"",email:_.email||"",role:"teacher",createdAt:new Date})}else n(null);o(!1)}),[]);const p={currentUser:e,loading:a,login:async(y,_)=>{await u2(ch,y,_)},register:async(y,_,E,A="teacher",V,B)=>{const z=await c2(ch,y,_),j=z.user?.uid;if(!j)throw new Error("Kullanc UID alnamad");const Z={email:z.user.email??y,name:E,role:A,...V&&{age:V},...B&&{teacherId:B}};await $I(j,Z),n({id:j,name:E,email:y,role:A,...V&&{age:V},...B&&{teacherId:B},createdAt:new Date})},logout:async()=>{await m2(ch),n(null)}};return d.jsx(mE.Provider,{value:p,children:s})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZI=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WI=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase()),mx=s=>{const e=WI(s);return e.charAt(0).toUpperCase()+e.slice(1)},gE=(...s)=>s.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim(),JI=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var eD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=S.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:h,...g},p)=>S.createElement("svg",{ref:p,...eD,width:e,height:e,stroke:s,strokeWidth:a?Number(n)*24/Number(e):n,className:gE("lucide",o),...!l&&!JI(g)&&{"aria-hidden":"true"},...g},[...h.map(([y,_])=>S.createElement(y,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(s,e)=>{const n=S.forwardRef(({className:a,...o},l)=>S.createElement(tD,{ref:l,iconNode:e,className:gE(`lucide-${ZI(mx(s))}`,`lucide-${s}`,a),...o}));return n.displayName=mx(s),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],rD=Le("arrow-left",nD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],gx=Le("award",sD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],iD=Le("book-open",aD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Ut=Le("brain",oD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],cD=Le("calendar",lD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ld=Le("circle-alert",uD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pE=Le("circle-check-big",hD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],fD=Le("circle-x",dD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gr=Le("clock",mD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],pD=Le("eye",gD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],yE=Le("hash",yD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],px=Le("info",vD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],ag=Le("lightbulb",_D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Io=Le("lock",xD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],vE=Le("log-in",bD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],_E=Le("log-out",ED);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],cd=Le("mail",TD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],SD=Le("mic-off",wD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],kD=Le("mic",AD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],RD=Le("mouse-pointer",ND);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],up=Le("palette",CD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],hp=Le("play",ID);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yx=Le("plus",DD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],bi=Le("rotate-ccw",jD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],OD=Le("sparkles",MD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],PD=Le("square-pen",VD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ka=Le("star",LD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Wn=Le("target",zD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],BD=Le("trash-2",UD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],xE=Le("trending-up",qD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vx=Le("triangle-alert",HD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Cm=Le("trophy",GD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],bE=Le("user-plus",FD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ud=Le("user",$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],EE=Le("users",KD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],QD=Le("volume-2",YD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ZD=Le("wifi-off",XD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],_x=Le("wifi",WD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],hd=Le("zap",JD),ej=({onToggleMode:s})=>{const[e,n]=S.useState(""),[a,o]=S.useState(""),[l,h]=S.useState(""),[g,p]=S.useState(!1),{login:y}=Jr(),_=async E=>{E.preventDefault(),h(""),p(!0);try{await y(e,a)}catch(A){h(A.message||"Giri yaparken bir hata olutu")}p(!1)};return d.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:d.jsx(vE,{className:"h-8 w-8 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"retmen Girii"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"NeuroLearn AI Platformuna ho geldiniz"})]}),l&&d.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[d.jsx(ld,{className:"h-5 w-5 text-red-500 mr-2"}),d.jsx("span",{className:"text-red-700 text-sm",children:l})]}),d.jsxs("form",{onSubmit:_,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),d.jsxs("div",{className:"relative",children:[d.jsx(cd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"email",value:e,onChange:E=>n(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ogretmen@email.com",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ifre"}),d.jsxs("div",{className:"relative",children:[d.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"password",value:a,onChange:E=>o(E.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"",required:!0})]})]}),d.jsx("button",{type:"submit",disabled:g,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?"Giri yaplyor...":"Giri Yap"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("p",{className:"text-gray-600",children:["Hesabnz yok mu?"," ",d.jsx("button",{onClick:s,className:"text-primary font-medium hover:text-blue-700",children:"Kayt olun"})]})})]})},tj=({onToggleMode:s})=>{const[e,n]=S.useState(""),[a,o]=S.useState(""),[l,h]=S.useState(""),[g,p]=S.useState(""),[y,_]=S.useState(""),[E,A]=S.useState(!1),{register:V}=Jr(),B=async z=>{if(z.preventDefault(),_(""),l!==g){_("ifreler elemiyor");return}if(l.length<6){_("ifre en az 6 karakter olmaldr");return}A(!0);try{await V(a,l,e)}catch(j){_(j.message||"Kayt olurken bir hata olutu")}A(!1)};return d.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"mx-auto w-16 h-16 bg-secondary rounded-full flex items-center justify-center mb-4",children:d.jsx(bE,{className:"h-8 w-8 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"retmen Kayd"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Yeni hesap oluturun"})]}),y&&d.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[d.jsx(ld,{className:"h-5 w-5 text-red-500 mr-2"}),d.jsx("span",{className:"text-red-700 text-sm",children:y})]}),d.jsxs("form",{onSubmit:B,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),d.jsxs("div",{className:"relative",children:[d.jsx(ud,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",value:e,onChange:z=>n(z.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"Ahmet Ylmaz",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),d.jsxs("div",{className:"relative",children:[d.jsx(cd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"email",value:a,onChange:z=>o(z.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"ogretmen@email.com",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ifre"}),d.jsxs("div",{className:"relative",children:[d.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"password",value:l,onChange:z=>h(z.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ifre Tekrar"}),d.jsxs("div",{className:"relative",children:[d.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"password",value:g,onChange:z=>p(z.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"",required:!0})]})]}),d.jsx("button",{type:"submit",disabled:E,className:"w-full bg-secondary text-white py-3 rounded-lg font-medium hover:bg-purple-700 focus:ring-2 focus:ring-secondary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:E?"Kayt oluturuluyor...":"Kayt Ol"})]}),d.jsx("div",{className:"mt-6 text-center",children:d.jsxs("p",{className:"text-gray-600",children:["Zaten hesabnz var m?"," ",d.jsx("button",{onClick:s,className:"text-secondary font-medium hover:text-purple-700",children:"Giri yapn"})]})})]})},nj=({onToggleMode:s,onToggleRole:e})=>{const[n,a]=S.useState(""),[o,l]=S.useState(""),[h,g]=S.useState(""),[p,y]=S.useState(!1),{login:_}=Jr(),E=async A=>{A.preventDefault(),g(""),y(!0);try{await _(n,o)}catch(V){g(V.message||"Giri yaplrken bir hata olutu")}y(!1)};return d.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:d.jsx(vE,{className:"h-8 w-8 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"renci Girii"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Hesabnza giri yapn"})]}),h&&d.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[d.jsx(ld,{className:"h-5 w-5 text-red-500 mr-2"}),d.jsx("span",{className:"text-red-700 text-sm",children:h})]}),d.jsxs("form",{onSubmit:E,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),d.jsxs("div",{className:"relative",children:[d.jsx(cd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"email",value:n,onChange:A=>a(A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ogrenci@email.com",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ifre"}),d.jsxs("div",{className:"relative",children:[d.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"password",value:o,onChange:A=>l(A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"",required:!0})]})]}),d.jsx("button",{type:"submit",disabled:p,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Giri yaplyor...":"Giri Yap"})]}),d.jsxs("div",{className:"mt-6 text-center space-y-2",children:[d.jsxs("p",{className:"text-gray-600",children:["Henz hesabnz yok mu?"," ",d.jsx("button",{onClick:s,className:"text-primary font-medium hover:text-blue-700",children:"Kayt olun"})]}),d.jsxs("p",{className:"text-gray-600",children:["retmen misiniz?"," ",d.jsx("button",{onClick:e,className:"text-secondary font-medium hover:text-purple-700",children:"retmen girii"})]})]})]})},rj=({onToggleMode:s,onToggleRole:e})=>{const[n,a]=S.useState(""),[o,l]=S.useState(""),[h,g]=S.useState(""),[p,y]=S.useState(""),[_,E]=S.useState(""),[A,V]=S.useState(""),[B,z]=S.useState([]),[j,Z]=S.useState(""),[X,ce]=S.useState(!1),{register:ue}=Jr();S.useEffect(()=>{(async()=>{try{const O=ap(Zg(jc,"users"),ip("role","==","teacher")),R=await cp(O),C=[];R.forEach(M=>{const P=M.data();C.push({id:M.id,name:P.name,email:P.email})}),z(C)}catch(O){console.error("retmenler yklenirken hata:",O)}})()},[]);const le=async he=>{if(he.preventDefault(),Z(""),h!==p){Z("ifreler elemiyor");return}if(h.length<6){Z("ifre en az 6 karakter olmaldr");return}if(!A){Z("Ltfen bir retmen sein");return}const O=parseInt(_);if(isNaN(O)||O<3||O>18){Z("Ya 3-18 arasnda olmaldr");return}ce(!0);try{await ue(o,h,n,"student",O,A)}catch(R){Z(R.message||"Kayt olurken bir hata olutu")}ce(!1)};return d.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:d.jsx(bE,{className:"h-8 w-8 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"renci Kayd"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Yeni renci hesab oluturun"})]}),j&&d.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[d.jsx(ld,{className:"h-5 w-5 text-red-500 mr-2"}),d.jsx("span",{className:"text-red-700 text-sm",children:j})]}),d.jsxs("form",{onSubmit:le,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),d.jsxs("div",{className:"relative",children:[d.jsx(ud,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",value:n,onChange:he=>a(he.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"renci Ad",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ya"}),d.jsxs("div",{className:"relative",children:[d.jsx(cD,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"number",min:"3",max:"18",value:_,onChange:he=>E(he.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Ya",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"retmen Sein"}),d.jsxs("div",{className:"relative",children:[d.jsx(EE,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsxs("select",{value:A,onChange:he=>V(he.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent appearance-none bg-white",required:!0,children:[d.jsx("option",{value:"",children:"retmen sein..."}),B.map(he=>d.jsxs("option",{value:he.id,children:[he.name," (",he.email,")"]},he.id))]})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),d.jsxs("div",{className:"relative",children:[d.jsx(cd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"email",value:o,onChange:he=>l(he.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ogrenci@email.com",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ifre"}),d.jsxs("div",{className:"relative",children:[d.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"password",value:h,onChange:he=>g(he.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"",required:!0})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ifre Tekrar"}),d.jsxs("div",{className:"relative",children:[d.jsx(Io,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"password",value:p,onChange:he=>y(he.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"",required:!0})]})]}),d.jsx("button",{type:"submit",disabled:X,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:X?"Kayt oluturuluyor...":"renci Kayd Olutur"})]}),d.jsxs("div",{className:"mt-6 text-center space-y-2",children:[d.jsxs("p",{className:"text-gray-600",children:["Zaten hesabnz var m?"," ",d.jsx("button",{onClick:s,className:"text-primary font-medium hover:text-blue-700",children:"Giri yapn"})]}),d.jsxs("p",{className:"text-gray-600",children:["retmen misiniz?"," ",d.jsx("button",{onClick:e,className:"text-secondary font-medium hover:text-purple-700",children:"retmen kayd"})]})]})]})},sj=()=>{const[s,e]=S.useState(!0),[n,a]=S.useState("teacher");return d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"w-full max-w-6xl mx-auto flex items-center justify-center gap-12",children:[d.jsxs("div",{className:"hidden lg:block flex-1 max-w-lg",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-r from-primary to-secondary rounded-full mb-6",children:d.jsx(Ut,{className:"h-12 w-12 text-white"})}),d.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"NeuroLearn AI"}),d.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Otizmli renciler iin yapay zeka destekli eitim platformu"})]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[d.jsxs("div",{className:"flex items-center mb-3",children:[d.jsx(OD,{className:"h-6 w-6 text-primary mr-3"}),d.jsx("h3",{className:"font-semibold text-gray-800",children:"AI Destekli erik"})]}),d.jsx("p",{className:"text-gray-600",children:"Yapay zeka ile renciye zel sorular ve aktiviteler retilir"})]}),d.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[d.jsxs("div",{className:"flex items-center mb-3",children:[d.jsx("div",{className:"w-6 h-6 bg-success rounded-full mr-3"}),d.jsx("h3",{className:"font-semibold text-gray-800",children:"Duygu Analizi"})]}),d.jsx("p",{className:"text-gray-600",children:"Gerek zamanl duygu tanma ile rencinin durumu takip edilir"})]}),d.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[d.jsxs("div",{className:"flex items-center mb-3",children:[d.jsx("div",{className:"w-6 h-6 bg-warning rounded-full mr-3"}),d.jsx("h3",{className:"font-semibold text-gray-800",children:"Akll Raporlama"})]}),d.jsx("p",{className:"text-gray-600",children:"Detayl analitik ve renci geliim raporlar"})]})]})]}),d.jsxs("div",{className:"flex-1 max-w-md",children:[d.jsxs("div",{className:"bg-white p-1 rounded-lg shadow-sm mb-6 flex",children:[d.jsx("button",{onClick:()=>a("teacher"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="teacher"?"bg-secondary text-white":"text-gray-600 hover:text-gray-800"}`,children:"retmen"}),d.jsx("button",{onClick:()=>a("student"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${n==="student"?"bg-primary text-white":"text-gray-600 hover:text-gray-800"}`,children:"renci"})]}),n==="teacher"?s?d.jsx(ej,{onToggleMode:()=>e(!1)}):d.jsx(tj,{onToggleMode:()=>e(!0)}):s?d.jsx(nj,{onToggleMode:()=>e(!1),onToggleRole:()=>a("teacher")}):d.jsx(rj,{onToggleMode:()=>e(!0),onToggleRole:()=>a("teacher")})]})]})})};function TE(s){var e,n,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(e=0;e<o;e++)s[e]&&(n=TE(s[e]))&&(a&&(a+=" "),a+=n)}else for(n in s)s[n]&&(a&&(a+=" "),a+=n);return a}function aj(){for(var s,e,n=0,a="",o=arguments.length;n<o;n++)(s=arguments[n])&&(e=TE(s))&&(a&&(a+=" "),a+=e);return a}function Mc(...s){return aj(s)}const jt=({variant:s="primary",size:e="md",loading:n=!1,className:a,disabled:o,children:l,...h})=>{const g="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",p={primary:"bg-primary text-white hover:bg-blue-700 focus:ring-primary",secondary:"bg-secondary text-white hover:bg-purple-700 focus:ring-secondary",danger:"bg-danger text-white hover:bg-red-700 focus:ring-danger",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-primary",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-primary"},y={sm:"px-3 py-2 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return d.jsxs("button",{className:Mc(g,p[s],y[e],a),disabled:o||n,...h,children:[n&&d.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})},ij=({aiStatus:s="connected"})=>{const{currentUser:e,logout:n}=Jr(),a=()=>{switch(s){case"connected":return d.jsx(_x,{className:"h-4 w-4 text-success"});case"disconnected":return d.jsx(ZD,{className:"h-4 w-4 text-danger"});case"processing":return d.jsx("div",{className:"h-4 w-4 border-2 border-warning border-t-transparent rounded-full animate-spin"});default:return d.jsx(_x,{className:"h-4 w-4 text-success"})}},o=()=>{switch(s){case"connected":return"AI Bal";case"disconnected":return"AI Balants Yok";case"processing":return"AI lemde";default:return"AI Bal"}};return d.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("div",{className:"flex items-center space-x-4",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:d.jsx(Ut,{className:"h-6 w-6 text-white"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"NeuroLearn AI"}),d.jsx("p",{className:"text-sm text-gray-600",children:"retmen Paneli"})]})]})}),d.jsxs("div",{className:"flex items-center space-x-6",children:[d.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 rounded-lg",children:[a(),d.jsx("span",{className:"text-sm font-medium text-gray-700",children:o()})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"text-sm font-medium text-gray-800",children:e?.name||"retmen"}),d.jsx("p",{className:"text-xs text-gray-600",children:e?.email})]}),d.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-white font-medium text-sm",children:e?.name?.charAt(0)||""})}),d.jsxs(jt,{variant:"outline",size:"sm",onClick:n,className:"border-gray-300 text-gray-700 hover:bg-red-50 hover:text-red-700 hover:border-red-300",children:[d.jsx(_E,{className:"h-4 w-4 mr-2"}),"k"]})]})]})]})})},Ze=({className:s,children:e})=>d.jsx("div",{className:Mc("bg-white rounded-lg shadow-sm border border-gray-200 p-6",s),children:e}),zh=({className:s,children:e})=>d.jsx("div",{className:Mc("mb-4",s),children:e}),Uh=({className:s,children:e})=>d.jsx("h3",{className:Mc("text-lg font-semibold text-gray-800",s),children:e}),We=({className:s,children:e})=>d.jsx("div",{className:Mc(s),children:e}),oj=({stats:s,loading:e=!1})=>{const n=[{title:"Haftalk lerleme",value:`%${s.weeklyProgress}`,icon:xE,color:"bg-blue-500",change:"+12%",changeType:"positive"},{title:"Tamamlanan Aktivite",value:s.completedActivities.toString(),icon:Wn,color:"bg-green-500",change:"+8",changeType:"positive"},{title:"Ortalama Baar",value:`%${s.averageSuccess}`,icon:EE,color:"bg-purple-500",change:"+5%",changeType:"positive"},{title:"AI nerileri",value:s.aiRecommendations.toString(),icon:ag,color:"bg-yellow-500",change:"+3",changeType:"positive"}];return e?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>d.jsx(Ze,{className:"animate-pulse",children:d.jsxs(We,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),d.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"})]}),d.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"})]}),d.jsx("div",{className:"mt-4",children:d.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})})]})},a))}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map((a,o)=>{const l=a.icon;return d.jsx(Ze,{className:"hover:shadow-md transition-shadow",children:d.jsxs(We,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-600",children:a.title}),d.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.value})]}),d.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${a.color}`,children:d.jsx(l,{className:"h-6 w-6 text-white"})})]}),d.jsxs("div",{className:"mt-4 flex items-center",children:[d.jsx("span",{className:`text-sm font-medium ${a.changeType==="positive"?"text-green-600":"text-red-600"}`,children:a.change}),d.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"son 7 gnde"})]})]})},o)})})},lj=({students:s,loading:e=!1,onAddStudent:n,onViewStudent:a,onEditStudent:o,onDeleteStudent:l,getStudentLastEmotion:h})=>{const g=y=>({happy:"bg-green-100 text-green-800",sad:"bg-blue-100 text-blue-800",angry:"bg-red-100 text-red-800",neutral:"bg-gray-100 text-gray-800",focused:"bg-purple-100 text-purple-800",confused:"bg-yellow-100 text-yellow-800"})[y]||"bg-gray-100 text-gray-800",p=y=>({happy:"",sad:"",angry:"",neutral:"",focused:"",confused:""})[y]||"";return e?d.jsxs(Ze,{children:[d.jsx(zh,{children:d.jsx(Uh,{children:"renciler"})}),d.jsx(We,{children:d.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>d.jsxs("div",{className:"animate-pulse flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[d.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),d.jsx("div",{className:"w-20 h-6 bg-gray-200 rounded"})]},y))})})]}):d.jsxs(Ze,{children:[d.jsx(zh,{children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs(Uh,{children:["renciler (",s.length,")"]}),d.jsxs(jt,{onClick:n,size:"sm",children:[d.jsx(yx,{className:"h-4 w-4 mr-2"}),"Yeni renci"]})]})}),d.jsx(We,{children:s.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(ud,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Henz renci eklenmemi"}),d.jsxs(jt,{onClick:n,variant:"outline",children:[d.jsx(yx,{className:"h-4 w-4 mr-2"}),"lk renciyi ekle"]})]}):d.jsx("div",{className:"space-y-4",children:s.map(y=>{const _=h?.(y.id);return d.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[d.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-white font-medium text-sm",children:y.name.charAt(0).toUpperCase()})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-medium text-gray-900",children:y.name}),d.jsxs("p",{className:"text-sm text-gray-600",children:[y.age," ya",y.notes&&`  ${y.notes.slice(0,30)}${y.notes.length>30?"...":""}`]})]}),_&&d.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${g(_.emotion)}`,children:[d.jsx("span",{className:"mr-1",children:p(_.emotion)}),_.emotion]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(jt,{variant:"ghost",size:"sm",onClick:()=>a(y),className:"text-gray-600 hover:text-primary",children:d.jsx(pD,{className:"h-4 w-4"})}),d.jsx(jt,{variant:"ghost",size:"sm",onClick:()=>o(y),className:"text-gray-600 hover:text-secondary",children:d.jsx(PD,{className:"h-4 w-4"})}),d.jsx(jt,{variant:"ghost",size:"sm",onClick:()=>l(y.id),className:"text-gray-600 hover:text-danger",children:d.jsx(BD,{className:"h-4 w-4"})})]})]},y.id)})})})]})},cj=({insights:s,loading:e=!1})=>{const n=h=>({progress:pE,attention:vx,recommendation:ag,warning:vx})[h]||px,a=(h,g)=>g==="warning"||h==="high"?"bg-red-50 border-red-200 text-red-800":g==="attention"||h==="medium"?"bg-yellow-50 border-yellow-200 text-yellow-800":g==="progress"?"bg-green-50 border-green-200 text-green-800":"bg-blue-50 border-blue-200 text-blue-800",o=h=>({progress:"lerleme",attention:"Dikkat",recommendation:"neri",warning:"Uyar"})[h]||"Bilgi",l=h=>{const p=new Date().getTime()-h.getTime(),y=Math.floor(p/6e4),_=Math.floor(p/36e5),E=Math.floor(p/864e5);return E>0?`${E} gn nce`:_>0?`${_} saat nce`:y>0?`${y} dakika nce`:"Az nce"};return e?d.jsxs(Ze,{children:[d.jsx(zh,{children:d.jsx(Uh,{children:"AI ngrleri"})}),d.jsx(We,{children:d.jsx("div",{className:"space-y-4",children:[1,2,3].map(h=>d.jsx("div",{className:"animate-pulse border border-gray-200 rounded-lg p-4",children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-1"}),d.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})},h))})})]}):d.jsxs(Ze,{children:[d.jsx(zh,{children:d.jsxs(Uh,{className:"flex items-center",children:[d.jsx(ag,{className:"h-5 w-5 mr-2 text-primary"}),"AI ngrleri (",s.length,")"]})}),d.jsx(We,{children:s.length===0?d.jsxs("div",{className:"text-center py-8",children:[d.jsx(px,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600 mb-2",children:"Henz AI ngrs yok"}),d.jsx("p",{className:"text-sm text-gray-500",children:"renciler aktivite yaptka AI ngrleri burada grnecek"})]}):d.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:s.map(h=>{const g=n(h.type);return d.jsx("div",{className:`border rounded-lg p-4 ${a(h.priority,h.type)}`,children:d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx(g,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsx("h4",{className:"font-medium text-sm",children:o(h.type)}),d.jsxs("div",{className:"flex items-center text-xs opacity-75",children:[d.jsx(gr,{className:"h-3 w-3 mr-1"}),l(h.createdAt)]})]}),d.jsx("p",{className:"text-sm opacity-90",children:h.message})]})]})},h.id)})})})]})},uj=()=>{const{currentUser:s}=Jr(),[e,n]=S.useState([]),[a,o]=S.useState([]),[l,h]=S.useState(!0),[g]=S.useState("connected"),[p]=S.useState({weeklyProgress:85,completedActivities:24,averageSuccess:78,aiRecommendations:5}),y=S.useCallback(async()=>{if(s)try{h(!0);const z=await YI(s.id);n(z);const j=[];for(const Z of z){const X=await QI(Z.id);j.push(...X)}j.sort((Z,X)=>X.createdAt.getTime()-Z.createdAt.getTime()),o(j.slice(0,10))}catch(z){console.error("Error loading data:",z)}finally{h(!1)}},[s]);S.useEffect(()=>{s&&y()},[s,y]);const _=()=>{console.log("Add student clicked")},E=z=>{console.log("View student:",z)},A=z=>{console.log("Edit student:",z)},V=z=>{console.log("Delete student:",z)},B=z=>({emotion:"happy",confidence:.95,timestamp:new Date});return d.jsxs("div",{className:"min-h-screen bg-gray-50",children:[d.jsx(ij,{aiStatus:g}),d.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-lg p-6 text-white",children:[d.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Ho geldiniz, ",s?.name,"! "]}),d.jsx("p",{className:"text-blue-100",children:"NeuroLearn AI ile rencilerinizin geliimini takip edin ve yapay zeka destekli renme deneyimi sunun."})]}),d.jsx(oj,{stats:p,loading:l}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsx("div",{className:"lg:col-span-2",children:d.jsx(lj,{students:e,loading:l,onAddStudent:_,onViewStudent:E,onEditStudent:A,onDeleteStudent:V,getStudentLastEmotion:B})}),d.jsx("div",{className:"lg:col-span-1",children:d.jsx(cj,{insights:a,loading:l})})]}),d.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Hzl lemler"}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[d.jsx("div",{className:"text-primary font-medium mb-1",children:" Yeni Oyun Balat"}),d.jsx("div",{className:"text-sm text-gray-600",children:"renciler iin eitim oyunu balatn"})]}),d.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[d.jsx("div",{className:"text-secondary font-medium mb-1",children:" Detayl Rapor"}),d.jsx("div",{className:"text-sm text-gray-600",children:"renci geliim raporlarn inceleyin"})]}),d.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[d.jsx("div",{className:"text-success font-medium mb-1",children:" AI nerileri"}),d.jsx("div",{className:"text-sm text-gray-600",children:"Yapay zeka nerilerini grntleyin"})]})]})]})]})})]})};class hj{constructor(){this.performanceData=new Map}initializePlayer(e,n){this.performanceData.has(e)||this.performanceData.set(e,{recentScores:[],averageResponseTime:0,recentEmotions:[],strugglingTopics:[],strengths:[],currentDifficulty:this.getDifficultyByAge(n)})}getDifficultyByAge(e){return e<=5?"easy":e<=8?"medium":"hard"}recordGameResult(e,n,a,o,l,h){const g=this.performanceData.get(e);if(!g)return;const p=n/a;g.recentScores.push(p),g.recentScores.length>10&&g.recentScores.shift(),g.averageResponseTime=(g.averageResponseTime+o)/2,g.recentEmotions.push(...h),g.recentEmotions.length>20&&(g.recentEmotions=g.recentEmotions.slice(-20)),this.analyzeAndAdjustDifficulty(e,l),this.performanceData.set(e,g)}analyzeAndAdjustDifficulty(e,n){const a=this.performanceData.get(e);if(!a||a.recentScores.length<3)return;const o=a.recentScores.slice(-5).reduce((h,g)=>h+g,0)/Math.min(5,a.recentScores.length),l=this.getDominantEmotion(a.recentEmotions.slice(-10));o>=.8&&l==="happy"?(a.currentDifficulty==="easy"?a.currentDifficulty="medium":a.currentDifficulty==="medium"&&(a.currentDifficulty="hard"),a.strengths.push(n)):(o<=.4||l==="confused"||l==="sad")&&(a.currentDifficulty==="hard"?a.currentDifficulty="medium":a.currentDifficulty==="medium"&&(a.currentDifficulty="easy"),a.strugglingTopics.includes(n)||a.strugglingTopics.push(n)),a.strengths=Array.from(new Set(a.strengths)).slice(-5),a.strugglingTopics=Array.from(new Set(a.strugglingTopics)).slice(-5)}getDominantEmotion(e){if(e.length===0)return"neutral";const n={};return e.forEach(a=>{n[a.emotion]=(n[a.emotion]||0)+1}),Object.keys(n).reduce((a,o)=>n[a]>n[o]?a:o)}getPerformance(e){return this.performanceData.get(e)||null}shouldAdaptQuestion(e){const n=this.performanceData.get(e);return n?n.recentScores.length>=3:!1}getAdaptationStrategy(e){const n=this.performanceData.get(e);if(!n)return"neutral";const a=n.recentScores.slice(-3).reduce((l,h)=>l+h,0)/Math.min(3,n.recentScores.length),o=this.getDominantEmotion(n.recentEmotions.slice(-6));return a>=.7&&(o==="happy"||o==="focused")?"success":a<=.4||o==="sad"?"struggle":o==="confused"?"confusion":"neutral"}getInsights(e){const n=this.performanceData.get(e);if(!n)return[];const a=[],o=n.recentScores.length>0?n.recentScores.reduce((h,g)=>h+g,0)/n.recentScores.length:0;o>=.8?a.push("renci ok baarl, daha zor sorularla meydan okuyun"):o<=.4&&a.push("renci zorlanyor, daha basit sorularla motivasyonu artrn"),n.strugglingTopics.length>0&&a.push(`Zorland konular: ${n.strugglingTopics.join(", ")}`),n.strengths.length>0&&a.push(`Gl olduu konular: ${n.strengths.join(", ")}`);const l=this.getDominantEmotion(n.recentEmotions);return l==="confused"?a.push("renci kark grnyor, aklamalar basitletirin"):l==="happy"&&a.push("renci mutlu ve motive, bu tempoyu koruyun"),a}resetPerformance(e){this.performanceData.delete(e)}exportPerformanceData(e){return this.performanceData.get(e)||null}}const wr=new hj;class dj{constructor(){this.modelName="hf.co/umutkkgz/Kaira-Turkish-Gemma-9B-T1-GGUF:Q3_K_M"}async generateQuestion(e){const{subject:n,difficulty:a,questionType:o="oktan semeli"}=e;console.log(" [OLLAMA DEBUG] Soru retimi balyor:",{subject:n,difficulty:a,questionType:o,timestamp:new Date().toISOString(),stack:new Error().stack?.split(`
`).slice(1,5).join(`
`)});const l=this.buildPrompt(n,a,o);try{const h=await this.callOllama(l),g=this.parseOllamaResponse(h);return console.log(" [OLLAMA DEBUG] Soru baaryla retildi:",g.question),{id:`ollama_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,question:g.question,options:g.options,correctAnswer:g.correctIndex,confidence:.9,gameType:"word-image",difficulty:this.mapDifficultyToEnglish(a),source:"ollama"}}catch(h){throw console.error(" [OLLAMA DEBUG] Soru retme hatas:",h),new Error(`Ollama servisi ile soru retilemedi: ${h}`)}}buildPrompt(e,n,a){return`Aadaki talimatlar tamamen uygula ve yalnzca istenen biimde yant ver.

Profil (hedef kitle)
Ya: 12 (ortaokul 56. snf).
Dikkat sresi iin: tek grev, tek cmle, somut/giri dzeyi soyut kavramlar.
Kelime daarc: B1 dzeyi; gnlk ve dersle ilikili szckler.

Dil ve karakterler
Yant yalnzca Trke olmaldr.
in/Japon tipi karakter ve noktalama kullanma (rn.     ).
ASCII soru iareti ? kullan.

kt format (zorunlu)
Sadece tek bir JSON nesnesi dndr; aklama/ek metin yok.
ema: {"question": string, "options": [string,string,string,string], "correctIndex": number}

Kurallar:
question: 68 kelime, ksa ve net.
options: tam 4 seenek, Trke ve emoji ile grsel zengin.
Seenekler benzersiz, benzer uzunlukta; sadece 1 doru.
correctIndex: 03 aras tamsay.

ADHD'ye uygun tasarm
Olumsuz kalp kullanma ("hangisi deildir" yok).
Belirsiz/iki anlaml ifadeler yok.
Ayn veya ok benzer emojiler kullanma (karklk oluturma).
Gereksiz ssleme ve uzun cmleler yok.

Zorluk haritalamas (12 ya):
kolay: dorudan tanma/isimlendirme; ak farklar; 1 adm.
orta: temel snflama/zdelik; yakn ama ayrlabilir eldiriciler.
zor: ksa balam ipucu veya 2 adml basit akl yrtme (yine ksa).

Kalite kontrolleri
Soru "hangi / ne / kim / nerede / nedir / nasl" kalb iersin.
Seenekler dilbilgisel olarak tutarl (hepsi ksa sz bekleri).
Soruda cevab ak etmeyin (ipucu sznts yok).
Doru cevabn konumu rastgele olsun; sabit pozisyon kullanma.

Konu: ${e}
Zorluk: ${n}

DORU rnek
{"question":" hangi ses karr?","options":["Hav hav","Miyav","M","Cik cik"],"correctIndex":0}

YANLI rnekler (yapma)
Ek aklama/metin dndrmek.
in tipi noktalama:     
Uzun/iki grevli sorular.
Birden ok doru cevap.`}getADHDGuidelines(e){switch(e){case"kolay":return`
- ok basit, gnlk yaamdan konular
- Byk, kontrastl emojiler kullan
- Sadece bir odak noktas
- Pozitif, elenceli dil`;case"orta":return`
- Bilinen konulardan biraz farkl rnekler
- Rengarenk emojiler
- Hafif dndrc ama yorucu deil
- Tevik edici ifadeler`;case"zor":return`
- Dikkat gerektiren detaylar
- oklu grsel ipular
- Problem zme odakl
- Baar hissi verecek zorlukta`;default:return"- Temel ADHD uyumlu tasarm prensiplerine uygun"}}async callOllama(e){const n="http://localhost:11434/api/generate";console.log(" [OLLAMA DEBUG] API ars balyor...");const a={model:this.modelName,prompt:e,format:"json",stream:!1,options:{temperature:.6,top_p:.9,num_predict:300}};try{const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw new Error(`Ollama API hatas: ${o.status} ${o.statusText}`);const l=await o.json();if(!l.response)throw new Error("Ollama bo yant dndrd");return console.log(" [OLLAMA DEBUG] API yant alnd"),l.response.trim()}catch(o){throw o instanceof Error?new Error(`Ollama API hatas: ${o.message}`):o}}parseOllamaResponse(e){console.log(" [OLLAMA DEBUG] Parse edilecek yant:",e);try{let n;try{n=JSON.parse(e.trim())}catch{const l=e.match(/\{[\s\S]*\}/);if(!l)throw new Error(`JSON bulunamad. Ham yant: ${e}`);const h=l[0];n=JSON.parse(h)}if(!n?.question||typeof n.question!="string")throw new Error(`Geersiz question: ${n?.question}`);const a=/[\u4e00-\u9fff\uff00-\uffef]/;if(a.test(n.question))throw new Error(`Soru ince karakter ieriyor: ${n.question}`);if(!Array.isArray(n?.options))throw new Error(`Options array deil: ${n?.options}`);if(n.options.length!==4)throw new Error(`4 seenek gerekli, ${n.options.length} bulundu: ${JSON.stringify(n.options)}`);for(const o of n.options){if(typeof o!="string")throw new Error(`Seenek string deil: ${o}`);if(a.test(o))throw new Error(`Seenek ince karakter ieriyor: ${o}`)}if(typeof n?.correctIndex!="number")throw new Error(`correctIndex say deil: ${n?.correctIndex}`);if(n.correctIndex<0||n.correctIndex>3)throw new Error(`correctIndex 0-3 arasnda olmal: ${n.correctIndex}`);return console.log(" [OLLAMA DEBUG] JSON baaryla parse edildi"),n}catch(n){throw console.error(" [OLLAMA DEBUG] JSON parse hatas:",n),console.error(" [OLLAMA DEBUG] Ham yant:",e),new Error(`Model JSON dndrmedi veya format hatal: ${n}`)}}mapDifficultyToEnglish(e){return{kolay:"easy",orta:"medium",zor:"hard"}[e]||"medium"}setModel(e){this.modelName=e}getCurrentModel(){return this.modelName}async checkOllamaStatus(){try{const e=await fetch("http://localhost:11434/api/tags",{method:"GET",headers:{"Content-Type":"application/json"}});return e.ok?((await e.json()).models||[]).some(o=>o.name.includes(this.modelName.split(":")[0])):!1}catch(e){return console.error("Ollama status kontrol hatas:",e),!1}}async generateMultipleQuestions(e,n=5){const a=[];for(let o=0;o<n;o++)try{const l=await this.generateQuestion(e);a.push(l),await new Promise(h=>setTimeout(h,1e3))}catch(l){console.error(`${o+1}. soru retme hatas:`,l)}if(a.length===0)throw new Error("Hi soru retilemedi");return a}}const Rs=new dj;class fj{async generateAdaptiveQuestion(e){console.log(" [ADAPTIVE DEBUG] generateAdaptiveQuestion arld:",{gameType:e.gameType,studentAge:e.studentAge,timestamp:new Date().toISOString(),stack:new Error().stack?.split(`
`).slice(1,5).join(`
`)});const{performance:n,currentEmotion:a,gameType:o,studentAge:l}=e,h=this.determineAdaptationStrategy(n,a);switch(o){case"word-image":return this.generateAdaptiveWordImageQuestion(e,h);case"number":return this.generateAdaptiveNumberQuestion(e,h);case"color":return this.generateAdaptiveColorQuestion(e,h);case"attention-sprint":throw new Error("Attention sprint oyunu AttentionSprintGenerator kullanr");default:throw new Error(`Unsupported game type: ${o}`)}}determineAdaptationStrategy(e,n){const a=e.recentScores.length>0?e.recentScores.slice(-3).reduce((o,l)=>o+l,0)/Math.min(3,e.recentScores.length):.5;return a>=.8&&n?.emotion==="happy"?"challenge":a>=.6&&a<.8?"energize":a<=.4||n?.emotion==="sad"?"simplify":n?.emotion==="confused"?"refocus":"encourage"}async generateAdaptiveWordImageQuestion(e,n){const{performance:a,studentAge:o}=e,l=this.getSubjectForWordImage(o,n),h=this.mapDifficultyToTurkish(a.currentDifficulty);try{const g={subject:l,difficulty:h,questionType:"oktan semeli"};return{...await Rs.generateQuestion(g),difficulty:a.currentDifficulty,adaptedFor:n==="challenge"?"success":n==="simplify"?"struggle":"confusion",gameType:"word-image"}}catch(g){console.error("Ollama question generation failed, using adaptive fallback:",g)}return this.generateAdaptiveFallbackWordImage(n,a.currentDifficulty,o)}buildWordImagePrompt(e,n,a){const o={easy:"very simple",medium:"moderately challenging",hard:"challenging"},l={encourage:"Create an encouraging and positive question",challenge:"Create a more challenging question to push the student",simplify:"Create a very simple and confidence-building question",refocus:"Create a clear, focused question without distractions"};return`Generate a ${o[n]} word-image matching question for a ${a}-year-old child. ${l[e]}.

Format the response as:
Question: [question text]
Options: [option1, option2, option3, option4]
Correct: [index of correct answer 0-3]

Example:
Question: Which animal says "woof woof"?
Options: , , , 
Correct: 0

Topic should be about animals, fruits, or vehicles. Use simple emojis as options.`}parseAIQuestionResponse(e,n){try{const a=e.split(`
`).filter(g=>g.trim());let o="",l=[],h=0;for(const g of a)g.startsWith("Question:")?o=g.replace("Question:","").trim():g.startsWith("Options:")?l=g.replace("Options:","").trim().split(",").map(p=>p.trim()):g.startsWith("Correct:")&&(h=parseInt(g.replace("Correct:","").trim())||0);if(o&&l.length>=4)return{id:`ai_${n}_${Date.now()}`,question:o,options:l.slice(0,4),correctAnswer:Math.max(0,Math.min(3,h)),confidence:.9,gameType:n}}catch(a){console.error("Error parsing AI response:",a)}return null}generateAdaptiveFallbackWordImage(e,n,a){const l={animals:{easy:[{question:"Hangi hayvan kpek?",options:["","","",""],correct:0},{question:"Hangi hayvan kedi?",options:["","","",""],correct:0}],medium:[{question:"Hangi hayvan iftlikte yaar?",options:["","","",""],correct:0},{question:"Hangi hayvan denizde yaar?",options:["","","",""],correct:0}],hard:[{question:"Hangi hayvan gece aktiftir?",options:["","","",""],correct:0},{question:"Hangi hayvan souk blgelerde yaar?",options:["","","",""],correct:0}]}}.animals[n],h=l[Math.floor(Math.random()*l.length)];let g=h.question;return e==="encourage"?g=`Harika! ${g}`:e==="simplify"?g=`Kolay soru: ${g}`:e==="challenge"&&(g=`Zor soru: ${g}`),{id:`adaptive_word_${Date.now()}`,question:g,options:h.options,correctAnswer:h.correct,confidence:.85,gameType:"word-image",difficulty:n,adaptedFor:e==="challenge"?"success":e==="simplify"?"struggle":"confusion"}}async generateAdaptiveNumberQuestion(e,n){const{performance:a,studentAge:o}=e,h={easy:{min:1,max:5},medium:{min:1,max:10},hard:{min:5,max:15}}[a.currentDifficulty],g=Math.floor(Math.random()*(h.max-h.min+1))+h.min,p=[];for(;p.length<3;){let A;n==="simplify"?A=Math.random()<.5?Math.max(1,g-Math.floor(Math.random()*3)-1):Math.min(h.max,g+Math.floor(Math.random()*3)+1):A=Math.floor(Math.random()*(h.max-h.min+1))+h.min,A!==g&&!p.includes(A)&&p.push(A)}const y=[g,...p].sort(()=>Math.random()-.5),_=y.indexOf(g);let E="Ka tane  var?";return n==="encourage"?E=`Harika! ${E}`:n==="challenge"?E=`Dikkatlice say: ${E}`:n==="simplify"&&(E=`Kolay soru: ${E}`),{id:`adaptive_number_${Date.now()}`,question:E,options:y.map(String),correctAnswer:_,confidence:.9,gameType:"number",difficulty:a.currentDifficulty,adaptedFor:n==="challenge"?"success":n==="simplify"?"struggle":"confusion"}}async generateAdaptiveColorQuestion(e,n){const{performance:a}=e,o=[{name:"krmz",emoji:""},{name:"mavi",emoji:""},{name:"yeil",emoji:""},{name:"sar",emoji:""},{name:"mor",emoji:""},{name:"turuncu",emoji:""}];let l=o;a.currentDifficulty==="easy"?l=o.slice(0,4):n==="simplify"&&(l=o.slice(0,3));const h=l[Math.floor(Math.random()*l.length)],g=l.filter(E=>E.name!==h.name).slice(0,3),p=[h,...g].sort(()=>Math.random()-.5),y=p.findIndex(E=>E.name===h.name);let _=`Hangi renk ${h.name}?`;return n==="encourage"?_=`ok gzel! ${_}`:n==="challenge"?_=`Dikkat et: ${_}`:n==="simplify"&&(_=`Basit soru: ${_}`),{id:`adaptive_color_${Date.now()}`,question:_,options:p.map(E=>E.emoji),correctAnswer:y,confidence:.9,gameType:"color",difficulty:a.currentDifficulty,adaptedFor:n==="challenge"?"success":n==="simplify"?"struggle":"confusion"}}async generateQuestionWithContext(e,n,a,o){console.log(" [ADAPTIVE DEBUG] generateQuestionWithContext arld:",{studentId:e,gameType:n,studentAge:a,timestamp:new Date().toISOString(),stack:new Error().stack?.split(`
`).slice(1,5).join(`
`)}),wr.initializePlayer(e,a);const l=wr.getPerformance(e);if(!l)throw new Error("Could not retrieve student performance data");const h={performance:l,currentEmotion:o,gameType:n,previousQuestions:[],studentAge:a,adaptiveMode:!0};return this.generateAdaptiveQuestion(h)}getSubjectForWordImage(e,n){const a={easy:["Sevimli Hayvanlar","Parlak Renkler","Lezzetli Meyveler","Elenceli Oyuncaklar"],medium:["Hzl Hayvanlar","Cool Tatlar","Maceral Doa","Sper Kahramanlar"],hard:["Uzay ve Gezegenler","Dinozorlar","Harika Icatlar","Byl Bilim"]};let o;switch(e<=6?o=a.easy:e<=10?o=a.medium:o=a.hard,n){case"simplify":o=a.easy;break;case"energize":o=["Sper Hzl Hayvanlar","lgn Renkler","Aksiyon Arabalar"];break;case"challenge":e>7&&(o=a.hard);break;case"refocus":o=["Sakin Hayvanlar","Yumuak Renkler","Huzurlu Doa"];break}return o[Math.floor(Math.random()*o.length)]}mapDifficultyToTurkish(e){return{easy:"kolay",medium:"orta",hard:"zor"}[e]||"orta"}async generateOllamaMathQuestion(e="Temel Matematik",n="orta",a=8){const o=["Elenceli sayma (oyuncaklar, hayvanlar ile)","Grsel toplama (emojiler ile)","Kolay karma (izgi film karakterleri ile)","Renkli ekiller tanma","Gnlk yaamdan saylar (ya, saat, para)"],l=o[Math.floor(Math.random()*o.length)];try{const h={subject:`${l} (${a} ya iin uygun)`,difficulty:n,questionType:"oktan semeli"};return{...await Rs.generateQuestion(h),gameType:"number"}}catch(h){throw console.error("Ollama matematik sorusu retme hatas:",h),h}}async generateOllamaScienceQuestion(e="orta",n=10){const a=["Sevimli hayvanlarn yaam alanlar","Gkyzndeki renkli olaylar (gkkua, bulutlar)","Elenceli deneyimler (mknats, su-ya)","Uzaydaki parlak gezegen ve yldzlar","Bitkilerin bymesi ve iek amas","Mevsim deiimleri ve doadaki renkler"],o=a[Math.floor(Math.random()*a.length)];try{const l={subject:`${o} (${n} ya ocuk iin basit)`,difficulty:e,questionType:"oktan semeli"};return await Rs.generateQuestion(l)}catch(l){throw console.error("Ollama fen bilgisi sorusu retme hatas:",l),l}}}const dp=new fj,mj=({studentId:s,studentAge:e=6,onGameComplete:n,onEmotionDetected:a,useAdaptiveAI:o=!0})=>{const[l,h]=S.useState(null),[g,p]=S.useState(null),[y,_]=S.useState(0),[E,A]=S.useState(1),[V,B]=S.useState(30),[z,j]=S.useState("loading"),[Z,X]=S.useState([]),[ce,ue]=S.useState(""),[le]=S.useState(Date.now()),[he,O]=S.useState(!1),[R,C]=S.useState(""),[M,P]=S.useState(!1),I=S.useRef(!1),k=5,Ae=S.useCallback(async()=>{if(!he){j("loading"),O(!0);try{let $;if(o){const oe=Z.length>0?Z[Z.length-1]:void 0;$=await dp.generateQuestionWithContext(s,"word-image",e,oe);const fe=wr.getInsights(s);fe.length>0&&C(fe[0])}else{const oe=["Hayvanlar","Meyveler","Tatlar"],fe=oe[Math.floor(Math.random()*oe.length)];$=await Rs.generateQuestion({subject:fe,difficulty:"kolay",questionType:"oktan semeli"})}h($),p(null),B(30),j("playing")}catch($){console.error("Error generating question:",$);try{const oe=await Rs.generateQuestion({subject:"Hayvanlar",difficulty:"kolay",questionType:"oktan semeli"});h(oe)}catch(oe){console.error("Ollama fallback failed:",oe);const fe={id:`static_fallback_${Date.now()}`,question:"Hangi hayvan kpek?",options:["","","",""],correctAnswer:0,confidence:1,gameType:"word-image",difficulty:"easy"};h(fe)}p(null),B(30),j("playing")}finally{O(!1)}}},[s,e,o]);S.useEffect(()=>{I.current||M||(I.current=!0,P(!0),Ae())},[Ae,M]),S.useEffect(()=>{let $;return z==="playing"&&V>0?$=setTimeout(()=>{B(V-1)},1e3):V===0&&z==="playing"&&_e(),()=>clearTimeout($)},[V,z]);const _e=()=>{p(-1);const $=["Zaman bitti!  Ama sorun yok, devam edelim!","Hop, zaman doldu!  Hzl olmaya alalm!","Sre bitti!  Bir sonrakinde daha hzl!","Zaman tamamland!  Sen yaparsn!"];ue($[Math.floor(Math.random()*$.length)]),j("answered");const oe={emotion:"neutral",confidence:.6,timestamp:new Date};X(fe=>[...fe,oe]),a?.(oe),setTimeout(()=>{se()},1500)},F=$=>{if(z!=="playing")return;if(p($),j("answered"),$===l?.correctAnswer){_(y+1);const fe=["SPER!  Harika bir seim!","MTH!  ok akllsn!","WOW!  Perfect!","BRAVO!  Harikasn!","YESSss!  Devam et!"];ue(fe[Math.floor(Math.random()*fe.length)]);const pe={emotion:"happy",confidence:.9,timestamp:new Date};X(qe=>[...qe,pe]),a?.(pe)}else{const fe=["Hey, yaklatn!  Bir daha dene!","Hi sorun deil!  Sen harikasn!","nemli deil!  Denemeye devam!","Bu sefer olmad ama  bir sonrakinde!","Gayet iyi!  Devam ediyoruz!"];ue(fe[Math.floor(Math.random()*fe.length)]);const pe={emotion:"neutral",confidence:.7,timestamp:new Date};X(qe=>[...qe,pe]),a?.(pe)}setTimeout(()=>{se()},2e3)},se=()=>{E>=k?ee():(A(E+1),Ae())},ee=()=>{j("completed");const $=Math.floor((Date.now()-le)/1e3);o&&wr.recordGameResult(s,y,k,$,"word-image",Z),n(y,$,Z)},me=()=>{_(0),A(1),X([]),C(""),o&&wr.initializePlayer(s,e),Ae()},N=$=>{if("speechSynthesis"in window){const oe=new SpeechSynthesisUtterance($);oe.lang="tr-TR",oe.rate=.8,speechSynthesis.speak(oe)}},J=()=>{const $=y/k*100;return $>=80?"text-green-600":$>=60?"text-yellow-600":"text-red-600"},Q=()=>{const $=y/k*100;return $===100?"WAOW! MKEMMEL!  Sen bir ampiyon!":$>=80?"SPER!  ok akllsn!":$>=60?"HARKA!  ok iyi gidiyorsun!":$>=40?"GZEL!  Devam et!":"HEY!  Sen harikasn, tekrar deneyelim!"};return z==="completed"?d.jsx(Ze,{className:"max-w-2xl mx-auto",children:d.jsxs(We,{className:"text-center py-12",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:d.jsx(ka,{className:"h-12 w-12 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Oyun Tamamland!"}),d.jsx("p",{className:"text-gray-600",children:"Harika bir performans sergiledi!"})]}),d.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:`text-3xl font-bold ${J()}`,children:[y,"/",k]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Doru Cevap"})]}),d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-3xl font-bold text-primary",children:["%",Math.round(y/k*100)]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Baar Oran"})]}),d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-3xl font-bold text-secondary",children:Z.length}),d.jsx("div",{className:"text-sm text-gray-600",children:"Duygusal Tepki"})]})]})}),d.jsx("div",{className:"mb-6",children:d.jsx("p",{className:"text-lg font-medium text-gray-800",children:Q()})}),d.jsxs(jt,{onClick:me,size:"lg",className:"mr-4",children:[d.jsx(bi,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):z==="loading"||!l?d.jsx(Ze,{className:"max-w-2xl mx-auto",children:d.jsxs(We,{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),he&&o?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(Ut,{className:"h-5 w-5 text-primary animate-pulse"}),d.jsx("p",{className:"text-gray-600 font-medium",children:" Senin iin zel soru hazrlyorum!"})]}),d.jsx("p",{className:"text-sm text-gray-500",children:" ADHD dostum iin en iyi soruyu seiyorum..."})]}):d.jsx("p",{className:"text-gray-600 font-medium",children:" Yeni macera ykleniyor..."})]})}):d.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[d.jsx(Ze,{children:d.jsxs(We,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Soru ",E,"/",k]}),d.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",y,"/",E-1]}),o&&l?.difficulty&&d.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${l.difficulty==="easy"?"bg-green-100 text-green-700":l.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:l.difficulty==="easy"?"Kolay":l.difficulty==="medium"?"Orta":"Zor"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[o&&d.jsx("div",{title:"AI Powered",children:d.jsx(Ut,{className:"h-4 w-4 text-primary"})}),d.jsx(gr,{className:"h-4 w-4 text-gray-600"}),d.jsxs("span",{className:`font-medium ${V<=10?"text-red-600":"text-gray-800"}`,children:[V,"s"]})]})]}),d.jsx("div",{className:"mt-4",children:d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${E/k*100}%`}})})}),o&&R&&d.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ut,{className:"h-4 w-4 text-blue-600"}),d.jsx("p",{className:"text-sm text-blue-700",children:R})]})})]})}),d.jsx(Ze,{children:d.jsxs(We,{className:"text-center py-8",children:[d.jsxs("div",{className:"mb-6",children:[d.jsxs(jt,{variant:"ghost",onClick:()=>N(l.question),className:"mb-4",children:[d.jsx(QD,{className:"h-5 w-5 mr-2"}),"Soruyu Dinle"]}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:l.question})]}),d.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto",children:l.options.map(($,oe)=>{let fe="h-24 text-4xl hover:scale-105 transition-transform";return z==="answered"&&(oe===l.correctAnswer?fe+=" bg-green-100 border-green-500 text-green-700":oe===g&&oe!==l.correctAnswer?fe+=" bg-red-100 border-red-500 text-red-700":fe+=" opacity-50"),d.jsx("button",{className:`border-2 border-gray-300 rounded-lg ${fe}`,onClick:()=>F(oe),disabled:z!=="playing",children:$},oe)})}),z==="answered"&&ce&&d.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2",children:[g===l.correctAnswer?d.jsx(pE,{className:"h-6 w-6 text-green-600"}):d.jsx(fD,{className:"h-6 w-6 text-red-600"}),d.jsx("p",{className:"text-lg font-medium text-gray-800",children:ce})]})]})})]})},gj=({studentId:s,studentAge:e=6,onGameComplete:n,onEmotionDetected:a,useAdaptiveAI:o=!0})=>{const[l,h]=S.useState(null),[g,p]=S.useState(null),[y,_]=S.useState(0),[E,A]=S.useState(1),[V,B]=S.useState(45),[z,j]=S.useState("loading"),[Z,X]=S.useState([]),[ce,ue]=S.useState(!1),[le]=S.useState(Date.now()),[he,O]=S.useState(!1),[R,C]=S.useState(""),[M,P]=S.useState(!1),I=S.useRef(!1),k=5,Ae=S.useCallback(async()=>{if(!he){j("loading"),O(!0);try{let Q;if(o){const $=Z.length>0?Z[Z.length-1]:void 0;Q=await dp.generateQuestionWithContext(s,"number",e,$);const oe=wr.getInsights(s);oe.length>0&&C(oe[0])}else Q=await Rs.generateQuestion({subject:"Sayma ve temel matematik",difficulty:"kolay",questionType:"oktan semeli"}),Q.gameType="number";h(Q),p(null),B(45),j("playing")}catch(Q){console.error("Error generating question:",Q);try{const $=await Rs.generateQuestion({subject:"Basit sayma",difficulty:"kolay",questionType:"oktan semeli"});$.gameType="number",h($)}catch($){console.error("Ollama fallback failed:",$);const oe={id:`static_number_${Date.now()}`,question:"Ka tane  var?",options:["2","3","4","5"],correctAnswer:1,confidence:1,gameType:"number",difficulty:"easy"};h(oe)}p(null),B(45),j("playing")}finally{O(!1)}}},[s,e,o]);S.useEffect(()=>{I.current||M||(I.current=!0,P(!0),Ae())},[Ae,M]),S.useEffect(()=>{let Q;return z==="playing"&&V>0?Q=setTimeout(()=>{B(V-1)},1e3):V===0&&z==="playing"&&_e(),()=>clearTimeout(Q)},[V,z]);const _e=()=>{p(-1),j("answered");const Q={emotion:"confused",confidence:.8,timestamp:new Date};X($=>[...$,Q]),a?.(Q),setTimeout(()=>{ee()},2e3)},F=Q=>{if(z!=="playing")return;if(p(Q),j("answered"),Q===l?.correctAnswer){_(y+1);const oe={emotion:"happy",confidence:.9,timestamp:new Date};X(fe=>[...fe,oe]),a?.(oe)}else{const oe={emotion:"sad",confidence:.7,timestamp:new Date};X(fe=>[...fe,oe]),a?.(oe)}setTimeout(()=>{ee()},2e3)},se=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Taraycnz ses tanmay desteklemiyor");return}if(ce){ue(!1);return}ue(!0);const Q=new(window.webkitSpeechRecognition||window.SpeechRecognition);Q.lang="tr-TR",Q.interimResults=!1,Q.maxAlternatives=1,Q.onresult=$=>{const oe=$.results[0][0].transcript,fe=parseInt(oe);if(!isNaN(fe)&&l){const pe=l.options.findIndex(qe=>parseInt(qe)===fe);pe!==-1&&F(pe)}ue(!1)},Q.onerror=()=>{ue(!1)},Q.onend=()=>{ue(!1)},Q.start()},ee=()=>{E>=k?me():(A(E+1),Ae())},me=()=>{j("completed");const Q=Math.floor((Date.now()-le)/1e3);o&&wr.recordGameResult(s,y,k,Q,"number",Z),n(y,Q,Z)},N=()=>{_(0),A(1),X([]),C(""),o&&wr.initializePlayer(s,e),Ae()};if(z==="completed")return d.jsx(Ze,{className:"max-w-2xl mx-auto",children:d.jsxs(We,{className:"text-center py-12",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:d.jsx(ka,{className:"h-12 w-12 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Say Oyunu Tamamland!"}),d.jsx("p",{className:"text-gray-600",children:"Matematik becerilerin geliiyor!"})]}),d.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-4xl font-bold text-green-600 mb-2",children:[y,"/",k]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Doru Say"})]})}),d.jsxs(jt,{onClick:N,size:"lg",children:[d.jsx(bi,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})});if(z==="loading"||!l)return d.jsx(Ze,{className:"max-w-2xl mx-auto",children:d.jsxs(We,{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),he&&o?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(Ut,{className:"h-5 w-5 text-green-600"}),d.jsx("p",{className:"text-gray-600",children:"AI say sorusu retiyor..."})]}),d.jsx("p",{className:"text-sm text-gray-500",children:"Performansna gre uyarlanyor"})]}):d.jsx("p",{className:"text-gray-600",children:"Say sorusu hazrlanyor..."})]})});const J=()=>{if(!l)return null;const Q=parseInt(l.options[l.correctAnswer]),$="".repeat(Q);return d.jsx("div",{className:"text-6xl mb-6 leading-relaxed",children:$})};return d.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[d.jsx(Ze,{children:d.jsxs(We,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Soru ",E,"/",k]}),d.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",y]}),o&&l?.difficulty&&d.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${l.difficulty==="easy"?"bg-green-100 text-green-700":l.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:l.difficulty==="easy"?"Kolay":l.difficulty==="medium"?"Orta":"Zor"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[o&&d.jsx("div",{title:"AI Powered",children:d.jsx(Ut,{className:"h-4 w-4 text-green-600"})}),d.jsx(gr,{className:"h-4 w-4 text-gray-600"}),d.jsxs("span",{className:`font-medium ${V<=15?"text-red-600":"text-gray-800"}`,children:[V,"s"]})]})]}),o&&R&&d.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ut,{className:"h-4 w-4 text-blue-600"}),d.jsx("p",{className:"text-sm text-blue-700",children:R})]})})]})}),d.jsx(Ze,{children:d.jsxs(We,{className:"text-center py-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:l.question}),d.jsx("div",{className:"mb-8",children:J()}),d.jsxs("div",{className:"mb-6",children:[d.jsxs(jt,{onClick:se,variant:ce?"danger":"secondary",size:"lg",className:"mb-4",children:[ce?d.jsx(SD,{className:"h-5 w-5 mr-2"}):d.jsx(kD,{className:"h-5 w-5 mr-2"}),ce?"Dinlemeyi Durdur":"Sesli Cevap Ver"]}),ce&&d.jsx("p",{className:"text-sm text-gray-600",children:"Cevabnz syleyin..."})]}),d.jsx("div",{className:"grid grid-cols-5 gap-3 max-w-lg mx-auto",children:l.options.map((Q,$)=>{let oe="h-16 text-xl font-bold hover:scale-105 transition-transform";return z==="answered"&&($===l.correctAnswer?oe+=" bg-green-100 border-green-500 text-green-700":$===g&&$!==l.correctAnswer?oe+=" bg-red-100 border-red-500 text-red-700":oe+=" opacity-50"),d.jsx("button",{className:`border-2 border-gray-300 rounded-lg ${oe}`,onClick:()=>F($),disabled:z!=="playing",children:Q},$)})})]})})]})},pj=({studentId:s,studentAge:e=6,onGameComplete:n,onEmotionDetected:a,useAdaptiveAI:o=!0})=>{const[l,h]=S.useState(null),[g,p]=S.useState(null),[y,_]=S.useState(0),[E,A]=S.useState(1),[V,B]=S.useState(25),[z,j]=S.useState("loading"),[Z,X]=S.useState([]),[ce]=S.useState(Date.now()),[ue,le]=S.useState(!1),[he,O]=S.useState(""),[R,C]=S.useState(!1),M=S.useRef(!1),P=5,I=S.useCallback(async()=>{if(console.log(" [DEBUG] generateQuestion arld",{isAIGenerating:ue,gameState:z,questionNumber:E,timestamp:new Date().toISOString()}),ue){console.log(" [DEBUG] Zaten soru retiliyor, klyor...");return}console.log(" [DEBUG] Soru retimi balyor..."),j("loading"),le(!0);try{let ee;if(o){const me=Z.length>0?Z[Z.length-1]:void 0;ee=await dp.generateQuestionWithContext(s,"color",e,me);const N=wr.getInsights(s);N.length>0&&O(N[0])}else ee=await Rs.generateQuestion({subject:"Renkler ve renk tanma",difficulty:"kolay",questionType:"oktan semeli"}),ee.gameType="color";console.log(" [DEBUG] Soru baaryla retildi:",ee.question),h(ee),p(null),B(25),j("playing")}catch(ee){console.error("Error generating question:",ee);try{const me=await Rs.generateQuestion({subject:"Temel renkler",difficulty:"kolay",questionType:"oktan semeli"});me.gameType="color",h(me)}catch(me){console.error("Ollama fallback failed:",me);const N={id:`static_color_${Date.now()}`,question:"Hangi renk krmz?",options:["","","",""],correctAnswer:0,confidence:1,gameType:"color",difficulty:"easy"};h(N)}p(null),B(25),j("playing")}finally{console.log(" [DEBUG] Soru retimi tamamland, isAIGenerating = false"),le(!1)}},[s,e,o]);S.useEffect(()=>{if(console.log(" [DEBUG] useEffect alt",{isInitialized:R,initStarted:M.current}),M.current){console.log(" [DEBUG] StrictMode guard - klyor");return}R||(console.log(" [DEBUG] lk kez balatlyor, generateQuestion arlyor"),M.current=!0,C(!0),I())},[I,R]),S.useEffect(()=>{let ee;return z==="playing"&&V>0?ee=setTimeout(()=>{B(V-1)},1e3):V===0&&z==="playing"&&k(),()=>clearTimeout(ee)},[V,z]);const k=()=>{p(-1),j("answered");const ee={emotion:"confused",confidence:.8,timestamp:new Date};X(me=>[...me,ee]),a?.(ee),setTimeout(()=>{_e()},2e3)},Ae=ee=>{if(z!=="playing")return;if(p(ee),j("answered"),ee===l?.correctAnswer){_(y+1);const N={emotion:"happy",confidence:.9,timestamp:new Date};X(J=>[...J,N]),a?.(N)}else{const N={emotion:"sad",confidence:.7,timestamp:new Date};X(J=>[...J,N]),a?.(N)}setTimeout(()=>{_e()},2e3)},_e=S.useCallback(()=>{console.log(" [DEBUG] nextQuestion arld",{questionNumber:E,totalQuestions:P}),E>=P?(console.log(" [DEBUG] Oyun tamamland"),F()):(console.log(" [DEBUG] Sonraki soruya geiliyor:",E+1),A(E+1),I())},[E,P,I]),F=()=>{j("completed");const ee=Math.floor((Date.now()-ce)/1e3);o&&wr.recordGameResult(s,y,P,ee,"color",Z),n(y,ee,Z)},se=()=>{_(0),A(1),X([]),O(""),C(!1),o&&wr.initializePlayer(s,e),I()};return z==="completed"?d.jsx(Ze,{className:"max-w-2xl mx-auto",children:d.jsxs(We,{className:"text-center py-12",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:d.jsx(up,{className:"h-12 w-12 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Renk Oyunu Tamamland!"}),d.jsx("p",{className:"text-gray-600",children:"Renkler konusunda ok baarlsn!"})]}),d.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:[y,"/",P]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Doru Renk"})]})}),d.jsxs(jt,{onClick:se,size:"lg",children:[d.jsx(bi,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):z==="loading"||!l?d.jsx(Ze,{className:"max-w-2xl mx-auto",children:d.jsxs(We,{className:"text-center py-12",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),ue&&o?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(Ut,{className:"h-5 w-5 text-purple-600"}),d.jsx("p",{className:"text-gray-600",children:"AI renk sorusu retiyor..."})]}),d.jsx("p",{className:"text-sm text-gray-500",children:"Performansna gre uyarlanyor"})]}):d.jsx("p",{className:"text-gray-600",children:"Renk sorusu hazrlanyor..."})]})}):d.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[d.jsx(Ze,{children:d.jsxs(We,{children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Soru ",E,"/",P]}),d.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",y]}),o&&l?.difficulty&&d.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${l.difficulty==="easy"?"bg-green-100 text-green-700":l.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:l.difficulty==="easy"?"Kolay":l.difficulty==="medium"?"Orta":"Zor"})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[o&&d.jsx("div",{title:"AI Powered",children:d.jsx(Ut,{className:"h-4 w-4 text-purple-600"})}),d.jsx(gr,{className:"h-4 w-4 text-gray-600"}),d.jsxs("span",{className:`font-medium ${V<=10?"text-red-600":"text-gray-800"}`,children:[V,"s"]})]})]}),o&&he&&d.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ut,{className:"h-4 w-4 text-blue-600"}),d.jsx("p",{className:"text-sm text-blue-700",children:he})]})})]})}),d.jsx(Ze,{children:d.jsxs(We,{className:"text-center py-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-8",children:l.question}),d.jsx("div",{className:"grid grid-cols-2 gap-6 max-w-md mx-auto",children:l.options.map((ee,me)=>{let N="w-24 h-24 text-6xl hover:scale-110 transition-transform rounded-full border-4";return z==="answered"?me===l.correctAnswer?N+=" border-green-500 shadow-lg shadow-green-200":me===g&&me!==l.correctAnswer?N+=" border-red-500 shadow-lg shadow-red-200":N+=" opacity-50 border-gray-300":N+=" border-gray-300 hover:border-gray-400",d.jsx("button",{className:N,onClick:()=>Ae(me),disabled:z!=="playing",children:ee},me)})}),z==="answered"&&d.jsx("div",{className:"mt-8",children:g===l.correctAnswer?d.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[d.jsx(ka,{className:"h-6 w-6"}),d.jsx("p",{className:"text-lg font-medium",children:"Harika! Doru renk! "})]}):d.jsx("p",{className:"text-lg font-medium text-red-600",children:"Yanl renk. Tekrar deneyelim! "})})]})})]})};class yj{async generateAttentionSprint(e){const{performansOzeti:n,studentAge:a,sonGorevler:o=[],forcedDifficulty:l}=e,h=l||this.determineDifficulty(n);l&&console.log(" [USER CHOICE] Kullancnn setii zorluk kullanlyor:",l);const g=this.determineTaskVariety(o),p=this.buildAttentionSprintPrompt(n,a,h,g);try{console.log(" [ATTENTION SPRINT] Grev retiliyor:",{difficulty:h,performansOzeti:n});const y=await this.callOllama(p),_=this.parseSprintResponse(y,h);return console.log(" [ATTENTION SPRINT] Grev retildi:",_.gorev),_}catch(y){return console.error(" [ATTENTION SPRINT] Grev retme hatas:",y),this.getFallbackTask(h,a)}}determineDifficulty(e){const{basariOrani:n,odaklanmaDurumu:a,ortalamaReaksiyonSuresi:o,son3Tur:l,sayiGorevPerformansi:h,zamanlamaPerformansi:g}=e,p=l.filter(V=>V.hizliCozum).length,y=l.some(V=>V.hedefTipi==="sayi"),_=l.some(V=>V.hedefZaman!==null),E=g?.ortalamaSapma||0,A=g?.idealZamanlamaOrani||0;if(console.log(" [ADAPTIVE DIFFICULTY]",{basariOrani:n,ortalamaReaksiyonSuresi:o,hizliCozumSayisi:p,sayiGoreviVarMi:y,zamanlamaGoreviVarMi:_,ortalamaSapma:E,idealZamanlamaOrani:A,sayiGorevPerformansi:h,zamanlamaPerformansi:g}),p>=2&&n>=.8&&o<2)return console.log(" [DIFFICULTY] Sper hzl - 2x atlama!"),"zor";if(h&&y){const V=this.evaluateNumberTaskPerformance(h,l);if(V.zorlukArtisi>1)return console.log(` [DIFFICULTY] Say grevi adaptasyonu: +${V.zorlukArtisi}`),V.onerilen}if(_&&g){if(A>=.8&&E<=.5)return console.log(" [DIFFICULTY] Mkemmel zamanlama (sapma 0.5s) - ZOR seviye!"),"zor";if(A>=.6&&E<=1.5)return console.log(" [DIFFICULTY] yi zamanlama (sapma 1.5s) - ORTA seviye!"),"orta";if(A>=.4&&E<=3)return console.log(" [DIFFICULTY] Orta zamanlama (sapma 3s) - KOLAY/ORTA seviye!"),n>=.7?"orta":"kolay";if(E>3)return console.log(" [DIFFICULTY] Kt zamanlama (sapma >3s) - KOLAY seviye!"),"kolay"}return n>=.8&&(p>=2||o<2.5)?(console.log(" [DIFFICULTY] Sper performans - ZOR seviye!"),"zor"):n>=.7&&(p>=1||o<4)?(console.log(" [DIFFICULTY] yi performans - ORTA seviye!"),"orta"):n>=.8&&o<6?(console.log(" [DIFFICULTY] Yava ama baarl - ORTA seviye!"),"orta"):n<.5||o>8?(console.log(" [DIFFICULTY] Zayf performans - KOLAY seviye!"),"kolay"):(console.log(" [DIFFICULTY] Varsaylan - ORTA seviye!"),"orta")}determineTaskVariety(e){if(e.length===1){const g=e[0];if(g==="sayma")return console.log(" [VARIETY] zel istek: Sayma oyunu"),"sayma";if(g==="dinamik-tklama")return console.log(" [VARIETY] zel istek: Dinamik tklama oyunu"),"dinamik-tklama";if(g==="tklama")return console.log(" [VARIETY] zel istek: Normal tklama oyunu"),"renk-tklama"}const n=e.map(g=>this.analyzeTaskType(g)),o=["renk-tklama","ekil-tklama","sayma","bekleme","kombinasyon","dinamik-sayma","dinamik-tklama","say-tklama"].map(g=>({tip:g,sayi:n.filter(p=>p===g).length})),l=o.filter(g=>g.sayi===Math.min(...o.map(p=>p.sayi))),h=l[Math.floor(Math.random()*l.length)];return console.log(" [VARIETY] Son grevler:",n," nerilen tip:",h.tip),h.tip}analyzeTaskType(e){const n=e.toLowerCase();if(n.includes("say")||n.includes("count")||n.includes("adet"))return n.includes("tm")||n.includes("saniye iinde")?"dinamik-sayma":"sayma";if(n.includes("tm")&&n.includes("tkla")&&(n.includes("saniye")||n.includes("dakika")))return"dinamik-tklama";if(n.includes("bekle")||n.includes("wait")||n.includes("sessiz")||n.includes("dur"))return"bekleme";if(["1","2","3","4","5","6","7","8","9"].some(y=>n.includes(y)&&n.includes("tkla")))return"say-tklama";const l=["krmz","mavi","yeil","sar","mor","turuncu"],h=["daire","kare","gen","yldz","kalp","elmas"],g=l.some(y=>n.includes(y)),p=h.some(y=>n.includes(y));return g&&p?"kombinasyon":g?"renk-tklama":p?"ekil-tklama":"renk-tklama"}getTaskExamplesForType(e,n){const a={"renk-tklama":{kolay:['" Krmz butona 2 saniye sonra bas"','" Mavi daire grnce hemen tkla"','" Yeil rengi grdnde bas"'],orta:['" 3 saniye bekle, sonra krmz daire tkla"','" Mavi renk ktnda hzlca bas"','" Sar butonu grdn anda tkla"'],zor:['" Krmz hedef ktnda 1 saniye iinde bas"','" Mavi objesi belirdiinde ok hzl tkla"','" Yeil hedef grnr grnmez bas"']},"ekil-tklama":{kolay:['" Yldz grdnde tkla"','" gen ktnda bas"','" Daire grnce hemen tkla"'],orta:['" Yldz belirdiinde 2 saniye iinde bas"','" gen hedefe odaklan ve tkla"','" Elmas eklini grdnde bas"'],zor:['" Yldz ktnda annda tkla"','" gen hedefini ok hzl yakala"','" Elmas grnr grnmez bas"']},sayma:{kolay:['" Mavi karelerin saysn bul"','" Yldzlar say"','" Krmz daireleri hesapla"'],orta:['" Yeil genleri dikkatli say"','" Mavi ekillerin toplam saysn bul"','" Sar yldzlar say ve say"'],zor:['" Hzl kan krmz genleri say"','" Mavi kareleri abuk hesapla"','" Parlayan yldzlar hzla say"']},bekleme:{kolay:['" 3 saniye sessizce bekle"','" 5 saniye hareketsiz dur"','" 4 saniye sakin ol"'],orta:['" 6 saniye bekle, sonra bala"','" 8 saniye nefes al ve bekle"','" 7 saniye odaklan ve dur"'],zor:['" 10 saniye tam konsantre bekle"','" 12 saniye hi hareket etme"','" 15 saniye mkemmel bekleme"']},kombinasyon:{kolay:['" Krmz daireyi tkla"','" Mavi geni bul ve bas"','" Yeil kareyi hedefle"'],orta:['" Krmz yldz 3 saniye sonra tkla"','" Mavi kalbi grdnde bas"','" Sar elmasn yakala"'],zor:['" Krmz geni ok hzl yakala"','" Mavi kareyi annda tkla"','" Yeil yldz 1 saniyede bas"']},"dinamik-sayma":{kolay:['"15 saniye iinde kan mavi daireleri say"','"20 saniye boyunca gelen yldzlar hesapla"','"12 saniye iinde beliren ekilleri say"'],orta:['"25 saniye iinde gelen krmz genleri say"','"30 saniye boyunca kan mavi kareleri hesapla"','"20 saniye iinde beliren yeil daireleri say"'],zor:['"35 saniye iinde hzl kan hedefleri say"','"40 saniye boyunca deiken objeleri hesapla"','"30 saniye iinde kark ekilleri say"']},"dinamik-tklama":{kolay:['"20 saniye iinde tm mavi daireleri tkla"','"25 saniye boyunca kan yldzlar yakala"','"15 saniye iinde beliren hedefleri tkla"'],orta:['"35 saniye iinde tm krmz genleri tkla"','"40 saniye boyunca gelen mavi kareleri yakala"','"30 saniye iinde kan yeil daireleri tkla"'],zor:['"50 saniye iinde tm hzl hedefleri yakala"','"60 saniye boyunca deiken objeleri tkla"','"45 saniye iinde kark hedefleri yakala"']},"say-tklama":{kolay:['"3 3 saysn grdnde tkla"','"5 5 rakamna bas"','"2 2 saysn yakala"'],orta:['"7 7 rakamn 2 saniye sonra tkla"','"4 4 saysn hzlca yakala"','"6 6 rakamn grdnde bas"'],zor:['"9 9 saysn ok hzl yakala"','"8 8 rakamn annda tkla"','"1 1 saysn grr grmez bas"']}};return(a[e]?.[n]||a["renk-tklama"][n]).join(`
`)}buildAttentionSprintPrompt(e,n,a,o){const l=this.formatPerformanceForPrompt(e),h=this.getTaskExamplesForType(o,a);return`ADHD'li 12 ya ocuk iin Dikkat Sprintleri grevi ret. SADECE JSON dndr.

NERLEN GREV TP: ${o} (eitlilik iin)

TP BAZLI RNEKLER:
${h}

HEDEF KITLE:
- Ya: 12 (ortaokul seviyesi)
- ADHD zellik: Ksa dikkat sresi, hiperaktivite, impulse kontrol zorluu
- Motivasyon: Grsel dller, hzl geri bildirim, baar hissi

GREV KURALLARI:
- Sre: 30-60 saniye (ADHD iin ksa)
- Tek odak: Sadece 1 ey yap (oklu grev yok)
- Net talimat: Basit, anlalr komutlar
- Grsel zengin: Renkler, ekiller, emojiler kullan
- Olumlu dil: "Yapma" yerine "Yap" kalb
${o==="sayma"?'- NEML: SADECE SAYMA GREV RETN! "tkla", "bas", "yakala" gibi eylemler YOK. Sadece "say", "hesapla", "bul" kullann.':""}

ZORLUK SEVYES: ${a}

PERFORMANS ZET:
${l}

IKTI EMASI:
{
  "gorev": string, // RNERLEN TPE GRE: ${o==="sayma"?'" Krmz daireleri say"':'"3 saniye bekle, sonra  krmz daire tkla"'}
  "sure_saniye": number, // 30-60 aras
  "ipuclari": [string], // Max 2 ipucu, ksa ve net
  "hedefRenk": string, // Varsa: "krmz", "mavi" vs
  "hedefSayi": number, // Varsa: sayma grevi iin
  "hedefSekil": string, // Varsa: "daire", "kare" vs
  "dikkatDagitici": number // 0-1 aras (0=yok, 1=maksimum)
}

12 YA N GREV RNEKLER (NERLEN TP: ${o}):
${o==="sayma"?`- " Krmz daireleri say"
- " Yeil kareleri hesapla"
- " Yldzlarn saysn bul"
- " Mavi ekilleri say"
- " Sar objeleri hesapla"`:`- " Krmz butona 2 saniye sonra bas"
- " Yeil kareler saysn bul"
- " Mavi  yldzlar takip et"
- " 5 saniye sessizce bekle"
- " Ortadaki hedefe odaklan"`}

YAPMA:
- Uzun aklamalar
- Karmak oklu admlar
- Olumsuz kelimeler
- Soyut kavramlar`}formatPerformanceForPrompt(e){const{son3Tur:n,basariOrani:a,ortalamaReaksiyonSuresi:o,odaklanmaDurumu:l}=e;return`Son 3 Tur:
${n.map((g,p)=>`Tur ${p+1}: ${g.basari?"Baarl":"Baarsz"} - ${g.sure}s - ${g.zorluk}`).join(`
`)}

Genel Durum:
- Baar Oran: ${Math.round(a*100)}%
- Ortalama Reaksiyon: ${o.toFixed(1)}s
- Odaklanma: ${l}`}async callOllama(e){const o=await fetch("http://localhost:11434/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"hf.co/umutkkgz/Kaira-Turkish-Gemma-9B-T1-GGUF:Q3_K_M",prompt:e,format:"json",stream:!1,options:{temperature:.7,top_p:.9,num_predict:250}})});if(!o.ok)throw new Error(`Ollama API hatas: ${o.status}`);return(await o.json()).response?.trim()||""}parseSprintResponse(e,n){try{const a=JSON.parse(e);if(!a.gorev||typeof a.gorev!="string")throw new Error("Geersiz grev");const o={id:`sprint_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,gorev:a.gorev,sure_saniye:Math.max(30,Math.min(60,a.sure_saniye||45)),ipuclari:Array.isArray(a.ipuclari)?a.ipuclari.slice(0,2):[],hedefRenk:a.hedefRenk||void 0,hedefSayi:a.hedefSayi||void 0,hedefSekil:a.hedefSekil||void 0,dikkatDagitici:Math.max(0,Math.min(1,a.dikkatDagitici||0)),difficulty:n,hedefTipi:this.determineTargetType(a)},l=this.validateAndCorrectTask(o);return console.log(" [AI TASK] Orijinal grev:",a),console.log(" [AI TASK] Dzeltilmi grev:",l),l}catch(a){throw console.error("Sprint response parse hatas:",a),new Error(`JSON parse hatas: ${a}`)}}getFallbackTask(e,n){const o={kolay:[{gorev:" Krmz butona bas",sure_saniye:30,ipuclari:["Krmz rengi ara","Byk buton olacak"],hedefRenk:"krmz",dikkatDagitici:0},{gorev:" Yldzlar say",sure_saniye:35,ipuclari:["Sar yldzlar bul","Parmakla iaret et"],hedefSekil:"yldz",dikkatDagitici:0}],orta:[{gorev:" Yeil kareler saysn bul",sure_saniye:45,ipuclari:["Sadece yeil olanlar","Sessizce say"],hedefRenk:"yeil",hedefSekil:"kare",dikkatDagitici:.3},{gorev:" Ortadaki hedefe 3 saniye odaklan",sure_saniye:40,ipuclari:["Gzlerini hedeften ayrma","Nefes al"],dikkatDagitici:.5}],zor:[{gorev:" Mavi daireler gzknce hzla tkla",sure_saniye:50,ipuclari:["Hazr ol","Hzl reaksiyon gster"],hedefRenk:"mavi",hedefSekil:"daire",dikkatDagitici:.7},{gorev:" Sar yldzlar takip et ve say",sure_saniye:55,ipuclari:["Hareket eden yldzlar takip et","Sayy unutma"],hedefRenk:"sar",hedefSekil:"yldz",dikkatDagitici:.8}]}[e],l=o[Math.floor(Math.random()*o.length)];return{id:`fallback_sprint_${Date.now()}`,...l,difficulty:e,hedefTipi:l.hedefRenk?"renk":l.hedefSekil?"sekil":l.hedefSayi?"sayi":"genel"}}determineTargetType(e){return e.hedefRenk&&e.hedefSekil||e.hedefRenk?"renk":e.hedefSekil?"sekil":e.hedefSayi?"sayi":"genel"}validateAndCorrectTask(e){const n=e.gorev.toLowerCase(),a=["krmz","mavi","yeil","sar","mor","turuncu"].find(g=>n.includes(g)),o=["yldz","daire","kare","gen","kalp","elmas"].find(g=>n.includes(g));let l=null;if(n.includes("tane")||n.includes("adet")||n.includes("say")){const g=n.match(/(\d+)\s*(tane|adet|say)/);l=g?parseInt(g[1]):null}else if(n.includes("numar")||n.includes("rakam")){const g=n.match(/(\d+)\s*(numar|rakam)/);l=g?parseInt(g[1]):null}console.log(" [TEXT ANALYSIS]",{grev:e.gorev,detectedColors:a,detectedShapes:o,detectedNumbers:l,originalTask:{hedefRenk:e.hedefRenk,hedefSekil:e.hedefSekil,hedefSayi:e.hedefSayi}});const h={...e};return a&&o?(console.log(` [TASK FIX] Karma hedef: ${a} ${o}`),h.hedefRenk=a,h.hedefSekil=o,h.hedefSayi=void 0,h.gorev=h.gorev.replace(/\d+/g,"").replace(/\s+/g," ").trim()):a&&!o?(console.log(` [TASK FIX] Sadece renk: ${a}`),h.hedefRenk=a,h.hedefSekil=void 0,h.hedefSayi=void 0,h.gorev=h.gorev.replace(/\d+/g,"").replace(/\s+/g," ").trim()):o&&!a&&(console.log(` [TASK FIX] Sadece ekil: ${o}`),h.hedefSekil=o,h.hedefRenk=void 0,h.hedefSayi=void 0,h.gorev=h.gorev.replace(/\d+/g,"").replace(/\s+/g," ").trim()),l&&(!e.hedefSayi||e.hedefSayi!==l)?(console.log(` [TASK FIX] Say dzeltmesi: ${e.hedefSayi}  ${l}`),h.hedefSayi=l,h.hedefRenk=void 0,h.hedefSekil=void 0):e.hedefSayi&&!l&&(a||o)&&(console.log(` [TASK FIX] Yanl say temizleme: hedefSayi ${e.hedefSayi} silindi`),h.hedefSayi=void 0,h.gorev=h.gorev.replace(/\d+/g,"").replace(/\s+/g," ").trim()),h}evaluateNumberTaskPerformance(e,n){const{ortalamaSayiZorlugu:a,sayiBasariOrani:o,ortalamaReaksiyonSuresiSayi:l,hizliCozumSayisi:h}=e,g=n.filter(_=>_.hedefTipi==="sayi");g[g.length-1];let p=0,y="orta";return h>=2&&l<2?(p=3,y="zor"):o>=.8&&l<4?(p=2,y=a<5?"orta":"zor"):o>=.6&&l<6?(p=1,y="orta"):(o<.5||l>8)&&(p=-1,y="kolay"),{zorlukArtisi:p,onerilen:y}}determineNumberDifficulty(e,n,a){const l=Math.max(1,Math.min(3,(e==="kolay"?1:e==="orta"?2:3)+a)),h={1:{min:1,max:3},2:{min:2,max:5},3:{min:3,max:7},4:{min:5,max:9}};return h[Math.min(4,l)]||h[2]}}const fp=new yj,vj=({studentId:s,studentAge:e=12,difficulty:n,onGameComplete:a,onEmotionDetected:o})=>{console.log(" [AttentionClickGame] Component initialized with props:",{studentId:s,studentAge:e,difficulty:n});const[l,h]=S.useState(null),[g,p]=S.useState("ready"),[y,_]=S.useState(0),[E,A]=S.useState([]),[V,B]=S.useState(0),[z,j]=S.useState(0),[Z,X]=S.useState([]),[ce]=S.useState(Date.now()),[ue,le]=S.useState(3),[he,O]=S.useState(!1),[R,C]=S.useState(!1),[M,P]=S.useState(!1),[I,k]=S.useState({x:50,y:50}),[Ae,_e]=S.useState([]),F=S.useRef(0),se=S.useRef(!1),ee=S.useRef(!1),me=S.useRef(!1),N=S.useRef(null),J=5;S.useEffect(()=>(!se.current&&!M&&(se.current=!0,Q()),()=>{N.current&&(clearInterval(N.current),N.current=null)}),[]);const Q=S.useCallback(async()=>{if(ee.current)return;ee.current=!0,P(!0);const ye={son3Tur:[],ortalamaReaksiyonSuresi:2.5,basariOrani:.7,odaklanmaDurumu:"orta"};try{const xe=await fp.generateAttentionSprint({performansOzeti:ye,studentAge:e,sonGorevler:["tklama"]}),st={...xe,difficulty:n,gorev:$(xe.gorev)};h(st),_(st.sure_saniye)}catch(xe){console.error("lk grev retme hatas:",xe),h(oe())}finally{ee.current=!1,P(!1)}},[e,n]),$=ye=>{const xe=ye.toLowerCase();if(!xe.includes("say")&&!xe.includes("count")&&!xe.includes("adet")&&!xe.includes("tm")&&!xe.includes("hepsi"))return ye;const st=[" Krmz"," Mavi"," Yeil"," Sar"],Ot=["daire","kare","gen","yldz"],De=st[Math.floor(Math.random()*st.length)],St=Ot[Math.floor(Math.random()*Ot.length)];return`${De} ${St}i tkla`},oe=()=>{const xe={kolay:[{gorev:" Krmz daire tkla",hedefRenk:"krmz",hedefSekil:"daire"},{gorev:" Mavi kare tkla",hedefRenk:"mavi",hedefSekil:"kare"},{gorev:" Yeil yldz tkla",hedefRenk:"yeil",hedefSekil:"yldz"}],orta:[{gorev:" Krmz gen 2 saniye sonra tkla",hedefRenk:"krmz",hedefSekil:"gen"},{gorev:" Mavi daire belirdiinde tkla",hedefRenk:"mavi",hedefSekil:"daire"},{gorev:" Sar kare grdnde bas",hedefRenk:"sar",hedefSekil:"kare"}],zor:[{gorev:" Krmz yldz ktnda hemen tkla",hedefRenk:"krmz",hedefSekil:"yldz"},{gorev:" Mavi gen grnr grnmez bas",hedefRenk:"mavi",hedefSekil:"gen"},{gorev:" Yeil daire belirdiinde annda tkla",hedefRenk:"yeil",hedefSekil:"daire"}]}[n],st=xe[Math.floor(Math.random()*xe.length)];return{id:`click_fallback_${Date.now()}`,...st,sure_saniye:n==="kolay"?30:n==="orta"?40:50,ipuclari:["Hedefe odaklan","Hzl reaksiyon gster"],dikkatDagitici:n==="kolay"?0:n==="orta"?.3:.5,difficulty:n,hedefTipi:"renk"}},fe=()=>{if(!l)return;p("countdown"),le(3),O(!1),C(!1);const ye=setInterval(()=>{le(xe=>xe<=1?(clearInterval(ye),pt(),0):xe-1)},1e3)},pe=()=>{N.current&&(clearInterval(N.current),N.current=null),F.current=Date.now(),N.current=setInterval(()=>{_(ye=>ye<=1?(N.current&&(clearInterval(N.current),N.current=null),en(!1),0):ye-1)},1e3)},qe=()=>({x:Math.random()*70+15,y:Math.random()*60+20}),$e=()=>{if(!l)return[];const ye=Math.floor(l.dikkatDagitici*5),xe=[];for(let st=0;st<ye;st++){const Ot=qe();let De="shape",St="";if(l.hedefRenk&&l.hedefSekil){De="combo";const He=l.hedefRenk;let ht=[];He==="mavi"?ht=["","","","",""]:He==="krmz"?ht=["","","","",""]:He==="yeil"?ht=["","","","",""]:He==="sar"&&(ht=["","","","",""]),St=ht[Math.floor(Math.random()*ht.length)]||""}xe.push({id:`distractor-${st}`,x:Ot.x,y:Ot.y,type:De,value:St})}return xe},pt=()=>{if(!l)return;p("active"),_(l.sure_saniye),k(qe()),_e($e());const ye=Math.random()*2e3+1e3;setTimeout(()=>{O(!0),pe()},ye)},rt=ye=>{if(ye.stopPropagation(),g!=="active"||!he||R)return;C(!0);const xe=(Date.now()-F.current)/1e3;en(!0,xe)},wt=ye=>{if(ye.stopPropagation(),g!=="active"||R)return;const xe=(Date.now()-F.current)/1e3;en(!1,xe)},wn=()=>{if(g!=="active"||!he||R)return;const ye=(Date.now()-F.current)/1e3;en(!1,ye)},en=(ye,xe)=>{if(!l||me.current)return;me.current=!0,N.current&&(clearInterval(N.current),N.current=null);const st=xe||(Date.now()-F.current)/1e3,Ot={task:l,startTime:F.current,endTime:Date.now(),success:ye,reactionTime:st};if(A(De=>[...De,Ot]),ye){j(St=>St+1);const De={emotion:"happy",confidence:.9,timestamp:new Date};X(St=>[...St,De]),o?.(De)}else{const De={emotion:"confused",confidence:.7,timestamp:new Date};X(St=>[...St,De]),o?.(De)}p("waiting"),setTimeout(()=>{V+1>=J?qn():(B(De=>De+1),O(!1),C(!1),_e([]),Q(),p("ready")),me.current=!1},2e3)},qn=()=>{p("completed");const ye=Math.floor((Date.now()-ce)/1e3);a(z,ye,Z)},Me=()=>{N.current&&(clearInterval(N.current),N.current=null),A([]),B(0),j(0),X([]),p("ready"),O(!1),C(!1),k({x:50,y:50}),_e([]),se.current=!1,ee.current=!1,me.current=!1,Q()};return g==="completed"?d.jsx(Ze,{className:"max-w-2xl mx-auto",children:d.jsxs(We,{className:"text-center py-12",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:d.jsx(Wn,{className:"h-12 w-12 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dikkat Tklama Oyunu Tamamland!"}),d.jsx("p",{className:"text-gray-600",children:"Hzl reaksiyon becerin geliiyor!"})]}),d.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[z,"/",J]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Baarl Tklama"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(z/J*100),"%"]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Baar Oran"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[E.length>0?(E.reduce((ye,xe)=>ye+xe.reactionTime,0)/E.length).toFixed(1):"0.0","s"]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Reaksiyon"})]})]})}),d.jsxs(jt,{onClick:Me,size:"lg",children:[d.jsx(bi,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):d.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[d.jsx(Ze,{children:d.jsx(We,{children:d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Tur ",V+1,"/",J]}),d.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",z]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ut,{className:"h-4 w-4 text-purple-600"}),d.jsxs("span",{className:"text-xs text-purple-600",children:["Zorluk: ",n]})]})]})})})}),d.jsx(Ze,{children:d.jsx(We,{className:"text-center py-12",children:M?d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),d.jsx("p",{className:"text-gray-600",children:"Senin iin zel grev hazrlanyor..."})]}):g==="ready"?d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:d.jsx(hp,{className:"h-10 w-10 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dikkat Tklama"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Hzlca doru hedefe tkla ve reaksiyon sren gelitir!"}),l&&d.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[d.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Grevin:"}),d.jsx("p",{className:"text-blue-700",children:l.gorev}),l.ipuclari.length>0&&d.jsxs("div",{className:"mt-3",children:[d.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"pular:"}),l.ipuclari.map((ye,xe)=>d.jsxs("p",{className:"text-xs text-blue-600",children:[" ",ye]},xe))]})]}),d.jsxs(jt,{onClick:fe,size:"lg",disabled:!l,children:[d.jsx(hd,{className:"h-5 w-5 mr-2"}),"Bala"]})]}):g==="countdown"?d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-4xl font-bold text-gray-800",children:"Hazrlan!"}),d.jsx("div",{className:"text-6xl font-bold text-blue-600 animate-bounce",children:ue})]}):g==="active"?d.jsxs("div",{className:"space-y-6 cursor-crosshair",onClick:wn,children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?.gorev}),he&&l&&d.jsxs("div",{className:"relative w-full h-96",children:[Ae.map(ye=>d.jsx("button",{onClick:wt,className:"absolute w-12 h-12 rounded-full bg-white hover:bg-red-100 transition-colors duration-200 flex items-center justify-center text-2xl shadow-lg border-2 border-gray-300",style:{left:`${ye.x}%`,top:`${ye.y}%`,transform:"translate(-50%, -50%)"},children:ye.value},ye.id)),d.jsxs("button",{onClick:rt,disabled:R,className:`
                      absolute w-12 h-12 rounded-full transition-colors duration-200 flex items-center justify-center text-2xl shadow-lg border-2
                      ${R?"bg-green-100 border-green-400 scale-110":"bg-white hover:bg-green-50 border-blue-400 hover:border-green-400"}
                    `,style:{left:`${I.x}%`,top:`${I.y}%`,transform:"translate(-50%, -50%)"},children:[l.hedefRenk==="krmz"&&l.hedefSekil==="daire"&&"",l.hedefRenk==="mavi"&&l.hedefSekil==="daire"&&"",l.hedefRenk==="yeil"&&l.hedefSekil==="daire"&&"",l.hedefRenk==="sar"&&l.hedefSekil==="daire"&&"",l.hedefRenk==="krmz"&&l.hedefSekil==="kare"&&"",l.hedefRenk==="mavi"&&l.hedefSekil==="kare"&&"",l.hedefRenk==="yeil"&&l.hedefSekil==="kare"&&"",l.hedefRenk==="sar"&&l.hedefSekil==="kare"&&"",l.hedefRenk==="krmz"&&l.hedefSekil==="gen"&&"",l.hedefRenk==="mavi"&&l.hedefSekil==="gen"&&"",!l.hedefRenk&&l.hedefSekil==="yldz"&&"",!l.hedefRenk&&l.hedefSekil==="daire"&&"",!l.hedefSekil&&l.hedefRenk==="krmz"&&"",!l.hedefSekil&&l.hedefRenk==="mavi"&&"",!l.hedefSekil&&l.hedefRenk==="yeil"&&"",!l.hedefSekil&&l.hedefRenk==="sar"&&"",!l.hedefSekil&&!l.hedefRenk&&!l.hedefSayi&&""]})]}),!he&&d.jsxs("div",{className:"text-gray-600",children:[d.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"}),"Hazrlan..."]}),d.jsxs("div",{className:"flex items-center justify-center space-x-2 text-lg",children:[d.jsx(gr,{className:"h-5 w-5 text-blue-600"}),d.jsxs("span",{className:"font-mono font-bold text-blue-600",children:[y,"s"]})]})]}):g==="waiting"?d.jsxs("div",{className:"space-y-4",children:[E.length>0&&E[E.length-1].success?d.jsxs("div",{className:"text-green-600",children:[d.jsx(ka,{className:"h-12 w-12 mx-auto mb-2"}),d.jsx("h3",{className:"text-xl font-bold",children:"Harika!"}),d.jsxs("p",{children:["Reaksiyon sresi: ",E[E.length-1].reactionTime.toFixed(2),"s"]})]}):d.jsxs("div",{className:"text-orange-600",children:[d.jsx(Wn,{className:"h-12 w-12 mx-auto mb-2"}),d.jsx("h3",{className:"text-xl font-bold",children:"Bir daha deneyelim!"}),d.jsx("p",{children:"Daha hzl olmaya al"})]}),d.jsx("p",{className:"text-sm text-gray-600",children:"Sonraki grev hazrlanyor..."})]}):null})})]})},_j=({studentId:s,studentAge:e=12,difficulty:n,onGameComplete:a,onEmotionDetected:o})=>{const[l,h]=S.useState(null),[g,p]=S.useState("ready"),[y,_]=S.useState(0),[E,A]=S.useState([]),[V,B]=S.useState(0),[z,j]=S.useState(0),[Z,X]=S.useState([]),[ce]=S.useState(Date.now()),[ue,le]=S.useState(3),[he,O]=S.useState(!1),[R,C]=S.useState([]),[M,P]=S.useState(""),[I,k]=S.useState(0),[Ae,_e]=S.useState(0),[F,se]=S.useState(!1),[ee,me]=S.useState(n),[N,J]=S.useState(1),[Q,$]=S.useState(()=>n==="kolay"?2:n==="orta"?3:5),[oe,fe]=S.useState([]),pe=S.useRef(0),qe=S.useRef(!1),$e=S.useRef(!1),pt=S.useRef(!1),rt=S.useRef(null),wt=S.useRef(null),wn=5,en=S.useCallback(async()=>{if($e.current){console.log(" [DUPLICATE CALL] generateFirstTask already running, skipping");return}console.log(" [TASK GENERATION] Starting task generation"),$e.current=!0,O(!0);const be={son3Tur:[],ortalamaReaksiyonSuresi:2.5,basariOrani:.7,odaklanmaDurumu:"orta"};try{const Te=await fp.generateAttentionSprint({performansOzeti:be,studentAge:e,sonGorevler:["sayma"],forcedDifficulty:n}),ze={...Te,difficulty:n,gorev:qn(Te.gorev),hedefRenk:Me(Te.gorev)||Te.hedefRenk,hedefSekil:ye(Te.gorev)||Te.hedefSekil,hedefSayi:void 0};console.log(" [COUNT GAME] Generated counting task:",ze.gorev),h(ze),_(ze.sure_saniye)}catch(Te){console.error("lk grev retme hatas:",Te),h(xe())}finally{$e.current=!1,O(!1)}},[e,n]);S.useEffect(()=>(!qe.current&&!he&&(qe.current=!0,en()),()=>{rt.current&&(clearInterval(rt.current),rt.current=null),wt.current&&(clearInterval(wt.current),wt.current=null)}),[en]);const qn=be=>{const Te=be.toLowerCase();if(Te.includes("say")||Te.includes("count")||Te.includes("adet")||Te.includes("hesapla"))return be;const ze=[{turkish:"mavi",emoji:""},{turkish:"krmz",emoji:""},{turkish:"yeil",emoji:""},{turkish:"sar",emoji:""}],Ue=[{turkish:"daire",emoji:""},{turkish:"kare",emoji:""},{turkish:"gen",emoji:""},{turkish:"yldz",emoji:""}],dt=ze[Math.floor(Math.random()*ze.length)],Ct=Ue[Math.floor(Math.random()*Ue.length)];return`${dt.emoji} ${dt.turkish} ${Ct.turkish}leri say`},Me=be=>["krmz","mavi","yeil","sar","mor","turuncu"].find(ze=>be.toLowerCase().includes(ze)),ye=be=>["yldz","daire","kare","gen","kalp","elmas"].find(ze=>be.toLowerCase().includes(ze)),xe=()=>{const Te={kolay:[{gorev:" Mavi daireleri say",hedefRenk:"mavi",hedefSekil:"daire"},{gorev:" Yeil kareleri say",hedefRenk:"yeil",hedefSekil:"kare"},{gorev:" Yldzlar say",hedefSekil:"yldz"}],orta:[{gorev:" Krmz genleri dikkatli say",hedefRenk:"krmz",hedefSekil:"gen"},{gorev:" Sar daireleri hesapla",hedefRenk:"sar",hedefSekil:"daire"},{gorev:" Mavi kareleri hzla say",hedefRenk:"mavi",hedefSekil:"kare"}],zor:[{gorev:" Hzl kan yeil yldzlar say",hedefRenk:"yeil",hedefSekil:"yldz"},{gorev:" Kark krmz daireleri hesapla",hedefRenk:"krmz",hedefSekil:"daire"},{gorev:" Parlayan mavi genleri say",hedefRenk:"mavi",hedefSekil:"gen"}]}[n],ze=Te[Math.floor(Math.random()*Te.length)];return{id:`count_fallback_${Date.now()}`,...ze,sure_saniye:n==="kolay"?20:n==="orta"?25:30,ipuclari:["Dikkatli say","Unutma saylar"],dikkatDagitici:n==="kolay"?.2:n==="orta"?.4:.6,difficulty:n,hedefTipi:"renk"}},st=be=>{if(oe.length<1)return be;const Te=oe.slice(-3),ze=Te.filter(Ke=>Ke.correct).length,Ue=Te.reduce((Ke,Et)=>Ke+Et.accuracy,0)/Te.length;let dt=N;console.log(" [GAME DURATION] Analiz:",{recent3Count:Te.length,correctCount:ze,avgAccuracy:Ue.toFixed(2),currentMultiplier:N.toFixed(2),baseDuration:be}),Te.length<2?console.log(" [DURATION] Henz yeterli veri yok - sre sabit kalyor"):Ue>.9?(dt=Math.min(1.5,N+.2),console.log(" [DURATION] Mkemmel performans - oyunu uzatyorum!")):Ue>.8?(dt=Math.min(1.3,N+.1),console.log(" [DURATION] yi performans - hafif uzatyorum")):Ue>.6?console.log(" [DURATION] Dengeli performans - sre sabit"):Ue<.5?(dt=Math.max(.7,N-.1),console.log(" [DURATION] Zayf performans - oyunu ksaltyorum")):Ue<.3&&(dt=Math.max(.6,N-.2),console.log(" [DURATION] ok kt performans - fazla ksaltyorum")),J(dt);const Ct=Math.round(be*dt);if(Te.length>=2){const Ke={kolay:2,orta:3,zor:5};let Et=Q;Ue>.9?(Et=Math.min(Ke[n]+2,n==="zor"?6:4),console.log(" [MAX OBJECTS] Mkemmel performans - daha fazla obje!")):Ue>.8?(Et=Math.min(Ke[n]+1,n==="zor"?6:4),console.log(" [MAX OBJECTS] yi performans - obje says artrld")):Ue<.5?(Et=Math.max(Ke[n]-1,2),console.log(" [MAX OBJECTS] Zayf performans - obje says azaltld")):(Et=Ke[n],console.log(" [MAX OBJECTS] Normal performans - varsaylan obje says")),Et!==Q&&(console.log(" [MAX OBJECTS] Ayarland:",{difficulty:n,oldMax:Q,newMax:Et,avgAccuracy:Ue.toFixed(2)}),$(Et))}return console.log(" [DURATION] Sre ayarland:",{baseDuration:be,multiplier:dt.toFixed(2),adjustedDuration:Ct}),Ct},Ot=(be,Te)=>{const ze=st(Te),dt=Math.max((ze-5)*1e3,1e4),Ct={kolay:{totalObjectsRatio:4,targetCountRatio:8,spawnInterval:3e3,objectLifespan:6e3,persistanceChance:0},orta:{totalObjectsRatio:3,targetCountRatio:6,spawnInterval:2500,objectLifespan:5e3,persistanceChance:.35},zor:{totalObjectsRatio:2,targetCountRatio:4,spawnInterval:2e3,objectLifespan:4e3,persistanceChance:.7}},Ke=Ct[be]||Ct.orta,Et={totalObjects:Math.ceil(ze/Ke.totalObjectsRatio),targetCount:Math.ceil(ze/Ke.targetCountRatio),spawnInterval:Ke.spawnInterval,objectLifespan:Ke.objectLifespan,spawnDuration:dt,persistanceChance:Ke.persistanceChance,adjustedGameDuration:ze};return console.log(" [PARAMS] Sre bazl parametreler:",{baseParams:Ke,baseDurationSeconds:Te,adjustedGameDuration:ze,durationMultiplier:N.toFixed(2),adjustedParams:Et}),Et},De=()=>{if(!l)return;p("countdown"),le(3);const be=setInterval(()=>{le(Te=>Te<=1?(clearInterval(be),pr(),0):Te-1)},1e3)},St=()=>{rt.current&&(clearInterval(rt.current),rt.current=null),pe.current=Date.now(),rt.current=setInterval(()=>{_(be=>be<=1?(rt.current&&(clearInterval(rt.current),rt.current=null),at(!1),0):(be===6&&(se(!0),console.log(" [COUNTING] Son 5 saniye! Cevabn hazrla.")),be-1))},1e3)},He=()=>({x:Math.random()*70+15,y:Math.random()*60+20}),ht=()=>{if(!l)return;wt.current&&(console.log(" [DUPLICATE SPAWN] Spawn already running, clearing previous"),clearInterval(wt.current),wt.current=null),console.log(" [SPAWN START] Starting counting spawn");const be=Ot(n,l.sure_saniye);let Te=0,ze=0;console.log(" [COUNTING SPAWN] Parametreler:",{gameDuration:l.sure_saniye,totalObjects:be.totalObjects,targetCount:be.targetCount,spawnDuration:be.spawnDuration,spawnInterval:be.spawnInterval,persistanceChance:be.persistanceChance,answerTime:"5 saniye (son ksm)"}),k(0),_e(Date.now()),wt.current=setInterval(()=>{if(Te>=be.totalObjects){clearInterval(wt.current),wt.current=null;return}C(Ke=>{let Et=Ke,ot=0;return n==="kolay"?(Et=Ke.filter(cn=>{const ft=Math.random()<.3;return!ft&&cn.isTarget&&ot++,ft}),ot>0&&console.log(" [KOLAY MOD] Baz eski objeler kaldrlyor:",ot,"(saym deimiyor)")):(Et=Ke.filter(cn=>{const ft=Math.random()<be.persistanceChance;return!ft&&cn.isTarget&&ot++,ft}),ot>0&&console.log(` [${n.toUpperCase()} MOD] Rastgele objeler kaldrlyor:`,ot,"(saym deimiyor)")),Et});let Ue=1;if(n==="orta")Math.random()<.2&&(Ue=2,console.log(" [ORTA MOD] oklu spawn! 2 obje birden"));else if(n==="zor"){const Ke=Math.random();Ke<.05?(Ue=3,console.log(" [ZOR MOD] Sper spawn! 3 obje birden")):Ke<.2&&(Ue=2,console.log(" [ZOR MOD] oklu spawn! 2 obje birden"))}const dt=R.length,Ct=Q-dt;if(Ue=Math.min(Ue,Ct),Ue<=0){console.log(" [MAX LIMIT] Maksimum obje saysna ulald:",Q,"spawn bekliyor");return}console.log(` [SPAWN COUNT] ${Ue} obje spawn edilecek (maks: ${Q}, mevcut: ${dt})`);for(let Ke=0;Ke<Ue;Ke++){const ot=ze<be.targetCount&&(Math.random()<.4||Te>=be.totalObjects-(be.targetCount-ze));ot&&(ze++,k(yt=>yt+1));const cn=He();let ft="";if(l?.hedefRenk&&l?.hedefSekil)if(ot)l.hedefRenk==="yeil"&&l.hedefSekil==="daire"?ft="":l.hedefRenk==="yeil"&&l.hedefSekil==="kare"?ft="":l.hedefRenk==="sar"&&l.hedefSekil==="daire"?ft="":l.hedefRenk==="sar"&&l.hedefSekil==="kare"?ft="":l.hedefRenk==="mavi"&&l.hedefSekil==="gen"?ft="":l.hedefRenk==="krmz"&&l.hedefSekil==="daire"?ft="":l.hedefRenk==="krmz"&&l.hedefSekil==="kare"?ft="":l.hedefRenk==="mavi"&&l.hedefSekil==="daire"?ft="":l.hedefRenk==="mavi"&&l.hedefSekil==="kare"?ft="":ft="";else{const yt=l.hedefRenk;let Bt=[];yt==="mavi"?Bt=["","","","",""]:yt==="krmz"?Bt=["","","","",""]:yt==="yeil"?Bt=["","","","",""]:yt==="sar"?Bt=["","","","",""]:Bt=["","","",""],ft=Bt[Math.floor(Math.random()*Bt.length)]}else if(l?.hedefRenk){const yt={krmz:"",mavi:"",yeil:"",sar:"",mor:"",turuncu:""};if(ot)ft=yt[l.hedefRenk]||"";else{const Bt=Object.values(yt).filter(Sn=>Sn!==yt[l.hedefRenk]);ft=Bt[Math.floor(Math.random()*Bt.length)]}}else if(l?.hedefSekil){const yt={yldz:"",daire:"",kare:"",gen:"",kalp:"",elmas:""};if(ot)ft=yt[l.hedefSekil]||"";else{const Bt=Object.values(yt).filter(Sn=>Sn!==yt[l.hedefSekil]);ft=Bt[Math.floor(Math.random()*Bt.length)]}}const Hn={id:`counting-${Date.now()}-${Math.random()}-${Ke}`,x:cn.x,y:cn.y,value:ft,isTarget:ot,createdAt:Date.now(),lifespan:be.objectLifespan};C(yt=>[...yt,Hn]),console.log(" [SPAWN]",{spawnIndex:Ke+1,spawnTotal:Ue,isTarget:ot,value:ft,targetSpawnedCount:ze,totalTargetCountCurrent:I,spawnedCount:Te+1,totalObjects:be.totalObjects}),setTimeout(()=>{C(yt=>{const Bt=yt.filter(Sn=>Sn.id!==Hn.id);return Hn.isTarget&&console.log(" [LIFESPAN END] Hedef obje yaam sresi bitti, ekrandan kaldrlyor (saym deimiyor)"),Bt})},be.objectLifespan)}Te+=Ue},be.spawnInterval),setTimeout(()=>{wt.current&&(clearInterval(wt.current),wt.current=null,console.log(" [SPAWN END] Spawn duration ended, clearing interval"))},be.spawnDuration)},pr=()=>{if(!l)return;const Te=Ot(n,l.sure_saniye).adjustedGameDuration;p("active"),_(Te),P(""),se(!1),console.log(" [GAME START] Oyun balyor:",{originalDuration:l.sure_saniye,adjustedDuration:Te,answerTime:5}),ht(),St()},Ei=be=>{if(be.preventDefault(),M.trim()==="")return;const Te=parseInt(M),ze=Te===I,Ue=(Date.now()-pe.current)/1e3;console.log(" [COUNTING RESULT]",{userAnswer:Te,correctAnswer:I,isCorrect:ze,reactionTime:Ue,currentObjectsOnScreen:R.length,targetObjectsOnScreen:R.filter(dt=>dt.isTarget).length}),at(ze,Ue,Te)},Rt=be=>{const Te=be.target.value;(Te===""||/^\d+$/.test(Te))&&P(Te)},at=(be,Te,ze)=>{if(!l||pt.current)return;pt.current=!0,rt.current&&(clearInterval(rt.current),rt.current=null);const Ue=Te||(Date.now()-pe.current)/1e3,dt=ze||parseInt(M)||0,Ct=I>0?Math.max(0,1-Math.abs(dt-I)/I):0,Ke={correct:be,accuracy:Ct,round:V+1};fe(ot=>[...ot.slice(-4),Ke]),console.log(" [PERFORMANCE] Yeni kayt:",{round:V+1,correct:be,accuracy:Ct.toFixed(2),userAnswer:dt,correctAnswer:I,currentDurationMultiplier:N.toFixed(2)});const Et={task:l,startTime:pe.current,endTime:Date.now(),success:be,reactionTime:Ue,userAnswer:dt,correctAnswer:I};if(A(ot=>[...ot,Et]),be){j(cn=>cn+1);const ot={emotion:"happy",confidence:.9,timestamp:new Date};X(cn=>[...cn,ot]),o?.(ot)}else{const ot={emotion:"confused",confidence:.7,timestamp:new Date};X(cn=>[...cn,ot]),o?.(ot)}p("waiting"),setTimeout(()=>{V+1>=wn?In():(B(ot=>ot+1),C([]),P(""),k(0),_e(0),en(),p("ready")),pt.current=!1},2e3)},In=()=>{p("completed");const be=Math.floor((Date.now()-ce)/1e3);a(z,be,Z)},ln=()=>{rt.current&&(clearInterval(rt.current),rt.current=null),A([]),B(0),j(0),X([]),p("ready"),C([]),P(""),k(0),_e(0),me(n),J(1),fe([]),qe.current=!1,$e.current=!1,pt.current=!1,en()};return g==="completed"?d.jsx(Ze,{className:"max-w-2xl mx-auto",children:d.jsxs(We,{className:"text-center py-12",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:d.jsx(Wn,{className:"h-12 w-12 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dikkat Sayma Oyunu Tamamland!"}),d.jsx("p",{className:"text-gray-600",children:"Sayma becerin geliiyor!"})]}),d.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[z,"/",wn]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Doru Saym"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(z/wn*100),"%"]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Baar Oran"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[E.length>0?(E.reduce((be,Te)=>be+Te.reactionTime,0)/E.length).toFixed(1):"0.0","s"]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Sre"})]})]})}),d.jsxs(jt,{onClick:ln,size:"lg",children:[d.jsx(bi,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):d.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[d.jsx(Ze,{children:d.jsx(We,{children:d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Tur ",V+1,"/",wn]}),d.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",z]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ut,{className:"h-4 w-4 text-purple-600"}),d.jsxs("span",{className:"text-xs text-purple-600",children:["Zorluk: ",n,N!==1&&d.jsxs("span",{className:"ml-1 text-xs bg-purple-100 px-1 rounded",children:[" ",N>1?"":""," ",N.toFixed(1),"x"]})]})]})]})})})}),d.jsx(Ze,{children:d.jsx(We,{className:"text-center py-12",children:he?d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"}),d.jsx("p",{className:"text-gray-600",children:"Senin iin zel sayma grevi hazrlanyor..."})]}):g==="ready"?d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center",children:d.jsx(hp,{className:"h-10 w-10 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dikkat Sayma"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Beliren objeleri dikkatli ekilde say ve konsantrasyonunu gelitir!"}),l&&d.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-6",children:[d.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Grevin:"}),d.jsx("p",{className:"text-green-700",children:l.gorev}),l.ipuclari.length>0&&d.jsxs("div",{className:"mt-3",children:[d.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"pular:"}),l.ipuclari.map((be,Te)=>d.jsxs("p",{className:"text-xs text-green-600",children:[" ",be]},Te))]})]}),d.jsxs(jt,{onClick:De,size:"lg",disabled:!l,children:[d.jsx(hd,{className:"h-5 w-5 mr-2"}),"Bala"]})]}):g==="countdown"?d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-4xl font-bold text-gray-800",children:"Hazrlan!"}),d.jsx("div",{className:"text-6xl font-bold text-green-600 animate-bounce",children:ue})]}):g==="active"?d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?.gorev}),d.jsx("div",{className:"relative w-full h-96 bg-gray-50 rounded-lg overflow-hidden",children:R.map(be=>d.jsx("div",{className:"absolute w-8 h-8 text-2xl animate-bounce transition-all duration-500",style:{left:`${be.x}%`,top:`${be.y}%`,transform:"translate(-50%, -50%)",animationDuration:`${1+Math.random()}s`},children:be.value},be.id))}),d.jsx("form",{onSubmit:Ei,className:"space-y-4",children:d.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[d.jsx("label",{className:"text-lg font-medium",children:"Toplam:"}),d.jsx("input",{type:"text",value:M,onChange:Rt,className:"w-20 h-12 text-center text-xl font-bold border-2 border-green-400 rounded-lg focus:outline-none focus:border-green-600",placeholder:"0",maxLength:2}),d.jsx("button",{type:"submit",disabled:M.trim()==="",className:"px-6 py-2 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Gnder"})]})}),d.jsxs("div",{className:"flex items-center justify-center space-x-2 text-lg",children:[d.jsx(gr,{className:"h-5 w-5 text-green-600"}),d.jsxs("span",{className:"font-mono font-bold text-green-600",children:[y,"s"]})]}),F&&d.jsxs("div",{className:"bg-orange-100 border-2 border-orange-300 rounded-lg p-4 animate-pulse",children:[d.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[d.jsx(gr,{className:"h-5 w-5 text-orange-600 animate-spin"}),d.jsxs("p",{className:"text-orange-700 font-bold text-lg",children:[" Son ",y," saniye! Cevabn yaz ve gnder!"]})]}),d.jsx("p",{className:"text-orange-600 text-sm mt-2",children:"Objeler artk kmyor, imdi sayn gir"})]})]}):g==="waiting"?d.jsxs("div",{className:"space-y-4",children:[E.length>0&&E[E.length-1].success?d.jsxs("div",{className:"text-green-600",children:[d.jsx(ka,{className:"h-12 w-12 mx-auto mb-2"}),d.jsx("h3",{className:"text-xl font-bold",children:"Mkemmel!"}),d.jsxs("p",{children:["Doru cevap: ",E[E.length-1].correctAnswer]}),d.jsxs("p",{children:["Senin cevabn: ",E[E.length-1].userAnswer]})]}):d.jsxs("div",{className:"text-orange-600",children:[d.jsx(Wn,{className:"h-12 w-12 mx-auto mb-2"}),d.jsx("h3",{className:"text-xl font-bold",children:"Bir daha deneyelim!"}),E.length>0&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Doru cevap: ",E[E.length-1].correctAnswer]}),d.jsxs("p",{children:["Senin cevabn: ",E[E.length-1].userAnswer]})]})]}),d.jsx("p",{className:"text-sm text-gray-600",children:"Sonraki grev hazrlanyor..."})]}):null})})]})},xj=()=>d.jsx("span",{children:""}),bj=({studentId:s,studentAge:e=12,difficulty:n,onGameComplete:a,onEmotionDetected:o})=>{const[l,h]=S.useState(null),[g,p]=S.useState("ready"),[y,_]=S.useState(0),[E,A]=S.useState([]),[V,B]=S.useState(0),[z,j]=S.useState(0),[Z,X]=S.useState([]),[ce]=S.useState(Date.now()),[ue,le]=S.useState(3),[he,O]=S.useState(!1),[R,C]=S.useState([]),[M,P]=S.useState(0),[I,k]=S.useState(0),[Ae,_e]=S.useState(0),F=S.useRef(0),se=S.useRef(!1),ee=S.useRef(!1),me=S.useRef(!1),N=S.useRef(null),J=5;S.useEffect(()=>(!se.current&&!he&&(se.current=!0,Q()),()=>{N.current&&(clearInterval(N.current),N.current=null)}),[]);const Q=S.useCallback(async()=>{if(ee.current)return;ee.current=!0,O(!0);const Me={son3Tur:[],ortalamaReaksiyonSuresi:2.5,basariOrani:.7,odaklanmaDurumu:"orta"};try{const ye=await fp.generateAttentionSprint({performansOzeti:Me,studentAge:e,sonGorevler:["dinamik-tklama"]}),xe={...ye,difficulty:n,gorev:$(ye.gorev),sure_saniye:n==="kolay"?20:n==="orta"?30:40};h(xe),_(xe.sure_saniye)}catch(ye){console.error("lk grev retme hatas:",ye),h(oe())}finally{ee.current=!1,O(!1)}},[e,n]),$=Me=>{const ye=Me.toLowerCase();if(ye.includes("tm")&&ye.includes("tkla")||ye.includes("hepsi")&&ye.includes("tkla")||ye.includes("iinde")&&ye.includes("tkla")&&ye.includes("saniye"))return Me;const xe=[{turkish:"mavi",emoji:""},{turkish:"krmz",emoji:""},{turkish:"yeil",emoji:""},{turkish:"sar",emoji:""}],st=[{turkish:"daire",emoji:""},{turkish:"kare",emoji:""},{turkish:"gen",emoji:""},{turkish:"yldz",emoji:""}],Ot=xe[Math.floor(Math.random()*xe.length)],De=st[Math.floor(Math.random()*st.length)];return`${n==="kolay"?"20 saniye":n==="orta"?"30 saniye":"40 saniye"} iinde tm ${Ot.emoji} ${Ot.turkish} ${De.turkish}leri tkla`},oe=()=>{const ye={kolay:[{gorev:"20 saniye iinde tm mavi daireleri tkla",hedefRenk:"mavi",hedefSekil:"daire",sure:20},{gorev:"20 saniye iinde tm yeil kareleri yakala",hedefRenk:"yeil",hedefSekil:"kare",sure:20},{gorev:"20 saniye iinde tm sar yldzlar tkla",hedefRenk:"sar",hedefSekil:"yldz",sure:20}],orta:[{gorev:"30 saniye iinde tm krmz genleri tkla",hedefRenk:"krmz",hedefSekil:"gen",sure:30},{gorev:"30 saniye iinde tm mavi kareleri yakala",hedefRenk:"mavi",hedefSekil:"kare",sure:30},{gorev:"30 saniye iinde tm yeil daireleri tkla",hedefRenk:"yeil",hedefSekil:"daire",sure:30}],zor:[{gorev:"40 saniye iinde tm hzl hedefleri yakala",hedefRenk:"krmz",hedefSekil:"yldz",sure:40},{gorev:"40 saniye iinde tm mavi genleri tkla",hedefRenk:"mavi",hedefSekil:"gen",sure:40},{gorev:"40 saniye iinde tm kark hedefleri yakala",hedefRenk:"yeil",hedefSekil:"kare",sure:40}]}[n],xe=ye[Math.floor(Math.random()*ye.length)];return{id:`dynamic_fallback_${Date.now()}`,...xe,sure_saniye:xe.sure,ipuclari:["Hzl ol","Doru hedefleri se"],dikkatDagitici:n==="kolay"?.3:n==="orta"?.5:.7,difficulty:n,hedefTipi:"renk"}},fe=Me=>{switch(Me){case"kolay":return{spawnInterval:3e3,objectLifespan:6e3,targetRatio:.7};case"orta":return{spawnInterval:2500,objectLifespan:5e3,targetRatio:.6};case"zor":return{spawnInterval:2e3,objectLifespan:4e3,targetRatio:.5};default:return{spawnInterval:2500,objectLifespan:5e3,targetRatio:.6}}},pe=()=>{if(!l)return;p("countdown"),le(3);const Me=setInterval(()=>{le(ye=>ye<=1?(clearInterval(Me),rt(),0):ye-1)},1e3)},qe=()=>{N.current&&(clearInterval(N.current),N.current=null),F.current=Date.now(),N.current=setInterval(()=>{_(Me=>Me<=1?(N.current&&(clearInterval(N.current),N.current=null),wn(),0):Me-1)},1e3)},$e=()=>({x:Math.random()*70+15,y:Math.random()*60+20}),pt=()=>{const Me=fe(n);let ye;P(0),k(0),_e(0);const xe=()=>{const st=Math.random()<Me.targetRatio,Ot=$e();let De="";if(l?.hedefRenk&&l?.hedefSekil)if(st)l.hedefRenk==="mavi"&&l.hedefSekil==="gen"?De="":l.hedefRenk==="yeil"&&l.hedefSekil==="daire"?De="":l.hedefRenk==="krmz"&&l.hedefSekil==="daire"?De="":l.hedefRenk==="mavi"&&l.hedefSekil==="daire"?De="":l.hedefRenk==="sar"&&l.hedefSekil==="daire"?De="":l.hedefRenk==="krmz"&&l.hedefSekil==="gen"?De="":l.hedefRenk==="krmz"&&l.hedefSekil==="kare"?De="":l.hedefRenk==="mavi"&&l.hedefSekil==="kare"?De="":l.hedefRenk==="yeil"&&l.hedefSekil==="kare"?De="":l.hedefRenk==="sar"&&l.hedefSekil==="yldz"?De="":De="";else{const He=["","","","","","","","","","",""];De=He[Math.floor(Math.random()*He.length)]}else if(l?.hedefRenk){const He={krmz:"",mavi:"",yeil:"",sar:"",mor:"",turuncu:""};if(st)De=He[l.hedefRenk]||"";else{const ht=Object.values(He).filter(pr=>pr!==He[l.hedefRenk]);De=ht[Math.floor(Math.random()*ht.length)]}}else if(l?.hedefSekil){const He={yldz:"",daire:"",kare:"",gen:"",kalp:"",elmas:""};if(st)De=He[l.hedefSekil]||"";else{const ht=Object.values(He).filter(pr=>pr!==He[l.hedefSekil]);De=ht[Math.floor(Math.random()*ht.length)]}}const St={id:`clicking-${Date.now()}-${Math.random()}`,x:Ot.x,y:Ot.y,value:De,isTarget:st,createdAt:Date.now(),lifespan:Me.objectLifespan};C(He=>[...He,St]),_e(He=>He+1),setTimeout(()=>{C(He=>He.filter(ht=>ht.id!==St.id))},Me.objectLifespan)};xe(),ye=setInterval(xe,Me.spawnInterval),setTimeout(()=>{clearInterval(ye)},(l?.sure_saniye||30)*1e3)},rt=()=>{l&&(p("active"),_(l.sure_saniye),P(0),k(0),_e(0),pt(),qe())},wt=(Me,ye)=>{C(xe=>xe.filter(st=>st.id!==Me)),ye?(P(xe=>xe+1),console.log(" [CLICKING] Doru tklama!")):(k(xe=>xe+1),console.log(" [CLICKING] Yanl tklama!"))},wn=(Me,ye)=>{if(!l||me.current)return;me.current=!0,N.current&&(clearInterval(N.current),N.current=null);const xe=(Date.now()-F.current)/1e3,st=M+I,De=(st>0?M/st:0)>=.5&&st>=3,St={task:l,startTime:F.current,endTime:Date.now(),success:De,reactionTime:xe,correctClicks:M,wrongClicks:I,totalSpawned:Ae};if(A(He=>[...He,St]),De){j(ht=>ht+1);const He={emotion:"happy",confidence:.9,timestamp:new Date};X(ht=>[...ht,He]),o?.(He)}else{const He={emotion:"confused",confidence:.7,timestamp:new Date};X(ht=>[...ht,He]),o?.(He)}p("waiting"),setTimeout(()=>{V+1>=J?en():(B(He=>He+1),C([]),P(0),k(0),_e(0),Q(),p("ready")),me.current=!1},2e3)},en=()=>{p("completed");const Me=Math.floor((Date.now()-ce)/1e3);a(z,Me,Z)},qn=()=>{N.current&&(clearInterval(N.current),N.current=null),A([]),B(0),j(0),X([]),p("ready"),C([]),P(0),k(0),_e(0),se.current=!1,ee.current=!1,me.current=!1,Q()};return g==="completed"?d.jsx(Ze,{className:"max-w-2xl mx-auto",children:d.jsxs(We,{className:"text-center py-12",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:d.jsx(Wn,{className:"h-12 w-12 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dinamik Dikkat Oyunu Tamamland!"}),d.jsx("p",{className:"text-gray-600",children:"Hzl karar verme becerin geliiyor!"})]}),d.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[z,"/",J]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Baarl Tur"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(z/J*100),"%"]}),d.jsx("div",{className:"text-sm text-gray-600",children:"Baar Oran"})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-2xl font-bold text-purple-600",children:E.length>0?Math.round(E.reduce((Me,ye)=>Me+ye.correctClicks,0)/E.length):0}),d.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Doru Tklama"})]})]})}),d.jsxs(jt,{onClick:qn,size:"lg",children:[d.jsx(bi,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):d.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[d.jsx(Ze,{children:d.jsx(We,{children:d.jsx("div",{className:"flex items-center justify-between",children:d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"text-sm text-gray-600",children:["Tur ",V+1,"/",J]}),d.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",z]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ut,{className:"h-4 w-4 text-purple-600"}),d.jsxs("span",{className:"text-xs text-purple-600",children:["Zorluk: ",n]})]})]})})})}),d.jsx(Ze,{children:d.jsx(We,{className:"text-center py-12",children:he?d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto"}),d.jsx("p",{className:"text-gray-600",children:"Senin iin zel dinamik grev hazrlanyor..."})]}):g==="ready"?d.jsxs("div",{className:"space-y-6",children:[d.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:d.jsx(hp,{className:"h-10 w-10 text-white"})}),d.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dinamik Dikkat"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"Srekli kan hedefleri hzlca yakala ve reflexlerini gelitir!"}),l&&d.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-6",children:[d.jsx("h3",{className:"font-medium text-purple-800 mb-2",children:"Grevin:"}),d.jsx("p",{className:"text-purple-700",children:l.gorev}),l.ipuclari.length>0&&d.jsxs("div",{className:"mt-3",children:[d.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"pular:"}),l.ipuclari.map((Me,ye)=>d.jsxs("p",{className:"text-xs text-purple-600",children:[" ",Me]},ye))]})]}),d.jsxs(jt,{onClick:pe,size:"lg",disabled:!l,children:[d.jsx(hd,{className:"h-5 w-5 mr-2"}),"Bala"]})]}):g==="countdown"?d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-4xl font-bold text-gray-800",children:"Hazrlan!"}),d.jsx("div",{className:"text-6xl font-bold text-purple-600 animate-bounce",children:ue})]}):g==="active"?d.jsxs("div",{className:"space-y-6",children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?.gorev}),d.jsx("div",{className:"relative w-full h-96 bg-gray-50 rounded-lg overflow-hidden",children:R.map(Me=>d.jsx("button",{onClick:()=>wt(Me.id,Me.isTarget),className:`
                      absolute w-12 h-12 rounded-full transition-all duration-300 flex items-center justify-center text-2xl shadow-lg border-2
                      ${Me.isTarget?"bg-green-50 border-green-300 hover:bg-green-100 hover:scale-110":"bg-red-50 border-red-300 hover:bg-red-100"}
                      animate-bounce
                    `,style:{left:`${Me.x}%`,top:`${Me.y}%`,transform:"translate(-50%, -50%)",animationDuration:`${.8+Math.random()*.4}s`},children:Me.value},Me.id))}),d.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[d.jsx(ka,{className:"h-5 w-5"}),d.jsxs("span",{className:"text-lg font-bold",children:["Doru: ",M]})]}),d.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[d.jsx(xj,{className:"h-5 w-5"}),d.jsxs("span",{className:"text-lg font-bold",children:["Yanl: ",I]})]}),d.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[d.jsx(Wn,{className:"h-5 w-5"}),d.jsxs("span",{className:"text-lg font-bold",children:["Toplam kan: ",Ae]})]})]}),d.jsxs("div",{className:"flex items-center justify-center space-x-2 text-lg",children:[d.jsx(gr,{className:"h-5 w-5 text-purple-600"}),d.jsxs("span",{className:"font-mono font-bold text-purple-600",children:[y,"s"]})]})]}):g==="waiting"?d.jsxs("div",{className:"space-y-4",children:[E.length>0&&E[E.length-1].success?d.jsxs("div",{className:"text-green-600",children:[d.jsx(ka,{className:"h-12 w-12 mx-auto mb-2"}),d.jsx("h3",{className:"text-xl font-bold",children:"Mkemmel!"}),d.jsxs("p",{children:["Doru: ",E[E.length-1].correctClicks,", Yanl: ",E[E.length-1].wrongClicks]}),d.jsxs("p",{children:["Doruluk: ",Math.round(E[E.length-1].correctClicks/Math.max(1,E[E.length-1].correctClicks+E[E.length-1].wrongClicks)*100),"%"]})]}):d.jsxs("div",{className:"text-orange-600",children:[d.jsx(Wn,{className:"h-12 w-12 mx-auto mb-2"}),d.jsx("h3",{className:"text-xl font-bold",children:"Daha iyi yapabilirsin!"}),E.length>0&&d.jsxs(d.Fragment,{children:[d.jsxs("p",{children:["Doru: ",E[E.length-1].correctClicks,", Yanl: ",E[E.length-1].wrongClicks]}),d.jsx("p",{children:"Daha dikkatli olmaya al"})]})]}),d.jsx("p",{className:"text-sm text-gray-600",children:"Sonraki grev hazrlanyor..."})]}):null})})]})};class Ej{constructor(){this.modelName="hf.co/umutkkgz/Kaira-Turkish-Gemma-9B-T1-GGUF:Q3_K_M"}async getAdaptiveDifficulty(e){const n=this.buildDifficultyPrompt(e);try{const a=await this.callOllama(n),o=this.parseAIResponse(a);return console.log(" AI Zorluk nerisi:",o),o}catch(a){return console.error(" AI Zorluk Analizi hatas:",a),this.getFallbackDifficulty(e)}}buildDifficultyPrompt(e){const n=e.totalAttempts>0?e.correctAttempts/e.totalAttempts*100:0,a=this.analyzeErrorPatterns(e.recentErrors);return`Sen ADHD ocuklar iin uzmanlam bir eitim oyunu AI'sn. atma (Stroop) oyununda bir rencinin performansn analiz edip, ona en uygun zorluk seviyesini belirlemen gerekiyor.

RENC PERFORMANS VERLER:
- Doruluk oran: %${n.toFixed(1)}
- Toplam deneme: ${e.totalAttempts}
- Doru cevap: ${e.correctAttempts}
- Ortalama reaksiyon sresi: ${e.averageReactionTime}ms
- Gncel seri: ${e.streakCounter} doru
- En iyi seri: ${e.bestStreak} doru
- Oyun sresi: ${Math.floor(e.timeSpent/1e3)} saniye
- Mevcut zorluk seviyesi: ${e.difficultyLevel}/10
- Son hata trleri: ${a}

ADHD ZEL KONSIDERASYON KURALLARI:
1. Dikkat sresi kstl - ok fazla kutu dikkat datr
2. Grsel karmaklk stres yaratr - minimalist yaklam
3. Baar hissi motivasyonu artrr - kk kazanmlar nemli
4. ok hzl deiiklik konfze eder - kademeli geiler
5. Pozitif reinforcement esastr

ZORLUK PARAMETRELER (1-10 aras deerler):
- boxCount: Ekrandaki kutu says (2-10)
- commandVisibilityDuration: Komut grme sresi ms (1500-4000)
- conflictRate: atma oran 0-1 (0.2-0.9)
- distractorCount: Dikkat datc says (0-3)
- distractorTypes: Hangi tip dikkat datclar ["emoji", "text", "shape", "none"]
- pauseTime: Turlar aras mola ms (200-1200)

IKTI FORMATI (sadece JSON dndr):
{
  "newSettings": {
    "boxCount": say,
    "commandVisibilityDuration": say,
    "conflictRate": ondalk,
    "distractorCount": say,
    "distractorTypes": string array,
    "pauseTime": say
  },
  "reasoning": "Neden bu ayarlar setiin ksa aklama",
  "encouragement": "renciyi motive edecek pozitif mesaj",
  "tips": ["ipucu1", "ipucu2", "ipucu3"]
}

NEMLI: Sadece JSON dndr, baka aklama yazma. ADHD'li ocuklar iin optimize et.`}analyzeErrorPatterns(e){if(!e.length)return"Henz hata analizi iin yeterli veri yok";const n={colorCommand:0,textCommand:0,quickClicks:0,slowClicks:0};e.forEach(l=>{l.includes("color")&&n.colorCommand++,l.includes("text")&&n.textCommand++,l.includes("quick")&&n.quickClicks++,l.includes("slow")&&n.slowClicks++});const a=Object.entries(n).reduce((l,h)=>n[l[0]]>n[h[0]]?l:h);return{colorCommand:"Renk komutlarnda zorluk",textCommand:"Kelime komutlarnda zorluk",quickClicks:"ok hzl tklama eilimi",slowClicks:"Yava reaksiyon gsterme"}[a[0]]||"Karma hata trleri"}async callOllama(e){const n="http://localhost:11434/api/generate",a={model:this.modelName,prompt:e,format:"json",stream:!1,options:{temperature:.4,top_p:.85,num_predict:400}};try{const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw new Error(`Ollama API hatas: ${o.status}`);return(await o.json()).response.trim()}catch(o){throw new Error(`Ollama balant hatas: ${o}`)}}parseAIResponse(e){try{let n;try{n=JSON.parse(e.trim())}catch{const l=e.match(/\{[\s\S]*\}/);if(!l)throw new Error("JSON bulunamad");n=JSON.parse(l[0])}if(!n.newSettings)throw new Error("newSettings eksik");const a=n.newSettings;a.boxCount=Math.max(2,Math.min(10,a.boxCount||4)),a.commandVisibilityDuration=Math.max(1500,Math.min(4e3,a.commandVisibilityDuration||2500)),a.conflictRate=Math.max(.2,Math.min(.9,a.conflictRate||.5)),a.distractorCount=Math.max(0,Math.min(3,a.distractorCount||0)),a.pauseTime=Math.max(200,Math.min(1200,a.pauseTime||600));const o=["emoji","text","shape","none"];return Array.isArray(a.distractorTypes)?(a.distractorTypes=a.distractorTypes.filter(l=>o.includes(l)),a.distractorTypes.length===0&&(a.distractorTypes=["none"])):a.distractorTypes=["none"],{newSettings:a,reasoning:n.reasoning||"AI tarafndan optimize edildi",encouragement:n.encouragement||"Harika gidiyorsun! Devam et!",tips:Array.isArray(n.tips)?n.tips:["Odaklan ve sakin ol","Her cevap renme frsat"]}}catch(n){throw console.error("AI response parse hatas:",n),new Error(`AI yant parse edilemedi: ${n}`)}}getFallbackDifficulty(e){const n=e.totalAttempts>0?e.correctAttempts/e.totalAttempts:0;let a=4,o=2500,l=.5,h=0,g=600;return n>.8?(a=Math.min(8,a+1),o=Math.max(1800,o-200),l=Math.min(.8,l+.1),e.streakCounter>5&&(h=1)):n<.5&&(a=Math.max(3,a-1),o=Math.min(3500,o+300),l=Math.max(.3,l-.1),h=0,g=Math.min(1e3,g+200)),{newSettings:{boxCount:a,commandVisibilityDuration:o,conflictRate:l,distractorCount:h,distractorTypes:h>0?["emoji"]:["none"],pauseTime:g},reasoning:"Performans bazl otomatik ayarlama",encouragement:n>.7?"Mthi performans gsteriyorsun!":"Gayet iyi gidiyorsun, devam et!",tips:["Komutlar dikkatli oku","Acele etme, dorulua odaklan","Her seferinde biraz daha iyi oluyorsun"]}}setModel(e){this.modelName=e}}const Tj=new Ej,hr=["KIRMIZI","MAV","YEL","SARI","TURUNCU","PEMBE"],wj={KIRMIZI:"#DC2626",MAV:"#2563EB",YEL:"#16A34A",SARI:"#CA8A04",TURUNCU:"#EA580C",PEMBE:"#DB2777"},xx=["","","?","","","","",""],Sj=({studentId:s,studentAge:e=12,difficulty:n="orta",onGameComplete:a,onEmotionDetected:o})=>{const l=S.useRef(null),h=S.useRef([]),g=S.useRef(0),[p,y]=S.useState({boxCount:4,commandVisibilityDuration:2500,conflictRate:.5,distractorCount:0,distractorTypes:["none"],pauseTime:600}),[_,E]=S.useState({correctAttempts:0,totalAttempts:0,averageReactionTime:0,streakCounter:0,bestStreak:0,timeSpent:0,difficultyLevel:5,recentErrors:[]}),[A,V]=S.useState(""),[B,z]=S.useState([]);S.useMemo(()=>({kolay:p,orta:p,zor:p}),[p]);const[j,Z]=S.useState({boxes:[],command:"",commandType:"color",targetColor:"KIRMIZI",score:0,timeRemaining:60,gameStarted:!1,gameEnded:!1,currentLevel:1,consecutiveCorrect:0,consecutiveWrong:0,commandVisible:!0,commandTimeLeft:p.commandVisibilityDuration,totalAttempts:0,correctAttempts:0,streakCounter:0,bestStreak:0,feedback:{show:!1,type:"correct",message:""}}),X=S.useRef([]),ce=S.useRef(0),ue=S.useCallback(I=>{const k=l.current;if(!k)return{x:50,y:50};const Ae=k.getBoundingClientRect(),_e=100,F=20;let se=0,ee;do ee={x:Math.random()*(Ae.width-_e-2*F)+F,y:Math.random()*(Ae.height-_e-2*F)+F},se++;while(se<50&&I.some(me=>Math.abs(me.x-ee.x)<_e+10&&Math.abs(me.y-ee.y)<_e+10));return ee},[]),le=S.useCallback((I,k)=>{const Ae=p,_e=[],F=[];console.log(" [DEBUG] Generating boxes for:",{targetColor:I,commandType:k,settings:Ae});const se=ue(F);F.push(se);const ee={id:0,textLabel:I,textColor:I,position:se,isCorrect:!0};if(k==="text"){ee.textLabel=I;const Q=hr.filter($=>$!==I);ee.textColor=Q[Math.floor(Math.random()*Q.length)]}else{ee.textColor=I;const Q=hr.filter($=>$!==I);ee.textLabel=Q[Math.floor(Math.random()*Q.length)]}console.log(" [DEBUG] Correct box created:",ee),_e.push(ee);const me=Math.max(2,Ae.boxCount-Ae.distractorCount-1);for(let Q=1;Q<=me;Q++){const $=ue(F);F.push($);const oe=Math.random()<Ae.conflictRate;let fe,pe,qe=0;do{if(qe++,oe){fe=hr[Math.floor(Math.random()*hr.length)];do pe=hr[Math.floor(Math.random()*hr.length)];while(pe===fe)}else{const pt=hr[Math.floor(Math.random()*hr.length)];fe=pt,pe=pt}if(!(k==="color"?pe===I:fe===I))break;if(qe>=10){if(k==="color"){const pt=hr.filter(rt=>rt!==I);pe=pt[Math.floor(Math.random()*pt.length)]}else{const pt=hr.filter(rt=>rt!==I);fe=pt[Math.floor(Math.random()*pt.length)]}break}}while(qe<20);_e.push({id:Q,textLabel:fe,textColor:pe,position:$,isCorrect:!1}),console.log(` [DEBUG] Normal box ${Q} created:`,{textLabel:fe,textColor:pe,isCorrect:!1})}const N=Ae.distractorCount;if(N>0&&!Ae.distractorTypes.includes("none"))for(let Q=me+1;Q<=me+N;Q++){const $=ue(F);F.push($);let oe;const fe=Ae.distractorTypes[Math.floor(Math.random()*Ae.distractorTypes.length)];switch(fe){case"emoji":oe=xx[Math.floor(Math.random()*xx.length)];break;case"text":oe="?";break;case"shape":oe="";break;default:continue}_e.push({id:Q,textLabel:oe,textColor:"KIRMIZI",position:$,isCorrect:!1,isDistractor:!0}),console.log(` [DEBUG] Distractor box ${Q} created with type ${fe}`)}const J=_e.filter(Q=>Q.isCorrect);return console.log(" [DEBUG] Final boxes check:",{totalBoxes:_e.length,correctBoxes:J.length,normalBoxes:_e.filter(Q=>!Q.isCorrect&&!Q.isDistractor).length,distractorBoxes:_e.filter(Q=>Q.isDistractor).length}),J.length===0&&(console.error(" [ERROR] No correct boxes found! This should not happen."),_e.length>0&&(_e[0].isCorrect=!0,k==="text"?_e[0].textLabel=I:_e[0].textColor=I)),_e},[p,ue]),he=S.useCallback(()=>{const I=Math.random()>.5?"color":"text",k=hr[Math.floor(Math.random()*hr.length)],Ae=I==="color"?`${k} renkli yazana tkla`:`${k} yazsn se`,_e=le(k,I);ce.current=Date.now(),Z(F=>({...F,boxes:_e,command:Ae,commandType:I,targetColor:k,commandVisible:!0,commandTimeLeft:p.commandVisibilityDuration,feedback:{show:!1,type:"correct",message:""}}))},[le,p]),O=S.useCallback(I=>{const k=j.boxes.find(se=>se.id===I);if(!k||j.gameEnded)return;const Ae=k.isCorrect,F=Date.now()-ce.current;X.current.push(F),Z(se=>{const ee={...se};if(ee.totalAttempts+=1,Ae){ee.correctAttempts+=1,ee.streakCounter+=1,ee.bestStreak=Math.max(ee.bestStreak,ee.streakCounter);const me=Math.max(0,Math.floor(se.commandTimeLeft/100*10));ee.score+=100+me,ee.consecutiveCorrect+=1,ee.consecutiveWrong=0,ee.feedback={show:!0,type:"correct",message:`Doru! +${100+me} puan`}}else{ee.streakCounter=0,ee.score=Math.max(0,ee.score-50),ee.timeRemaining=Math.max(0,ee.timeRemaining-2),ee.consecutiveWrong+=1,ee.consecutiveCorrect=0;const me=`${se.commandType}_error_${F<1e3?"quick":"slow"}`;ee.feedback={show:!0,type:"incorrect",message:"Yanl! -50 puan, -2 saniye"},E(N=>({...N,recentErrors:[...N.recentErrors.slice(-4),me]}))}return ee}),E(se=>({...se,correctAttempts:Ae?se.correctAttempts+1:se.correctAttempts,totalAttempts:se.totalAttempts+1,averageReactionTime:X.current.length>0?X.current.reduce((me,N)=>me+N,0)/X.current.length:0,streakCounter:Ae?se.streakCounter+1:0,bestStreak:Math.max(se.bestStreak,Ae?se.streakCounter+1:0),timeSpent:Date.now()-g.current,difficultyLevel:Math.round(((p.boxCount-2)/8+p.conflictRate)*5)})),j.totalAttempts>0&&(j.totalAttempts+1)%5===0&&R(),setTimeout(()=>{he()},p.pauseTime)},[j.boxes,j.gameEnded,j.totalAttempts,p,he]),R=S.useCallback(async()=>{try{console.log(" AI Adaptasyon kontrol balyor...",_);const I=await Tj.getAdaptiveDifficulty(_);y(I.newSettings),V(I.encouragement),z(I.tips),console.log(" AI Adaptasyon tamamland:",{newSettings:I.newSettings,reasoning:I.reasoning}),setTimeout(()=>{V("")},3e3)}catch(I){console.error(" AI Adaptasyon hatas:",I)}},[_]),C=S.useCallback(()=>{E({correctAttempts:0,totalAttempts:0,averageReactionTime:0,streakCounter:0,bestStreak:0,timeSpent:0,difficultyLevel:5,recentErrors:[]}),X.current=[],Z(I=>({...I,gameStarted:!0,gameEnded:!1,score:0,timeRemaining:60,currentLevel:1,consecutiveCorrect:0,consecutiveWrong:0,totalAttempts:0,correctAttempts:0,streakCounter:0,bestStreak:0})),g.current=Date.now(),h.current=[],he()},[he]),M=S.useCallback(()=>{Z(k=>({...k,gameEnded:!0}));const I=Date.now()-g.current;a(j.score,I,h.current)},[j.score,a]),P=S.useCallback(()=>{y({boxCount:4,commandVisibilityDuration:2500,conflictRate:.5,distractorCount:0,distractorTypes:["none"],pauseTime:600}),V(""),z([]),Z(I=>({...I,gameStarted:!1,gameEnded:!1,score:0,timeRemaining:60,currentLevel:1,consecutiveCorrect:0,consecutiveWrong:0,totalAttempts:0,correctAttempts:0,streakCounter:0,bestStreak:0,boxes:[]}))},[]);return S.useEffect(()=>{if(!j.gameStarted||j.gameEnded)return;const I=setInterval(()=>{Z(k=>k.timeRemaining<=1?{...k,timeRemaining:0}:{...k,timeRemaining:k.timeRemaining-1})},1e3);return()=>clearInterval(I)},[j.gameStarted,j.gameEnded]),S.useEffect(()=>{if(!j.gameStarted||j.gameEnded||!j.commandVisible)return;const I=setInterval(()=>{Z(k=>k.commandTimeLeft<=100?{...k,commandVisible:!1,commandTimeLeft:0}:{...k,commandTimeLeft:k.commandTimeLeft-100})},100);return()=>clearInterval(I)},[j.gameStarted,j.gameEnded,j.commandVisible]),S.useEffect(()=>{j.gameStarted&&j.timeRemaining===0&&!j.gameEnded&&M()},[j.gameStarted,j.timeRemaining,j.gameEnded,M]),S.useEffect(()=>{if(j.feedback.show){const I=setTimeout(()=>{Z(k=>({...k,feedback:{...k.feedback,show:!1}}))},1500);return()=>clearTimeout(I)}},[j.feedback.show]),j.gameStarted?j.gameEnded?d.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:d.jsx(Ze,{children:d.jsxs(We,{className:"text-center py-8",children:[d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:d.jsx(gx,{className:"h-10 w-10 text-white"})})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Oyun Tamamland!"}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto mb-6",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.score}),d.jsx("div",{className:"text-sm text-blue-800",children:"Toplam Puan"})]}),d.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[d.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["%",j.totalAttempts>0?Math.round(j.correctAttempts/j.totalAttempts*100):0]}),d.jsx("div",{className:"text-sm text-green-800",children:"Doruluk"})]}),d.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[d.jsx("div",{className:"text-2xl font-bold text-purple-600",children:j.bestStreak}),d.jsx("div",{className:"text-sm text-purple-800",children:"En yi Seri"})]}),d.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[d.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[_.averageReactionTime>0?Math.round(_.averageReactionTime):0,"ms"]}),d.jsx("div",{className:"text-sm text-orange-800",children:"Ort. Reaksiyon"})]})]}),B.length>0&&d.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg max-w-md mx-auto mb-6",children:[d.jsxs("div",{className:"flex items-center mb-2",children:[d.jsx(Ut,{className:"h-5 w-5 text-blue-600 mr-2"}),d.jsx("span",{className:"font-semibold text-blue-800",children:"AI Analizi"})]}),d.jsx("div",{className:"space-y-1",children:B.map((I,k)=>d.jsxs("div",{className:"text-sm text-blue-700",children:[" ",I]},k))})]}),d.jsxs("div",{className:"flex gap-4 justify-center",children:[d.jsxs(jt,{onClick:P,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white",children:[d.jsx(bi,{className:"h-4 w-4 mr-2"}),"Tekrar Oyna"]}),d.jsx(jt,{onClick:()=>a(j.score,Date.now()-g.current,h.current),variant:"outline",children:"Bitir"})]})]})})}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:[d.jsx("div",{className:"max-w-6xl mx-auto mb-6",children:d.jsx(Ze,{children:d.jsx(We,{className:"py-4",children:d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"flex items-center space-x-6",children:[j.commandVisible&&d.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-lg",children:[d.jsx("div",{className:"font-bold text-lg",children:j.command}),d.jsxs("div",{className:"text-xs opacity-80",children:[(j.commandTimeLeft/1e3).toFixed(1),"s kald"]})]}),!j.commandVisible&&d.jsx("div",{className:"text-gray-500 italic",children:"Komutu hatrla ve doru kutuyu se!"})]}),d.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(gr,{className:"h-4 w-4 text-blue-600"}),d.jsxs("span",{className:"font-semibold",children:[j.timeRemaining,"s"]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(gx,{className:"h-4 w-4 text-green-600"}),d.jsx("span",{className:"font-semibold",children:j.score})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Wn,{className:"h-4 w-4 text-purple-600"}),d.jsxs("span",{className:"font-semibold",children:[j.totalAttempts>0?Math.round(j.correctAttempts/j.totalAttempts*100):0,"% Doru"]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(xE,{className:"h-4 w-4 text-orange-600"}),d.jsxs("span",{className:"font-semibold",children:["Seri: ",j.streakCounter]})]})]})]})})})}),d.jsx("div",{className:"max-w-6xl mx-auto",children:d.jsx("div",{ref:l,className:"relative w-full h-[600px] bg-white rounded-xl shadow-lg overflow-hidden",style:{position:"relative"},children:j.boxes.map(I=>d.jsx("div",{className:"absolute cursor-pointer transform hover:scale-105 transition-transform duration-150",style:{left:I.position.x,top:I.position.y,width:"100px",height:"100px"},onClick:()=>O(I.id),children:d.jsx("div",{className:"w-full h-full bg-white rounded-lg shadow-md border-2 border-gray-200 flex items-center justify-center hover:shadow-lg",children:I.isDistractor?d.jsx("div",{className:"text-4xl",children:I.textLabel}):d.jsx("div",{className:"text-xl font-bold",style:{color:wj[I.textColor]},children:I.textLabel})})},I.id))})}),A&&d.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-40 pointer-events-none",children:d.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-xl shadow-lg",children:d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ut,{className:"h-5 w-5"}),d.jsx("span",{className:"font-semibold",children:A})]})})}),j.feedback.show&&d.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:d.jsx("div",{className:`
            px-8 py-4 rounded-xl text-white text-xl font-bold shadow-lg
            ${j.feedback.type==="correct"?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-red-500 to-pink-500"}
          `,children:j.feedback.message})})]}):d.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:d.jsx(Ze,{children:d.jsxs(We,{className:"text-center py-8",children:[d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-red-500 to-orange-500 rounded-full flex items-center justify-center",children:d.jsx(Ut,{className:"h-10 w-10 text-white"})})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"atma Oyunu"}),d.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"Stroop etkisiyle dikkatini gelitir! Yazan kelimeyle renk farkl olabilir."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto mb-6",children:[d.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[d.jsx(Wn,{className:"h-6 w-6 text-blue-600 mx-auto mb-2"}),d.jsx("h3",{className:"font-semibold text-blue-800 mb-1",children:"Renk Odakl"}),d.jsx("p",{className:"text-sm text-blue-600",children:"Belirtilen renkteki yazy bul"})]}),d.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[d.jsx(Ut,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),d.jsx("h3",{className:"font-semibold text-green-800 mb-1",children:"Kelime Odakl"}),d.jsx("p",{className:"text-sm text-green-600",children:"Belirtilen kelimeyi bul"})]}),d.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[d.jsx(gr,{className:"h-6 w-6 text-purple-600 mx-auto mb-2"}),d.jsx("h3",{className:"font-semibold text-purple-800 mb-1",children:"Zamana Kar"}),d.jsx("p",{className:"text-sm text-purple-600",children:"60 saniyede en yksek skoru yap"})]})]}),d.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg max-w-md mx-auto",children:[d.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Nasl Oynanr?"}),d.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[d.jsx("li",{children:" Ekranda kan komutu oku"}),d.jsx("li",{children:" Komuta uygun kutuyu tkla"}),d.jsx("li",{children:" Dikkat: Kelime ve renk farkl olabilir!"}),d.jsx("li",{children:" Doru: +100 puan, Yanl: -50 puan"})]})]}),d.jsxs(jt,{onClick:C,size:"lg",className:"bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white px-8 py-3",children:[d.jsx(Wn,{className:"h-5 w-5 mr-2"}),"Oyunu Balat - ",n==="kolay"?"Kolay":n==="orta"?"Orta":"Zor"]})]})})})},Aj=({studentId:s,studentAge:e=12,onGameComplete:n,onEmotionDetected:a})=>{const[o,l]=S.useState(null),[h,g]=S.useState("orta"),[p,y]=S.useState(!1),_=S.useRef({studentId:s,studentAge:e,onGameComplete:n,onEmotionDetected:a}),E=S.useRef(0);E.current+=1;const A=_.current.studentId!==s||_.current.studentAge!==e||_.current.onGameComplete!==n||_.current.onEmotionDetected!==a;console.log(" [RENDER] AttentionGameSelector render edildi:",{renderCount:E.current,selectedGame:o,selectedDifficulty:h,gameStarted:p,propsChanged:A,changedProps:A?{studentId:_.current.studentId!==s,studentAge:_.current.studentAge!==e,onGameComplete:_.current.onGameComplete!==n,onEmotionDetected:_.current.onEmotionDetected!==a}:"none",timestamp:new Date().toISOString()}),_.current={studentId:s,studentAge:e,onGameComplete:n,onEmotionDetected:a};const V=[{id:"click",name:"Dikkat Tklama",description:"Hzl reaksiyon gerektiren tek hedef tklama oyunu",icon:d.jsx(RD,{className:"h-8 w-8"}),color:"blue",bgGradient:"from-blue-500 to-purple-500",features:["Tek hedef odaklanma","Hzl reaksiyon gelitirme","Dikkat datclarla mcadele","Zamanlama becerileri"]},{id:"count",name:"Dikkat Sayma",description:"Beliren objeleri sayarak konsantrasyon gelitirme",icon:d.jsx(yE,{className:"h-8 w-8"}),color:"green",bgGradient:"from-green-500 to-emerald-500",features:["Saysal dikkat","Grsel takip","Konsantrasyon gelitirme","Bellek destekleme"]},{id:"dynamic",name:"Dinamik Dikkat",description:"Srekli kan hedefleri hzla yakalama",icon:d.jsx(hd,{className:"h-8 w-8"}),color:"purple",bgGradient:"from-purple-500 to-pink-500",features:["oklu hedef takibi","Hzl karar verme","Reflexleri gelitirme","Srekli dikkat"]},{id:"conflict",name:"atma Oyunu",description:"Stroop etkisi ile dikkat gelitirme",icon:d.jsx(up,{className:"h-8 w-8"}),color:"red",bgGradient:"from-red-500 to-orange-500",features:["Stroop etkisi deneyimi","Renk-kelime atmas","Dikkat odaklanma","Bilisel esneklik"]}],B=[{id:"kolay",name:"Kolay",description:"Yeni balayanlar iin",color:"green",features:["Az dikkat datc","Uzun sre limiti","Basit hedefler"]},{id:"orta",name:"Orta",description:"Deneyimliler iin",color:"yellow",features:["Orta dikkat datc","Normal sre","Karmak hedefler"]},{id:"zor",name:"Zor",description:"Uzmanlar iin",color:"red",features:["ok dikkat datc","Ksa sre","Kark hedefler"]}],z=ue=>{console.log(" [DEBUG] Game selected:",ue),l(ue)},j=ue=>{console.log(" [DEBUG] Difficulty selected:",ue),g(ue),console.log(" [DEBUG] Selected difficulty updated to:",ue)},Z=()=>{console.log(" [DEBUG] Starting game:",o,"difficulty:",h),y(!0)},X=()=>{l(null),g("orta"),y(!1)},ce=(ue,le,he)=>{n(ue,le,he),y(!1)};if(p&&o){console.log(" [DEBUG] Rendering game:",o,"with props:",{studentId:s,studentAge:e,difficulty:h});const ue={studentId:s,studentAge:e,difficulty:h,onGameComplete:ce,onEmotionDetected:a};try{switch(o){case"click":return console.log(" [DEBUG] Loading AttentionClickGame"),d.jsx(vj,{...ue});case"count":return console.log(" [DEBUG] Loading AttentionCountGame"),d.jsx(_j,{...ue});case"dynamic":return console.log(" [DEBUG] Loading AttentionDynamicGame"),d.jsx(bj,{...ue});case"conflict":return console.log(" [DEBUG] Loading ConflictGame"),d.jsx(Sj,{...ue});default:return console.error(" [DEBUG] Unknown game type:",o),null}}catch(le){return console.error(" [DEBUG] Error rendering game:",le),d.jsxs("div",{className:"max-w-2xl mx-auto p-8 text-center",children:[d.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Oyun Yklenirken Hata Olutu"}),d.jsxs("p",{className:"text-gray-600 mb-4",children:["Hata: ",le.message]}),d.jsx(jt,{onClick:X,children:"Geri Dn"})]})}}if(o){const ue=V.find(le=>le.id===o);return console.log(" [DEBUG] Zorluk seim ekran ald. Oyun:",o,"Mevcut zorluk:",h),d.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[d.jsx(Ze,{children:d.jsxs(We,{className:"flex items-center justify-between py-4",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs(jt,{variant:"ghost",size:"sm",onClick:X,className:"text-gray-600 hover:text-gray-800",children:[d.jsx(rD,{className:"h-4 w-4 mr-2"}),"Geri Dn"]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:`w-10 h-10 rounded-full bg-gradient-to-r ${ue.bgGradient} flex items-center justify-center text-white`,children:ue.icon}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-bold text-gray-800",children:ue.name}),d.jsx("p",{className:"text-sm text-gray-600",children:"Zorluk seviyesi se"})]})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx(Ut,{className:"h-5 w-5 text-purple-600"}),d.jsx("span",{className:"text-sm text-purple-600",children:"Adaptif AI"})]})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:B.map(le=>d.jsx(Ze,{className:`
                cursor-pointer transition-all duration-200 hover:scale-105 pointer-events-auto
                ${h===le.id?"ring-2 ring-blue-500 shadow-lg":"hover:shadow-md"}
              `,onClick:he=>{he.preventDefault(),he.stopPropagation(),console.log(" [DEBUG] Card clicked for difficulty:",le.id,"Game:",o),j(le.id)},onMouseDown:he=>{he.preventDefault(),console.log(" [DEBUG] MouseDown for difficulty:",le.id),j(le.id)},style:{zIndex:1},children:d.jsxs(We,{className:"text-center py-8 pointer-events-none",children:[d.jsx("div",{className:"mb-4",children:d.jsx("div",{className:`
                    w-16 h-16 mx-auto rounded-full flex items-center justify-center text-2xl font-bold
                    ${le.color==="green"?"bg-green-100 text-green-600":le.color==="yellow"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}
                  `,children:le.id==="kolay"?"1":le.id==="orta"?"2":"3"})}),d.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:le.name}),d.jsx("p",{className:"text-gray-600 text-sm mb-4",children:le.description}),d.jsx("div",{className:"space-y-2",children:le.features.map((he,O)=>d.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-700",children:[d.jsx(ka,{className:"h-3 w-3 text-gray-400"}),d.jsx("span",{children:he})]},O))}),h===le.id&&d.jsx("div",{className:"mt-4",children:d.jsx("div",{className:"w-6 h-6 mx-auto bg-blue-500 rounded-full flex items-center justify-center",children:d.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})}),d.jsx("div",{className:"mt-4 pointer-events-auto",children:d.jsx("button",{className:"w-full py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",onClick:he=>{he.preventDefault(),he.stopPropagation(),console.log(" [DEBUG] Button clicked for difficulty:",le.id),j(le.id)},children:h===le.id?" Seili":"Se"})})]})},le.id))}),d.jsx("div",{className:"text-center",children:d.jsxs(jt,{onClick:Z,size:"lg",className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-8 py-3",children:[d.jsx(Wn,{className:"h-5 w-5 mr-2"}),ue.name," - ",B.find(le=>le.id===h)?.name," Balat"]})})]})}return d.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[d.jsx(Ze,{children:d.jsxs(We,{className:"text-center py-8",children:[d.jsx("div",{className:"mb-4",children:d.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:d.jsx(Ut,{className:"h-10 w-10 text-white"})})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Dikkat Oyunlar"}),d.jsx("p",{className:"text-gray-600 text-lg",children:"Dikkat danklyla baa kmak iin zel olarak tasarlanm oyunlar"}),d.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2 text-sm text-purple-600",children:[d.jsx(gr,{className:"h-4 w-4"}),d.jsx("span",{children:"AI destekli adaptif zorluk sistemi"})]})]})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:V.map(ue=>d.jsx(Ze,{className:"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg",onClick:()=>z(ue.id),children:d.jsxs(We,{className:"text-center py-8",children:[d.jsx("div",{className:"mb-6",children:d.jsx("div",{className:`w-16 h-16 mx-auto rounded-full bg-gradient-to-r ${ue.bgGradient} flex items-center justify-center text-white`,children:ue.icon})}),d.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:ue.name}),d.jsx("p",{className:"text-gray-600 text-sm mb-6",children:ue.description}),d.jsx("div",{className:"space-y-3",children:ue.features.map((le,he)=>d.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[d.jsx("div",{className:`w-2 h-2 rounded-full ${ue.color==="blue"?"bg-blue-400":ue.color==="green"?"bg-green-400":ue.color==="purple"?"bg-purple-400":"bg-red-400"}`}),d.jsx("span",{children:le})]},he))}),d.jsx("div",{className:"mt-6",children:d.jsx(jt,{onClick:()=>z(ue.id),className:`w-full ${ue.color==="blue"?"bg-blue-500 hover:bg-blue-600":ue.color==="green"?"bg-green-500 hover:bg-green-600":ue.color==="purple"?"bg-purple-500 hover:bg-purple-600":"bg-red-500 hover:bg-red-600"} text-white`,children:"Oyna"})})]})},ue.id))}),d.jsx(Ze,{className:"bg-gradient-to-r from-blue-50 to-purple-50",children:d.jsx(We,{className:"py-6",children:d.jsxs("div",{className:"flex items-start space-x-4",children:[d.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:d.jsx(Ut,{className:"h-6 w-6 text-white"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"AI Destekli Adaptif Sistem"}),d.jsx("p",{className:"text-gray-700 text-sm",children:"Her oyun, performansna gre otomatik olarak zorluk seviyesini ayarlar. Baar oranna, reaksiyon sresine ve odaklanma durumuna gre kiiselletirilmi grevler retir. Bu sayede her zaman en uygun zorluk seviyesinde oynayarak dikkat becerilerini gelitirebilirsin."})]})]})})})]})},kj=()=>{const{currentUser:s,logout:e}=Jr(),[n,a]=S.useState(null),[o]=S.useState({gamesPlayed:12,totalScore:850,averageScore:71,timeSpent:145}),l=async()=>{try{await e()}catch(p){console.error("k yaplrken hata:",p)}},h=(p,y,_)=>{a(null),p!==void 0&&console.log("Oyun tamamland:",{score:p,duration:y,emotions:_})},g=()=>{if(!s?.id)return null;switch(n){case"word-image":return d.jsx(mj,{studentId:s.id,studentAge:s.age||6,onGameComplete:h});case"number":return d.jsx(gj,{studentId:s.id,studentAge:s.age||6,onGameComplete:h});case"color":return d.jsx(pj,{studentId:s.id,studentAge:s.age||6,onGameComplete:h});case"attention-sprint":return d.jsx(Aj,{studentId:s.id,studentAge:s.age||12,onGameComplete:h});default:return null}};return n?d.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsx("button",{onClick:()=>a(null),className:"mb-4 bg-white text-gray-700 px-4 py-2 rounded-lg shadow hover:shadow-md transition-shadow",children:" Geri Dn"}),g()]})}):d.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[d.jsx("div",{className:"bg-white shadow-sm border-b",children:d.jsx("div",{className:"container mx-auto px-4 py-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:d.jsx(Ut,{className:"h-6 w-6 text-white"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"NeuroLearn AI"}),d.jsx("p",{className:"text-sm text-gray-600",children:"renci Paneli"})]})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[d.jsx(ud,{className:"h-5 w-5"}),d.jsx("span",{className:"hidden sm:inline",children:s?.name})]}),d.jsxs("button",{onClick:l,className:"flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg transition-colors",children:[d.jsx(_E,{className:"h-4 w-4"}),d.jsx("span",{className:"hidden sm:inline",children:"k"})]})]})]})})}),d.jsxs("div",{className:"container mx-auto px-4 py-8",children:[d.jsxs("div",{className:"mb-8 text-center",children:[d.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:["Ho Geldin, ",s?.name,"! "]}),d.jsx("p",{className:"text-gray-600 text-lg",children:"Hangi oyunu oynamak istiyorsun?"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Oynanan Oyun"}),d.jsx("p",{className:"text-2xl font-bold text-primary",children:o.gamesPlayed})]}),d.jsx(Cm,{className:"h-8 w-8 text-primary"})]})}),d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Puan"}),d.jsx("p",{className:"text-2xl font-bold text-success",children:o.totalScore})]}),d.jsx(Cm,{className:"h-8 w-8 text-success"})]})}),d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Ortalama Puan"}),d.jsx("p",{className:"text-2xl font-bold text-warning",children:o.averageScore})]}),d.jsx(Cm,{className:"h-8 w-8 text-warning"})]})}),d.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-gray-600",children:"Geirilen Sre"}),d.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[o.timeSpent,"dk"]})]}),d.jsx(gr,{className:"h-8 w-8 text-purple-600"})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 text-white",children:[d.jsx(iD,{className:"h-12 w-12 mb-4"}),d.jsx("h3",{className:"text-xl font-bold mb-2",children:"Kelime-Resim Eletirme"}),d.jsx("p",{className:"text-blue-100",children:"Kelimeler ve resimler arasnda balant kur"})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[d.jsx("span",{children:"Son Puan"}),d.jsx("span",{children:"85/100"})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"85%"}})})]}),d.jsx("button",{onClick:()=>a("word-image"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Balat"})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[d.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 text-white",children:[d.jsx(yE,{className:"h-12 w-12 mb-4"}),d.jsx("h3",{className:"text-xl font-bold mb-2",children:"Say renme"}),d.jsx("p",{className:"text-green-100",children:"Saylar sayarak matematik ren"})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[d.jsx("span",{children:"Son Puan"}),d.jsx("span",{children:"72/100"})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"72%"}})})]}),d.jsx("button",{onClick:()=>a("number"),className:"w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Balat"})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-6 text-white",children:[d.jsx(up,{className:"h-12 w-12 mb-4"}),d.jsx("h3",{className:"text-xl font-bold mb-2",children:"Renk Eletirme"}),d.jsx("p",{className:"text-purple-100",children:"Renkleri eletirerek ren"})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[d.jsx("span",{children:"Son Puan"}),d.jsx("span",{children:"91/100"})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"91%"}})})]}),d.jsx("button",{onClick:()=>a("color"),className:"w-full bg-purple-500 hover:bg-purple-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Balat"})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[d.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 p-6 text-white",children:[d.jsx(Wn,{className:"h-12 w-12 mb-4"}),d.jsx("h3",{className:"text-xl font-bold mb-2",children:"Dikkat Oyunlar"}),d.jsx("p",{className:"text-orange-100",children:"3 farkl dikkat gelitirici oyun seenei"})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[d.jsx("span",{children:"Oyun eidi"}),d.jsx("span",{children:"3 Tr"})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"100%"}})}),d.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Tklama  Sayma  Dinamik"})]}),d.jsx("button",{onClick:()=>a("attention-sprint"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunlar Kefet"})]})]})]}),d.jsxs("div",{className:"mt-12 text-center bg-white rounded-lg p-8 shadow-sm",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Harika  karyorsun!"}),d.jsx("p",{className:"text-gray-600",children:"Her oyun oynaynda daha da iyi oluyorsun. Byle devam et! "})]})]})]})},bx=({children:s})=>{const{currentUser:e,loading:n}=Jr();return n?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Ykleniyor..."})]})}):e?d.jsx(d.Fragment,{children:s}):d.jsx(ic,{to:"/auth",replace:!0})},Nj=({children:s})=>{const{currentUser:e,loading:n}=Jr();return n?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Ykleniyor..."})]})}):e?d.jsx(ic,{to:"/dashboard",replace:!0}):d.jsx(d.Fragment,{children:s})},Rj=()=>{const{currentUser:s,loading:e}=Jr();if(e)return d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Ykleniyor..."})]})});if(!s)return d.jsx(ic,{to:"/auth",replace:!0});const n=s.role==="teacher"?"/dashboard/teacher":"/dashboard/student";return d.jsx(ic,{to:n,replace:!0})};function Cj(){return d.jsx(XI,{children:d.jsx(vS,{children:d.jsx("div",{className:"App",children:d.jsxs(Qw,{children:[d.jsx(fo,{path:"/auth",element:d.jsx(Nj,{children:d.jsx(sj,{})})}),d.jsx(fo,{path:"/dashboard/teacher",element:d.jsx(bx,{children:d.jsx(uj,{})})}),d.jsx(fo,{path:"/dashboard/student",element:d.jsx(bx,{children:d.jsx(kj,{})})}),d.jsx(fo,{path:"/dashboard",element:d.jsx(Rj,{})}),d.jsx(fo,{path:"/",element:d.jsx(ic,{to:"/dashboard",replace:!0})})]})})})})}aw.createRoot(document.getElementById("root")).render(d.jsx(Cj,{}));
