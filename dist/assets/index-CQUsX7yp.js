(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function sw(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var hm={exports:{}},Kl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function aw(){if(Av)return Kl;Av=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(a,o,l){var d=null;if(l!==void 0&&(d=""+l),o.key!==void 0&&(d=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:s,type:a,key:d,ref:o!==void 0?o:null,props:l}}return Kl.Fragment=e,Kl.jsx=t,Kl.jsxs=t,Kl}var Nv;function iw(){return Nv||(Nv=1,hm.exports=aw()),hm.exports}var u=iw(),dm={exports:{}},$l={},fm={exports:{}},mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function ow(){return Rv||(Rv=1,(function(s){function e(G,ae){var te=G.length;G.push(ae);e:for(;0<te;){var Y=te-1>>>1,k=G[Y];if(0<o(k,ae))G[Y]=ae,G[te]=k,te=Y;else break e}}function t(G){return G.length===0?null:G[0]}function a(G){if(G.length===0)return null;var ae=G[0],te=G.pop();if(te!==ae){G[0]=te;e:for(var Y=0,k=G.length,J=k>>>1;Y<J;){var $=2*(Y+1)-1,F=G[$],ce=$+1,fe=G[ce];if(0>o(F,te))ce<k&&0>o(fe,F)?(G[Y]=fe,G[ce]=te,Y=ce):(G[Y]=F,G[$]=te,Y=$);else if(ce<k&&0>o(fe,te))G[Y]=fe,G[ce]=te,Y=ce;else break e}}return ae}function o(G,ae){var te=G.sortIndex-ae.sortIndex;return te!==0?te:G.id-ae.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;s.unstable_now=function(){return l.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var p=[],y=[],x=1,T=null,A=3,M=!1,B=!1,L=!1,j=!1,X=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,he=typeof setImmediate<"u"?setImmediate:null;function ue(G){for(var ae=t(y);ae!==null;){if(ae.callback===null)a(y);else if(ae.startTime<=G)a(y),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=t(y)}}function le(G){if(L=!1,ue(G),!B)if(t(p)!==null)B=!0,de||(de=!0,I());else{var ae=t(y);ae!==null&&_e(le,ae.startTime-G)}}var de=!1,V=-1,C=5,R=-1;function O(){return j?!0:!(s.unstable_now()-R<C)}function P(){if(j=!1,de){var G=s.unstable_now();R=G;var ae=!0;try{e:{B=!1,L&&(L=!1,W(V),V=-1),M=!0;var te=A;try{t:{for(ue(G),T=t(p);T!==null&&!(T.expirationTime>G&&O());){var Y=T.callback;if(typeof Y=="function"){T.callback=null,A=T.priorityLevel;var k=Y(T.expirationTime<=G);if(G=s.unstable_now(),typeof k=="function"){T.callback=k,ue(G),ae=!0;break t}T===t(p)&&a(p),ue(G)}else a(p);T=t(p)}if(T!==null)ae=!0;else{var J=t(y);J!==null&&_e(le,J.startTime-G),ae=!1}}break e}finally{T=null,A=te,M=!1}ae=void 0}}finally{ae?I():de=!1}}}var I;if(typeof he=="function")I=function(){he(P)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ve=N.port2;N.port1.onmessage=P,I=function(){ve.postMessage(null)}}else I=function(){X(P,0)};function _e(G,ae){V=X(function(){G(s.unstable_now())},ae)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(G){G.callback=null},s.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<G?Math.floor(1e3/G):5},s.unstable_getCurrentPriorityLevel=function(){return A},s.unstable_next=function(G){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var te=A;A=ae;try{return G()}finally{A=te}},s.unstable_requestPaint=function(){j=!0},s.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var te=A;A=G;try{return ae()}finally{A=te}},s.unstable_scheduleCallback=function(G,ae,te){var Y=s.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Y+te:Y):te=Y,G){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=te+k,G={id:x++,callback:ae,priorityLevel:G,startTime:te,expirationTime:k,sortIndex:-1},te>Y?(G.sortIndex=te,e(y,G),t(p)===null&&G===t(y)&&(L?(W(V),V=-1):L=!0,_e(le,te-Y))):(G.sortIndex=k,e(p,G),B||M||(B=!0,de||(de=!0,I()))),G},s.unstable_shouldYield=O,s.unstable_wrapCallback=function(G){var ae=A;return function(){var te=A;A=ae;try{return G.apply(this,arguments)}finally{A=te}}}})(mm)),mm}var Cv;function lw(){return Cv||(Cv=1,fm.exports=ow()),fm.exports}var gm={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iv;function cw(){if(Iv)return Ve;Iv=1;var s=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),T=Symbol.iterator;function A(k){return k===null||typeof k!="object"?null:(k=T&&k[T]||k["@@iterator"],typeof k=="function"?k:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,L={};function j(k,J,$){this.props=k,this.context=J,this.refs=L,this.updater=$||M}j.prototype.isReactComponent={},j.prototype.setState=function(k,J){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,J,"setState")},j.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function X(){}X.prototype=j.prototype;function W(k,J,$){this.props=k,this.context=J,this.refs=L,this.updater=$||M}var he=W.prototype=new X;he.constructor=W,B(he,j.prototype),he.isPureReactComponent=!0;var ue=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function V(k,J,$,F,ce,fe){return $=fe.ref,{$$typeof:s,type:k,key:J,ref:$!==void 0?$:null,props:fe}}function C(k,J){return V(k.type,J,void 0,void 0,void 0,k.props)}function R(k){return typeof k=="object"&&k!==null&&k.$$typeof===s}function O(k){var J={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function($){return J[$]})}var P=/\/+/g;function I(k,J){return typeof k=="object"&&k!==null&&k.key!=null?O(""+k.key):J.toString(36)}function N(){}function ve(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(N,N):(k.status="pending",k.then(function(J){k.status==="pending"&&(k.status="fulfilled",k.value=J)},function(J){k.status==="pending"&&(k.status="rejected",k.reason=J)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function _e(k,J,$,F,ce){var fe=typeof k;(fe==="undefined"||fe==="boolean")&&(k=null);var pe=!1;if(k===null)pe=!0;else switch(fe){case"bigint":case"string":case"number":pe=!0;break;case"object":switch(k.$$typeof){case s:case e:pe=!0;break;case x:return pe=k._init,_e(pe(k._payload),J,$,F,ce)}}if(pe)return ce=ce(k),pe=F===""?"."+I(k,0):F,ue(ce)?($="",pe!=null&&($=pe.replace(P,"$&/")+"/"),_e(ce,J,$,"",function(pt){return pt})):ce!=null&&(R(ce)&&(ce=C(ce,$+(ce.key==null||k&&k.key===ce.key?"":(""+ce.key).replace(P,"$&/")+"/")+pe)),J.push(ce)),1;pe=0;var Le=F===""?".":F+":";if(ue(k))for(var Ke=0;Ke<k.length;Ke++)F=k[Ke],fe=Le+I(F,Ke),pe+=_e(F,J,$,fe,ce);else if(Ke=A(k),typeof Ke=="function")for(k=Ke.call(k),Ke=0;!(F=k.next()).done;)F=F.value,fe=Le+I(F,Ke++),pe+=_e(F,J,$,fe,ce);else if(fe==="object"){if(typeof k.then=="function")return _e(ve(k),J,$,F,ce);throw J=String(k),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return pe}function G(k,J,$){if(k==null)return k;var F=[],ce=0;return _e(k,F,"","",function(fe){return J.call($,fe,ce++)}),F}function ae(k){if(k._status===-1){var J=k._result;J=J(),J.then(function($){(k._status===0||k._status===-1)&&(k._status=1,k._result=$)},function($){(k._status===0||k._status===-1)&&(k._status=2,k._result=$)}),k._status===-1&&(k._status=0,k._result=J)}if(k._status===1)return k._result.default;throw k._result}var te=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function Y(){}return Ve.Children={map:G,forEach:function(k,J,$){G(k,function(){J.apply(this,arguments)},$)},count:function(k){var J=0;return G(k,function(){J++}),J},toArray:function(k){return G(k,function(J){return J})||[]},only:function(k){if(!R(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Ve.Component=j,Ve.Fragment=t,Ve.Profiler=o,Ve.PureComponent=W,Ve.StrictMode=a,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(k){return le.H.useMemoCache(k)}},Ve.cache=function(k){return function(){return k.apply(null,arguments)}},Ve.cloneElement=function(k,J,$){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var F=B({},k.props),ce=k.key,fe=void 0;if(J!=null)for(pe in J.ref!==void 0&&(fe=void 0),J.key!==void 0&&(ce=""+J.key),J)!de.call(J,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&J.ref===void 0||(F[pe]=J[pe]);var pe=arguments.length-2;if(pe===1)F.children=$;else if(1<pe){for(var Le=Array(pe),Ke=0;Ke<pe;Ke++)Le[Ke]=arguments[Ke+2];F.children=Le}return V(k.type,ce,void 0,void 0,fe,F)},Ve.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Ve.createElement=function(k,J,$){var F,ce={},fe=null;if(J!=null)for(F in J.key!==void 0&&(fe=""+J.key),J)de.call(J,F)&&F!=="key"&&F!=="__self"&&F!=="__source"&&(ce[F]=J[F]);var pe=arguments.length-2;if(pe===1)ce.children=$;else if(1<pe){for(var Le=Array(pe),Ke=0;Ke<pe;Ke++)Le[Ke]=arguments[Ke+2];ce.children=Le}if(k&&k.defaultProps)for(F in pe=k.defaultProps,pe)ce[F]===void 0&&(ce[F]=pe[F]);return V(k,fe,void 0,void 0,null,ce)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(k){return{$$typeof:m,render:k}},Ve.isValidElement=R,Ve.lazy=function(k){return{$$typeof:x,_payload:{_status:-1,_result:k},_init:ae}},Ve.memo=function(k,J){return{$$typeof:y,type:k,compare:J===void 0?null:J}},Ve.startTransition=function(k){var J=le.T,$={};le.T=$;try{var F=k(),ce=le.S;ce!==null&&ce($,F),typeof F=="object"&&F!==null&&typeof F.then=="function"&&F.then(Y,te)}catch(fe){te(fe)}finally{le.T=J}},Ve.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Ve.use=function(k){return le.H.use(k)},Ve.useActionState=function(k,J,$){return le.H.useActionState(k,J,$)},Ve.useCallback=function(k,J){return le.H.useCallback(k,J)},Ve.useContext=function(k){return le.H.useContext(k)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(k,J){return le.H.useDeferredValue(k,J)},Ve.useEffect=function(k,J,$){var F=le.H;if(typeof $=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return F.useEffect(k,J)},Ve.useId=function(){return le.H.useId()},Ve.useImperativeHandle=function(k,J,$){return le.H.useImperativeHandle(k,J,$)},Ve.useInsertionEffect=function(k,J){return le.H.useInsertionEffect(k,J)},Ve.useLayoutEffect=function(k,J){return le.H.useLayoutEffect(k,J)},Ve.useMemo=function(k,J){return le.H.useMemo(k,J)},Ve.useOptimistic=function(k,J){return le.H.useOptimistic(k,J)},Ve.useReducer=function(k,J,$){return le.H.useReducer(k,J,$)},Ve.useRef=function(k){return le.H.useRef(k)},Ve.useState=function(k){return le.H.useState(k)},Ve.useSyncExternalStore=function(k,J,$){return le.H.useSyncExternalStore(k,J,$)},Ve.useTransition=function(){return le.H.useTransition()},Ve.version="19.1.1",Ve}var jv;function lg(){return jv||(jv=1,gm.exports=cw()),gm.exports}var pm={exports:{}},An={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function uw(){if(Dv)return An;Dv=1;var s=lg();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)y+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var a={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,y,x){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:y,implementation:x}}var d=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return An.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,An.createPortal=function(p,y){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(p,y,null,x)},An.flushSync=function(p){var y=d.T,x=a.p;try{if(d.T=null,a.p=2,p)return p()}finally{d.T=y,a.p=x,a.d.f()}},An.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,a.d.C(p,y))},An.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},An.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var x=y.as,T=m(x,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,M=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;x==="style"?a.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:M}):x==="script"&&a.d.X(p,{crossOrigin:T,integrity:A,fetchPriority:M,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},An.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var x=m(y.as,y.crossOrigin);a.d.M(p,{crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&a.d.M(p)},An.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var x=y.as,T=m(x,y.crossOrigin);a.d.L(p,x,{crossOrigin:T,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},An.preloadModule=function(p,y){if(typeof p=="string")if(y){var x=m(y.as,y.crossOrigin);a.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:x,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else a.d.m(p)},An.requestFormReset=function(p){a.d.r(p)},An.unstable_batchedUpdates=function(p,y){return p(y)},An.useFormState=function(p,y,x){return d.H.useFormState(p,y,x)},An.useFormStatus=function(){return d.H.useHostTransitionStatus()},An.version="19.1.1",An}var Mv;function hw(){if(Mv)return pm.exports;Mv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),pm.exports=uw(),pm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function dw(){if(Ov)return $l;Ov=1;var s=lw(),e=lg(),t=hw();function a(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var r=n,i=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(i=r.return),n=r.return;while(n)}return r.tag===3?i:null}function d(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(a(188))}function p(n){var r=n.alternate;if(!r){if(r=l(n),r===null)throw Error(a(188));return r!==n?null:n}for(var i=n,c=r;;){var f=i.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){i=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===i)return m(f),n;if(g===c)return m(f),r;g=g.sibling}throw Error(a(188))}if(i.return!==c.return)i=f,c=g;else{for(var b=!1,E=f.child;E;){if(E===i){b=!0,i=f,c=g;break}if(E===c){b=!0,c=f,i=g;break}E=E.sibling}if(!b){for(E=g.child;E;){if(E===i){b=!0,i=g,c=f;break}if(E===c){b=!0,c=g,i=f;break}E=E.sibling}if(!b)throw Error(a(189))}}if(i.alternate!==c)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?n:r}function y(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=y(n),r!==null)return r;n=n.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),X=Symbol.for("react.provider"),W=Symbol.for("react.consumer"),he=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function I(n){return n===null||typeof n!="object"?null:(n=P&&n[P]||n["@@iterator"],typeof n=="function"?n:null)}var N=Symbol.for("react.client.reference");function ve(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===N?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case B:return"Fragment";case j:return"Profiler";case L:return"StrictMode";case le:return"Suspense";case de:return"SuspenseList";case R:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case M:return"Portal";case he:return(n.displayName||"Context")+".Provider";case W:return(n._context.displayName||"Context")+".Consumer";case ue:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case V:return r=n.displayName||null,r!==null?r:ve(n.type)||"Memo";case C:r=n._payload,n=n._init;try{return ve(n(r))}catch{}}return null}var _e=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},Y=[],k=-1;function J(n){return{current:n}}function $(n){0>k||(n.current=Y[k],Y[k]=null,k--)}function F(n,r){k++,Y[k]=n.current,n.current=r}var ce=J(null),fe=J(null),pe=J(null),Le=J(null);function Ke(n,r){switch(F(pe,r),F(fe,n),F(ce,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?tv(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=tv(r),n=nv(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(ce),F(ce,n)}function pt(){$(ce),$(fe),$(pe)}function rt(n){n.memoizedState!==null&&F(Le,n);var r=ce.current,i=nv(r,n.type);r!==i&&(F(fe,n),F(ce,i))}function St(n){fe.current===n&&($(ce),$(fe)),Le.current===n&&($(Le),Bl._currentValue=te)}var wn=Object.prototype.hasOwnProperty,en=s.unstable_scheduleCallback,Hn=s.unstable_cancelCallback,Me=s.unstable_shouldYield,ye=s.unstable_requestPaint,be=s.unstable_now,st=s.unstable_getCurrentPriorityLevel,Vt=s.unstable_ImmediatePriority,je=s.unstable_UserBlockingPriority,kt=s.unstable_NormalPriority,He=s.unstable_LowPriority,ht=s.unstable_IdlePriority,pr=s.log,wi=s.unstable_setDisableYieldValue,It=null,at=null;function In(n){if(typeof pr=="function"&&wi(n),at&&typeof at.setStrictMode=="function")try{at.setStrictMode(It,n)}catch{}}var ln=Math.clz32?Math.clz32:Ue,Te=Math.log,we=Math.LN2;function Ue(n){return n>>>=0,n===0?32:31-(Te(n)/we|0)|0}var Be=256,dt=4194304;function jt(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function $e(n,r,i){var c=n.pendingLanes;if(c===0)return 0;var f=0,g=n.suspendedLanes,b=n.pingedLanes;n=n.warmLanes;var E=c&134217727;return E!==0?(c=E&~g,c!==0?f=jt(c):(b&=E,b!==0?f=jt(b):i||(i=E&~n,i!==0&&(f=jt(i))))):(E=c&~g,E!==0?f=jt(E):b!==0?f=jt(b):i||(i=c&~n,i!==0&&(f=jt(i)))),f===0?0:r!==0&&r!==f&&(r&g)===0&&(g=f&-f,i=r&-r,g>=i||g===32&&(i&4194048)!==0)?r:f}function Tt(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function ot(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cn(){var n=Be;return Be<<=1,(Be&4194048)===0&&(Be=256),n}function ft(){var n=dt;return dt<<=1,(dt&62914560)===0&&(dt=4194304),n}function Gn(n){for(var r=[],i=0;31>i;i++)r.push(n);return r}function yt(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Bt(n,r,i,c,f,g){var b=n.pendingLanes;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=i,n.entangledLanes&=i,n.errorRecoveryDisabledLanes&=i,n.shellSuspendCounter=0;var E=n.entanglements,D=n.expirationTimes,K=n.hiddenUpdates;for(i=b&~i;0<i;){var ne=31-ln(i),ie=1<<ne;E[ne]=0,D[ne]=-1;var Q=K[ne];if(Q!==null)for(K[ne]=null,ne=0;ne<Q.length;ne++){var Z=Q[ne];Z!==null&&(Z.lane&=-536870913)}i&=~ie}c!==0&&Sn(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(b&~r))}function Sn(n,r,i){n.pendingLanes|=r,n.suspendedLanes&=~r;var c=31-ln(r);n.entangledLanes|=r,n.entanglements[c]=n.entanglements[c]|1073741824|i&4194090}function Fo(n,r){var i=n.entangledLanes|=r;for(n=n.entanglements;i;){var c=31-ln(i),f=1<<c;f&r|n[c]&r&&(n[c]|=r),i&=~f}}function Vs(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Si(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ps(){var n=ae.p;return n!==0?n:(n=window.event,n===void 0?32:bv(n.type))}function Lc(n,r){var i=ae.p;try{return ae.p=n,r()}finally{ae.p=i}}var Dt=Math.random().toString(36).slice(2),tn="__reactFiber$"+Dt,Kt="__reactProps$"+Dt,Jn="__reactContainer$"+Dt,Ko="__reactEvents$"+Dt,fd="__reactListeners$"+Dt,Ls="__reactHandles$"+Dt,zc="__reactResources$"+Dt,Ia="__reactMarker$"+Dt;function zs(n){delete n[tn],delete n[Kt],delete n[Ko],delete n[fd],delete n[Ls]}function ts(n){var r=n[tn];if(r)return r;for(var i=n.parentNode;i;){if(r=i[Jn]||i[tn]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(n=iv(n);n!==null;){if(i=n[tn])return i;n=iv(n)}return r}n=i,i=n.parentNode}return null}function Rr(n){if(n=n[tn]||n[Jn]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function Cr(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(a(33))}function jn(n){var r=n[zc];return r||(r=n[zc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function qt(n){n[Ia]=!0}var $o=new Set,ki={};function yr(n,r){ns(n,r),ns(n+"Capture",r)}function ns(n,r){for(ki[n]=r,n=0;n<r.length;n++)$o.add(r[n])}var Uc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bc={},ja={};function qc(n){return wn.call(ja,n)?!0:wn.call(Bc,n)?!1:Uc.test(n)?ja[n]=!0:(Bc[n]=!0,!1)}function Us(n,r,i){if(qc(r))if(i===null)n.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+i)}}function Ir(n,r,i){if(i===null)n.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+i)}}function pn(n,r,i,c){if(c===null)n.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttributeNS(r,i,""+c)}}var Da,Hc;function rs(n){if(Da===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);Da=r&&r[1]||"",Hc=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Da+n+Hc}var Ai=!1;function Ni(n,r){if(!n||Ai)return"";Ai=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var Q=Z}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(Z){Q=Z}n.call(ie.prototype)}}else{try{throw Error()}catch(Z){Q=Z}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&Q&&typeof Z.stack=="string")return[Z.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),b=g[0],E=g[1];if(b&&E){var D=b.split(`
`),K=E.split(`
`);for(f=c=0;c<D.length&&!D[c].includes("DetermineComponentFrameRoot");)c++;for(;f<K.length&&!K[f].includes("DetermineComponentFrameRoot");)f++;if(c===D.length||f===K.length)for(c=D.length-1,f=K.length-1;1<=c&&0<=f&&D[c]!==K[f];)f--;for(;1<=c&&0<=f;c--,f--)if(D[c]!==K[f]){if(c!==1||f!==1)do if(c--,f--,0>f||D[c]!==K[f]){var ne=`
`+D[c].replace(" at new "," at ");return n.displayName&&ne.includes("<anonymous>")&&(ne=ne.replace("<anonymous>",n.displayName)),ne}while(1<=c&&0<=f);break}}}finally{Ai=!1,Error.prepareStackTrace=i}return(i=n?n.displayName||n.name:"")?rs(i):""}function Yo(n){switch(n.tag){case 26:case 27:case 5:return rs(n.type);case 16:return rs("Lazy");case 13:return rs("Suspense");case 19:return rs("SuspenseList");case 0:case 15:return Ni(n.type,!1);case 11:return Ni(n.type.render,!1);case 1:return Ni(n.type,!0);case 31:return rs("Activity");default:return""}}function Ri(n){try{var r="";do r+=Yo(n),n=n.return;while(n);return r}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function Dn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Qo(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function md(n){var r=Qo(n)?"checked":"value",i=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var f=i.get,g=i.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return f.call(this)},set:function(b){c=""+b,g.call(this,b)}}),Object.defineProperty(n,r,{enumerable:i.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ci(n){n._valueTracker||(n._valueTracker=md(n))}function Xo(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var i=r.getValue(),c="";return n&&(c=Qo(n)?n.checked?"true":"false":n.value),n=c,n!==i?(r.setValue(n),!0):!1}function Ma(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var gd=/[\n"\\]/g;function $t(n){return n.replace(gd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Fn(n,r,i,c,f,g,b,E){n.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?n.type=b:n.removeAttribute("type"),r!=null?b==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+Dn(r)):n.value!==""+Dn(r)&&(n.value=""+Dn(r)):b!=="submit"&&b!=="reset"||n.removeAttribute("value"),r!=null?Bs(n,b,Dn(r)):i!=null?Bs(n,b,Dn(i)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.name=""+Dn(E):n.removeAttribute("name")}function Oa(n,r,i,c,f,g,b,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),r!=null||i!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;i=i!=null?""+Dn(i):"",r=r!=null?""+Dn(r):i,E||r===n.value||(n.value=r),n.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=E?n.checked:!!c,n.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(n.name=b)}function Bs(n,r,i){r==="number"&&Ma(n.ownerDocument)===n||n.defaultValue===""+i||(n.defaultValue=""+i)}function ss(n,r,i,c){if(n=n.options,r){r={};for(var f=0;f<i.length;f++)r["$"+i[f]]=!0;for(i=0;i<n.length;i++)f=r.hasOwnProperty("$"+n[i].value),n[i].selected!==f&&(n[i].selected=f),f&&c&&(n[i].defaultSelected=!0)}else{for(i=""+Dn(i),r=null,f=0;f<n.length;f++){if(n[f].value===i){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}r!==null||n[f].disabled||(r=n[f])}r!==null&&(r.selected=!0)}}function vt(n,r,i){if(r!=null&&(r=""+Dn(r),r!==n.value&&(n.value=r),i==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=i!=null?""+Dn(i):""}function Va(n,r,i,c){if(r==null){if(c!=null){if(i!=null)throw Error(a(92));if(_e(c)){if(1<c.length)throw Error(a(93));c=c[0]}i=c}i==null&&(i=""),r=i}i=Dn(r),n.defaultValue=i,c=n.textContent,c===i&&c!==""&&c!==null&&(n.value=c)}function er(n,r){if(r){var i=n.firstChild;if(i&&i===n.lastChild&&i.nodeType===3){i.nodeValue=r;return}}n.textContent=r}var Pa=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gc(n,r,i){var c=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?c?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":c?n.setProperty(r,i):typeof i!="number"||i===0||Pa.has(r)?r==="float"?n.cssFloat=i:n[r]=(""+i).trim():n[r]=i+"px"}function Zo(n,r,i){if(r!=null&&typeof r!="object")throw Error(a(62));if(n=n.style,i!=null){for(var c in i)!i.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&i[f]!==c&&Gc(n,f,c)}else for(var g in r)r.hasOwnProperty(g)&&Gc(n,g,r[g])}function Wo(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ii(n){return yd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var as=null;function tr(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var is=null,os=null;function Jo(n){var r=Rr(n);if(r&&(n=r.stateNode)){var i=n[Kt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Fn(n,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=n;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+$t(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var c=i[r];if(c!==n&&c.form===n.form){var f=c[Kt]||null;if(!f)throw Error(a(90));Fn(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<i.length;r++)c=i[r],c.form===n.form&&Xo(c)}break e;case"textarea":vt(n,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&ss(n,!!i.multiple,r,!1)}}}var jr=!1;function Fc(n,r,i){if(jr)return n(r,i);jr=!0;try{var c=n(r);return c}finally{if(jr=!1,(is!==null||os!==null)&&(Lu(),is&&(r=is,n=os,os=is=null,Jo(r),n)))for(r=0;r<n.length;r++)Jo(n[r])}}function La(n,r){var i=n.stateNode;if(i===null)return null;var c=i[Kt]||null;if(c===null)return null;i=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(i&&typeof i!="function")throw Error(a(231,r,typeof i));return i}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nr=!1;if(vr)try{var za={};Object.defineProperty(za,"passive",{get:function(){nr=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{nr=!1}var Dr=null,qs=null,ls=null;function el(){if(ls)return ls;var n,r=qs,i=r.length,c,f="value"in Dr?Dr.value:Dr.textContent,g=f.length;for(n=0;n<i&&r[n]===f[n];n++);var b=i-n;for(c=1;c<=b&&r[i-c]===f[g-c];c++);return ls=f.slice(n,1<c?1-c:void 0)}function Mr(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function Or(){return!0}function tl(){return!1}function un(n){function r(i,c,f,g,b){this._reactName=i,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var E in n)n.hasOwnProperty(E)&&(i=n[E],this[E]=i?i(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Or:tl,this.isPropagationStopped=tl,this}return x(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Or)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Or)},persist:function(){},isPersistent:Or}),r}var ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ji=un(ct),Ua=x({},ct,{view:0,detail:0}),Kc=un(Ua),Di,Mi,Vr,Ba=x({},Ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Vr&&(Vr&&n.type==="mousemove"?(Di=n.screenX-Vr.screenX,Mi=n.screenY-Vr.screenY):Mi=Di=0,Vr=n),Di)},movementY:function(n){return"movementY"in n?n.movementY:Mi}}),rr=un(Ba),$c=x({},Ba,{dataTransfer:0}),vd=un($c),qa=x({},Ua,{relatedTarget:0}),Oi=un(qa),nl=x({},ct,{animationName:0,elapsedTime:0,pseudoElement:0}),Vi=un(nl),Yc=x({},ct,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Pi=un(Yc),xd=x({},ct,{data:0}),rl=un(xd),Ha={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=Xc[n])?!!r[n]:!1}function Ga(){return sl}var Zc=x({},Ua,{key:function(n){if(n.key){var r=Ha[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Mr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(n){return n.type==="keypress"?Mr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Mr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Li=un(Zc),Wc=x({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),al=un(Wc),cs=x({},Ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),Jc=un(cs),eu=x({},ct,{propertyName:0,elapsedTime:0,pseudoElement:0}),tu=un(eu),nu=x({},Ba,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),zi=un(nu),Mn=x({},ct,{newState:0,oldState:0}),ru=un(Mn),su=[9,13,27,32],Pr=vr&&"CompositionEvent"in window,h=null;vr&&"documentMode"in document&&(h=document.documentMode);var v=vr&&"TextEvent"in window&&!h,_=vr&&(!Pr||h&&8<h&&11>=h),S=" ",q=!1;function ee(n,r){switch(n){case"keyup":return su.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function me(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Je=!1;function nn(n,r){switch(n){case"compositionend":return me(r);case"keypress":return r.which!==32?null:(q=!0,S);case"textInput":return n=r.data,n===S&&q?null:n;default:return null}}function et(n,r){if(Je)return n==="compositionend"||!Pr&&ee(n,r)?(n=el(),ls=qs=Dr=null,Je=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return _&&r.locale!=="ko"?null:r.data;default:return null}}var hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rn(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!hn[n.type]:r==="textarea"}function us(n,r,i,c){is?os?os.push(c):os=[c]:is=c,r=Gu(r,"onChange"),0<r.length&&(i=new ji("onChange","change",null,i,c),n.push({event:i,listeners:r}))}var yn=null,Lr=null;function il(n){X0(n,0)}function au(n){var r=Cr(n);if(Xo(r))return n}function yp(n,r){if(n==="change")return r}var vp=!1;if(vr){var _d;if(vr){var bd="oninput"in document;if(!bd){var xp=document.createElement("div");xp.setAttribute("oninput","return;"),bd=typeof xp.oninput=="function"}_d=bd}else _d=!1;vp=_d&&(!document.documentMode||9<document.documentMode)}function _p(){yn&&(yn.detachEvent("onpropertychange",bp),Lr=yn=null)}function bp(n){if(n.propertyName==="value"&&au(Lr)){var r=[];us(r,Lr,n,tr(n)),Fc(il,r)}}function MT(n,r,i){n==="focusin"?(_p(),yn=r,Lr=i,yn.attachEvent("onpropertychange",bp)):n==="focusout"&&_p()}function OT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return au(Lr)}function VT(n,r){if(n==="click")return au(r)}function PT(n,r){if(n==="input"||n==="change")return au(r)}function LT(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var Kn=typeof Object.is=="function"?Object.is:LT;function ol(n,r){if(Kn(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var i=Object.keys(n),c=Object.keys(r);if(i.length!==c.length)return!1;for(c=0;c<i.length;c++){var f=i[c];if(!wn.call(r,f)||!Kn(n[f],r[f]))return!1}return!0}function Tp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Ep(n,r){var i=Tp(n);n=0;for(var c;i;){if(i.nodeType===3){if(c=n+i.textContent.length,n<=r&&c>=r)return{node:i,offset:r-n};n=c}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Tp(i)}}function wp(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?wp(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Sp(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=Ma(n.document);r instanceof n.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)n=r.contentWindow;else break;r=Ma(n.document)}return r}function Td(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var zT=vr&&"documentMode"in document&&11>=document.documentMode,Ui=null,Ed=null,ll=null,wd=!1;function kp(n,r,i){var c=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;wd||Ui==null||Ui!==Ma(c)||(c=Ui,"selectionStart"in c&&Td(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ll&&ol(ll,c)||(ll=c,c=Gu(Ed,"onSelect"),0<c.length&&(r=new ji("onSelect","select",null,r,i),n.push({event:r,listeners:c}),r.target=Ui)))}function Fa(n,r){var i={};return i[n.toLowerCase()]=r.toLowerCase(),i["Webkit"+n]="webkit"+r,i["Moz"+n]="moz"+r,i}var Bi={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionrun:Fa("Transition","TransitionRun"),transitionstart:Fa("Transition","TransitionStart"),transitioncancel:Fa("Transition","TransitionCancel"),transitionend:Fa("Transition","TransitionEnd")},Sd={},Ap={};vr&&(Ap=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Ka(n){if(Sd[n])return Sd[n];if(!Bi[n])return n;var r=Bi[n],i;for(i in r)if(r.hasOwnProperty(i)&&i in Ap)return Sd[n]=r[i];return n}var Np=Ka("animationend"),Rp=Ka("animationiteration"),Cp=Ka("animationstart"),UT=Ka("transitionrun"),BT=Ka("transitionstart"),qT=Ka("transitioncancel"),Ip=Ka("transitionend"),jp=new Map,kd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kd.push("scrollEnd");function xr(n,r){jp.set(n,r),yr(r,[n])}var Dp=new WeakMap;function sr(n,r){if(typeof n=="object"&&n!==null){var i=Dp.get(n);return i!==void 0?i:(r={value:n,source:r,stack:Ri(r)},Dp.set(n,r),r)}return{value:n,source:r,stack:Ri(r)}}var ar=[],qi=0,Ad=0;function iu(){for(var n=qi,r=Ad=qi=0;r<n;){var i=ar[r];ar[r++]=null;var c=ar[r];ar[r++]=null;var f=ar[r];ar[r++]=null;var g=ar[r];if(ar[r++]=null,c!==null&&f!==null){var b=c.pending;b===null?f.next=f:(f.next=b.next,b.next=f),c.pending=f}g!==0&&Mp(i,f,g)}}function ou(n,r,i,c){ar[qi++]=n,ar[qi++]=r,ar[qi++]=i,ar[qi++]=c,Ad|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function Nd(n,r,i,c){return ou(n,r,i,c),lu(n)}function Hi(n,r){return ou(n,null,null,r),lu(n)}function Mp(n,r,i){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i);for(var f=!1,g=n.return;g!==null;)g.childLanes|=i,c=g.alternate,c!==null&&(c.childLanes|=i),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&r!==null&&(f=31-ln(i),n=g.hiddenUpdates,c=n[f],c===null?n[f]=[r]:c.push(r),r.lane=i|536870912),g):null}function lu(n){if(50<Dl)throw Dl=0,Of=null,Error(a(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Gi={};function HT(n,r,i,c){this.tag=n,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(n,r,i,c){return new HT(n,r,i,c)}function Rd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hs(n,r){var i=n.alternate;return i===null?(i=$n(n.tag,r,n.key,n.mode),i.elementType=n.elementType,i.type=n.type,i.stateNode=n.stateNode,i.alternate=n,n.alternate=i):(i.pendingProps=r,i.type=n.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=n.flags&65011712,i.childLanes=n.childLanes,i.lanes=n.lanes,i.child=n.child,i.memoizedProps=n.memoizedProps,i.memoizedState=n.memoizedState,i.updateQueue=n.updateQueue,r=n.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=n.sibling,i.index=n.index,i.ref=n.ref,i.refCleanup=n.refCleanup,i}function Op(n,r){n.flags&=65011714;var i=n.alternate;return i===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=i.childLanes,n.lanes=i.lanes,n.child=i.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=i.memoizedProps,n.memoizedState=i.memoizedState,n.updateQueue=i.updateQueue,n.type=i.type,r=i.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function cu(n,r,i,c,f,g){var b=0;if(c=n,typeof n=="function")Rd(n)&&(b=1);else if(typeof n=="string")b=FE(n,i,ce.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case R:return n=$n(31,i,r,f),n.elementType=R,n.lanes=g,n;case B:return $a(i.children,f,g,r);case L:b=8,f|=24;break;case j:return n=$n(12,i,r,f|2),n.elementType=j,n.lanes=g,n;case le:return n=$n(13,i,r,f),n.elementType=le,n.lanes=g,n;case de:return n=$n(19,i,r,f),n.elementType=de,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case X:case he:b=10;break e;case W:b=9;break e;case ue:b=11;break e;case V:b=14;break e;case C:b=16,c=null;break e}b=29,i=Error(a(130,n===null?"null":typeof n,"")),c=null}return r=$n(b,i,r,f),r.elementType=n,r.type=c,r.lanes=g,r}function $a(n,r,i,c){return n=$n(7,n,c,r),n.lanes=i,n}function Cd(n,r,i){return n=$n(6,n,null,r),n.lanes=i,n}function Id(n,r,i){return r=$n(4,n.children!==null?n.children:[],n.key,r),r.lanes=i,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var Fi=[],Ki=0,uu=null,hu=0,ir=[],or=0,Ya=null,ds=1,fs="";function Qa(n,r){Fi[Ki++]=hu,Fi[Ki++]=uu,uu=n,hu=r}function Vp(n,r,i){ir[or++]=ds,ir[or++]=fs,ir[or++]=Ya,Ya=n;var c=ds;n=fs;var f=32-ln(c)-1;c&=~(1<<f),i+=1;var g=32-ln(r)+f;if(30<g){var b=f-f%5;g=(c&(1<<b)-1).toString(32),c>>=b,f-=b,ds=1<<32-ln(r)+f|i<<f|c,fs=g+n}else ds=1<<g|i<<f|c,fs=n}function jd(n){n.return!==null&&(Qa(n,1),Vp(n,1,0))}function Dd(n){for(;n===uu;)uu=Fi[--Ki],Fi[Ki]=null,hu=Fi[--Ki],Fi[Ki]=null;for(;n===Ya;)Ya=ir[--or],ir[or]=null,fs=ir[--or],ir[or]=null,ds=ir[--or],ir[or]=null}var On=null,zt=null,lt=!1,Xa=null,zr=!1,Md=Error(a(519));function Za(n){var r=Error(a(418,""));throw hl(sr(r,n)),Md}function Pp(n){var r=n.stateNode,i=n.type,c=n.memoizedProps;switch(r[tn]=n,r[Kt]=c,i){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(i=0;i<Ol.length;i++)Fe(Ol[i],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Fe("invalid",r),Oa(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ci(r);break;case"select":Fe("invalid",r);break;case"textarea":Fe("invalid",r),Va(r,c.value,c.defaultValue,c.children),Ci(r)}i=c.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||c.suppressHydrationWarning===!0||ev(r.textContent,i)?(c.popover!=null&&(Fe("beforetoggle",r),Fe("toggle",r)),c.onScroll!=null&&Fe("scroll",r),c.onScrollEnd!=null&&Fe("scrollend",r),c.onClick!=null&&(r.onclick=Fu),r=!0):r=!1,r||Za(n)}function Lp(n){for(On=n.return;On;)switch(On.tag){case 5:case 13:zr=!1;return;case 27:case 3:zr=!0;return;default:On=On.return}}function cl(n){if(n!==On)return!1;if(!lt)return Lp(n),lt=!0,!1;var r=n.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=n.type,i=!(i!=="form"&&i!=="button")||Zf(n.type,n.memoizedProps)),i=!i),i&&zt&&Za(n),Lp(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(i=n.data,i==="/$"){if(r===0){zt=br(n.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++;n=n.nextSibling}zt=null}}else r===27?(r=zt,sa(n.type)?(n=tm,tm=null,zt=n):zt=r):zt=On?br(n.stateNode.nextSibling):null;return!0}function ul(){zt=On=null,lt=!1}function zp(){var n=Xa;return n!==null&&(Un===null?Un=n:Un.push.apply(Un,n),Xa=null),n}function hl(n){Xa===null?Xa=[n]:Xa.push(n)}var Od=J(null),Wa=null,ms=null;function Hs(n,r,i){F(Od,r._currentValue),r._currentValue=i}function gs(n){n._currentValue=Od.current,$(Od)}function Vd(n,r,i){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===i)break;n=n.return}}function Pd(n,r,i,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var b=f.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=f;for(var D=0;D<r.length;D++)if(E.context===r[D]){g.lanes|=i,E=g.alternate,E!==null&&(E.lanes|=i),Vd(g.return,i,n),c||(b=null);break e}g=E.next}}else if(f.tag===18){if(b=f.return,b===null)throw Error(a(341));b.lanes|=i,g=b.alternate,g!==null&&(g.lanes|=i),Vd(b,i,n),b=null}else b=f.child;if(b!==null)b.return=f;else for(b=f;b!==null;){if(b===n){b=null;break}if(f=b.sibling,f!==null){f.return=b.return,b=f;break}b=b.return}f=b}}function dl(n,r,i,c){n=null;for(var f=r,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var b=f.alternate;if(b===null)throw Error(a(387));if(b=b.memoizedProps,b!==null){var E=f.type;Kn(f.pendingProps.value,b.value)||(n!==null?n.push(E):n=[E])}}else if(f===Le.current){if(b=f.alternate,b===null)throw Error(a(387));b.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Bl):n=[Bl])}f=f.return}n!==null&&Pd(r,n,i,c),r.flags|=262144}function du(n){for(n=n.firstContext;n!==null;){if(!Kn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ja(n){Wa=n,ms=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function kn(n){return Up(Wa,n)}function fu(n,r){return Wa===null&&Ja(n),Up(n,r)}function Up(n,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},ms===null){if(n===null)throw Error(a(308));ms=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else ms=ms.next=r;return i}var GT=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(i,c){n.push(c)}};this.abort=function(){r.aborted=!0,n.forEach(function(i){return i()})}},FT=s.unstable_scheduleCallback,KT=s.unstable_NormalPriority,sn={$$typeof:he,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ld(){return{controller:new GT,data:new Map,refCount:0}}function fl(n){n.refCount--,n.refCount===0&&FT(KT,function(){n.controller.abort()})}var ml=null,zd=0,$i=0,Yi=null;function $T(n,r){if(ml===null){var i=ml=[];zd=0,$i=qf(),Yi={status:"pending",value:void 0,then:function(c){i.push(c)}}}return zd++,r.then(Bp,Bp),r}function Bp(){if(--zd===0&&ml!==null){Yi!==null&&(Yi.status="fulfilled");var n=ml;ml=null,$i=0,Yi=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function YT(n,r){var i=[],c={status:"pending",value:null,reason:null,then:function(f){i.push(f)}};return n.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<i.length;f++)(0,i[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<i.length;f++)(0,i[f])(void 0)}),c}var qp=G.S;G.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&$T(n,r),qp!==null&&qp(n,r)};var ei=J(null);function Ud(){var n=ei.current;return n!==null?n:At.pooledCache}function mu(n,r){r===null?F(ei,ei.current):F(ei,r.pool)}function Hp(){var n=Ud();return n===null?null:{parent:sn._currentValue,pool:n}}var gl=Error(a(460)),Gp=Error(a(474)),gu=Error(a(542)),Bd={then:function(){}};function Fp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function pu(){}function Kp(n,r,i){switch(i=n[i],i===void 0?n.push(r):i!==r&&(r.then(pu,pu),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Yp(n),n;default:if(typeof r.status=="string")r.then(pu,pu);else{if(n=At,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=r,n.status="pending",n.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Yp(n),n}throw pl=r,gl}}var pl=null;function $p(){if(pl===null)throw Error(a(459));var n=pl;return pl=null,n}function Yp(n){if(n===gl||n===gu)throw Error(a(483))}var Gs=!1;function qd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hd(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Fs(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ks(n,r,i){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(mt&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=lu(n),Mp(n,null,i),r}return ou(n,c,r,i),lu(n)}function yl(n,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var c=r.lanes;c&=n.pendingLanes,i|=c,r.lanes=i,Fo(n,i)}}function Gd(n,r){var i=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,i===c)){var f=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};g===null?f=g=b:g=g.next=b,i=i.next}while(i!==null);g===null?f=g=r:g=g.next=r}else f=g=r;i={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=i;return}n=i.lastBaseUpdate,n===null?i.firstBaseUpdate=r:n.next=r,i.lastBaseUpdate=r}var Fd=!1;function vl(){if(Fd){var n=Yi;if(n!==null)throw n}}function xl(n,r,i,c){Fd=!1;var f=n.updateQueue;Gs=!1;var g=f.firstBaseUpdate,b=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var D=E,K=D.next;D.next=null,b===null?g=K:b.next=K,b=D;var ne=n.alternate;ne!==null&&(ne=ne.updateQueue,E=ne.lastBaseUpdate,E!==b&&(E===null?ne.firstBaseUpdate=K:E.next=K,ne.lastBaseUpdate=D))}if(g!==null){var ie=f.baseState;b=0,ne=K=D=null,E=g;do{var Q=E.lane&-536870913,Z=Q!==E.lane;if(Z?(tt&Q)===Q:(c&Q)===Q){Q!==0&&Q===$i&&(Fd=!0),ne!==null&&(ne=ne.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Ie=n,Ae=E;Q=r;var bt=i;switch(Ae.tag){case 1:if(Ie=Ae.payload,typeof Ie=="function"){ie=Ie.call(bt,ie,Q);break e}ie=Ie;break e;case 3:Ie.flags=Ie.flags&-65537|128;case 0:if(Ie=Ae.payload,Q=typeof Ie=="function"?Ie.call(bt,ie,Q):Ie,Q==null)break e;ie=x({},ie,Q);break e;case 2:Gs=!0}}Q=E.callback,Q!==null&&(n.flags|=64,Z&&(n.flags|=8192),Z=f.callbacks,Z===null?f.callbacks=[Q]:Z.push(Q))}else Z={lane:Q,tag:E.tag,payload:E.payload,callback:E.callback,next:null},ne===null?(K=ne=Z,D=ie):ne=ne.next=Z,b|=Q;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;Z=E,E=Z.next,Z.next=null,f.lastBaseUpdate=Z,f.shared.pending=null}}while(!0);ne===null&&(D=ie),f.baseState=D,f.firstBaseUpdate=K,f.lastBaseUpdate=ne,g===null&&(f.shared.lanes=0),ea|=b,n.lanes=b,n.memoizedState=ie}}function Qp(n,r){if(typeof n!="function")throw Error(a(191,n));n.call(r)}function Xp(n,r){var i=n.callbacks;if(i!==null)for(n.callbacks=null,n=0;n<i.length;n++)Qp(i[n],r)}var Qi=J(null),yu=J(0);function Zp(n,r){n=Ts,F(yu,n),F(Qi,r),Ts=n|r.baseLanes}function Kd(){F(yu,Ts),F(Qi,Qi.current)}function $d(){Ts=yu.current,$(Qi),$(yu)}var $s=0,ze=null,xt=null,Yt=null,vu=!1,Xi=!1,ti=!1,xu=0,_l=0,Zi=null,QT=0;function Ht(){throw Error(a(321))}function Yd(n,r){if(r===null)return!1;for(var i=0;i<r.length&&i<n.length;i++)if(!Kn(n[i],r[i]))return!1;return!0}function Qd(n,r,i,c,f,g){return $s=g,ze=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,G.H=n===null||n.memoizedState===null?My:Oy,ti=!1,g=i(c,f),ti=!1,Xi&&(g=Jp(r,i,c,f)),Wp(n),g}function Wp(n){G.H=Su;var r=xt!==null&&xt.next!==null;if($s=0,Yt=xt=ze=null,vu=!1,_l=0,Zi=null,r)throw Error(a(300));n===null||dn||(n=n.dependencies,n!==null&&du(n)&&(dn=!0))}function Jp(n,r,i,c){ze=n;var f=0;do{if(Xi&&(Zi=null),_l=0,Xi=!1,25<=f)throw Error(a(301));if(f+=1,Yt=xt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}G.H=nE,g=r(i,c)}while(Xi);return g}function XT(){var n=G.H,r=n.useState()[0];return r=typeof r.then=="function"?bl(r):r,n=n.useState()[0],(xt!==null?xt.memoizedState:null)!==n&&(ze.flags|=1024),r}function Xd(){var n=xu!==0;return xu=0,n}function Zd(n,r,i){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~i}function Wd(n){if(vu){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}vu=!1}$s=0,Yt=xt=ze=null,Xi=!1,_l=xu=0,Zi=null}function Ln(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?ze.memoizedState=Yt=n:Yt=Yt.next=n,Yt}function Qt(){if(xt===null){var n=ze.alternate;n=n!==null?n.memoizedState:null}else n=xt.next;var r=Yt===null?ze.memoizedState:Yt.next;if(r!==null)Yt=r,xt=n;else{if(n===null)throw ze.alternate===null?Error(a(467)):Error(a(310));xt=n,n={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Yt===null?ze.memoizedState=Yt=n:Yt=Yt.next=n}return Yt}function Jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(n){var r=_l;return _l+=1,Zi===null&&(Zi=[]),n=Kp(Zi,n,r),r=ze,(Yt===null?r.memoizedState:Yt.next)===null&&(r=r.alternate,G.H=r===null||r.memoizedState===null?My:Oy),n}function _u(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return bl(n);if(n.$$typeof===he)return kn(n)}throw Error(a(438,String(n)))}function ef(n){var r=null,i=ze.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var c=ze.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=Jd(),ze.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(n),c=0;c<n;c++)i[c]=O;return r.index++,i}function ps(n,r){return typeof r=="function"?r(n):r}function bu(n){var r=Qt();return tf(r,xt,n)}function tf(n,r,i){var c=n.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=i;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var b=f.next;f.next=g.next,g.next=b}r.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{r=f.next;var E=b=null,D=null,K=r,ne=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(tt&ie)===ie:($s&ie)===ie){var Q=K.revertLane;if(Q===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===$i&&(ne=!0);else if(($s&Q)===Q){K=K.next,Q===$i&&(ne=!0);continue}else ie={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(E=D=ie,b=g):D=D.next=ie,ze.lanes|=Q,ea|=Q;ie=K.action,ti&&i(g,ie),g=K.hasEagerState?K.eagerState:i(g,ie)}else Q={lane:ie,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},D===null?(E=D=Q,b=g):D=D.next=Q,ze.lanes|=ie,ea|=ie;K=K.next}while(K!==null&&K!==r);if(D===null?b=g:D.next=E,!Kn(g,n.memoizedState)&&(dn=!0,ne&&(i=Yi,i!==null)))throw i;n.memoizedState=g,n.baseState=b,n.baseQueue=D,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function nf(n){var r=Qt(),i=r.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=n;var c=i.dispatch,f=i.pending,g=r.memoizedState;if(f!==null){i.pending=null;var b=f=f.next;do g=n(g,b.action),b=b.next;while(b!==f);Kn(g,r.memoizedState)||(dn=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),i.lastRenderedState=g}return[g,c]}function ey(n,r,i){var c=ze,f=Qt(),g=lt;if(g){if(i===void 0)throw Error(a(407));i=i()}else i=r();var b=!Kn((xt||f).memoizedState,i);b&&(f.memoizedState=i,dn=!0),f=f.queue;var E=ry.bind(null,c,f,n);if(Tl(2048,8,E,[n]),f.getSnapshot!==r||b||Yt!==null&&Yt.memoizedState.tag&1){if(c.flags|=2048,Wi(9,Tu(),ny.bind(null,c,f,i,r),null),At===null)throw Error(a(349));g||($s&124)!==0||ty(c,r,i)}return i}function ty(n,r,i){n.flags|=16384,n={getSnapshot:r,value:i},r=ze.updateQueue,r===null?(r=Jd(),ze.updateQueue=r,r.stores=[n]):(i=r.stores,i===null?r.stores=[n]:i.push(n))}function ny(n,r,i,c){r.value=i,r.getSnapshot=c,sy(r)&&ay(n)}function ry(n,r,i){return i(function(){sy(r)&&ay(n)})}function sy(n){var r=n.getSnapshot;n=n.value;try{var i=r();return!Kn(n,i)}catch{return!0}}function ay(n){var r=Hi(n,2);r!==null&&Wn(r,n,2)}function rf(n){var r=Ln();if(typeof n=="function"){var i=n;if(n=i(),ti){In(!0);try{i()}finally{In(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:n},r}function iy(n,r,i,c){return n.baseState=i,tf(n,xt,typeof c=="function"?c:ps)}function ZT(n,r,i,c,f){if(wu(n))throw Error(a(485));if(n=r.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};G.T!==null?i(!0):g.isTransition=!1,c(g),i=r.pending,i===null?(g.next=r.pending=g,oy(r,g)):(g.next=i.next,r.pending=i.next=g)}}function oy(n,r){var i=r.action,c=r.payload,f=n.state;if(r.isTransition){var g=G.T,b={};G.T=b;try{var E=i(f,c),D=G.S;D!==null&&D(b,E),ly(n,r,E)}catch(K){sf(n,r,K)}finally{G.T=g}}else try{g=i(f,c),ly(n,r,g)}catch(K){sf(n,r,K)}}function ly(n,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(c){cy(n,r,c)},function(c){return sf(n,r,c)}):cy(n,r,i)}function cy(n,r,i){r.status="fulfilled",r.value=i,uy(r),n.state=i,r=n.pending,r!==null&&(i=r.next,i===r?n.pending=null:(i=i.next,r.next=i,oy(n,i)))}function sf(n,r,i){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=i,uy(r),r=r.next;while(r!==c)}n.action=null}function uy(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function hy(n,r){return r}function dy(n,r){if(lt){var i=At.formState;if(i!==null){e:{var c=ze;if(lt){if(zt){t:{for(var f=zt,g=zr;f.nodeType!==8;){if(!g){f=null;break t}if(f=br(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){zt=br(f.nextSibling),c=f.data==="F!";break e}}Za(c)}c=!1}c&&(r=i[0])}}return i=Ln(),i.memoizedState=i.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hy,lastRenderedState:r},i.queue=c,i=Iy.bind(null,ze,c),c.dispatch=i,c=rf(!1),g=uf.bind(null,ze,!1,c.queue),c=Ln(),f={state:r,dispatch:null,action:n,pending:null},c.queue=f,i=ZT.bind(null,ze,f,g,i),f.dispatch=i,c.memoizedState=n,[r,i,!1]}function fy(n){var r=Qt();return my(r,xt,n)}function my(n,r,i){if(r=tf(n,r,hy)[0],n=bu(ps)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=bl(r)}catch(b){throw b===gl?gu:b}else c=r;r=Qt();var f=r.queue,g=f.dispatch;return i!==r.memoizedState&&(ze.flags|=2048,Wi(9,Tu(),WT.bind(null,f,i),null)),[c,g,n]}function WT(n,r){n.action=r}function gy(n){var r=Qt(),i=xt;if(i!==null)return my(r,i,n);Qt(),r=r.memoizedState,i=Qt();var c=i.queue.dispatch;return i.memoizedState=n,[r,c,!1]}function Wi(n,r,i,c){return n={tag:n,create:i,deps:c,inst:r,next:null},r=ze.updateQueue,r===null&&(r=Jd(),ze.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=n.next=n:(c=i.next,i.next=n,n.next=c,r.lastEffect=n),n}function Tu(){return{destroy:void 0,resource:void 0}}function py(){return Qt().memoizedState}function Eu(n,r,i,c){var f=Ln();c=c===void 0?null:c,ze.flags|=n,f.memoizedState=Wi(1|r,Tu(),i,c)}function Tl(n,r,i,c){var f=Qt();c=c===void 0?null:c;var g=f.memoizedState.inst;xt!==null&&c!==null&&Yd(c,xt.memoizedState.deps)?f.memoizedState=Wi(r,g,i,c):(ze.flags|=n,f.memoizedState=Wi(1|r,g,i,c))}function yy(n,r){Eu(8390656,8,n,r)}function vy(n,r){Tl(2048,8,n,r)}function xy(n,r){return Tl(4,2,n,r)}function _y(n,r){return Tl(4,4,n,r)}function by(n,r){if(typeof r=="function"){n=n();var i=r(n);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Ty(n,r,i){i=i!=null?i.concat([n]):null,Tl(4,4,by.bind(null,r,n),i)}function af(){}function Ey(n,r){var i=Qt();r=r===void 0?null:r;var c=i.memoizedState;return r!==null&&Yd(r,c[1])?c[0]:(i.memoizedState=[n,r],n)}function wy(n,r){var i=Qt();r=r===void 0?null:r;var c=i.memoizedState;if(r!==null&&Yd(r,c[1]))return c[0];if(c=n(),ti){In(!0);try{n()}finally{In(!1)}}return i.memoizedState=[c,r],c}function of(n,r,i){return i===void 0||($s&1073741824)!==0?n.memoizedState=r:(n.memoizedState=i,n=A0(),ze.lanes|=n,ea|=n,i)}function Sy(n,r,i,c){return Kn(i,r)?i:Qi.current!==null?(n=of(n,i,c),Kn(n,r)||(dn=!0),n):($s&42)===0?(dn=!0,n.memoizedState=i):(n=A0(),ze.lanes|=n,ea|=n,r)}function ky(n,r,i,c,f){var g=ae.p;ae.p=g!==0&&8>g?g:8;var b=G.T,E={};G.T=E,uf(n,!1,r,i);try{var D=f(),K=G.S;if(K!==null&&K(E,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var ne=YT(D,c);El(n,r,ne,Zn(n))}else El(n,r,c,Zn(n))}catch(ie){El(n,r,{then:function(){},status:"rejected",reason:ie},Zn())}finally{ae.p=g,G.T=b}}function JT(){}function lf(n,r,i,c){if(n.tag!==5)throw Error(a(476));var f=Ay(n).queue;ky(n,f,r,te,i===null?JT:function(){return Ny(n),i(c)})}function Ay(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:te},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ps,lastRenderedState:i},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function Ny(n){var r=Ay(n).next.queue;El(n,r,{},Zn())}function cf(){return kn(Bl)}function Ry(){return Qt().memoizedState}function Cy(){return Qt().memoizedState}function eE(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var i=Zn();n=Fs(i);var c=Ks(r,n,i);c!==null&&(Wn(c,r,i),yl(c,r,i)),r={cache:Ld()},n.payload=r;return}r=r.return}}function tE(n,r,i){var c=Zn();i={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},wu(n)?jy(r,i):(i=Nd(n,r,i,c),i!==null&&(Wn(i,n,c),Dy(i,r,c)))}function Iy(n,r,i){var c=Zn();El(n,r,i,c)}function El(n,r,i,c){var f={lane:c,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(wu(n))jy(r,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var b=r.lastRenderedState,E=g(b,i);if(f.hasEagerState=!0,f.eagerState=E,Kn(E,b))return ou(n,r,f,0),At===null&&iu(),!1}catch{}finally{}if(i=Nd(n,r,f,c),i!==null)return Wn(i,n,c),Dy(i,r,c),!0}return!1}function uf(n,r,i,c){if(c={lane:2,revertLane:qf(),action:c,hasEagerState:!1,eagerState:null,next:null},wu(n)){if(r)throw Error(a(479))}else r=Nd(n,i,c,2),r!==null&&Wn(r,n,2)}function wu(n){var r=n.alternate;return n===ze||r!==null&&r===ze}function jy(n,r){Xi=vu=!0;var i=n.pending;i===null?r.next=r:(r.next=i.next,i.next=r),n.pending=r}function Dy(n,r,i){if((i&4194048)!==0){var c=r.lanes;c&=n.pendingLanes,i|=c,r.lanes=i,Fo(n,i)}}var Su={readContext:kn,use:_u,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useLayoutEffect:Ht,useInsertionEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useSyncExternalStore:Ht,useId:Ht,useHostTransitionStatus:Ht,useFormState:Ht,useActionState:Ht,useOptimistic:Ht,useMemoCache:Ht,useCacheRefresh:Ht},My={readContext:kn,use:_u,useCallback:function(n,r){return Ln().memoizedState=[n,r===void 0?null:r],n},useContext:kn,useEffect:yy,useImperativeHandle:function(n,r,i){i=i!=null?i.concat([n]):null,Eu(4194308,4,by.bind(null,r,n),i)},useLayoutEffect:function(n,r){return Eu(4194308,4,n,r)},useInsertionEffect:function(n,r){Eu(4,2,n,r)},useMemo:function(n,r){var i=Ln();r=r===void 0?null:r;var c=n();if(ti){In(!0);try{n()}finally{In(!1)}}return i.memoizedState=[c,r],c},useReducer:function(n,r,i){var c=Ln();if(i!==void 0){var f=i(r);if(ti){In(!0);try{i(r)}finally{In(!1)}}}else f=r;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=tE.bind(null,ze,n),[c.memoizedState,n]},useRef:function(n){var r=Ln();return n={current:n},r.memoizedState=n},useState:function(n){n=rf(n);var r=n.queue,i=Iy.bind(null,ze,r);return r.dispatch=i,[n.memoizedState,i]},useDebugValue:af,useDeferredValue:function(n,r){var i=Ln();return of(i,n,r)},useTransition:function(){var n=rf(!1);return n=ky.bind(null,ze,n.queue,!0,!1),Ln().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,i){var c=ze,f=Ln();if(lt){if(i===void 0)throw Error(a(407));i=i()}else{if(i=r(),At===null)throw Error(a(349));(tt&124)!==0||ty(c,r,i)}f.memoizedState=i;var g={value:i,getSnapshot:r};return f.queue=g,yy(ry.bind(null,c,g,n),[n]),c.flags|=2048,Wi(9,Tu(),ny.bind(null,c,g,i,r),null),i},useId:function(){var n=Ln(),r=At.identifierPrefix;if(lt){var i=fs,c=ds;i=(c&~(1<<32-ln(c)-1)).toString(32)+i,r="«"+r+"R"+i,i=xu++,0<i&&(r+="H"+i.toString(32)),r+="»"}else i=QT++,r="«"+r+"r"+i.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:cf,useFormState:dy,useActionState:dy,useOptimistic:function(n){var r=Ln();r.memoizedState=r.baseState=n;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=uf.bind(null,ze,!0,i),i.dispatch=r,[n,r]},useMemoCache:ef,useCacheRefresh:function(){return Ln().memoizedState=eE.bind(null,ze)}},Oy={readContext:kn,use:_u,useCallback:Ey,useContext:kn,useEffect:vy,useImperativeHandle:Ty,useInsertionEffect:xy,useLayoutEffect:_y,useMemo:wy,useReducer:bu,useRef:py,useState:function(){return bu(ps)},useDebugValue:af,useDeferredValue:function(n,r){var i=Qt();return Sy(i,xt.memoizedState,n,r)},useTransition:function(){var n=bu(ps)[0],r=Qt().memoizedState;return[typeof n=="boolean"?n:bl(n),r]},useSyncExternalStore:ey,useId:Ry,useHostTransitionStatus:cf,useFormState:fy,useActionState:fy,useOptimistic:function(n,r){var i=Qt();return iy(i,xt,n,r)},useMemoCache:ef,useCacheRefresh:Cy},nE={readContext:kn,use:_u,useCallback:Ey,useContext:kn,useEffect:vy,useImperativeHandle:Ty,useInsertionEffect:xy,useLayoutEffect:_y,useMemo:wy,useReducer:nf,useRef:py,useState:function(){return nf(ps)},useDebugValue:af,useDeferredValue:function(n,r){var i=Qt();return xt===null?of(i,n,r):Sy(i,xt.memoizedState,n,r)},useTransition:function(){var n=nf(ps)[0],r=Qt().memoizedState;return[typeof n=="boolean"?n:bl(n),r]},useSyncExternalStore:ey,useId:Ry,useHostTransitionStatus:cf,useFormState:gy,useActionState:gy,useOptimistic:function(n,r){var i=Qt();return xt!==null?iy(i,xt,n,r):(i.baseState=n,[n,i.queue.dispatch])},useMemoCache:ef,useCacheRefresh:Cy},Ji=null,wl=0;function ku(n){var r=wl;return wl+=1,Ji===null&&(Ji=[]),Kp(Ji,n,r)}function Sl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Au(n,r){throw r.$$typeof===T?Error(a(525)):(n=Object.prototype.toString.call(r),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function Vy(n){var r=n._init;return r(n._payload)}function Py(n){function r(U,z){if(n){var H=U.deletions;H===null?(U.deletions=[z],U.flags|=16):H.push(z)}}function i(U,z){if(!n)return null;for(;z!==null;)r(U,z),z=z.sibling;return null}function c(U){for(var z=new Map;U!==null;)U.key!==null?z.set(U.key,U):z.set(U.index,U),U=U.sibling;return z}function f(U,z){return U=hs(U,z),U.index=0,U.sibling=null,U}function g(U,z,H){return U.index=H,n?(H=U.alternate,H!==null?(H=H.index,H<z?(U.flags|=67108866,z):H):(U.flags|=67108866,z)):(U.flags|=1048576,z)}function b(U){return n&&U.alternate===null&&(U.flags|=67108866),U}function E(U,z,H,se){return z===null||z.tag!==6?(z=Cd(H,U.mode,se),z.return=U,z):(z=f(z,H),z.return=U,z)}function D(U,z,H,se){var Ee=H.type;return Ee===B?ne(U,z,H.props.children,se,H.key):z!==null&&(z.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===C&&Vy(Ee)===z.type)?(z=f(z,H.props),Sl(z,H),z.return=U,z):(z=cu(H.type,H.key,H.props,null,U.mode,se),Sl(z,H),z.return=U,z)}function K(U,z,H,se){return z===null||z.tag!==4||z.stateNode.containerInfo!==H.containerInfo||z.stateNode.implementation!==H.implementation?(z=Id(H,U.mode,se),z.return=U,z):(z=f(z,H.children||[]),z.return=U,z)}function ne(U,z,H,se,Ee){return z===null||z.tag!==7?(z=$a(H,U.mode,se,Ee),z.return=U,z):(z=f(z,H),z.return=U,z)}function ie(U,z,H){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Cd(""+z,U.mode,H),z.return=U,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case A:return H=cu(z.type,z.key,z.props,null,U.mode,H),Sl(H,z),H.return=U,H;case M:return z=Id(z,U.mode,H),z.return=U,z;case C:var se=z._init;return z=se(z._payload),ie(U,z,H)}if(_e(z)||I(z))return z=$a(z,U.mode,H,null),z.return=U,z;if(typeof z.then=="function")return ie(U,ku(z),H);if(z.$$typeof===he)return ie(U,fu(U,z),H);Au(U,z)}return null}function Q(U,z,H,se){var Ee=z!==null?z.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Ee!==null?null:E(U,z,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return H.key===Ee?D(U,z,H,se):null;case M:return H.key===Ee?K(U,z,H,se):null;case C:return Ee=H._init,H=Ee(H._payload),Q(U,z,H,se)}if(_e(H)||I(H))return Ee!==null?null:ne(U,z,H,se,null);if(typeof H.then=="function")return Q(U,z,ku(H),se);if(H.$$typeof===he)return Q(U,z,fu(U,H),se);Au(U,H)}return null}function Z(U,z,H,se,Ee){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return U=U.get(H)||null,E(z,U,""+se,Ee);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case A:return U=U.get(se.key===null?H:se.key)||null,D(z,U,se,Ee);case M:return U=U.get(se.key===null?H:se.key)||null,K(z,U,se,Ee);case C:var qe=se._init;return se=qe(se._payload),Z(U,z,H,se,Ee)}if(_e(se)||I(se))return U=U.get(H)||null,ne(z,U,se,Ee,null);if(typeof se.then=="function")return Z(U,z,H,ku(se),Ee);if(se.$$typeof===he)return Z(U,z,H,fu(z,se),Ee);Au(z,se)}return null}function Ie(U,z,H,se){for(var Ee=null,qe=null,Se=z,Ne=z=0,mn=null;Se!==null&&Ne<H.length;Ne++){Se.index>Ne?(mn=Se,Se=null):mn=Se.sibling;var it=Q(U,Se,H[Ne],se);if(it===null){Se===null&&(Se=mn);break}n&&Se&&it.alternate===null&&r(U,Se),z=g(it,z,Ne),qe===null?Ee=it:qe.sibling=it,qe=it,Se=mn}if(Ne===H.length)return i(U,Se),lt&&Qa(U,Ne),Ee;if(Se===null){for(;Ne<H.length;Ne++)Se=ie(U,H[Ne],se),Se!==null&&(z=g(Se,z,Ne),qe===null?Ee=Se:qe.sibling=Se,qe=Se);return lt&&Qa(U,Ne),Ee}for(Se=c(Se);Ne<H.length;Ne++)mn=Z(Se,U,Ne,H[Ne],se),mn!==null&&(n&&mn.alternate!==null&&Se.delete(mn.key===null?Ne:mn.key),z=g(mn,z,Ne),qe===null?Ee=mn:qe.sibling=mn,qe=mn);return n&&Se.forEach(function(ca){return r(U,ca)}),lt&&Qa(U,Ne),Ee}function Ae(U,z,H,se){if(H==null)throw Error(a(151));for(var Ee=null,qe=null,Se=z,Ne=z=0,mn=null,it=H.next();Se!==null&&!it.done;Ne++,it=H.next()){Se.index>Ne?(mn=Se,Se=null):mn=Se.sibling;var ca=Q(U,Se,it.value,se);if(ca===null){Se===null&&(Se=mn);break}n&&Se&&ca.alternate===null&&r(U,Se),z=g(ca,z,Ne),qe===null?Ee=ca:qe.sibling=ca,qe=ca,Se=mn}if(it.done)return i(U,Se),lt&&Qa(U,Ne),Ee;if(Se===null){for(;!it.done;Ne++,it=H.next())it=ie(U,it.value,se),it!==null&&(z=g(it,z,Ne),qe===null?Ee=it:qe.sibling=it,qe=it);return lt&&Qa(U,Ne),Ee}for(Se=c(Se);!it.done;Ne++,it=H.next())it=Z(Se,U,Ne,it.value,se),it!==null&&(n&&it.alternate!==null&&Se.delete(it.key===null?Ne:it.key),z=g(it,z,Ne),qe===null?Ee=it:qe.sibling=it,qe=it);return n&&Se.forEach(function(rw){return r(U,rw)}),lt&&Qa(U,Ne),Ee}function bt(U,z,H,se){if(typeof H=="object"&&H!==null&&H.type===B&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case A:e:{for(var Ee=H.key;z!==null;){if(z.key===Ee){if(Ee=H.type,Ee===B){if(z.tag===7){i(U,z.sibling),se=f(z,H.props.children),se.return=U,U=se;break e}}else if(z.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===C&&Vy(Ee)===z.type){i(U,z.sibling),se=f(z,H.props),Sl(se,H),se.return=U,U=se;break e}i(U,z);break}else r(U,z);z=z.sibling}H.type===B?(se=$a(H.props.children,U.mode,se,H.key),se.return=U,U=se):(se=cu(H.type,H.key,H.props,null,U.mode,se),Sl(se,H),se.return=U,U=se)}return b(U);case M:e:{for(Ee=H.key;z!==null;){if(z.key===Ee)if(z.tag===4&&z.stateNode.containerInfo===H.containerInfo&&z.stateNode.implementation===H.implementation){i(U,z.sibling),se=f(z,H.children||[]),se.return=U,U=se;break e}else{i(U,z);break}else r(U,z);z=z.sibling}se=Id(H,U.mode,se),se.return=U,U=se}return b(U);case C:return Ee=H._init,H=Ee(H._payload),bt(U,z,H,se)}if(_e(H))return Ie(U,z,H,se);if(I(H)){if(Ee=I(H),typeof Ee!="function")throw Error(a(150));return H=Ee.call(H),Ae(U,z,H,se)}if(typeof H.then=="function")return bt(U,z,ku(H),se);if(H.$$typeof===he)return bt(U,z,fu(U,H),se);Au(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,z!==null&&z.tag===6?(i(U,z.sibling),se=f(z,H),se.return=U,U=se):(i(U,z),se=Cd(H,U.mode,se),se.return=U,U=se),b(U)):i(U,z)}return function(U,z,H,se){try{wl=0;var Ee=bt(U,z,H,se);return Ji=null,Ee}catch(Se){if(Se===gl||Se===gu)throw Se;var qe=$n(29,Se,null,U.mode);return qe.lanes=se,qe.return=U,qe}finally{}}}var eo=Py(!0),Ly=Py(!1),lr=J(null),Ur=null;function Ys(n){var r=n.alternate;F(an,an.current&1),F(lr,n),Ur===null&&(r===null||Qi.current!==null||r.memoizedState!==null)&&(Ur=n)}function zy(n){if(n.tag===22){if(F(an,an.current),F(lr,n),Ur===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(Ur=n)}}else Qs()}function Qs(){F(an,an.current),F(lr,lr.current)}function ys(n){$(lr),Ur===n&&(Ur=null),$(an)}var an=J(0);function Nu(n){for(var r=n;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||em(i)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function hf(n,r,i,c){r=n.memoizedState,i=i(c,r),i=i==null?r:x({},r,i),n.memoizedState=i,n.lanes===0&&(n.updateQueue.baseState=i)}var df={enqueueSetState:function(n,r,i){n=n._reactInternals;var c=Zn(),f=Fs(c);f.payload=r,i!=null&&(f.callback=i),r=Ks(n,f,c),r!==null&&(Wn(r,n,c),yl(r,n,c))},enqueueReplaceState:function(n,r,i){n=n._reactInternals;var c=Zn(),f=Fs(c);f.tag=1,f.payload=r,i!=null&&(f.callback=i),r=Ks(n,f,c),r!==null&&(Wn(r,n,c),yl(r,n,c))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var i=Zn(),c=Fs(i);c.tag=2,r!=null&&(c.callback=r),r=Ks(n,c,i),r!==null&&(Wn(r,n,i),yl(r,n,i))}};function Uy(n,r,i,c,f,g,b){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,b):r.prototype&&r.prototype.isPureReactComponent?!ol(i,c)||!ol(f,g):!0}function By(n,r,i,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,c),r.state!==n&&df.enqueueReplaceState(r,r.state,null)}function ni(n,r){var i=r;if("ref"in r){i={};for(var c in r)c!=="ref"&&(i[c]=r[c])}if(n=n.defaultProps){i===r&&(i=x({},i));for(var f in n)i[f]===void 0&&(i[f]=n[f])}return i}var Ru=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function qy(n){Ru(n)}function Hy(n){console.error(n)}function Gy(n){Ru(n)}function Cu(n,r){try{var i=n.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function Fy(n,r,i){try{var c=n.onCaughtError;c(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ff(n,r,i){return i=Fs(i),i.tag=3,i.payload={element:null},i.callback=function(){Cu(n,r)},i}function Ky(n){return n=Fs(n),n.tag=3,n}function $y(n,r,i,c){var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){Fy(r,i,c)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(n.callback=function(){Fy(r,i,c),typeof f!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var E=c.stack;this.componentDidCatch(c.value,{componentStack:E!==null?E:""})})}function rE(n,r,i,c,f){if(i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=i.alternate,r!==null&&dl(r,i,f,!0),i=lr.current,i!==null){switch(i.tag){case 13:return Ur===null?Pf():i.alternate===null&&Ut===0&&(Ut=3),i.flags&=-257,i.flags|=65536,i.lanes=f,c===Bd?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([c]):r.add(c),zf(n,c,f)),!1;case 22:return i.flags|=65536,c===Bd?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([c]):i.add(c)),zf(n,c,f)),!1}throw Error(a(435,i.tag))}return zf(n,c,f),Pf(),!1}if(lt)return r=lr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==Md&&(n=Error(a(422),{cause:c}),hl(sr(n,i)))):(c!==Md&&(r=Error(a(423),{cause:c}),hl(sr(r,i))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=sr(c,i),f=ff(n.stateNode,c,f),Gd(n,f),Ut!==4&&(Ut=2)),!1;var g=Error(a(520),{cause:c});if(g=sr(g,i),jl===null?jl=[g]:jl.push(g),Ut!==4&&(Ut=2),r===null)return!0;c=sr(c,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,n=f&-f,i.lanes|=n,n=ff(i.stateNode,c,n),Gd(i,n),!1;case 1:if(r=i.type,g=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ta===null||!ta.has(g))))return i.flags|=65536,f&=-f,i.lanes|=f,f=Ky(f),$y(f,n,i,c),Gd(i,f),!1}i=i.return}while(i!==null);return!1}var Yy=Error(a(461)),dn=!1;function vn(n,r,i,c){r.child=n===null?Ly(r,null,i,c):eo(r,n.child,i,c)}function Qy(n,r,i,c,f){i=i.render;var g=r.ref;if("ref"in c){var b={};for(var E in c)E!=="ref"&&(b[E]=c[E])}else b=c;return Ja(r),c=Qd(n,r,i,b,g,f),E=Xd(),n!==null&&!dn?(Zd(n,r,f),vs(n,r,f)):(lt&&E&&jd(r),r.flags|=1,vn(n,r,c,f),r.child)}function Xy(n,r,i,c,f){if(n===null){var g=i.type;return typeof g=="function"&&!Rd(g)&&g.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=g,Zy(n,r,g,c,f)):(n=cu(i.type,null,c,r,r.mode,f),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!bf(n,f)){var b=g.memoizedProps;if(i=i.compare,i=i!==null?i:ol,i(b,c)&&n.ref===r.ref)return vs(n,r,f)}return r.flags|=1,n=hs(g,c),n.ref=r.ref,n.return=r,r.child=n}function Zy(n,r,i,c,f){if(n!==null){var g=n.memoizedProps;if(ol(g,c)&&n.ref===r.ref)if(dn=!1,r.pendingProps=c=g,bf(n,f))(n.flags&131072)!==0&&(dn=!0);else return r.lanes=n.lanes,vs(n,r,f)}return mf(n,r,i,c,f)}function Wy(n,r,i){var c=r.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=g!==null?g.baseLanes|i:i,n!==null){for(f=r.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;r.childLanes=g&~c}else r.childLanes=0,r.child=null;return Jy(n,r,c,i)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&mu(r,g!==null?g.cachePool:null),g!==null?Zp(r,g):Kd(),zy(r);else return r.lanes=r.childLanes=536870912,Jy(n,r,g!==null?g.baseLanes|i:i,i)}else g!==null?(mu(r,g.cachePool),Zp(r,g),Qs(),r.memoizedState=null):(n!==null&&mu(r,null),Kd(),Qs());return vn(n,r,f,i),r.child}function Jy(n,r,i,c){var f=Ud();return f=f===null?null:{parent:sn._currentValue,pool:f},r.memoizedState={baseLanes:i,cachePool:f},n!==null&&mu(r,null),Kd(),zy(r),n!==null&&dl(n,r,c,!0),null}function Iu(n,r){var i=r.ref;if(i===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(n===null||n.ref!==i)&&(r.flags|=4194816)}}function mf(n,r,i,c,f){return Ja(r),i=Qd(n,r,i,c,void 0,f),c=Xd(),n!==null&&!dn?(Zd(n,r,f),vs(n,r,f)):(lt&&c&&jd(r),r.flags|=1,vn(n,r,i,f),r.child)}function e0(n,r,i,c,f,g){return Ja(r),r.updateQueue=null,i=Jp(r,c,i,f),Wp(n),c=Xd(),n!==null&&!dn?(Zd(n,r,g),vs(n,r,g)):(lt&&c&&jd(r),r.flags|=1,vn(n,r,i,g),r.child)}function t0(n,r,i,c,f){if(Ja(r),r.stateNode===null){var g=Gi,b=i.contextType;typeof b=="object"&&b!==null&&(g=kn(b)),g=new i(c,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=df,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=c,g.state=r.memoizedState,g.refs={},qd(r),b=i.contextType,g.context=typeof b=="object"&&b!==null?kn(b):Gi,g.state=r.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(hf(r,i,b,c),g.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&df.enqueueReplaceState(g,g.state,null),xl(r,c,g,f),vl(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(n===null){g=r.stateNode;var E=r.memoizedProps,D=ni(i,E);g.props=D;var K=g.context,ne=i.contextType;b=Gi,typeof ne=="object"&&ne!==null&&(b=kn(ne));var ie=i.getDerivedStateFromProps;ne=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=r.pendingProps!==E,ne||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||K!==b)&&By(r,g,c,b),Gs=!1;var Q=r.memoizedState;g.state=Q,xl(r,c,g,f),vl(),K=r.memoizedState,E||Q!==K||Gs?(typeof ie=="function"&&(hf(r,i,ie,c),K=r.memoizedState),(D=Gs||Uy(r,i,D,c,Q,K,b))?(ne||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=K),g.props=c,g.state=K,g.context=b,c=D):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{g=r.stateNode,Hd(n,r),b=r.memoizedProps,ne=ni(i,b),g.props=ne,ie=r.pendingProps,Q=g.context,K=i.contextType,D=Gi,typeof K=="object"&&K!==null&&(D=kn(K)),E=i.getDerivedStateFromProps,(K=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ie||Q!==D)&&By(r,g,c,D),Gs=!1,Q=r.memoizedState,g.state=Q,xl(r,c,g,f),vl();var Z=r.memoizedState;b!==ie||Q!==Z||Gs||n!==null&&n.dependencies!==null&&du(n.dependencies)?(typeof E=="function"&&(hf(r,i,E,c),Z=r.memoizedState),(ne=Gs||Uy(r,i,ne,c,Q,Z,D)||n!==null&&n.dependencies!==null&&du(n.dependencies))?(K||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,Z,D),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,Z,D)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=Z),g.props=c,g.state=Z,g.context=D,c=ne):(typeof g.componentDidUpdate!="function"||b===n.memoizedProps&&Q===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===n.memoizedProps&&Q===n.memoizedState||(r.flags|=1024),c=!1)}return g=c,Iu(n,r),c=(r.flags&128)!==0,g||c?(g=r.stateNode,i=c&&typeof i.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,n!==null&&c?(r.child=eo(r,n.child,null,f),r.child=eo(r,null,i,f)):vn(n,r,i,f),r.memoizedState=g.state,n=r.child):n=vs(n,r,f),n}function n0(n,r,i,c){return ul(),r.flags|=256,vn(n,r,i,c),r.child}var gf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pf(n){return{baseLanes:n,cachePool:Hp()}}function yf(n,r,i){return n=n!==null?n.childLanes&~i:0,r&&(n|=cr),n}function r0(n,r,i){var c=r.pendingProps,f=!1,g=(r.flags&128)!==0,b;if((b=g)||(b=n!==null&&n.memoizedState===null?!1:(an.current&2)!==0),b&&(f=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,n===null){if(lt){if(f?Ys(r):Qs(),lt){var E=zt,D;if(D=E){e:{for(D=E,E=zr;D.nodeType!==8;){if(!E){E=null;break e}if(D=br(D.nextSibling),D===null){E=null;break e}}E=D}E!==null?(r.memoizedState={dehydrated:E,treeContext:Ya!==null?{id:ds,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},D=$n(18,null,null,0),D.stateNode=E,D.return=r,r.child=D,On=r,zt=null,D=!0):D=!1}D||Za(r)}if(E=r.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return em(E)?r.lanes=32:r.lanes=536870912,null;ys(r)}return E=c.children,c=c.fallback,f?(Qs(),f=r.mode,E=ju({mode:"hidden",children:E},f),c=$a(c,f,i,null),E.return=r,c.return=r,E.sibling=c,r.child=E,f=r.child,f.memoizedState=pf(i),f.childLanes=yf(n,b,i),r.memoizedState=gf,c):(Ys(r),vf(r,E))}if(D=n.memoizedState,D!==null&&(E=D.dehydrated,E!==null)){if(g)r.flags&256?(Ys(r),r.flags&=-257,r=xf(n,r,i)):r.memoizedState!==null?(Qs(),r.child=n.child,r.flags|=128,r=null):(Qs(),f=c.fallback,E=r.mode,c=ju({mode:"visible",children:c.children},E),f=$a(f,E,i,null),f.flags|=2,c.return=r,f.return=r,c.sibling=f,r.child=c,eo(r,n.child,null,i),c=r.child,c.memoizedState=pf(i),c.childLanes=yf(n,b,i),r.memoizedState=gf,r=f);else if(Ys(r),em(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var K=b.dgst;b=K,c=Error(a(419)),c.stack="",c.digest=b,hl({value:c,source:null,stack:null}),r=xf(n,r,i)}else if(dn||dl(n,r,i,!1),b=(i&n.childLanes)!==0,dn||b){if(b=At,b!==null&&(c=i&-i,c=(c&42)!==0?1:Vs(c),c=(c&(b.suspendedLanes|i))!==0?0:c,c!==0&&c!==D.retryLane))throw D.retryLane=c,Hi(n,c),Wn(b,n,c),Yy;E.data==="$?"||Pf(),r=xf(n,r,i)}else E.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=D.treeContext,zt=br(E.nextSibling),On=r,lt=!0,Xa=null,zr=!1,n!==null&&(ir[or++]=ds,ir[or++]=fs,ir[or++]=Ya,ds=n.id,fs=n.overflow,Ya=r),r=vf(r,c.children),r.flags|=4096);return r}return f?(Qs(),f=c.fallback,E=r.mode,D=n.child,K=D.sibling,c=hs(D,{mode:"hidden",children:c.children}),c.subtreeFlags=D.subtreeFlags&65011712,K!==null?f=hs(K,f):(f=$a(f,E,i,null),f.flags|=2),f.return=r,c.return=r,c.sibling=f,r.child=c,c=f,f=r.child,E=n.child.memoizedState,E===null?E=pf(i):(D=E.cachePool,D!==null?(K=sn._currentValue,D=D.parent!==K?{parent:K,pool:K}:D):D=Hp(),E={baseLanes:E.baseLanes|i,cachePool:D}),f.memoizedState=E,f.childLanes=yf(n,b,i),r.memoizedState=gf,c):(Ys(r),i=n.child,n=i.sibling,i=hs(i,{mode:"visible",children:c.children}),i.return=r,i.sibling=null,n!==null&&(b=r.deletions,b===null?(r.deletions=[n],r.flags|=16):b.push(n)),r.child=i,r.memoizedState=null,i)}function vf(n,r){return r=ju({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function ju(n,r){return n=$n(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function xf(n,r,i){return eo(r,n.child,null,i),n=vf(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function s0(n,r,i){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Vd(n.return,r,i)}function _f(n,r,i,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:i,tailMode:f}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=i,g.tailMode=f)}function a0(n,r,i){var c=r.pendingProps,f=c.revealOrder,g=c.tail;if(vn(n,r,c.children,i),c=an.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&s0(n,i,r);else if(n.tag===19)s0(n,i,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}switch(F(an,c),f){case"forwards":for(i=r.child,f=null;i!==null;)n=i.alternate,n!==null&&Nu(n)===null&&(f=i),i=i.sibling;i=f,i===null?(f=r.child,r.child=null):(f=i.sibling,i.sibling=null),_f(r,!1,f,i,g);break;case"backwards":for(i=null,f=r.child,r.child=null;f!==null;){if(n=f.alternate,n!==null&&Nu(n)===null){r.child=f;break}n=f.sibling,f.sibling=i,i=f,f=n}_f(r,!0,i,null,g);break;case"together":_f(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function vs(n,r,i){if(n!==null&&(r.dependencies=n.dependencies),ea|=r.lanes,(i&r.childLanes)===0)if(n!==null){if(dl(n,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(a(153));if(r.child!==null){for(n=r.child,i=hs(n,n.pendingProps),r.child=i,i.return=r;n.sibling!==null;)n=n.sibling,i=i.sibling=hs(n,n.pendingProps),i.return=r;i.sibling=null}return r.child}function bf(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&du(n)))}function sE(n,r,i){switch(r.tag){case 3:Ke(r,r.stateNode.containerInfo),Hs(r,sn,n.memoizedState.cache),ul();break;case 27:case 5:rt(r);break;case 4:Ke(r,r.stateNode.containerInfo);break;case 10:Hs(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Ys(r),r.flags|=128,null):(i&r.child.childLanes)!==0?r0(n,r,i):(Ys(r),n=vs(n,r,i),n!==null?n.sibling:null);Ys(r);break;case 19:var f=(n.flags&128)!==0;if(c=(i&r.childLanes)!==0,c||(dl(n,r,i,!1),c=(i&r.childLanes)!==0),f){if(c)return a0(n,r,i);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),F(an,an.current),c)break;return null;case 22:case 23:return r.lanes=0,Wy(n,r,i);case 24:Hs(r,sn,n.memoizedState.cache)}return vs(n,r,i)}function i0(n,r,i){if(n!==null)if(n.memoizedProps!==r.pendingProps)dn=!0;else{if(!bf(n,i)&&(r.flags&128)===0)return dn=!1,sE(n,r,i);dn=(n.flags&131072)!==0}else dn=!1,lt&&(r.flags&1048576)!==0&&Vp(r,hu,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var c=r.elementType,f=c._init;if(c=f(c._payload),r.type=c,typeof c=="function")Rd(c)?(n=ni(c,n),r.tag=1,r=t0(null,r,c,n,i)):(r.tag=0,r=mf(null,r,c,n,i));else{if(c!=null){if(f=c.$$typeof,f===ue){r.tag=11,r=Qy(null,r,c,n,i);break e}else if(f===V){r.tag=14,r=Xy(null,r,c,n,i);break e}}throw r=ve(c)||c,Error(a(306,r,""))}}return r;case 0:return mf(n,r,r.type,r.pendingProps,i);case 1:return c=r.type,f=ni(c,r.pendingProps),t0(n,r,c,f,i);case 3:e:{if(Ke(r,r.stateNode.containerInfo),n===null)throw Error(a(387));c=r.pendingProps;var g=r.memoizedState;f=g.element,Hd(n,r),xl(r,c,null,i);var b=r.memoizedState;if(c=b.cache,Hs(r,sn,c),c!==g.cache&&Pd(r,[sn],i,!0),vl(),c=b.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=n0(n,r,c,i);break e}else if(c!==f){f=sr(Error(a(424)),r),hl(f),r=n0(n,r,c,i);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(zt=br(n.firstChild),On=r,lt=!0,Xa=null,zr=!0,i=Ly(r,null,c,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ul(),c===f){r=vs(n,r,i);break e}vn(n,r,c,i)}r=r.child}return r;case 26:return Iu(n,r),n===null?(i=uv(r.type,null,r.pendingProps,null))?r.memoizedState=i:lt||(i=r.type,n=r.pendingProps,c=Ku(pe.current).createElement(i),c[tn]=r,c[Kt]=n,_n(c,i,n),qt(c),r.stateNode=c):r.memoizedState=uv(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return rt(r),n===null&&lt&&(c=r.stateNode=ov(r.type,r.pendingProps,pe.current),On=r,zr=!0,f=zt,sa(r.type)?(tm=f,zt=br(c.firstChild)):zt=f),vn(n,r,r.pendingProps.children,i),Iu(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&lt&&((f=c=zt)&&(c=jE(c,r.type,r.pendingProps,zr),c!==null?(r.stateNode=c,On=r,zt=br(c.firstChild),zr=!1,f=!0):f=!1),f||Za(r)),rt(r),f=r.type,g=r.pendingProps,b=n!==null?n.memoizedProps:null,c=g.children,Zf(f,g)?c=null:b!==null&&Zf(f,b)&&(r.flags|=32),r.memoizedState!==null&&(f=Qd(n,r,XT,null,null,i),Bl._currentValue=f),Iu(n,r),vn(n,r,c,i),r.child;case 6:return n===null&&lt&&((n=i=zt)&&(i=DE(i,r.pendingProps,zr),i!==null?(r.stateNode=i,On=r,zt=null,n=!0):n=!1),n||Za(r)),null;case 13:return r0(n,r,i);case 4:return Ke(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=eo(r,null,c,i):vn(n,r,c,i),r.child;case 11:return Qy(n,r,r.type,r.pendingProps,i);case 7:return vn(n,r,r.pendingProps,i),r.child;case 8:return vn(n,r,r.pendingProps.children,i),r.child;case 12:return vn(n,r,r.pendingProps.children,i),r.child;case 10:return c=r.pendingProps,Hs(r,r.type,c.value),vn(n,r,c.children,i),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,Ja(r),f=kn(f),c=c(f),r.flags|=1,vn(n,r,c,i),r.child;case 14:return Xy(n,r,r.type,r.pendingProps,i);case 15:return Zy(n,r,r.type,r.pendingProps,i);case 19:return a0(n,r,i);case 31:return c=r.pendingProps,i=r.mode,c={mode:c.mode,children:c.children},n===null?(i=ju(c,i),i.ref=r.ref,r.child=i,i.return=r,r=i):(i=hs(n.child,c),i.ref=r.ref,r.child=i,i.return=r,r=i),r;case 22:return Wy(n,r,i);case 24:return Ja(r),c=kn(sn),n===null?(f=Ud(),f===null&&(f=At,g=Ld(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=i),f=g),r.memoizedState={parent:c,cache:f},qd(r),Hs(r,sn,f)):((n.lanes&i)!==0&&(Hd(n,r),xl(r,null,null,i),vl()),f=n.memoizedState,g=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Hs(r,sn,c)):(c=g.cache,Hs(r,sn,c),c!==f.cache&&Pd(r,[sn],i,!0))),vn(n,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(a(156,r.tag))}function xs(n){n.flags|=4}function o0(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!gv(r)){if(r=lr.current,r!==null&&((tt&4194048)===tt?Ur!==null:(tt&62914560)!==tt&&(tt&536870912)===0||r!==Ur))throw pl=Bd,Gp;n.flags|=8192}}function Du(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?ft():536870912,n.lanes|=r,so|=r)}function kl(n,r){if(!lt)switch(n.tailMode){case"hidden":r=n.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?n.tail=null:i.sibling=null;break;case"collapsed":i=n.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Pt(n){var r=n.alternate!==null&&n.alternate.child===n.child,i=0,c=0;if(r)for(var f=n.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)i|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=i,r}function aE(n,r,i){var c=r.pendingProps;switch(Dd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pt(r),null;case 1:return Pt(r),null;case 3:return i=r.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),gs(sn),pt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(cl(r)?xs(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,zp())),Pt(r),null;case 26:return i=r.memoizedState,n===null?(xs(r),i!==null?(Pt(r),o0(r,i)):(Pt(r),r.flags&=-16777217)):i?i!==n.memoizedState?(xs(r),Pt(r),o0(r,i)):(Pt(r),r.flags&=-16777217):(n.memoizedProps!==c&&xs(r),Pt(r),r.flags&=-16777217),null;case 27:St(r),i=pe.current;var f=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==c&&xs(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Pt(r),null}n=ce.current,cl(r)?Pp(r):(n=ov(f,c,i),r.stateNode=n,xs(r))}return Pt(r),null;case 5:if(St(r),i=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==c&&xs(r);else{if(!c){if(r.stateNode===null)throw Error(a(166));return Pt(r),null}if(n=ce.current,cl(r))Pp(r);else{switch(f=Ku(pe.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?n.multiple=!0:c.size&&(n.size=c.size);break;default:n=typeof c.is=="string"?f.createElement(i,{is:c.is}):f.createElement(i)}}n[tn]=r,n[Kt]=c;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=n;e:switch(_n(n,i,c),i){case"button":case"input":case"select":case"textarea":n=!!c.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&xs(r)}}return Pt(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==c&&xs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(a(166));if(n=pe.current,cl(r)){if(n=r.stateNode,i=r.memoizedProps,c=null,f=On,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[tn]=r,n=!!(n.nodeValue===i||c!==null&&c.suppressHydrationWarning===!0||ev(n.nodeValue,i)),n||Za(r)}else n=Ku(n).createTextNode(c),n[tn]=r,r.stateNode=n}return Pt(r),null;case 13:if(c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=cl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(a(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[tn]=r}else ul(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Pt(r),f=!1}else f=zp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(ys(r),r):(ys(r),null)}if(ys(r),(r.flags&128)!==0)return r.lanes=i,r;if(i=c!==null,n=n!==null&&n.memoizedState!==null,i){c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return i!==n&&i&&(r.child.flags|=8192),Du(r,r.updateQueue),Pt(r),null;case 4:return pt(),n===null&&Kf(r.stateNode.containerInfo),Pt(r),null;case 10:return gs(r.type),Pt(r),null;case 19:if($(an),f=r.memoizedState,f===null)return Pt(r),null;if(c=(r.flags&128)!==0,g=f.rendering,g===null)if(c)kl(f,!1);else{if(Ut!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(g=Nu(n),g!==null){for(r.flags|=128,kl(f,!1),n=g.updateQueue,r.updateQueue=n,Du(r,n),r.subtreeFlags=0,n=i,i=r.child;i!==null;)Op(i,n),i=i.sibling;return F(an,an.current&1|2),r.child}n=n.sibling}f.tail!==null&&be()>Vu&&(r.flags|=128,c=!0,kl(f,!1),r.lanes=4194304)}else{if(!c)if(n=Nu(g),n!==null){if(r.flags|=128,c=!0,n=n.updateQueue,r.updateQueue=n,Du(r,n),kl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!lt)return Pt(r),null}else 2*be()-f.renderingStartTime>Vu&&i!==536870912&&(r.flags|=128,c=!0,kl(f,!1),r.lanes=4194304);f.isBackwards?(g.sibling=r.child,r.child=g):(n=f.last,n!==null?n.sibling=g:r.child=g,f.last=g)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=be(),r.sibling=null,n=an.current,F(an,c?n&1|2:n&1),r):(Pt(r),null);case 22:case 23:return ys(r),$d(),c=r.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(i&536870912)!==0&&(r.flags&128)===0&&(Pt(r),r.subtreeFlags&6&&(r.flags|=8192)):Pt(r),i=r.updateQueue,i!==null&&Du(r,i.retryQueue),i=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==i&&(r.flags|=2048),n!==null&&$(ei),null;case 24:return i=null,n!==null&&(i=n.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),gs(sn),Pt(r),null;case 25:return null;case 30:return null}throw Error(a(156,r.tag))}function iE(n,r){switch(Dd(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return gs(sn),pt(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return St(r),null;case 13:if(ys(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(a(340));ul()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return $(an),null;case 4:return pt(),null;case 10:return gs(r.type),null;case 22:case 23:return ys(r),$d(),n!==null&&$(ei),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return gs(sn),null;case 25:return null;default:return null}}function l0(n,r){switch(Dd(r),r.tag){case 3:gs(sn),pt();break;case 26:case 27:case 5:St(r);break;case 4:pt();break;case 13:ys(r);break;case 19:$(an);break;case 10:gs(r.type);break;case 22:case 23:ys(r),$d(),n!==null&&$(ei);break;case 24:gs(sn)}}function Al(n,r){try{var i=r.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var f=c.next;i=f;do{if((i.tag&n)===n){c=void 0;var g=i.create,b=i.inst;c=g(),b.destroy=c}i=i.next}while(i!==f)}}catch(E){Et(r,r.return,E)}}function Xs(n,r,i){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var b=c.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,f=r;var D=i,K=E;try{K()}catch(ne){Et(f,D,ne)}}}c=c.next}while(c!==g)}}catch(ne){Et(r,r.return,ne)}}function c0(n){var r=n.updateQueue;if(r!==null){var i=n.stateNode;try{Xp(r,i)}catch(c){Et(n,n.return,c)}}}function u0(n,r,i){i.props=ni(n.type,n.memoizedProps),i.state=n.memoizedState;try{i.componentWillUnmount()}catch(c){Et(n,r,c)}}function Nl(n,r){try{var i=n.ref;if(i!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof i=="function"?n.refCleanup=i(c):i.current=c}}catch(f){Et(n,r,f)}}function Br(n,r){var i=n.ref,c=n.refCleanup;if(i!==null)if(typeof c=="function")try{c()}catch(f){Et(n,r,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(f){Et(n,r,f)}else i.current=null}function h0(n){var r=n.type,i=n.memoizedProps,c=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&c.focus();break e;case"img":i.src?c.src=i.src:i.srcSet&&(c.srcset=i.srcSet)}}catch(f){Et(n,n.return,f)}}function Tf(n,r,i){try{var c=n.stateNode;AE(c,n.type,i,r),c[Kt]=r}catch(f){Et(n,n.return,f)}}function d0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&sa(n.type)||n.tag===4}function Ef(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||d0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&sa(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function wf(n,r,i){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(n,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(n),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Fu));else if(c!==4&&(c===27&&sa(n.type)&&(i=n.stateNode,r=null),n=n.child,n!==null))for(wf(n,r,i),n=n.sibling;n!==null;)wf(n,r,i),n=n.sibling}function Mu(n,r,i){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?i.insertBefore(n,r):i.appendChild(n);else if(c!==4&&(c===27&&sa(n.type)&&(i=n.stateNode),n=n.child,n!==null))for(Mu(n,r,i),n=n.sibling;n!==null;)Mu(n,r,i),n=n.sibling}function f0(n){var r=n.stateNode,i=n.memoizedProps;try{for(var c=n.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);_n(r,c,i),r[tn]=n,r[Kt]=i}catch(g){Et(n,n.return,g)}}var _s=!1,Gt=!1,Sf=!1,m0=typeof WeakSet=="function"?WeakSet:Set,fn=null;function oE(n,r){if(n=n.containerInfo,Qf=Wu,n=Sp(n),Td(n)){if("selectionStart"in n)var i={start:n.selectionStart,end:n.selectionEnd};else e:{i=(i=n.ownerDocument)&&i.defaultView||window;var c=i.getSelection&&i.getSelection();if(c&&c.rangeCount!==0){i=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var b=0,E=-1,D=-1,K=0,ne=0,ie=n,Q=null;t:for(;;){for(var Z;ie!==i||f!==0&&ie.nodeType!==3||(E=b+f),ie!==g||c!==0&&ie.nodeType!==3||(D=b+c),ie.nodeType===3&&(b+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)Q=ie,ie=Z;for(;;){if(ie===n)break t;if(Q===i&&++K===f&&(E=b),Q===g&&++ne===c&&(D=b),(Z=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=Z}i=E===-1||D===-1?null:{start:E,end:D}}else i=null}i=i||{start:0,end:0}}else i=null;for(Xf={focusedElem:n,selectionRange:i},Wu=!1,fn=r;fn!==null;)if(r=fn,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,fn=n;else for(;fn!==null;){switch(r=fn,g=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,i=r,f=g.memoizedProps,g=g.memoizedState,c=i.stateNode;try{var Ie=ni(i.type,f,i.elementType===i.type);n=c.getSnapshotBeforeUpdate(Ie,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){Et(i,i.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,i=n.nodeType,i===9)Jf(n);else if(i===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Jf(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=r.sibling,n!==null){n.return=r.return,fn=n;break}fn=r.return}}function g0(n,r,i){var c=i.flags;switch(i.tag){case 0:case 11:case 15:Zs(n,i),c&4&&Al(5,i);break;case 1:if(Zs(n,i),c&4)if(n=i.stateNode,r===null)try{n.componentDidMount()}catch(b){Et(i,i.return,b)}else{var f=ni(i.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(f,r,n.__reactInternalSnapshotBeforeUpdate)}catch(b){Et(i,i.return,b)}}c&64&&c0(i),c&512&&Nl(i,i.return);break;case 3:if(Zs(n,i),c&64&&(n=i.updateQueue,n!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{Xp(n,r)}catch(b){Et(i,i.return,b)}}break;case 27:r===null&&c&4&&f0(i);case 26:case 5:Zs(n,i),r===null&&c&4&&h0(i),c&512&&Nl(i,i.return);break;case 12:Zs(n,i);break;case 13:Zs(n,i),c&4&&v0(n,i),c&64&&(n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(i=pE.bind(null,i),ME(n,i))));break;case 22:if(c=i.memoizedState!==null||_s,!c){r=r!==null&&r.memoizedState!==null||Gt,f=_s;var g=Gt;_s=c,(Gt=r)&&!g?Ws(n,i,(i.subtreeFlags&8772)!==0):Zs(n,i),_s=f,Gt=g}break;case 30:break;default:Zs(n,i)}}function p0(n){var r=n.alternate;r!==null&&(n.alternate=null,p0(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&zs(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Mt=null,zn=!1;function bs(n,r,i){for(i=i.child;i!==null;)y0(n,r,i),i=i.sibling}function y0(n,r,i){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(It,i)}catch{}switch(i.tag){case 26:Gt||Br(i,r),bs(n,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Gt||Br(i,r);var c=Mt,f=zn;sa(i.type)&&(Mt=i.stateNode,zn=!1),bs(n,r,i),Pl(i.stateNode),Mt=c,zn=f;break;case 5:Gt||Br(i,r);case 6:if(c=Mt,f=zn,Mt=null,bs(n,r,i),Mt=c,zn=f,Mt!==null)if(zn)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(i.stateNode)}catch(g){Et(i,r,g)}else try{Mt.removeChild(i.stateNode)}catch(g){Et(i,r,g)}break;case 18:Mt!==null&&(zn?(n=Mt,av(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,i.stateNode),Fl(n)):av(Mt,i.stateNode));break;case 4:c=Mt,f=zn,Mt=i.stateNode.containerInfo,zn=!0,bs(n,r,i),Mt=c,zn=f;break;case 0:case 11:case 14:case 15:Gt||Xs(2,i,r),Gt||Xs(4,i,r),bs(n,r,i);break;case 1:Gt||(Br(i,r),c=i.stateNode,typeof c.componentWillUnmount=="function"&&u0(i,r,c)),bs(n,r,i);break;case 21:bs(n,r,i);break;case 22:Gt=(c=Gt)||i.memoizedState!==null,bs(n,r,i),Gt=c;break;default:bs(n,r,i)}}function v0(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Fl(n)}catch(i){Et(r,r.return,i)}}function lE(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new m0),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new m0),r;default:throw Error(a(435,n.tag))}}function kf(n,r){var i=lE(n);r.forEach(function(c){var f=yE.bind(null,n,c);i.has(c)||(i.add(c),c.then(f,f))})}function Yn(n,r){var i=r.deletions;if(i!==null)for(var c=0;c<i.length;c++){var f=i[c],g=n,b=r,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(sa(E.type)){Mt=E.stateNode,zn=!1;break e}break;case 5:Mt=E.stateNode,zn=!1;break e;case 3:case 4:Mt=E.stateNode.containerInfo,zn=!0;break e}E=E.return}if(Mt===null)throw Error(a(160));y0(g,b,f),Mt=null,zn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)x0(r,n),r=r.sibling}var _r=null;function x0(n,r){var i=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Yn(r,n),Qn(n),c&4&&(Xs(3,n,n.return),Al(3,n),Xs(5,n,n.return));break;case 1:Yn(r,n),Qn(n),c&512&&(Gt||i===null||Br(i,i.return)),c&64&&_s&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(i=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=i===null?c:i.concat(c))));break;case 26:var f=_r;if(Yn(r,n),Qn(n),c&512&&(Gt||i===null||Br(i,i.return)),c&4){var g=i!==null?i.memoizedState:null;if(c=n.memoizedState,i===null)if(c===null)if(n.stateNode===null){e:{c=n.type,i=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ia]||g[tn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),_n(g,c,i),g[tn]=n,qt(g),c=g;break e;case"link":var b=fv("link","href",f).get(c+(i.href||""));if(b){for(var E=0;E<b.length;E++)if(g=b[E],g.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&g.getAttribute("rel")===(i.rel==null?null:i.rel)&&g.getAttribute("title")===(i.title==null?null:i.title)&&g.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(E,1);break t}}g=f.createElement(c),_n(g,c,i),f.head.appendChild(g);break;case"meta":if(b=fv("meta","content",f).get(c+(i.content||""))){for(E=0;E<b.length;E++)if(g=b[E],g.getAttribute("content")===(i.content==null?null:""+i.content)&&g.getAttribute("name")===(i.name==null?null:i.name)&&g.getAttribute("property")===(i.property==null?null:i.property)&&g.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&g.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(E,1);break t}}g=f.createElement(c),_n(g,c,i),f.head.appendChild(g);break;default:throw Error(a(468,c))}g[tn]=n,qt(g),c=g}n.stateNode=c}else mv(f,n.type,n.stateNode);else n.stateNode=dv(f,c,n.memoizedProps);else g!==c?(g===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):g.count--,c===null?mv(f,n.type,n.stateNode):dv(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&Tf(n,n.memoizedProps,i.memoizedProps)}break;case 27:Yn(r,n),Qn(n),c&512&&(Gt||i===null||Br(i,i.return)),i!==null&&c&4&&Tf(n,n.memoizedProps,i.memoizedProps);break;case 5:if(Yn(r,n),Qn(n),c&512&&(Gt||i===null||Br(i,i.return)),n.flags&32){f=n.stateNode;try{er(f,"")}catch(Z){Et(n,n.return,Z)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,Tf(n,f,i!==null?i.memoizedProps:f)),c&1024&&(Sf=!0);break;case 6:if(Yn(r,n),Qn(n),c&4){if(n.stateNode===null)throw Error(a(162));c=n.memoizedProps,i=n.stateNode;try{i.nodeValue=c}catch(Z){Et(n,n.return,Z)}}break;case 3:if(Qu=null,f=_r,_r=$u(r.containerInfo),Yn(r,n),_r=f,Qn(n),c&4&&i!==null&&i.memoizedState.isDehydrated)try{Fl(r.containerInfo)}catch(Z){Et(n,n.return,Z)}Sf&&(Sf=!1,_0(n));break;case 4:c=_r,_r=$u(n.stateNode.containerInfo),Yn(r,n),Qn(n),_r=c;break;case 12:Yn(r,n),Qn(n);break;case 13:Yn(r,n),Qn(n),n.child.flags&8192&&n.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(jf=be()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,kf(n,c)));break;case 22:f=n.memoizedState!==null;var D=i!==null&&i.memoizedState!==null,K=_s,ne=Gt;if(_s=K||f,Gt=ne||D,Yn(r,n),Gt=ne,_s=K,Qn(n),c&8192)e:for(r=n.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(i===null||D||_s||Gt||ri(n)),i=null,r=n;;){if(r.tag===5||r.tag===26){if(i===null){D=i=r;try{if(g=D.stateNode,f)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=D.stateNode;var ie=D.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;E.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(Z){Et(D,D.return,Z)}}}else if(r.tag===6){if(i===null){D=r;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(Z){Et(D,D.return,Z)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=n.updateQueue,c!==null&&(i=c.retryQueue,i!==null&&(c.retryQueue=null,kf(n,i))));break;case 19:Yn(r,n),Qn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,kf(n,c)));break;case 30:break;case 21:break;default:Yn(r,n),Qn(n)}}function Qn(n){var r=n.flags;if(r&2){try{for(var i,c=n.return;c!==null;){if(d0(c)){i=c;break}c=c.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var f=i.stateNode,g=Ef(n);Mu(n,g,f);break;case 5:var b=i.stateNode;i.flags&32&&(er(b,""),i.flags&=-33);var E=Ef(n);Mu(n,E,b);break;case 3:case 4:var D=i.stateNode.containerInfo,K=Ef(n);wf(n,K,D);break;default:throw Error(a(161))}}catch(ne){Et(n,n.return,ne)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function _0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;_0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Zs(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)g0(n,r.alternate,r),r=r.sibling}function ri(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:Xs(4,r,r.return),ri(r);break;case 1:Br(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&u0(r,r.return,i),ri(r);break;case 27:Pl(r.stateNode);case 26:case 5:Br(r,r.return),ri(r);break;case 22:r.memoizedState===null&&ri(r);break;case 30:ri(r);break;default:ri(r)}n=n.sibling}}function Ws(n,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=n,g=r,b=g.flags;switch(g.tag){case 0:case 11:case 15:Ws(f,g,i),Al(4,g);break;case 1:if(Ws(f,g,i),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(K){Et(c,c.return,K)}if(c=g,f=c.updateQueue,f!==null){var E=c.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Qp(D[f],E)}catch(K){Et(c,c.return,K)}}i&&b&64&&c0(g),Nl(g,g.return);break;case 27:f0(g);case 26:case 5:Ws(f,g,i),i&&c===null&&b&4&&h0(g),Nl(g,g.return);break;case 12:Ws(f,g,i);break;case 13:Ws(f,g,i),i&&b&4&&v0(f,g);break;case 22:g.memoizedState===null&&Ws(f,g,i),Nl(g,g.return);break;case 30:break;default:Ws(f,g,i)}r=r.sibling}}function Af(n,r){var i=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(i=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==i&&(n!=null&&n.refCount++,i!=null&&fl(i))}function Nf(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&fl(n))}function qr(n,r,i,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)b0(n,r,i,c),r=r.sibling}function b0(n,r,i,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:qr(n,r,i,c),f&2048&&Al(9,r);break;case 1:qr(n,r,i,c);break;case 3:qr(n,r,i,c),f&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&fl(n)));break;case 12:if(f&2048){qr(n,r,i,c),n=r.stateNode;try{var g=r.memoizedProps,b=g.id,E=g.onPostCommit;typeof E=="function"&&E(b,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(D){Et(r,r.return,D)}}else qr(n,r,i,c);break;case 13:qr(n,r,i,c);break;case 23:break;case 22:g=r.stateNode,b=r.alternate,r.memoizedState!==null?g._visibility&2?qr(n,r,i,c):Rl(n,r):g._visibility&2?qr(n,r,i,c):(g._visibility|=2,to(n,r,i,c,(r.subtreeFlags&10256)!==0)),f&2048&&Af(b,r);break;case 24:qr(n,r,i,c),f&2048&&Nf(r.alternate,r);break;default:qr(n,r,i,c)}}function to(n,r,i,c,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=n,b=r,E=i,D=c,K=b.flags;switch(b.tag){case 0:case 11:case 15:to(g,b,E,D,f),Al(8,b);break;case 23:break;case 22:var ne=b.stateNode;b.memoizedState!==null?ne._visibility&2?to(g,b,E,D,f):Rl(g,b):(ne._visibility|=2,to(g,b,E,D,f)),f&&K&2048&&Af(b.alternate,b);break;case 24:to(g,b,E,D,f),f&&K&2048&&Nf(b.alternate,b);break;default:to(g,b,E,D,f)}r=r.sibling}}function Rl(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=n,c=r,f=c.flags;switch(c.tag){case 22:Rl(i,c),f&2048&&Af(c.alternate,c);break;case 24:Rl(i,c),f&2048&&Nf(c.alternate,c);break;default:Rl(i,c)}r=r.sibling}}var Cl=8192;function no(n){if(n.subtreeFlags&Cl)for(n=n.child;n!==null;)T0(n),n=n.sibling}function T0(n){switch(n.tag){case 26:no(n),n.flags&Cl&&n.memoizedState!==null&&$E(_r,n.memoizedState,n.memoizedProps);break;case 5:no(n);break;case 3:case 4:var r=_r;_r=$u(n.stateNode.containerInfo),no(n),_r=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=Cl,Cl=16777216,no(n),Cl=r):no(n));break;default:no(n)}}function E0(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Il(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];fn=c,S0(c,n)}E0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)w0(n),n=n.sibling}function w0(n){switch(n.tag){case 0:case 11:case 15:Il(n),n.flags&2048&&Xs(9,n,n.return);break;case 3:Il(n);break;case 12:Il(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Ou(n)):Il(n);break;default:Il(n)}}function Ou(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];fn=c,S0(c,n)}E0(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:Xs(8,r,r.return),Ou(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,Ou(r));break;default:Ou(r)}n=n.sibling}}function S0(n,r){for(;fn!==null;){var i=fn;switch(i.tag){case 0:case 11:case 15:Xs(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var c=i.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:fl(i.memoizedState.cache)}if(c=i.child,c!==null)c.return=i,fn=c;else e:for(i=n;fn!==null;){c=fn;var f=c.sibling,g=c.return;if(p0(c),c===i){fn=null;break e}if(f!==null){f.return=g,fn=f;break e}fn=g}}}var cE={getCacheForType:function(n){var r=kn(sn),i=r.data.get(n);return i===void 0&&(i=n(),r.data.set(n,i)),i}},uE=typeof WeakMap=="function"?WeakMap:Map,mt=0,At=null,Ge=null,tt=0,gt=0,Xn=null,Js=!1,ro=!1,Rf=!1,Ts=0,Ut=0,ea=0,si=0,Cf=0,cr=0,so=0,jl=null,Un=null,If=!1,jf=0,Vu=1/0,Pu=null,ta=null,xn=0,na=null,ao=null,io=0,Df=0,Mf=null,k0=null,Dl=0,Of=null;function Zn(){if((mt&2)!==0&&tt!==0)return tt&-tt;if(G.T!==null){var n=$i;return n!==0?n:qf()}return Ps()}function A0(){cr===0&&(cr=(tt&536870912)===0||lt?cn():536870912);var n=lr.current;return n!==null&&(n.flags|=32),cr}function Wn(n,r,i){(n===At&&(gt===2||gt===9)||n.cancelPendingCommit!==null)&&(oo(n,0),ra(n,tt,cr,!1)),yt(n,i),((mt&2)===0||n!==At)&&(n===At&&((mt&2)===0&&(si|=i),Ut===4&&ra(n,tt,cr,!1)),Hr(n))}function N0(n,r,i){if((mt&6)!==0)throw Error(a(327));var c=!i&&(r&124)===0&&(r&n.expiredLanes)===0||Tt(n,r),f=c?fE(n,r):Lf(n,r,!0),g=c;do{if(f===0){ro&&!c&&ra(n,r,0,!1);break}else{if(i=n.current.alternate,g&&!hE(i)){f=Lf(n,r,!1),g=!1;continue}if(f===2){if(g=r,n.errorRecoveryDisabledLanes&g)var b=0;else b=n.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;e:{var E=n;f=jl;var D=E.current.memoizedState.isDehydrated;if(D&&(oo(E,b).flags|=256),b=Lf(E,b,!1),b!==2){if(Rf&&!D){E.errorRecoveryDisabledLanes|=g,si|=g,f=4;break e}g=Un,Un=f,g!==null&&(Un===null?Un=g:Un.push.apply(Un,g))}f=b}if(g=!1,f!==2)continue}}if(f===1){oo(n,0),ra(n,r,0,!0);break}e:{switch(c=n,g=f,g){case 0:case 1:throw Error(a(345));case 4:if((r&4194048)!==r)break;case 6:ra(c,r,cr,!Js);break e;case 2:Un=null;break;case 3:case 5:break;default:throw Error(a(329))}if((r&62914560)===r&&(f=jf+300-be(),10<f)){if(ra(c,r,cr,!Js),$e(c,0,!0)!==0)break e;c.timeoutHandle=rv(R0.bind(null,c,i,Un,Pu,If,r,cr,si,so,Js,g,2,-0,0),f);break e}R0(c,i,Un,Pu,If,r,cr,si,so,Js,g,0,-0,0)}}break}while(!0);Hr(n)}function R0(n,r,i,c,f,g,b,E,D,K,ne,ie,Q,Z){if(n.timeoutHandle=-1,ie=r.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(Ul={stylesheets:null,count:0,unsuspend:KE},T0(r),ie=YE(),ie!==null)){n.cancelPendingCommit=ie(V0.bind(null,n,r,g,i,c,f,b,E,D,ne,1,Q,Z)),ra(n,g,b,!K);return}V0(n,r,g,i,c,f,b,E,D)}function hE(n){for(var r=n;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var c=0;c<i.length;c++){var f=i[c],g=f.getSnapshot;f=f.value;try{if(!Kn(g(),f))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function ra(n,r,i,c){r&=~Cf,r&=~si,n.suspendedLanes|=r,n.pingedLanes&=~r,c&&(n.warmLanes|=r),c=n.expirationTimes;for(var f=r;0<f;){var g=31-ln(f),b=1<<g;c[g]=-1,f&=~b}i!==0&&Sn(n,i,r)}function Lu(){return(mt&6)===0?(Ml(0),!1):!0}function Vf(){if(Ge!==null){if(gt===0)var n=Ge.return;else n=Ge,ms=Wa=null,Wd(n),Ji=null,wl=0,n=Ge;for(;n!==null;)l0(n.alternate,n),n=n.return;Ge=null}}function oo(n,r){var i=n.timeoutHandle;i!==-1&&(n.timeoutHandle=-1,RE(i)),i=n.cancelPendingCommit,i!==null&&(n.cancelPendingCommit=null,i()),Vf(),At=n,Ge=i=hs(n.current,null),tt=r,gt=0,Xn=null,Js=!1,ro=Tt(n,r),Rf=!1,so=cr=Cf=si=ea=Ut=0,Un=jl=null,If=!1,(r&8)!==0&&(r|=r&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=r;0<c;){var f=31-ln(c),g=1<<f;r|=n[f],c&=~g}return Ts=r,iu(),i}function C0(n,r){ze=null,G.H=Su,r===gl||r===gu?(r=$p(),gt=3):r===Gp?(r=$p(),gt=4):gt=r===Yy?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Xn=r,Ge===null&&(Ut=1,Cu(n,sr(r,n.current)))}function I0(){var n=G.H;return G.H=Su,n===null?Su:n}function j0(){var n=G.A;return G.A=cE,n}function Pf(){Ut=4,Js||(tt&4194048)!==tt&&lr.current!==null||(ro=!0),(ea&134217727)===0&&(si&134217727)===0||At===null||ra(At,tt,cr,!1)}function Lf(n,r,i){var c=mt;mt|=2;var f=I0(),g=j0();(At!==n||tt!==r)&&(Pu=null,oo(n,r)),r=!1;var b=Ut;e:do try{if(gt!==0&&Ge!==null){var E=Ge,D=Xn;switch(gt){case 8:Vf(),b=6;break e;case 3:case 2:case 9:case 6:lr.current===null&&(r=!0);var K=gt;if(gt=0,Xn=null,lo(n,E,D,K),i&&ro){b=0;break e}break;default:K=gt,gt=0,Xn=null,lo(n,E,D,K)}}dE(),b=Ut;break}catch(ne){C0(n,ne)}while(!0);return r&&n.shellSuspendCounter++,ms=Wa=null,mt=c,G.H=f,G.A=g,Ge===null&&(At=null,tt=0,iu()),b}function dE(){for(;Ge!==null;)D0(Ge)}function fE(n,r){var i=mt;mt|=2;var c=I0(),f=j0();At!==n||tt!==r?(Pu=null,Vu=be()+500,oo(n,r)):ro=Tt(n,r);e:do try{if(gt!==0&&Ge!==null){r=Ge;var g=Xn;t:switch(gt){case 1:gt=0,Xn=null,lo(n,r,g,1);break;case 2:case 9:if(Fp(g)){gt=0,Xn=null,M0(r);break}r=function(){gt!==2&&gt!==9||At!==n||(gt=7),Hr(n)},g.then(r,r);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:Fp(g)?(gt=0,Xn=null,M0(r)):(gt=0,Xn=null,lo(n,r,g,7));break;case 5:var b=null;switch(Ge.tag){case 26:b=Ge.memoizedState;case 5:case 27:var E=Ge;if(!b||gv(b)){gt=0,Xn=null;var D=E.sibling;if(D!==null)Ge=D;else{var K=E.return;K!==null?(Ge=K,zu(K)):Ge=null}break t}}gt=0,Xn=null,lo(n,r,g,5);break;case 6:gt=0,Xn=null,lo(n,r,g,6);break;case 8:Vf(),Ut=6;break e;default:throw Error(a(462))}}mE();break}catch(ne){C0(n,ne)}while(!0);return ms=Wa=null,G.H=c,G.A=f,mt=i,Ge!==null?0:(At=null,tt=0,iu(),Ut)}function mE(){for(;Ge!==null&&!Me();)D0(Ge)}function D0(n){var r=i0(n.alternate,n,Ts);n.memoizedProps=n.pendingProps,r===null?zu(n):Ge=r}function M0(n){var r=n,i=r.alternate;switch(r.tag){case 15:case 0:r=e0(i,r,r.pendingProps,r.type,void 0,tt);break;case 11:r=e0(i,r,r.pendingProps,r.type.render,r.ref,tt);break;case 5:Wd(r);default:l0(i,r),r=Ge=Op(r,Ts),r=i0(i,r,Ts)}n.memoizedProps=n.pendingProps,r===null?zu(n):Ge=r}function lo(n,r,i,c){ms=Wa=null,Wd(r),Ji=null,wl=0;var f=r.return;try{if(rE(n,f,r,i,tt)){Ut=1,Cu(n,sr(i,n.current)),Ge=null;return}}catch(g){if(f!==null)throw Ge=f,g;Ut=1,Cu(n,sr(i,n.current)),Ge=null;return}r.flags&32768?(lt||c===1?n=!0:ro||(tt&536870912)!==0?n=!1:(Js=n=!0,(c===2||c===9||c===3||c===6)&&(c=lr.current,c!==null&&c.tag===13&&(c.flags|=16384))),O0(r,n)):zu(r)}function zu(n){var r=n;do{if((r.flags&32768)!==0){O0(r,Js);return}n=r.return;var i=aE(r.alternate,r,Ts);if(i!==null){Ge=i;return}if(r=r.sibling,r!==null){Ge=r;return}Ge=r=n}while(r!==null);Ut===0&&(Ut=5)}function O0(n,r){do{var i=iE(n.alternate,n);if(i!==null){i.flags&=32767,Ge=i;return}if(i=n.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(n=n.sibling,n!==null)){Ge=n;return}Ge=n=i}while(n!==null);Ut=6,Ge=null}function V0(n,r,i,c,f,g,b,E,D){n.cancelPendingCommit=null;do Uu();while(xn!==0);if((mt&6)!==0)throw Error(a(327));if(r!==null){if(r===n.current)throw Error(a(177));if(g=r.lanes|r.childLanes,g|=Ad,Bt(n,i,g,b,E,D),n===At&&(Ge=At=null,tt=0),ao=r,na=n,io=i,Df=g,Mf=f,k0=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,vE(kt,function(){return B0(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=G.T,G.T=null,f=ae.p,ae.p=2,b=mt,mt|=4;try{oE(n,r,i)}finally{mt=b,ae.p=f,G.T=c}}xn=1,P0(),L0(),z0()}}function P0(){if(xn===1){xn=0;var n=na,r=ao,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=G.T,G.T=null;var c=ae.p;ae.p=2;var f=mt;mt|=4;try{x0(r,n);var g=Xf,b=Sp(n.containerInfo),E=g.focusedElem,D=g.selectionRange;if(b!==E&&E&&E.ownerDocument&&wp(E.ownerDocument.documentElement,E)){if(D!==null&&Td(E)){var K=D.start,ne=D.end;if(ne===void 0&&(ne=K),"selectionStart"in E)E.selectionStart=K,E.selectionEnd=Math.min(ne,E.value.length);else{var ie=E.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var Z=Q.getSelection(),Ie=E.textContent.length,Ae=Math.min(D.start,Ie),bt=D.end===void 0?Ae:Math.min(D.end,Ie);!Z.extend&&Ae>bt&&(b=bt,bt=Ae,Ae=b);var U=Ep(E,Ae),z=Ep(E,bt);if(U&&z&&(Z.rangeCount!==1||Z.anchorNode!==U.node||Z.anchorOffset!==U.offset||Z.focusNode!==z.node||Z.focusOffset!==z.offset)){var H=ie.createRange();H.setStart(U.node,U.offset),Z.removeAllRanges(),Ae>bt?(Z.addRange(H),Z.extend(z.node,z.offset)):(H.setEnd(z.node,z.offset),Z.addRange(H))}}}}for(ie=[],Z=E;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ie.length;E++){var se=ie[E];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Wu=!!Qf,Xf=Qf=null}finally{mt=f,ae.p=c,G.T=i}}n.current=r,xn=2}}function L0(){if(xn===2){xn=0;var n=na,r=ao,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=G.T,G.T=null;var c=ae.p;ae.p=2;var f=mt;mt|=4;try{g0(n,r.alternate,r)}finally{mt=f,ae.p=c,G.T=i}}xn=3}}function z0(){if(xn===4||xn===3){xn=0,ye();var n=na,r=ao,i=io,c=k0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?xn=5:(xn=0,ao=na=null,U0(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(ta=null),Si(i),r=r.stateNode,at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(It,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=G.T,f=ae.p,ae.p=2,G.T=null;try{for(var g=n.onRecoverableError,b=0;b<c.length;b++){var E=c[b];g(E.value,{componentStack:E.stack})}}finally{G.T=r,ae.p=f}}(io&3)!==0&&Uu(),Hr(n),f=n.pendingLanes,(i&4194090)!==0&&(f&42)!==0?n===Of?Dl++:(Dl=0,Of=n):Dl=0,Ml(0)}}function U0(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,fl(r)))}function Uu(n){return P0(),L0(),z0(),B0()}function B0(){if(xn!==5)return!1;var n=na,r=Df;Df=0;var i=Si(io),c=G.T,f=ae.p;try{ae.p=32>i?32:i,G.T=null,i=Mf,Mf=null;var g=na,b=io;if(xn=0,ao=na=null,io=0,(mt&6)!==0)throw Error(a(331));var E=mt;if(mt|=4,w0(g.current),b0(g,g.current,b,i),mt=E,Ml(0,!1),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(It,g)}catch{}return!0}finally{ae.p=f,G.T=c,U0(n,r)}}function q0(n,r,i){r=sr(i,r),r=ff(n.stateNode,r,2),n=Ks(n,r,2),n!==null&&(yt(n,2),Hr(n))}function Et(n,r,i){if(n.tag===3)q0(n,n,i);else for(;r!==null;){if(r.tag===3){q0(r,n,i);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ta===null||!ta.has(c))){n=sr(i,n),i=Ky(2),c=Ks(r,i,2),c!==null&&($y(i,c,r,n),yt(c,2),Hr(c));break}}r=r.return}}function zf(n,r,i){var c=n.pingCache;if(c===null){c=n.pingCache=new uE;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(i)||(Rf=!0,f.add(i),n=gE.bind(null,n,r,i),r.then(n,n))}function gE(n,r,i){var c=n.pingCache;c!==null&&c.delete(r),n.pingedLanes|=n.suspendedLanes&i,n.warmLanes&=~i,At===n&&(tt&i)===i&&(Ut===4||Ut===3&&(tt&62914560)===tt&&300>be()-jf?(mt&2)===0&&oo(n,0):Cf|=i,so===tt&&(so=0)),Hr(n)}function H0(n,r){r===0&&(r=ft()),n=Hi(n,r),n!==null&&(yt(n,r),Hr(n))}function pE(n){var r=n.memoizedState,i=0;r!==null&&(i=r.retryLane),H0(n,i)}function yE(n,r){var i=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(i=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(a(314))}c!==null&&c.delete(r),H0(n,i)}function vE(n,r){return en(n,r)}var Bu=null,co=null,Uf=!1,qu=!1,Bf=!1,ai=0;function Hr(n){n!==co&&n.next===null&&(co===null?Bu=co=n:co=co.next=n),qu=!0,Uf||(Uf=!0,_E())}function Ml(n,r){if(!Bf&&qu){Bf=!0;do for(var i=!1,c=Bu;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var b=c.suspendedLanes,E=c.pingedLanes;g=(1<<31-ln(42|n)+1)-1,g&=f&~(b&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(i=!0,$0(c,g))}else g=tt,g=$e(c,c===At?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Tt(c,g)||(i=!0,$0(c,g));c=c.next}while(i);Bf=!1}}function xE(){G0()}function G0(){qu=Uf=!1;var n=0;ai!==0&&(NE()&&(n=ai),ai=0);for(var r=be(),i=null,c=Bu;c!==null;){var f=c.next,g=F0(c,r);g===0?(c.next=null,i===null?Bu=f:i.next=f,f===null&&(co=i)):(i=c,(n!==0||(g&3)!==0)&&(qu=!0)),c=f}Ml(n)}function F0(n,r){for(var i=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var b=31-ln(g),E=1<<b,D=f[b];D===-1?((E&i)===0||(E&c)!==0)&&(f[b]=ot(E,r)):D<=r&&(n.expiredLanes|=E),g&=~E}if(r=At,i=tt,i=$e(n,n===r?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,i===0||n===r&&(gt===2||gt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Hn(c),n.callbackNode=null,n.callbackPriority=0;if((i&3)===0||Tt(n,i)){if(r=i&-i,r===n.callbackPriority)return r;switch(c!==null&&Hn(c),Si(i)){case 2:case 8:i=je;break;case 32:i=kt;break;case 268435456:i=ht;break;default:i=kt}return c=K0.bind(null,n),i=en(i,c),n.callbackPriority=r,n.callbackNode=i,r}return c!==null&&c!==null&&Hn(c),n.callbackPriority=2,n.callbackNode=null,2}function K0(n,r){if(xn!==0&&xn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var i=n.callbackNode;if(Uu()&&n.callbackNode!==i)return null;var c=tt;return c=$e(n,n===At?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(N0(n,c,r),F0(n,be()),n.callbackNode!=null&&n.callbackNode===i?K0.bind(null,n):null)}function $0(n,r){if(Uu())return null;N0(n,r,!0)}function _E(){CE(function(){(mt&6)!==0?en(Vt,xE):G0()})}function qf(){return ai===0&&(ai=cn()),ai}function Y0(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Ii(""+n)}function Q0(n,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,n.id&&i.setAttribute("form",n.id),r.parentNode.insertBefore(i,r),n=new FormData(n),i.parentNode.removeChild(i),n}function bE(n,r,i,c,f){if(r==="submit"&&i&&i.stateNode===f){var g=Y0((f[Kt]||null).action),b=c.submitter;b&&(r=(r=b[Kt]||null)?Y0(r.formAction):b.getAttribute("formAction"),r!==null&&(g=r,b=null));var E=new ji("action","action",null,c,f);n.push({event:E,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ai!==0){var D=b?Q0(f,b):new FormData(f);lf(i,{pending:!0,data:D,method:f.method,action:g},null,D)}}else typeof g=="function"&&(E.preventDefault(),D=b?Q0(f,b):new FormData(f),lf(i,{pending:!0,data:D,method:f.method,action:g},g,D))},currentTarget:f}]})}}for(var Hf=0;Hf<kd.length;Hf++){var Gf=kd[Hf],TE=Gf.toLowerCase(),EE=Gf[0].toUpperCase()+Gf.slice(1);xr(TE,"on"+EE)}xr(Np,"onAnimationEnd"),xr(Rp,"onAnimationIteration"),xr(Cp,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(UT,"onTransitionRun"),xr(BT,"onTransitionStart"),xr(qT,"onTransitionCancel"),xr(Ip,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ol));function X0(n,r){r=(r&4)!==0;for(var i=0;i<n.length;i++){var c=n[i],f=c.event;c=c.listeners;e:{var g=void 0;if(r)for(var b=c.length-1;0<=b;b--){var E=c[b],D=E.instance,K=E.currentTarget;if(E=E.listener,D!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=K;try{g(f)}catch(ne){Ru(ne)}f.currentTarget=null,g=D}else for(b=0;b<c.length;b++){if(E=c[b],D=E.instance,K=E.currentTarget,E=E.listener,D!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=K;try{g(f)}catch(ne){Ru(ne)}f.currentTarget=null,g=D}}}}function Fe(n,r){var i=r[Ko];i===void 0&&(i=r[Ko]=new Set);var c=n+"__bubble";i.has(c)||(Z0(r,n,2,!1),i.add(c))}function Ff(n,r,i){var c=0;r&&(c|=4),Z0(i,n,c,r)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function Kf(n){if(!n[Hu]){n[Hu]=!0,$o.forEach(function(i){i!=="selectionchange"&&(wE.has(i)||Ff(i,!1,n),Ff(i,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Hu]||(r[Hu]=!0,Ff("selectionchange",!1,r))}}function Z0(n,r,i,c){switch(bv(r)){case 2:var f=ZE;break;case 8:f=WE;break;default:f=im}i=f.bind(null,r,i,n),f=void 0,!nr||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(r,i,{capture:!0,passive:f}):n.addEventListener(r,i,!0):f!==void 0?n.addEventListener(r,i,{passive:f}):n.addEventListener(r,i,!1)}function $f(n,r,i,c,f){var g=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var E=c.stateNode.containerInfo;if(E===f)break;if(b===4)for(b=c.return;b!==null;){var D=b.tag;if((D===3||D===4)&&b.stateNode.containerInfo===f)return;b=b.return}for(;E!==null;){if(b=ts(E),b===null)return;if(D=b.tag,D===5||D===6||D===26||D===27){c=g=b;continue e}E=E.parentNode}}c=c.return}Fc(function(){var K=g,ne=tr(i),ie=[];e:{var Q=jp.get(n);if(Q!==void 0){var Z=ji,Ie=n;switch(n){case"keypress":if(Mr(i)===0)break e;case"keydown":case"keyup":Z=Li;break;case"focusin":Ie="focus",Z=Oi;break;case"focusout":Ie="blur",Z=Oi;break;case"beforeblur":case"afterblur":Z=Oi;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=Jc;break;case Np:case Rp:case Cp:Z=Vi;break;case Ip:Z=tu;break;case"scroll":case"scrollend":Z=Kc;break;case"wheel":Z=zi;break;case"copy":case"cut":case"paste":Z=Pi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=al;break;case"toggle":case"beforetoggle":Z=ru}var Ae=(r&4)!==0,bt=!Ae&&(n==="scroll"||n==="scrollend"),U=Ae?Q!==null?Q+"Capture":null:Q;Ae=[];for(var z=K,H;z!==null;){var se=z;if(H=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||H===null||U===null||(se=La(z,U),se!=null&&Ae.push(Vl(z,se,H))),bt)break;z=z.return}0<Ae.length&&(Q=new Z(Q,Ie,null,i,ne),ie.push({event:Q,listeners:Ae}))}}if((r&7)===0){e:{if(Q=n==="mouseover"||n==="pointerover",Z=n==="mouseout"||n==="pointerout",Q&&i!==as&&(Ie=i.relatedTarget||i.fromElement)&&(ts(Ie)||Ie[Jn]))break e;if((Z||Q)&&(Q=ne.window===ne?ne:(Q=ne.ownerDocument)?Q.defaultView||Q.parentWindow:window,Z?(Ie=i.relatedTarget||i.toElement,Z=K,Ie=Ie?ts(Ie):null,Ie!==null&&(bt=l(Ie),Ae=Ie.tag,Ie!==bt||Ae!==5&&Ae!==27&&Ae!==6)&&(Ie=null)):(Z=null,Ie=K),Z!==Ie)){if(Ae=rr,se="onMouseLeave",U="onMouseEnter",z="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=al,se="onPointerLeave",U="onPointerEnter",z="pointer"),bt=Z==null?Q:Cr(Z),H=Ie==null?Q:Cr(Ie),Q=new Ae(se,z+"leave",Z,i,ne),Q.target=bt,Q.relatedTarget=H,se=null,ts(ne)===K&&(Ae=new Ae(U,z+"enter",Ie,i,ne),Ae.target=H,Ae.relatedTarget=bt,se=Ae),bt=se,Z&&Ie)t:{for(Ae=Z,U=Ie,z=0,H=Ae;H;H=uo(H))z++;for(H=0,se=U;se;se=uo(se))H++;for(;0<z-H;)Ae=uo(Ae),z--;for(;0<H-z;)U=uo(U),H--;for(;z--;){if(Ae===U||U!==null&&Ae===U.alternate)break t;Ae=uo(Ae),U=uo(U)}Ae=null}else Ae=null;Z!==null&&W0(ie,Q,Z,Ae,!1),Ie!==null&&bt!==null&&W0(ie,bt,Ie,Ae,!0)}}e:{if(Q=K?Cr(K):window,Z=Q.nodeName&&Q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&Q.type==="file")var Ee=yp;else if(rn(Q))if(vp)Ee=PT;else{Ee=OT;var qe=MT}else Z=Q.nodeName,!Z||Z.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&Wo(K.elementType)&&(Ee=yp):Ee=VT;if(Ee&&(Ee=Ee(n,K))){us(ie,Ee,i,ne);break e}qe&&qe(n,Q,K),n==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Bs(Q,"number",Q.value)}switch(qe=K?Cr(K):window,n){case"focusin":(rn(qe)||qe.contentEditable==="true")&&(Ui=qe,Ed=K,ll=null);break;case"focusout":ll=Ed=Ui=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,kp(ie,i,ne);break;case"selectionchange":if(zT)break;case"keydown":case"keyup":kp(ie,i,ne)}var Se;if(Pr)e:{switch(n){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else Je?ee(n,i)&&(Ne="onCompositionEnd"):n==="keydown"&&i.keyCode===229&&(Ne="onCompositionStart");Ne&&(_&&i.locale!=="ko"&&(Je||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&Je&&(Se=el()):(Dr=ne,qs="value"in Dr?Dr.value:Dr.textContent,Je=!0)),qe=Gu(K,Ne),0<qe.length&&(Ne=new rl(Ne,n,null,i,ne),ie.push({event:Ne,listeners:qe}),Se?Ne.data=Se:(Se=me(i),Se!==null&&(Ne.data=Se)))),(Se=v?nn(n,i):et(n,i))&&(Ne=Gu(K,"onBeforeInput"),0<Ne.length&&(qe=new rl("onBeforeInput","beforeinput",null,i,ne),ie.push({event:qe,listeners:Ne}),qe.data=Se)),bE(ie,n,K,i,ne)}X0(ie,r)})}function Vl(n,r,i){return{instance:n,listener:r,currentTarget:i}}function Gu(n,r){for(var i=r+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=La(n,i),f!=null&&c.unshift(Vl(n,f,g)),f=La(n,r),f!=null&&c.push(Vl(n,f,g))),n.tag===3)return c;n=n.return}return[]}function uo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function W0(n,r,i,c,f){for(var g=r._reactName,b=[];i!==null&&i!==c;){var E=i,D=E.alternate,K=E.stateNode;if(E=E.tag,D!==null&&D===c)break;E!==5&&E!==26&&E!==27||K===null||(D=K,f?(K=La(i,g),K!=null&&b.unshift(Vl(i,K,D))):f||(K=La(i,g),K!=null&&b.push(Vl(i,K,D)))),i=i.return}b.length!==0&&n.push({event:r,listeners:b})}var SE=/\r\n?/g,kE=/\u0000|\uFFFD/g;function J0(n){return(typeof n=="string"?n:""+n).replace(SE,`
`).replace(kE,"")}function ev(n,r){return r=J0(r),J0(n)===r}function Fu(){}function _t(n,r,i,c,f,g){switch(i){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||er(n,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&er(n,""+c);break;case"className":Ir(n,"class",c);break;case"tabIndex":Ir(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ir(n,i,c);break;case"style":Zo(n,c,g);break;case"data":if(r!=="object"){Ir(n,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||i!=="href")){n.removeAttribute(i);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(i);break}c=Ii(""+c),n.setAttribute(i,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(i==="formAction"?(r!=="input"&&_t(n,r,"name",f.name,f,null),_t(n,r,"formEncType",f.formEncType,f,null),_t(n,r,"formMethod",f.formMethod,f,null),_t(n,r,"formTarget",f.formTarget,f,null)):(_t(n,r,"encType",f.encType,f,null),_t(n,r,"method",f.method,f,null),_t(n,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(i);break}c=Ii(""+c),n.setAttribute(i,c);break;case"onClick":c!=null&&(n.onclick=Fu);break;case"onScroll":c!=null&&Fe("scroll",n);break;case"onScrollEnd":c!=null&&Fe("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=i}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}i=Ii(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(i,""+c):n.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(i,""):n.removeAttribute(i);break;case"capture":case"download":c===!0?n.setAttribute(i,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(i,c):n.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(i,c):n.removeAttribute(i);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(i):n.setAttribute(i,c);break;case"popover":Fe("beforetoggle",n),Fe("toggle",n),Us(n,"popover",c);break;case"xlinkActuate":pn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":pn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":pn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":pn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":pn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":pn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":pn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":pn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":pn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Us(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=pd.get(i)||i,Us(n,i,c))}}function Yf(n,r,i,c,f,g){switch(i){case"style":Zo(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(a(61));if(i=c.__html,i!=null){if(f.children!=null)throw Error(a(60));n.innerHTML=i}}break;case"children":typeof c=="string"?er(n,c):(typeof c=="number"||typeof c=="bigint")&&er(n,""+c);break;case"onScroll":c!=null&&Fe("scroll",n);break;case"onScrollEnd":c!=null&&Fe("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ki.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(f=i.endsWith("Capture"),r=i.slice(2,f?i.length-7:void 0),g=n[Kt]||null,g=g!=null?g[i]:null,typeof g=="function"&&n.removeEventListener(r,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(i in n?n[i]=null:n.hasAttribute(i)&&n.removeAttribute(i)),n.addEventListener(r,c,f);break e}i in n?n[i]=c:c===!0?n.setAttribute(i,""):Us(n,i,c)}}}function _n(n,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",n),Fe("load",n);var c=!1,f=!1,g;for(g in i)if(i.hasOwnProperty(g)){var b=i[g];if(b!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:_t(n,r,g,b,i,null)}}f&&_t(n,r,"srcSet",i.srcSet,i,null),c&&_t(n,r,"src",i.src,i,null);return;case"input":Fe("invalid",n);var E=g=b=f=null,D=null,K=null;for(c in i)if(i.hasOwnProperty(c)){var ne=i[c];if(ne!=null)switch(c){case"name":f=ne;break;case"type":b=ne;break;case"checked":D=ne;break;case"defaultChecked":K=ne;break;case"value":g=ne;break;case"defaultValue":E=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,r));break;default:_t(n,r,c,ne,i,null)}}Oa(n,g,E,D,K,b,f,!1),Ci(n);return;case"select":Fe("invalid",n),c=b=g=null;for(f in i)if(i.hasOwnProperty(f)&&(E=i[f],E!=null))switch(f){case"value":g=E;break;case"defaultValue":b=E;break;case"multiple":c=E;default:_t(n,r,f,E,i,null)}r=g,i=b,n.multiple=!!c,r!=null?ss(n,!!c,r,!1):i!=null&&ss(n,!!c,i,!0);return;case"textarea":Fe("invalid",n),g=f=c=null;for(b in i)if(i.hasOwnProperty(b)&&(E=i[b],E!=null))switch(b){case"value":c=E;break;case"defaultValue":f=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(a(91));break;default:_t(n,r,b,E,i,null)}Va(n,c,f,g),Ci(n);return;case"option":for(D in i)if(i.hasOwnProperty(D)&&(c=i[D],c!=null))switch(D){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:_t(n,r,D,c,i,null)}return;case"dialog":Fe("beforetoggle",n),Fe("toggle",n),Fe("cancel",n),Fe("close",n);break;case"iframe":case"object":Fe("load",n);break;case"video":case"audio":for(c=0;c<Ol.length;c++)Fe(Ol[c],n);break;case"image":Fe("error",n),Fe("load",n);break;case"details":Fe("toggle",n);break;case"embed":case"source":case"link":Fe("error",n),Fe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in i)if(i.hasOwnProperty(K)&&(c=i[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,r));default:_t(n,r,K,c,i,null)}return;default:if(Wo(r)){for(ne in i)i.hasOwnProperty(ne)&&(c=i[ne],c!==void 0&&Yf(n,r,ne,c,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(c=i[E],c!=null&&_t(n,r,E,c,i,null))}function AE(n,r,i,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,b=null,E=null,D=null,K=null,ne=null;for(Z in i){var ie=i[Z];if(i.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":D=ie;default:c.hasOwnProperty(Z)||_t(n,r,Z,null,c,ie)}}for(var Q in c){var Z=c[Q];if(ie=i[Q],c.hasOwnProperty(Q)&&(Z!=null||ie!=null))switch(Q){case"type":g=Z;break;case"name":f=Z;break;case"checked":K=Z;break;case"defaultChecked":ne=Z;break;case"value":b=Z;break;case"defaultValue":E=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,r));break;default:Z!==ie&&_t(n,r,Q,Z,c,ie)}}Fn(n,b,E,D,K,ne,g,f);return;case"select":Z=b=E=Q=null;for(g in i)if(D=i[g],i.hasOwnProperty(g)&&D!=null)switch(g){case"value":break;case"multiple":Z=D;default:c.hasOwnProperty(g)||_t(n,r,g,null,c,D)}for(f in c)if(g=c[f],D=i[f],c.hasOwnProperty(f)&&(g!=null||D!=null))switch(f){case"value":Q=g;break;case"defaultValue":E=g;break;case"multiple":b=g;default:g!==D&&_t(n,r,f,g,c,D)}r=E,i=b,c=Z,Q!=null?ss(n,!!i,Q,!1):!!c!=!!i&&(r!=null?ss(n,!!i,r,!0):ss(n,!!i,i?[]:"",!1));return;case"textarea":Z=Q=null;for(E in i)if(f=i[E],i.hasOwnProperty(E)&&f!=null&&!c.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:_t(n,r,E,null,c,f)}for(b in c)if(f=c[b],g=i[b],c.hasOwnProperty(b)&&(f!=null||g!=null))switch(b){case"value":Q=f;break;case"defaultValue":Z=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==g&&_t(n,r,b,f,c,g)}vt(n,Q,Z);return;case"option":for(var Ie in i)if(Q=i[Ie],i.hasOwnProperty(Ie)&&Q!=null&&!c.hasOwnProperty(Ie))switch(Ie){case"selected":n.selected=!1;break;default:_t(n,r,Ie,null,c,Q)}for(D in c)if(Q=c[D],Z=i[D],c.hasOwnProperty(D)&&Q!==Z&&(Q!=null||Z!=null))switch(D){case"selected":n.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:_t(n,r,D,Q,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in i)Q=i[Ae],i.hasOwnProperty(Ae)&&Q!=null&&!c.hasOwnProperty(Ae)&&_t(n,r,Ae,null,c,Q);for(K in c)if(Q=c[K],Z=i[K],c.hasOwnProperty(K)&&Q!==Z&&(Q!=null||Z!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(a(137,r));break;default:_t(n,r,K,Q,c,Z)}return;default:if(Wo(r)){for(var bt in i)Q=i[bt],i.hasOwnProperty(bt)&&Q!==void 0&&!c.hasOwnProperty(bt)&&Yf(n,r,bt,void 0,c,Q);for(ne in c)Q=c[ne],Z=i[ne],!c.hasOwnProperty(ne)||Q===Z||Q===void 0&&Z===void 0||Yf(n,r,ne,Q,c,Z);return}}for(var U in i)Q=i[U],i.hasOwnProperty(U)&&Q!=null&&!c.hasOwnProperty(U)&&_t(n,r,U,null,c,Q);for(ie in c)Q=c[ie],Z=i[ie],!c.hasOwnProperty(ie)||Q===Z||Q==null&&Z==null||_t(n,r,ie,Q,c,Z)}var Qf=null,Xf=null;function Ku(n){return n.nodeType===9?n:n.ownerDocument}function tv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function nv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Zf(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Wf=null;function NE(){var n=window.event;return n&&n.type==="popstate"?n===Wf?!1:(Wf=n,!0):(Wf=null,!1)}var rv=typeof setTimeout=="function"?setTimeout:void 0,RE=typeof clearTimeout=="function"?clearTimeout:void 0,sv=typeof Promise=="function"?Promise:void 0,CE=typeof queueMicrotask=="function"?queueMicrotask:typeof sv<"u"?function(n){return sv.resolve(null).then(n).catch(IE)}:rv;function IE(n){setTimeout(function(){throw n})}function sa(n){return n==="head"}function av(n,r){var i=r,c=0,f=0;do{var g=i.nextSibling;if(n.removeChild(i),g&&g.nodeType===8)if(i=g.data,i==="/$"){if(0<c&&8>c){i=c;var b=n.ownerDocument;if(i&1&&Pl(b.documentElement),i&2&&Pl(b.body),i&4)for(i=b.head,Pl(i),b=i.firstChild;b;){var E=b.nextSibling,D=b.nodeName;b[Ia]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&b.rel.toLowerCase()==="stylesheet"||i.removeChild(b),b=E}}if(f===0){n.removeChild(g),Fl(r);return}f--}else i==="$"||i==="$?"||i==="$!"?f++:c=i.charCodeAt(0)-48;else c=0;i=g}while(i);Fl(r)}function Jf(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Jf(i),zs(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}n.removeChild(i)}}function jE(n,r,i,c){for(;n.nodeType===1;){var f=i;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Ia])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=br(n.nextSibling),n===null)break}return null}function DE(n,r,i){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=br(n.nextSibling),n===null))return null;return n}function em(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function ME(n,r){var i=n.ownerDocument;if(n.data!=="$?"||i.readyState==="complete")r();else{var c=function(){r(),i.removeEventListener("DOMContentLoaded",c)};i.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function br(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var tm=null;function iv(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var i=n.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return n;r--}else i==="/$"&&r++}n=n.previousSibling}return null}function ov(n,r,i){switch(r=Ku(i),n){case"html":if(n=r.documentElement,!n)throw Error(a(452));return n;case"head":if(n=r.head,!n)throw Error(a(453));return n;case"body":if(n=r.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Pl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);zs(n)}var ur=new Map,lv=new Set;function $u(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Es=ae.d;ae.d={f:OE,r:VE,D:PE,C:LE,L:zE,m:UE,X:qE,S:BE,M:HE};function OE(){var n=Es.f(),r=Lu();return n||r}function VE(n){var r=Rr(n);r!==null&&r.tag===5&&r.type==="form"?Ny(r):Es.r(n)}var ho=typeof document>"u"?null:document;function cv(n,r,i){var c=ho;if(c&&typeof r=="string"&&r){var f=$t(r);f='link[rel="'+n+'"][href="'+f+'"]',typeof i=="string"&&(f+='[crossorigin="'+i+'"]'),lv.has(f)||(lv.add(f),n={rel:n,crossOrigin:i,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),_n(r,"link",n),qt(r),c.head.appendChild(r)))}}function PE(n){Es.D(n),cv("dns-prefetch",n,null)}function LE(n,r){Es.C(n,r),cv("preconnect",n,r)}function zE(n,r,i){Es.L(n,r,i);var c=ho;if(c&&n&&r){var f='link[rel="preload"][as="'+$t(r)+'"]';r==="image"&&i&&i.imageSrcSet?(f+='[imagesrcset="'+$t(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(f+='[imagesizes="'+$t(i.imageSizes)+'"]')):f+='[href="'+$t(n)+'"]';var g=f;switch(r){case"style":g=fo(n);break;case"script":g=mo(n)}ur.has(g)||(n=x({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:n,as:r},i),ur.set(g,n),c.querySelector(f)!==null||r==="style"&&c.querySelector(Ll(g))||r==="script"&&c.querySelector(zl(g))||(r=c.createElement("link"),_n(r,"link",n),qt(r),c.head.appendChild(r)))}}function UE(n,r){Es.m(n,r);var i=ho;if(i&&n){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+$t(c)+'"][href="'+$t(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=mo(n)}if(!ur.has(g)&&(n=x({rel:"modulepreload",href:n},r),ur.set(g,n),i.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(zl(g)))return}c=i.createElement("link"),_n(c,"link",n),qt(c),i.head.appendChild(c)}}}function BE(n,r,i){Es.S(n,r,i);var c=ho;if(c&&n){var f=jn(c).hoistableStyles,g=fo(n);r=r||"default";var b=f.get(g);if(!b){var E={loading:0,preload:null};if(b=c.querySelector(Ll(g)))E.loading=5;else{n=x({rel:"stylesheet",href:n,"data-precedence":r},i),(i=ur.get(g))&&nm(n,i);var D=b=c.createElement("link");qt(D),_n(D,"link",n),D._p=new Promise(function(K,ne){D.onload=K,D.onerror=ne}),D.addEventListener("load",function(){E.loading|=1}),D.addEventListener("error",function(){E.loading|=2}),E.loading|=4,Yu(b,r,c)}b={type:"stylesheet",instance:b,count:1,state:E},f.set(g,b)}}}function qE(n,r){Es.X(n,r);var i=ho;if(i&&n){var c=jn(i).hoistableScripts,f=mo(n),g=c.get(f);g||(g=i.querySelector(zl(f)),g||(n=x({src:n,async:!0},r),(r=ur.get(f))&&rm(n,r),g=i.createElement("script"),qt(g),_n(g,"link",n),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function HE(n,r){Es.M(n,r);var i=ho;if(i&&n){var c=jn(i).hoistableScripts,f=mo(n),g=c.get(f);g||(g=i.querySelector(zl(f)),g||(n=x({src:n,async:!0,type:"module"},r),(r=ur.get(f))&&rm(n,r),g=i.createElement("script"),qt(g),_n(g,"link",n),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function uv(n,r,i,c){var f=(f=pe.current)?$u(f):null;if(!f)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=fo(i.href),i=jn(f).hoistableStyles,c=i.get(r),c||(c={type:"style",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){n=fo(i.href);var g=jn(f).hoistableStyles,b=g.get(n);if(b||(f=f.ownerDocument||f,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,b),(g=f.querySelector(Ll(n)))&&!g._p&&(b.instance=g,b.state.loading=5),ur.has(n)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ur.set(n,i),g||GE(f,n,i,b.state))),r&&c===null)throw Error(a(528,""));return b}if(r&&c!==null)throw Error(a(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=mo(i),i=jn(f).hoistableScripts,c=i.get(r),c||(c={type:"script",instance:null,count:0,state:null},i.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function fo(n){return'href="'+$t(n)+'"'}function Ll(n){return'link[rel="stylesheet"]['+n+"]"}function hv(n){return x({},n,{"data-precedence":n.precedence,precedence:null})}function GE(n,r,i,c){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=n.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),_n(r,"link",i),qt(r),n.head.appendChild(r))}function mo(n){return'[src="'+$t(n)+'"]'}function zl(n){return"script[async]"+n}function dv(n,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var c=n.querySelector('style[data-href~="'+$t(i.href)+'"]');if(c)return r.instance=c,qt(c),c;var f=x({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),qt(c),_n(c,"style",f),Yu(c,i.precedence,n),r.instance=c;case"stylesheet":f=fo(i.href);var g=n.querySelector(Ll(f));if(g)return r.state.loading|=4,r.instance=g,qt(g),g;c=hv(i),(f=ur.get(f))&&nm(c,f),g=(n.ownerDocument||n).createElement("link"),qt(g);var b=g;return b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),_n(g,"link",c),r.state.loading|=4,Yu(g,i.precedence,n),r.instance=g;case"script":return g=mo(i.src),(f=n.querySelector(zl(g)))?(r.instance=f,qt(f),f):(c=i,(f=ur.get(g))&&(c=x({},i),rm(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),qt(f),_n(f,"link",c),n.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(a(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Yu(c,i.precedence,n));return r.instance}function Yu(n,r,i){for(var c=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,b=0;b<c.length;b++){var E=c[b];if(E.dataset.precedence===r)g=E;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(n,r.firstChild))}function nm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function rm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var Qu=null;function fv(n,r,i){if(Qu===null){var c=new Map,f=Qu=new Map;f.set(i,c)}else f=Qu,c=f.get(i),c||(c=new Map,f.set(i,c));if(c.has(n))return c;for(c.set(n,null),i=i.getElementsByTagName(n),f=0;f<i.length;f++){var g=i[f];if(!(g[Ia]||g[tn]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(r)||"";b=n+b;var E=c.get(b);E?E.push(g):c.set(b,[g])}}return c}function mv(n,r,i){n=n.ownerDocument||n,n.head.insertBefore(i,r==="title"?n.querySelector("head > title"):null)}function FE(n,r,i){if(i===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function gv(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var Ul=null;function KE(){}function $E(n,r,i){if(Ul===null)throw Error(a(475));var c=Ul;if(r.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=fo(i.href),g=n.querySelector(Ll(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(c.count++,c=Xu.bind(c),n.then(c,c)),r.state.loading|=4,r.instance=g,qt(g);return}g=n.ownerDocument||n,i=hv(i),(f=ur.get(f))&&nm(i,f),g=g.createElement("link"),qt(g);var b=g;b._p=new Promise(function(E,D){b.onload=E,b.onerror=D}),_n(g,"link",i),r.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=Xu.bind(c),n.addEventListener("load",r),n.addEventListener("error",r))}}function YE(){if(Ul===null)throw Error(a(475));var n=Ul;return n.stylesheets&&n.count===0&&sm(n,n.stylesheets),0<n.count?function(r){var i=setTimeout(function(){if(n.stylesheets&&sm(n,n.stylesheets),n.unsuspend){var c=n.unsuspend;n.unsuspend=null,c()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(i)}}:null}function Xu(){if(this.count--,this.count===0){if(this.stylesheets)sm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Zu=null;function sm(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Zu=new Map,r.forEach(QE,n),Zu=null,Xu.call(n))}function QE(n,r){if(!(r.state.loading&4)){var i=Zu.get(n);if(i)var c=i.get(null);else{i=new Map,Zu.set(n,i);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var b=f[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),c=b)}c&&i.set(null,c)}f=r.instance,b=f.getAttribute("data-precedence"),g=i.get(b)||c,g===c&&i.set(null,f),i.set(b,f),this.count++,c=Xu.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),r.state.loading|=4}}var Bl={$$typeof:he,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function XE(n,r,i,c,f,g,b,E){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gn(0),this.hiddenUpdates=Gn(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function pv(n,r,i,c,f,g,b,E,D,K,ne,ie){return n=new XE(n,r,i,b,E,D,K,ie),r=1,g===!0&&(r|=24),g=$n(3,null,null,r),n.current=g,g.stateNode=n,r=Ld(),r.refCount++,n.pooledCache=r,r.refCount++,g.memoizedState={element:c,isDehydrated:i,cache:r},qd(g),n}function yv(n){return n?(n=Gi,n):Gi}function vv(n,r,i,c,f,g){f=yv(f),c.context===null?c.context=f:c.pendingContext=f,c=Fs(r),c.payload={element:i},g=g===void 0?null:g,g!==null&&(c.callback=g),i=Ks(n,c,r),i!==null&&(Wn(i,n,r),yl(i,n,r))}function xv(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var i=n.retryLane;n.retryLane=i!==0&&i<r?i:r}}function am(n,r){xv(n,r),(n=n.alternate)&&xv(n,r)}function _v(n){if(n.tag===13){var r=Hi(n,67108864);r!==null&&Wn(r,n,67108864),am(n,67108864)}}var Wu=!0;function ZE(n,r,i,c){var f=G.T;G.T=null;var g=ae.p;try{ae.p=2,im(n,r,i,c)}finally{ae.p=g,G.T=f}}function WE(n,r,i,c){var f=G.T;G.T=null;var g=ae.p;try{ae.p=8,im(n,r,i,c)}finally{ae.p=g,G.T=f}}function im(n,r,i,c){if(Wu){var f=om(c);if(f===null)$f(n,r,c,Ju,i),Tv(n,c);else if(ew(f,n,r,i,c))c.stopPropagation();else if(Tv(n,c),r&4&&-1<JE.indexOf(n)){for(;f!==null;){var g=Rr(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=jt(g.pendingLanes);if(b!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var D=1<<31-ln(b);E.entanglements[1]|=D,b&=~D}Hr(g),(mt&6)===0&&(Vu=be()+500,Ml(0))}}break;case 13:E=Hi(g,2),E!==null&&Wn(E,g,2),Lu(),am(g,2)}if(g=om(c),g===null&&$f(n,r,c,Ju,i),g===f)break;f=g}f!==null&&c.stopPropagation()}else $f(n,r,c,null,i)}}function om(n){return n=tr(n),lm(n)}var Ju=null;function lm(n){if(Ju=null,n=ts(n),n!==null){var r=l(n);if(r===null)n=null;else{var i=r.tag;if(i===13){if(n=d(r),n!==null)return n;n=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return Ju=n,null}function bv(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(st()){case Vt:return 2;case je:return 8;case kt:case He:return 32;case ht:return 268435456;default:return 32}default:return 32}}var cm=!1,aa=null,ia=null,oa=null,ql=new Map,Hl=new Map,la=[],JE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tv(n,r){switch(n){case"focusin":case"focusout":aa=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":ql.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(r.pointerId)}}function Gl(n,r,i,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:i,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},r!==null&&(r=Rr(r),r!==null&&_v(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),n)}function ew(n,r,i,c,f){switch(r){case"focusin":return aa=Gl(aa,n,r,i,c,f),!0;case"dragenter":return ia=Gl(ia,n,r,i,c,f),!0;case"mouseover":return oa=Gl(oa,n,r,i,c,f),!0;case"pointerover":var g=f.pointerId;return ql.set(g,Gl(ql.get(g)||null,n,r,i,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Hl.set(g,Gl(Hl.get(g)||null,n,r,i,c,f)),!0}return!1}function Ev(n){var r=ts(n.target);if(r!==null){var i=l(r);if(i!==null){if(r=i.tag,r===13){if(r=d(i),r!==null){n.blockedOn=r,Lc(n.priority,function(){if(i.tag===13){var c=Zn();c=Vs(c);var f=Hi(i,c);f!==null&&Wn(f,i,c),am(i,c)}});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){n.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}n.blockedOn=null}function eh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var i=om(n.nativeEvent);if(i===null){i=n.nativeEvent;var c=new i.constructor(i.type,i);as=c,i.target.dispatchEvent(c),as=null}else return r=Rr(i),r!==null&&_v(r),n.blockedOn=i,!1;r.shift()}return!0}function wv(n,r,i){eh(n)&&i.delete(r)}function tw(){cm=!1,aa!==null&&eh(aa)&&(aa=null),ia!==null&&eh(ia)&&(ia=null),oa!==null&&eh(oa)&&(oa=null),ql.forEach(wv),Hl.forEach(wv)}function th(n,r){n.blockedOn===r&&(n.blockedOn=null,cm||(cm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,tw)))}var nh=null;function Sv(n){nh!==n&&(nh=n,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){nh===n&&(nh=null);for(var r=0;r<n.length;r+=3){var i=n[r],c=n[r+1],f=n[r+2];if(typeof c!="function"){if(lm(c||i)===null)continue;break}var g=Rr(i);g!==null&&(n.splice(r,3),r-=3,lf(g,{pending:!0,data:f,method:i.method,action:c},c,f))}}))}function Fl(n){function r(D){return th(D,n)}aa!==null&&th(aa,n),ia!==null&&th(ia,n),oa!==null&&th(oa,n),ql.forEach(r),Hl.forEach(r);for(var i=0;i<la.length;i++){var c=la[i];c.blockedOn===n&&(c.blockedOn=null)}for(;0<la.length&&(i=la[0],i.blockedOn===null);)Ev(i),i.blockedOn===null&&la.shift();if(i=(n.ownerDocument||n).$$reactFormReplay,i!=null)for(c=0;c<i.length;c+=3){var f=i[c],g=i[c+1],b=f[Kt]||null;if(typeof g=="function")b||Sv(i);else if(b){var E=null;if(g&&g.hasAttribute("formAction")){if(f=g,b=g[Kt]||null)E=b.formAction;else if(lm(f)!==null)continue}else E=b.action;typeof E=="function"?i[c+1]=E:(i.splice(c,3),c-=3),Sv(i)}}}function um(n){this._internalRoot=n}rh.prototype.render=um.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(a(409));var i=r.current,c=Zn();vv(i,c,n,r,null,null)},rh.prototype.unmount=um.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;vv(n.current,2,null,n,null,null),Lu(),r[Jn]=null}};function rh(n){this._internalRoot=n}rh.prototype.unstable_scheduleHydration=function(n){if(n){var r=Ps();n={blockedOn:null,target:n,priority:r};for(var i=0;i<la.length&&r!==0&&r<la[i].priority;i++);la.splice(i,0,n),i===0&&Ev(n)}};var kv=e.version;if(kv!=="19.1.1")throw Error(a(527,kv,"19.1.1"));ae.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=p(r),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var nw={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sh.isDisabled&&sh.supportsFiber)try{It=sh.inject(nw),at=sh}catch{}}return $l.createRoot=function(n,r){if(!o(n))throw Error(a(299));var i=!1,c="",f=qy,g=Hy,b=Gy,E=null;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(E=r.unstable_transitionCallbacks)),r=pv(n,1,!1,null,null,i,c,f,g,b,E,null),n[Jn]=r.current,Kf(n),new um(r)},$l.hydrateRoot=function(n,r,i){if(!o(n))throw Error(a(299));var c=!1,f="",g=qy,b=Hy,E=Gy,D=null,K=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(D=i.unstable_transitionCallbacks),i.formState!==void 0&&(K=i.formState)),r=pv(n,1,!0,r,i??null,c,f,g,b,E,D,K),r.context=yv(null),i=r.current,c=Zn(),c=Vs(c),f=Fs(c),f.callback=null,Ks(i,f,c),i=c,r.current.lanes=i,yt(r,i),Hr(r),n[Jn]=r.current,Kf(n),new rh(r)},$l.version="19.1.1",$l}var Vv;function fw(){if(Vv)return dm.exports;Vv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),dm.exports=dw(),dm.exports}var mw=fw();const gw=sw(mw);var w=lg();/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Pv="popstate";function pw(s={}){function e(a,o){let{pathname:l,search:d,hash:m}=a.location;return jm("",{pathname:l,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(a,o){return typeof o=="string"?o:oc(o)}return vw(e,t,null,s)}function Ot(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Sr(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yw(){return Math.random().toString(36).substring(2,10)}function Lv(s,e){return{usr:s.state,key:s.key,idx:e}}function jm(s,e,t=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Mo(e):e,state:t,key:e&&e.key||a||yw()}}function oc({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function Mo(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let a=s.indexOf("?");a>=0&&(e.search=s.substring(a),s=s.substring(0,a)),s&&(e.pathname=s)}return e}function vw(s,e,t,a={}){let{window:o=document.defaultView,v5Compat:l=!1}=a,d=o.history,m="POP",p=null,y=x();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function x(){return(d.state||{idx:null}).idx}function T(){m="POP";let j=x(),X=j==null?null:j-y;y=j,p&&p({action:m,location:L.location,delta:X})}function A(j,X){m="PUSH";let W=jm(L.location,j,X);y=x()+1;let he=Lv(W,y),ue=L.createHref(W);try{d.pushState(he,"",ue)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(ue)}l&&p&&p({action:m,location:L.location,delta:1})}function M(j,X){m="REPLACE";let W=jm(L.location,j,X);y=x();let he=Lv(W,y),ue=L.createHref(W);d.replaceState(he,"",ue),l&&p&&p({action:m,location:L.location,delta:0})}function B(j){return xw(j)}let L={get action(){return m},get location(){return s(o,d)},listen(j){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Pv,T),p=j,()=>{o.removeEventListener(Pv,T),p=null}},createHref(j){return e(o,j)},createURL:B,encodeLocation(j){let X=B(j);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:A,replace:M,go(j){return d.go(j)}};return L}function xw(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Ot(t,"No window.location.(origin|href) available to create URL");let a=typeof s=="string"?s:oc(s);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=t+a),new URL(a,t)}function N_(s,e,t="/"){return _w(s,e,t,!1)}function _w(s,e,t,a){let o=typeof e=="string"?Mo(e):e,l=Cs(o.pathname||"/",t);if(l==null)return null;let d=R_(s);bw(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let y=jw(l);m=Cw(d[p],y,a)}return m}function R_(s,e=[],t=[],a="",o=!1){let l=(d,m,p=o,y)=>{let x={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(a)&&p)return;Ot(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length)}let T=ks([a,x.relativePath]),A=t.concat(x);d.children&&d.children.length>0&&(Ot(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),R_(d.children,e,A,T,p)),!(d.path==null&&!d.index)&&e.push({path:T,score:Nw(T,d.index),routesMeta:A})};return s.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))l(d,m);else for(let p of C_(d.path))l(d,m,!0,p)}),e}function C_(s){let e=s.split("/");if(e.length===0)return[];let[t,...a]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(a.length===0)return o?[l,""]:[l];let d=C_(a.join("/")),m=[];return m.push(...d.map(p=>p===""?l:[l,p].join("/"))),o&&m.push(...d),m.map(p=>s.startsWith("/")&&p===""?"/":p)}function bw(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Rw(e.routesMeta.map(a=>a.childrenIndex),t.routesMeta.map(a=>a.childrenIndex)))}var Tw=/^:[\w-]+$/,Ew=3,ww=2,Sw=1,kw=10,Aw=-2,zv=s=>s==="*";function Nw(s,e){let t=s.split("/"),a=t.length;return t.some(zv)&&(a+=Aw),e&&(a+=ww),t.filter(o=>!zv(o)).reduce((o,l)=>o+(Tw.test(l)?Ew:l===""?Sw:kw),a)}function Rw(s,e){return s.length===e.length&&s.slice(0,-1).every((a,o)=>a===e[o])?s[s.length-1]-e[e.length-1]:0}function Cw(s,e,t=!1){let{routesMeta:a}=s,o={},l="/",d=[];for(let m=0;m<a.length;++m){let p=a[m],y=m===a.length-1,x=l==="/"?e:e.slice(l.length)||"/",T=Sh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},x),A=p.route;if(!T&&y&&t&&!a[a.length-1].route.index&&(T=Sh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},x)),!T)return null;Object.assign(o,T.params),d.push({params:o,pathname:ks([l,T.pathname]),pathnameBase:Vw(ks([l,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(l=ks([l,T.pathnameBase]))}return d}function Sh(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,a]=Iw(s.path,s.caseSensitive,s.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:a.reduce((y,{paramName:x,isOptional:T},A)=>{if(x==="*"){let B=m[A]||"";d=l.slice(0,l.length-B.length).replace(/(.)\/+$/,"$1")}const M=m[A];return T&&!M?y[x]=void 0:y[x]=(M||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:d,pattern:s}}function Iw(s,e=!1,t=!0){Sr(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],o="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(a.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(a.push({paramName:"*"}),o+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":s!==""&&s!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function jw(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Sr(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Cs(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,a=s.charAt(t);return a&&a!=="/"?null:s.slice(t)||"/"}function Dw(s,e="/"){let{pathname:t,search:a="",hash:o=""}=typeof s=="string"?Mo(s):s;return{pathname:t?t.startsWith("/")?t:Mw(t,e):e,search:Pw(a),hash:Lw(o)}}function Mw(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function ym(s,e,t,a){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Ow(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cg(s){let e=Ow(s);return e.map((t,a)=>a===e.length-1?t.pathname:t.pathnameBase)}function ug(s,e,t,a=!1){let o;typeof s=="string"?o=Mo(s):(o={...s},Ot(!o.pathname||!o.pathname.includes("?"),ym("?","pathname","search",o)),Ot(!o.pathname||!o.pathname.includes("#"),ym("#","pathname","hash",o)),Ot(!o.search||!o.search.includes("#"),ym("#","search","hash",o)));let l=s===""||o.pathname==="",d=l?"/":o.pathname,m;if(d==null)m=t;else{let T=e.length-1;if(!a&&d.startsWith("..")){let A=d.split("/");for(;A[0]==="..";)A.shift(),T-=1;o.pathname=A.join("/")}m=T>=0?e[T]:"/"}let p=Dw(o,m),y=d&&d!=="/"&&d.endsWith("/"),x=(l||d===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||x)&&(p.pathname+="/"),p}var ks=s=>s.join("/").replace(/\/\/+/g,"/"),Vw=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Pw=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Lw=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function zw(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var I_=["POST","PUT","PATCH","DELETE"];new Set(I_);var Uw=["GET",...I_];new Set(Uw);var Oo=w.createContext(null);Oo.displayName="DataRouter";var Gh=w.createContext(null);Gh.displayName="DataRouterState";w.createContext(!1);var j_=w.createContext({isTransitioning:!1});j_.displayName="ViewTransition";var Bw=w.createContext(new Map);Bw.displayName="Fetchers";var qw=w.createContext(null);qw.displayName="Await";var Nr=w.createContext(null);Nr.displayName="Navigation";var Tc=w.createContext(null);Tc.displayName="Location";var Jr=w.createContext({outlet:null,matches:[],isDataRoute:!1});Jr.displayName="Route";var hg=w.createContext(null);hg.displayName="RouteError";function Hw(s,{relative:e}={}){Ot(Vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:a}=w.useContext(Nr),{hash:o,pathname:l,search:d}=Ec(s,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:ks([t,l])),a.createHref({pathname:m,search:d,hash:o})}function Vo(){return w.useContext(Tc)!=null}function Na(){return Ot(Vo(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Tc).location}var D_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function M_(s){w.useContext(Nr).static||w.useLayoutEffect(s)}function O_(){let{isDataRoute:s}=w.useContext(Jr);return s?nS():Gw()}function Gw(){Ot(Vo(),"useNavigate() may be used only in the context of a <Router> component.");let s=w.useContext(Oo),{basename:e,navigator:t}=w.useContext(Nr),{matches:a}=w.useContext(Jr),{pathname:o}=Na(),l=JSON.stringify(cg(a)),d=w.useRef(!1);return M_(()=>{d.current=!0}),w.useCallback((p,y={})=>{if(Sr(d.current,D_),!d.current)return;if(typeof p=="number"){t.go(p);return}let x=ug(p,JSON.parse(l),o,y.relative==="path");s==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:ks([e,x.pathname])),(y.replace?t.replace:t.push)(x,y.state,y)},[e,t,l,o,s])}w.createContext(null);function Ec(s,{relative:e}={}){let{matches:t}=w.useContext(Jr),{pathname:a}=Na(),o=JSON.stringify(cg(t));return w.useMemo(()=>ug(s,JSON.parse(o),a,e==="path"),[s,o,a,e])}function Fw(s,e){return V_(s,e)}function V_(s,e,t,a,o){Ot(Vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=w.useContext(Nr),{matches:d}=w.useContext(Jr),m=d[d.length-1],p=m?m.params:{},y=m?m.pathname:"/",x=m?m.pathnameBase:"/",T=m&&m.route;{let W=T&&T.path||"";P_(y,!T||W.endsWith("*")||W.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${W}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${W}"> to <Route path="${W==="/"?"*":`${W}/*`}">.`)}let A=Na(),M;if(e){let W=typeof e=="string"?Mo(e):e;Ot(x==="/"||W.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${W.pathname}" was given in the \`location\` prop.`),M=W}else M=A;let B=M.pathname||"/",L=B;if(x!=="/"){let W=x.replace(/^\//,"").split("/");L="/"+B.replace(/^\//,"").split("/").slice(W.length).join("/")}let j=N_(s,{pathname:L});Sr(T||j!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Sr(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let X=Xw(j&&j.map(W=>Object.assign({},W,{params:Object.assign({},p,W.params),pathname:ks([x,l.encodeLocation?l.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?x:ks([x,l.encodeLocation?l.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),d,t,a,o);return e&&X?w.createElement(Tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},X):X}function Kw(){let s=tS(),e=zw(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},l={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",s),d=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:l},"ErrorBoundary")," or"," ",w.createElement("code",{style:l},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),t?w.createElement("pre",{style:o},t):null,d)}var $w=w.createElement(Kw,null),Yw=class extends w.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.unstable_onError?this.props.unstable_onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?w.createElement(Jr.Provider,{value:this.props.routeContext},w.createElement(hg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Qw({routeContext:s,match:e,children:t}){let a=w.useContext(Oo);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Jr.Provider,{value:s},t)}function Xw(s,e=[],t=null,a=null,o=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let l=s,d=t?.errors;if(d!=null){let y=l.findIndex(x=>x.route.id&&d?.[x.route.id]!==void 0);Ot(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let m=!1,p=-1;if(t)for(let y=0;y<l.length;y++){let x=l[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(p=y),x.route.id){let{loaderData:T,errors:A}=t,M=x.route.loader&&!T.hasOwnProperty(x.route.id)&&(!A||A[x.route.id]===void 0);if(x.route.lazy||M){m=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((y,x,T)=>{let A,M=!1,B=null,L=null;t&&(A=d&&x.route.id?d[x.route.id]:void 0,B=x.route.errorElement||$w,m&&(p<0&&T===0?(P_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,L=null):p===T&&(M=!0,L=x.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,T+1)),X=()=>{let W;return A?W=B:M?W=L:x.route.Component?W=w.createElement(x.route.Component,null):x.route.element?W=x.route.element:W=y,w.createElement(Qw,{match:x,routeContext:{outlet:y,matches:j,isDataRoute:t!=null},children:W})};return t&&(x.route.ErrorBoundary||x.route.errorElement||T===0)?w.createElement(Yw,{location:t.location,revalidation:t.revalidation,component:B,error:A,children:X(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:a}):X()},null)}function dg(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zw(s){let e=w.useContext(Oo);return Ot(e,dg(s)),e}function Ww(s){let e=w.useContext(Gh);return Ot(e,dg(s)),e}function Jw(s){let e=w.useContext(Jr);return Ot(e,dg(s)),e}function fg(s){let e=Jw(s),t=e.matches[e.matches.length-1];return Ot(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function eS(){return fg("useRouteId")}function tS(){let s=w.useContext(hg),e=Ww("useRouteError"),t=fg("useRouteError");return s!==void 0?s:e.errors?.[t]}function nS(){let{router:s}=Zw("useNavigate"),e=fg("useNavigate"),t=w.useRef(!1);return M_(()=>{t.current=!0}),w.useCallback(async(o,l={})=>{Sr(t.current,D_),t.current&&(typeof o=="number"?s.navigate(o):await s.navigate(o,{fromRouteId:e,...l}))},[s,e])}var Uv={};function P_(s,e,t){!e&&!Uv[s]&&(Uv[s]=!0,Sr(!1,t))}w.memo(rS);function rS({routes:s,future:e,state:t,unstable_onError:a}){return V_(s,void 0,t,a,e)}function lc({to:s,replace:e,state:t,relative:a}){Ot(Vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=w.useContext(Nr);Sr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=w.useContext(Jr),{pathname:d}=Na(),m=O_(),p=ug(s,cg(l),d,a==="path"),y=JSON.stringify(p);return w.useEffect(()=>{m(JSON.parse(y),{replace:e,state:t,relative:a})},[m,y,a,e,t]),null}function go(s){Ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sS({basename:s="/",children:e=null,location:t,navigationType:a="POP",navigator:o,static:l=!1}){Ot(!Vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=s.replace(/^\/*/,"/"),m=w.useMemo(()=>({basename:d,navigator:o,static:l,future:{}}),[d,o,l]);typeof t=="string"&&(t=Mo(t));let{pathname:p="/",search:y="",hash:x="",state:T=null,key:A="default"}=t,M=w.useMemo(()=>{let B=Cs(p,d);return B==null?null:{location:{pathname:B,search:y,hash:x,state:T,key:A},navigationType:a}},[d,p,y,x,T,A,a]);return Sr(M!=null,`<Router basename="${d}"> is not able to match the URL "${p}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:w.createElement(Nr.Provider,{value:m},w.createElement(Tc.Provider,{children:e,value:M}))}function aS({children:s,location:e}){return Fw(Dm(s),e)}function Dm(s,e=[]){let t=[];return w.Children.forEach(s,(a,o)=>{if(!w.isValidElement(a))return;let l=[...e,o];if(a.type===w.Fragment){t.push.apply(t,Dm(a.props.children,l));return}Ot(a.type===go,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ot(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||l.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=Dm(a.props.children,l)),t.push(d)}),t}var fh="get",mh="application/x-www-form-urlencoded";function Fh(s){return s!=null&&typeof s.tagName=="string"}function iS(s){return Fh(s)&&s.tagName.toLowerCase()==="button"}function oS(s){return Fh(s)&&s.tagName.toLowerCase()==="form"}function lS(s){return Fh(s)&&s.tagName.toLowerCase()==="input"}function cS(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function uS(s,e){return s.button===0&&(!e||e==="_self")&&!cS(s)}var ah=null;function hS(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch{ah=!0}return ah}var dS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vm(s){return s!=null&&!dS.has(s)?(Sr(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mh}"`),null):s}function fS(s,e){let t,a,o,l,d;if(oS(s)){let m=s.getAttribute("action");a=m?Cs(m,e):null,t=s.getAttribute("method")||fh,o=vm(s.getAttribute("enctype"))||mh,l=new FormData(s)}else if(iS(s)||lS(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||m.getAttribute("action");if(a=p?Cs(p,e):null,t=s.getAttribute("formmethod")||m.getAttribute("method")||fh,o=vm(s.getAttribute("formenctype"))||vm(m.getAttribute("enctype"))||mh,l=new FormData(m,s),!hS()){let{name:y,type:x,value:T}=s;if(x==="image"){let A=y?`${y}.`:"";l.append(`${A}x`,"0"),l.append(`${A}y`,"0")}else y&&l.append(y,T)}}else{if(Fh(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=fh,a=null,o=mh,d=s}return l&&o==="text/plain"&&(d=l,l=void 0),{action:a,method:t.toLowerCase(),encType:o,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mg(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function mS(s,e,t){let a=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return a.pathname==="/"?a.pathname=`_root.${t}`:e&&Cs(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${t}`,a}async function gS(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pS(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function yS(s,e,t){let a=await Promise.all(s.map(async o=>{let l=e.routes[o.route.id];if(l){let d=await gS(l,t);return d.links?d.links():[]}return[]}));return bS(a.flat(1).filter(pS).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Bv(s,e,t,a,o,l){let d=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,m=(p,y)=>t[y].pathname!==p.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,y)=>d(p,y)||m(p,y)):l==="data"?e.filter((p,y)=>{let x=a.routes[p.route.id];if(!x||!x.hasLoader)return!1;if(d(p,y)||m(p,y))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function vS(s,e,{includeHydrateFallback:t}={}){return xS(s.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function xS(s){return[...new Set(s)]}function _S(s){let e={},t=Object.keys(s).sort();for(let a of t)e[a]=s[a];return e}function bS(s,e){let t=new Set;return new Set(e),s.reduce((a,o)=>{let l=JSON.stringify(_S(o));return t.has(l)||(t.add(l),a.push({key:l,link:o})),a},[])}function L_(){let s=w.useContext(Oo);return mg(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function TS(){let s=w.useContext(Gh);return mg(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var gg=w.createContext(void 0);gg.displayName="FrameworkContext";function z_(){let s=w.useContext(gg);return mg(s,"You must render this element inside a <HydratedRouter> element"),s}function ES(s,e){let t=w.useContext(gg),[a,o]=w.useState(!1),[l,d]=w.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:y,onMouseLeave:x,onTouchStart:T}=e,A=w.useRef(null);w.useEffect(()=>{if(s==="render"&&d(!0),s==="viewport"){let L=X=>{X.forEach(W=>{d(W.isIntersecting)})},j=new IntersectionObserver(L,{threshold:.5});return A.current&&j.observe(A.current),()=>{j.disconnect()}}},[s]),w.useEffect(()=>{if(a){let L=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(L)}}},[a]);let M=()=>{o(!0)},B=()=>{o(!1),d(!1)};return t?s!=="intent"?[l,A,{}]:[l,A,{onFocus:Yl(m,M),onBlur:Yl(p,B),onMouseEnter:Yl(y,M),onMouseLeave:Yl(x,B),onTouchStart:Yl(T,M)}]:[!1,A,{}]}function Yl(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function wS({page:s,...e}){let{router:t}=L_(),a=w.useMemo(()=>N_(t.routes,s,t.basename),[t.routes,s,t.basename]);return a?w.createElement(kS,{page:s,matches:a,...e}):null}function SS(s){let{manifest:e,routeModules:t}=z_(),[a,o]=w.useState([]);return w.useEffect(()=>{let l=!1;return yS(s,e,t).then(d=>{l||o(d)}),()=>{l=!0}},[s,e,t]),a}function kS({page:s,matches:e,...t}){let a=Na(),{manifest:o,routeModules:l}=z_(),{basename:d}=L_(),{loaderData:m,matches:p}=TS(),y=w.useMemo(()=>Bv(s,e,p,o,a,"data"),[s,e,p,o,a]),x=w.useMemo(()=>Bv(s,e,p,o,a,"assets"),[s,e,p,o,a]),T=w.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let B=new Set,L=!1;if(e.forEach(X=>{let W=o.routes[X.route.id];!W||!W.hasLoader||(!y.some(he=>he.route.id===X.route.id)&&X.route.id in m&&l[X.route.id]?.shouldRevalidate||W.hasClientLoader?L=!0:B.add(X.route.id))}),B.size===0)return[];let j=mS(s,d,"data");return L&&B.size>0&&j.searchParams.set("_routes",e.filter(X=>B.has(X.route.id)).map(X=>X.route.id).join(",")),[j.pathname+j.search]},[d,m,a,o,y,e,s,l]),A=w.useMemo(()=>vS(x,o),[x,o]),M=SS(x);return w.createElement(w.Fragment,null,T.map(B=>w.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...t})),A.map(B=>w.createElement("link",{key:B,rel:"modulepreload",href:B,...t})),M.map(({key:B,link:L})=>w.createElement("link",{key:B,nonce:t.nonce,...L})))}function AS(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var U_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{U_&&(window.__reactRouterVersion="7.9.1")}catch{}function NS({basename:s,children:e,window:t}){let a=w.useRef();a.current==null&&(a.current=pw({window:t,v5Compat:!0}));let o=a.current,[l,d]=w.useState({action:o.action,location:o.location}),m=w.useCallback(p=>{w.startTransition(()=>d(p))},[d]);return w.useLayoutEffect(()=>o.listen(m),[o,m]),w.createElement(sS,{basename:s,children:e,location:l.location,navigationType:l.action,navigator:o})}var B_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,q_=w.forwardRef(function({onClick:e,discover:t="render",prefetch:a="none",relative:o,reloadDocument:l,replace:d,state:m,target:p,to:y,preventScrollReset:x,viewTransition:T,...A},M){let{basename:B}=w.useContext(Nr),L=typeof y=="string"&&B_.test(y),j,X=!1;if(typeof y=="string"&&L&&(j=y,U_))try{let R=new URL(window.location.href),O=y.startsWith("//")?new URL(R.protocol+y):new URL(y),P=Cs(O.pathname,B);O.origin===R.origin&&P!=null?y=P+O.search+O.hash:X=!0}catch{Sr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let W=Hw(y,{relative:o}),[he,ue,le]=ES(a,A),de=jS(y,{replace:d,state:m,target:p,preventScrollReset:x,relative:o,viewTransition:T});function V(R){e&&e(R),R.defaultPrevented||de(R)}let C=w.createElement("a",{...A,...le,href:j||W,onClick:X||l?e:V,ref:AS(M,ue),target:p,"data-discover":!L&&t==="render"?"true":void 0});return he&&!L?w.createElement(w.Fragment,null,C,w.createElement(wS,{page:W})):C});q_.displayName="Link";var RS=w.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:a="",end:o=!1,style:l,to:d,viewTransition:m,children:p,...y},x){let T=Ec(d,{relative:y.relative}),A=Na(),M=w.useContext(Gh),{navigator:B,basename:L}=w.useContext(Nr),j=M!=null&&PS(T)&&m===!0,X=B.encodeLocation?B.encodeLocation(T).pathname:T.pathname,W=A.pathname,he=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;t||(W=W.toLowerCase(),he=he?he.toLowerCase():null,X=X.toLowerCase()),he&&L&&(he=Cs(he,L)||he);const ue=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let le=W===X||!o&&W.startsWith(X)&&W.charAt(ue)==="/",de=he!=null&&(he===X||!o&&he.startsWith(X)&&he.charAt(X.length)==="/"),V={isActive:le,isPending:de,isTransitioning:j},C=le?e:void 0,R;typeof a=="function"?R=a(V):R=[a,le?"active":null,de?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(V):l;return w.createElement(q_,{...y,"aria-current":C,className:R,ref:x,style:O,to:d,viewTransition:m},typeof p=="function"?p(V):p)});RS.displayName="NavLink";var CS=w.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:a,replace:o,state:l,method:d=fh,action:m,onSubmit:p,relative:y,preventScrollReset:x,viewTransition:T,...A},M)=>{let B=OS(),L=VS(m,{relative:y}),j=d.toLowerCase()==="get"?"get":"post",X=typeof m=="string"&&B_.test(m),W=he=>{if(p&&p(he),he.defaultPrevented)return;he.preventDefault();let ue=he.nativeEvent.submitter,le=ue?.getAttribute("formmethod")||d;B(ue||he.currentTarget,{fetcherKey:e,method:le,navigate:t,replace:o,state:l,relative:y,preventScrollReset:x,viewTransition:T})};return w.createElement("form",{ref:M,method:j,action:L,onSubmit:a?p:W,...A,"data-discover":!X&&s==="render"?"true":void 0})});CS.displayName="Form";function IS(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H_(s){let e=w.useContext(Oo);return Ot(e,IS(s)),e}function jS(s,{target:e,replace:t,state:a,preventScrollReset:o,relative:l,viewTransition:d}={}){let m=O_(),p=Na(),y=Ec(s,{relative:l});return w.useCallback(x=>{if(uS(x,e)){x.preventDefault();let T=t!==void 0?t:oc(p)===oc(y);m(s,{replace:T,state:a,preventScrollReset:o,relative:l,viewTransition:d})}},[p,m,y,t,a,e,s,o,l,d])}var DS=0,MS=()=>`__${String(++DS)}__`;function OS(){let{router:s}=H_("useSubmit"),{basename:e}=w.useContext(Nr),t=eS();return w.useCallback(async(a,o={})=>{let{action:l,method:d,encType:m,formData:p,body:y}=fS(a,e);if(o.navigate===!1){let x=o.fetcherKey||MS();await s.fetch(x,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await s.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[s,e,t])}function VS(s,{relative:e}={}){let{basename:t}=w.useContext(Nr),a=w.useContext(Jr);Ot(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),l={...Ec(s||".",{relative:e})},d=Na();if(s==null){l.search=d.search;let m=new URLSearchParams(l.search),p=m.getAll("index");if(p.some(x=>x==="")){m.delete("index"),p.filter(T=>T).forEach(T=>m.append("index",T));let x=m.toString();l.search=x?`?${x}`:""}}return(!s||s===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:ks([t,l.pathname])),oc(l)}function PS(s,{relative:e}={}){let t=w.useContext(j_);Ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=H_("useViewTransitionState"),o=Ec(s,{relative:e});if(!t.isTransitioning)return!1;let l=Cs(t.currentLocation.pathname,a)||t.currentLocation.pathname,d=Cs(t.nextLocation.pathname,a)||t.nextLocation.pathname;return Sh(o.pathname,d)!=null||Sh(o.pathname,l)!=null}const LS=()=>{};var qv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_=function(s){const e=[];let t=0;for(let a=0;a<s.length;a++){let o=s.charCodeAt(a);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&a+1<s.length&&(s.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++a)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},zS=function(s){const e=[];let t=0,a=0;for(;t<s.length;){const o=s[t++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const l=s[t++];e[a++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=s[t++],d=s[t++],m=s[t++],p=((o&7)<<18|(l&63)<<12|(d&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const l=s[t++],d=s[t++];e[a++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},F_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<s.length;o+=3){const l=s[o],d=o+1<s.length,m=d?s[o+1]:0,p=o+2<s.length,y=p?s[o+2]:0,x=l>>2,T=(l&3)<<4|m>>4;let A=(m&15)<<2|y>>6,M=y&63;p||(M=64,d||(A=64)),a.push(t[x],t[T],t[A],t[M])}return a.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(G_(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):zS(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<s.length;){const l=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const y=o<s.length?t[s.charAt(o)]:64;++o;const T=o<s.length?t[s.charAt(o)]:64;if(++o,l==null||m==null||y==null||T==null)throw new US;const A=l<<2|m>>4;if(a.push(A),y!==64){const M=m<<4&240|y>>2;if(a.push(M),T!==64){const B=y<<6&192|T;a.push(B)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class US extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BS=function(s){const e=G_(s);return F_.encodeByteArray(e,!0)},K_=function(s){return BS(s).replace(/\./g,"")},$_=function(s){try{return F_.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=()=>qS().__FIREBASE_DEFAULTS__,GS=()=>{if(typeof process>"u"||typeof qv>"u")return;const s=qv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},FS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&$_(s[1]);return e&&JSON.parse(e)},Kh=()=>{try{return LS()||HS()||GS()||FS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},KS=s=>Kh()?.emulatorHosts?.[s],Y_=()=>Kh()?.config,Q_=s=>Kh()?.[`_${s}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,a)=>{t?this.reject(t):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function X_(s){return(await fetch(s,{credentials:"include"})).ok}const tc={};function YS(){const s={prod:[],emulator:[]};for(const e of Object.keys(tc))tc[e]?s.emulator.push(e):s.prod.push(e);return s}function QS(s){let e=document.getElementById(s),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",s),t=!0),{created:t,element:e}}let Hv=!1;function XS(s,e){if(typeof window>"u"||typeof document>"u"||!Po(window.location.host)||tc[s]===e||tc[s]||Hv)return;tc[s]=e;function t(A){return`__firebase__banner__${A}`}const a="__firebase__banner",l=YS().prod.length>0;function d(){const A=document.getElementById(a);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,M){A.setAttribute("width","24"),A.setAttribute("id",M),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{Hv=!0,d()},A}function x(A,M){A.setAttribute("id",M),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=QS(a),M=t("text"),B=document.getElementById(M)||document.createElement("span"),L=t("learnmore"),j=document.getElementById(L)||document.createElement("a"),X=t("preprendIcon"),W=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const he=A.element;m(he),x(j,L);const ue=y();p(W,X),he.append(W,B,j,ue),document.body.appendChild(he)}l?(B.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function WS(){const s=Kh()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ek(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function tk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nk(){const s=Cn();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function rk(){return!WS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sk(){try{return typeof indexedDB=="object"}catch{return!1}}function ak(){return new Promise((s,e)=>{try{let t=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(a),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="FirebaseError";class Os extends Error{constructor(e,t,a){super(t),this.code=e,this.customData=a,this.name=ik,Object.setPrototypeOf(this,Os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wc.prototype.create)}}class wc{constructor(e,t,a){this.service=e,this.serviceName=t,this.errors=a}create(e,...t){const a=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?ok(l,a):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Os(o,m,a)}}function ok(s,e){return s.replace(lk,(t,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const lk=/\{\$([^}]+)}/g;function ck(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function ci(s,e){if(s===e)return!0;const t=Object.keys(s),a=Object.keys(e);for(const o of t){if(!a.includes(o))return!1;const l=s[o],d=e[o];if(Gv(l)&&Gv(d)){if(!ci(l,d))return!1}else if(l!==d)return!1}for(const o of a)if(!t.includes(o))return!1;return!0}function Gv(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(s){const e=[];for(const[t,a]of Object.entries(s))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function Ql(s){const e={};return s.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,l]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Xl(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function uk(s,e){const t=new hk(s,e);return t.subscribe.bind(t)}class hk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,a){let o;if(e===void 0&&t===void 0&&a===void 0)throw new Error("Missing Observer.");dk(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:a},o.next===void 0&&(o.next=xm),o.error===void 0&&(o.error=xm),o.complete===void 0&&(o.complete=xm);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dk(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function xm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(s){return s&&s._delegate?s._delegate:s}class ui{constructor(e,t,a){this.name=e,this.instanceFactory=t,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ii="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const a=new $S;if(this.instancesDeferred.set(t,a),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gk(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[t,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});a.resolve(l)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:t});for(const[l,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);a===m&&d.resolve(o)}return o}onInit(e,t){const a=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const l=this.instances.get(a);return l&&e(l,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const a=this.onInitCallbacks.get(t);if(a)for(const o of a)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:mk(e),options:t}),this.instances.set(e,a),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mk(s){return s===ii?void 0:s}function gk(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ye||(Ye={}));const yk={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},vk=Ye.INFO,xk={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},_k=(s,e,...t)=>{if(e<s.logLevel)return;const a=new Date().toISOString(),o=xk[e];if(o)console[o](`[${a}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pg{constructor(e){this.name=e,this._logLevel=vk,this._logHandler=_k,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const bk=(s,e)=>e.some(t=>s instanceof t);let Fv,Kv;function Tk(){return Fv||(Fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ek(){return Kv||(Kv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Z_=new WeakMap,Mm=new WeakMap,W_=new WeakMap,_m=new WeakMap,yg=new WeakMap;function wk(s){const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("success",l),s.removeEventListener("error",d)},l=()=>{t(pa(s.result)),o()},d=()=>{a(s.error),o()};s.addEventListener("success",l),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Z_.set(t,s)}).catch(()=>{}),yg.set(e,s),e}function Sk(s){if(Mm.has(s))return;const e=new Promise((t,a)=>{const o=()=>{s.removeEventListener("complete",l),s.removeEventListener("error",d),s.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{a(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",l),s.addEventListener("error",d),s.addEventListener("abort",d)});Mm.set(s,e)}let Om={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return Mm.get(s);if(e==="objectStoreNames")return s.objectStoreNames||W_.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return pa(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function kk(s){Om=s(Om)}function Ak(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const a=s.call(bm(this),e,...t);return W_.set(a,e.sort?e.sort():[e]),pa(a)}:Ek().includes(s)?function(...e){return s.apply(bm(this),e),pa(Z_.get(this))}:function(...e){return pa(s.apply(bm(this),e))}}function Nk(s){return typeof s=="function"?Ak(s):(s instanceof IDBTransaction&&Sk(s),bk(s,Tk())?new Proxy(s,Om):s)}function pa(s){if(s instanceof IDBRequest)return wk(s);if(_m.has(s))return _m.get(s);const e=Nk(s);return e!==s&&(_m.set(s,e),yg.set(e,s)),e}const bm=s=>yg.get(s);function Rk(s,e,{blocked:t,upgrade:a,blocking:o,terminated:l}={}){const d=indexedDB.open(s,e),m=pa(d);return a&&d.addEventListener("upgradeneeded",p=>{a(pa(d.result),p.oldVersion,p.newVersion,pa(d.transaction),p)}),t&&d.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const Ck=["get","getKey","getAll","getAllKeys","count"],Ik=["put","add","delete","clear"],Tm=new Map;function $v(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Tm.get(e))return Tm.get(e);const t=e.replace(/FromIndex$/,""),a=e!==t,o=Ik.includes(t);if(!(t in(a?IDBIndex:IDBObjectStore).prototype)||!(o||Ck.includes(t)))return;const l=async function(d,...m){const p=this.transaction(d,o?"readwrite":"readonly");let y=p.store;return a&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&p.done]))[0]};return Tm.set(e,l),l}kk(s=>({...s,get:(e,t,a)=>$v(e,t)||s.get(e,t,a),has:(e,t)=>!!$v(e,t)||s.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Dk(t)){const a=t.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(t=>t).join(" ")}}function Dk(s){return s.getComponent()?.type==="VERSION"}const Vm="@firebase/app",Yv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new pg("@firebase/app"),Mk="@firebase/app-compat",Ok="@firebase/analytics-compat",Vk="@firebase/analytics",Pk="@firebase/app-check-compat",Lk="@firebase/app-check",zk="@firebase/auth",Uk="@firebase/auth-compat",Bk="@firebase/database",qk="@firebase/data-connect",Hk="@firebase/database-compat",Gk="@firebase/functions",Fk="@firebase/functions-compat",Kk="@firebase/installations",$k="@firebase/installations-compat",Yk="@firebase/messaging",Qk="@firebase/messaging-compat",Xk="@firebase/performance",Zk="@firebase/performance-compat",Wk="@firebase/remote-config",Jk="@firebase/remote-config-compat",eA="@firebase/storage",tA="@firebase/storage-compat",nA="@firebase/firestore",rA="@firebase/ai",sA="@firebase/firestore-compat",aA="firebase",iA="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm="[DEFAULT]",oA={[Vm]:"fire-core",[Mk]:"fire-core-compat",[Vk]:"fire-analytics",[Ok]:"fire-analytics-compat",[Lk]:"fire-app-check",[Pk]:"fire-app-check-compat",[zk]:"fire-auth",[Uk]:"fire-auth-compat",[Bk]:"fire-rtdb",[qk]:"fire-data-connect",[Hk]:"fire-rtdb-compat",[Gk]:"fire-fn",[Fk]:"fire-fn-compat",[Kk]:"fire-iid",[$k]:"fire-iid-compat",[Yk]:"fire-fcm",[Qk]:"fire-fcm-compat",[Xk]:"fire-perf",[Zk]:"fire-perf-compat",[Wk]:"fire-rc",[Jk]:"fire-rc-compat",[eA]:"fire-gcs",[tA]:"fire-gcs-compat",[nA]:"fire-fst",[sA]:"fire-fst-compat",[rA]:"fire-vertex","fire-js":"fire-js",[aA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Map,lA=new Map,Lm=new Map;function Qv(s,e){try{s.container.addComponent(e)}catch(t){Is.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function ko(s){const e=s.name;if(Lm.has(e))return Is.debug(`There were multiple attempts to register component ${e}.`),!1;Lm.set(e,s);for(const t of cc.values())Qv(t,s);for(const t of lA.values())Qv(t,s);return!0}function vg(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function dr(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ya=new wc("app","Firebase",cA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t,a){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ya.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=iA;function J_(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const a={name:Pm,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw ya.create("bad-app-name",{appName:String(o)});if(t||(t=Y_()),!t)throw ya.create("no-options");const l=cc.get(o);if(l){if(ci(t,l.options)&&ci(a,l.config))return l;throw ya.create("duplicate-app",{appName:o})}const d=new pk(o);for(const p of Lm.values())d.addComponent(p);const m=new uA(t,a,d);return cc.set(o,m),m}function eb(s=Pm){const e=cc.get(s);if(!e&&s===Pm&&Y_())return J_();if(!e)throw ya.create("no-app",{appName:s});return e}function hA(){return Array.from(cc.values())}function va(s,e,t){let a=oA[s]??s;t&&(a+=`-${t}`);const o=a.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const d=[`Unable to register library "${a}" with version "${e}":`];o&&d.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Is.warn(d.join(" "));return}ko(new ui(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA="firebase-heartbeat-database",fA=1,uc="firebase-heartbeat-store";let Em=null;function tb(){return Em||(Em=Rk(dA,fA,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(uc)}catch(t){console.warn(t)}}}}).catch(s=>{throw ya.create("idb-open",{originalErrorMessage:s.message})})),Em}async function mA(s){try{const t=(await tb()).transaction(uc),a=await t.objectStore(uc).get(nb(s));return await t.done,a}catch(e){if(e instanceof Os)Is.warn(e.message);else{const t=ya.create("idb-get",{originalErrorMessage:e?.message});Is.warn(t.message)}}}async function Xv(s,e){try{const a=(await tb()).transaction(uc,"readwrite");await a.objectStore(uc).put(e,nb(s)),await a.done}catch(t){if(t instanceof Os)Is.warn(t.message);else{const a=ya.create("idb-set",{originalErrorMessage:t?.message});Is.warn(a.message)}}}function nb(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=1024,pA=30;class yA{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xA(t),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Zv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:t}),this._heartbeatsCache.heartbeats.length>pA){const o=_A(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Is.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Zv(),{heartbeatsToSend:t,unsentEntries:a}=vA(this._heartbeatsCache.heartbeats),o=K_(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Is.warn(e),""}}}function Zv(){return new Date().toISOString().substring(0,10)}function vA(s,e=gA){const t=[];let a=s.slice();for(const o of s){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),Wv(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Wv(t)>e){t.pop();break}a=a.slice(1)}return{heartbeatsToSend:t,unsentEntries:a}}class xA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sk()?ak().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return Xv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Wv(s){return K_(JSON.stringify({version:2,heartbeats:s})).length}function _A(s){if(s.length===0)return-1;let e=0,t=s[0].date;for(let a=1;a<s.length;a++)s[a].date<t&&(t=s[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(s){ko(new ui("platform-logger",e=>new jk(e),"PRIVATE")),ko(new ui("heartbeat",e=>new yA(e),"PRIVATE")),va(Vm,Yv,s),va(Vm,Yv,"esm2020"),va("fire-js","")}bA("");function rb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const TA=rb,sb=new wc("auth","Firebase",rb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new pg("@firebase/auth");function EA(s,...e){kh.logLevel<=Ye.WARN&&kh.warn(`Auth (${Lo}): ${s}`,...e)}function gh(s,...e){kh.logLevel<=Ye.ERROR&&kh.error(`Auth (${Lo}): ${s}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(s,...e){throw xg(s,...e)}function Fr(s,...e){return xg(s,...e)}function ab(s,e,t){const a={...TA(),[e]:t};return new wc("auth","Firebase",a).create(e,{appName:s.name})}function As(s){return ab(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xg(s,...e){if(typeof s!="string"){const t=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=s.name),s._errorFactory.create(t,...a)}return sb.create(s,...e)}function Re(s,e,...t){if(!s)throw xg(e,...t)}function ws(s){const e="INTERNAL ASSERTION FAILED: "+s;throw gh(e),new Error(e)}function js(s,e){s||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(){return typeof self<"u"&&self.location?.href||""}function wA(){return Jv()==="http:"||Jv()==="https:"}function Jv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(wA()||ek()||"connection"in navigator)?navigator.onLine:!0}function kA(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,js(t>e,"Short delay should be less than long delay!"),this.isMobile=ZS()||tk()}get(){return SA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(s,e){js(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{static initialize(e,t,a){this.fetchImpl=e,t&&(this.headersImpl=t),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],RA=new kc(3e4,6e4);function Ra(s,e){return s.tenantId&&!e.tenantId?{...e,tenantId:s.tenantId}:e}async function Ca(s,e,t,a,o={}){return ob(s,o,async()=>{let l={},d={};a&&(e==="GET"?d=a:l={body:JSON.stringify(a)});const m=Sc({key:s.config.apiKey,...d}).slice(1),p=await s._getAdditionalHeaders();p["Content-Type"]="application/json",s.languageCode&&(p["X-Firebase-Locale"]=s.languageCode);const y={method:e,headers:p,...l};return JS()||(y.referrerPolicy="no-referrer"),s.emulatorConfig&&Po(s.emulatorConfig.host)&&(y.credentials="include"),ib.fetch()(await lb(s,s.config.apiHost,t,m),y)})}async function ob(s,e,t){s._canInitEmulator=!1;const a={...AA,...e};try{const o=new IA(s),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw ih(s,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const m=l.ok?d.errorMessage:d.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(s,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw ih(s,"email-already-in-use",d);if(p==="USER_DISABLED")throw ih(s,"user-disabled",d);const x=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw ab(s,x,y);kr(s,x)}}catch(o){if(o instanceof Os)throw o;kr(s,"network-request-failed",{message:String(o)})}}async function Ac(s,e,t,a,o={}){const l=await Ca(s,e,t,a,o);return"mfaPendingCredential"in l&&kr(s,"multi-factor-auth-required",{_serverResponse:l}),l}async function lb(s,e,t,a){const o=`${e}${t}?${a}`,l=s,d=l.config.emulator?_g(s.config,o):`${s.config.apiScheme}://${o}`;return NA.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function CA(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,a)=>{this.timer=setTimeout(()=>a(Fr(this.auth,"network-request-failed")),RA.get())})}}function ih(s,e,t){const a={appName:s.name};t.email&&(a.email=t.email),t.phoneNumber&&(a.phoneNumber=t.phoneNumber);const o=Fr(s,e,a);return o.customData._tokenResponse=t,o}function ex(s){return s!==void 0&&s.enterprise!==void 0}class jA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return CA(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DA(s,e){return Ca(s,"GET","/v2/recaptchaConfig",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(s,e){return Ca(s,"POST","/v1/accounts:delete",e)}async function Ah(s,e){return Ca(s,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nc(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OA(s,e=!1){const t=Pn(s),a=await t.getIdToken(e),o=bg(a);Re(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l?.sign_in_provider;return{claims:o,token:a,authTime:nc(wm(o.auth_time)),issuedAtTime:nc(wm(o.iat)),expirationTime:nc(wm(o.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function wm(s){return Number(s)*1e3}function bg(s){const[e,t,a]=s.split(".");if(e===void 0||t===void 0||a===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{const o=$_(t);return o?JSON.parse(o):(gh("Failed to decode base64 JWT payload"),null)}catch(o){return gh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function tx(s){const e=bg(s);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(s,e,t=!1){if(t)return e;try{return await e}catch(a){throw a instanceof Os&&VA(a)&&s.auth.currentUser===s&&await s.auth.signOut(),a}}function VA({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nc(this.lastLoginAt),this.creationTime=nc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nh(s){const e=s.auth,t=await s.getIdToken(),a=await hc(s,Ah(e,{idToken:t}));Re(a?.users.length,e,"internal-error");const o=a.users[0];s._notifyReloadListener(o);const l=o.providerUserInfo?.length?cb(o.providerUserInfo):[],d=zA(s.providerData,l),m=s.isAnonymous,p=!(s.email&&o.passwordHash)&&!d?.length,y=m?p:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Um(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(s,x)}async function LA(s){const e=Pn(s);await Nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zA(s,e){return[...s.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function cb(s){return s.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(s,e){const t=await ob(s,{},async()=>{const a=Sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=s.config,d=await lb(s,o,"/v1/token",`key=${l}`),m=await s._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:a};return s.emulatorConfig&&Po(s.emulatorConfig.host)&&(p.credentials="include"),ib.fetch()(d,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function BA(s,e){return Ca(s,"POST","/v2/accounts:revokeToken",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=tx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:a,refreshToken:o,expiresIn:l}=await UA(e,t);this.updateTokensAndExpiration(a,o,Number(l))}updateTokensAndExpiration(e,t,a){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,t){const{refreshToken:a,accessToken:o,expirationTime:l}=t,d=new bo;return a&&(Re(typeof a=="string","internal-error",{appName:e}),d.refreshToken=a),o&&(Re(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(Re(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(s,e){Re(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Tr{constructor({uid:e,auth:t,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new PA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Um(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await hc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OA(this,e)}reload(){return LA(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Tr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),t&&await Nh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(As(this.auth));const e=await this.getIdToken();return await hc(this,MA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const a=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,x=t.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:M,providerData:B,stsTokenManager:L}=t;Re(T&&L,e,"internal-error");const j=bo.fromJSON(this.name,L);Re(typeof T=="string",e,"internal-error"),ua(a,e.name),ua(o,e.name),Re(typeof A=="boolean",e,"internal-error"),Re(typeof M=="boolean",e,"internal-error"),ua(l,e.name),ua(d,e.name),ua(m,e.name),ua(p,e.name),ua(y,e.name),ua(x,e.name);const X=new Tr({uid:T,auth:e,email:o,emailVerified:A,displayName:a,isAnonymous:M,photoURL:d,phoneNumber:l,tenantId:m,stsTokenManager:j,createdAt:y,lastLoginAt:x});return B&&Array.isArray(B)&&(X.providerData=B.map(W=>({...W}))),p&&(X._redirectEventId=p),X}static async _fromIdTokenResponse(e,t,a=!1){const o=new bo;o.updateFromServerResponse(t);const l=new Tr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await Nh(l),l}static async _fromGetAccountInfoResponse(e,t,a){const o=t.users[0];Re(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?cb(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!l?.length,m=new bo;m.updateFromIdToken(a);const p=new Tr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Um(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map;function Ss(s){js(s instanceof Function,"Expected a class definition");let e=nx.get(s);return e?(js(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,nx.set(s,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ub.type="NONE";const rx=ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ph(s,e,t){return`firebase:${s}:${e}:${t}`}class To{constructor(e,t,a){this.persistence=e,this.auth=t,this.userKey=a;const{config:o,name:l}=this.auth;this.fullUserKey=ph(this.userKey,o.apiKey,l),this.fullPersistenceKey=ph("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ah(this.auth,{idToken:e}).catch(()=>{});return t?Tr._fromGetAccountInfoResponse(this.auth,t,e):null}return Tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,a="authUser"){if(!t.length)return new To(Ss(rx),e,a);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Ss(rx);const d=ph(a,e.config.apiKey,e.name);let m=null;for(const y of t)try{const x=await y._get(d);if(x){let T;if(typeof x=="string"){const A=await Ah(e,{idToken:x}).catch(()=>{});if(!A)break;T=await Tr._fromGetAccountInfoResponse(e,A,x)}else T=Tr._fromJSON(e,x);y!==l&&(m=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new To(l,e,a):(l=p[0],m&&await l._set(d,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(d)}catch{}})),new To(l,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pb(e))return"Blackberry";if(yb(e))return"Webos";if(db(e))return"Safari";if((e.includes("chrome/")||fb(e))&&!e.includes("edge/"))return"Chrome";if(gb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=s.match(t);if(a?.length===2)return a[1]}return"Other"}function hb(s=Cn()){return/firefox\//i.test(s)}function db(s=Cn()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fb(s=Cn()){return/crios\//i.test(s)}function mb(s=Cn()){return/iemobile/i.test(s)}function gb(s=Cn()){return/android/i.test(s)}function pb(s=Cn()){return/blackberry/i.test(s)}function yb(s=Cn()){return/webos/i.test(s)}function Tg(s=Cn()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function qA(s=Cn()){return Tg(s)&&!!window.navigator?.standalone}function HA(){return nk()&&document.documentMode===10}function vb(s=Cn()){return Tg(s)||gb(s)||yb(s)||pb(s)||/windows phone/i.test(s)||mb(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(s,e=[]){let t;switch(s){case"Browser":t=sx(Cn());break;case"Worker":t=`${sx(Cn())}-${s}`;break;default:t=s}const a=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lo}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const a=l=>new Promise((d,m)=>{try{const p=e(l);d(p)}catch(p){m(p)}});a.onAbort=t,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const a of this.queue)await a(e),a.onAbort&&t.push(a.onAbort)}catch(a){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FA(s,e={}){return Ca(s,"GET","/v2/passwordPolicy",Ra(s,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=6;class $A{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??KA,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(t.meetsMinPasswordLength=e.length>=a),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,t,a,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,t,a,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ax(this),this.idTokenSubscription=new ax(this),this.beforeStateQueue=new GA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ss(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await To.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ah(this,{idToken:e}),a=await Tr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(a)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(dr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let a=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=a?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===d)&&m?.user&&(a=m.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(l){a=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(As(this));const t=e?Pn(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(As(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(As(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ss(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FA(this),t=new $A(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wc("auth","Firebase",e())}onAuthStateChanged(e,t,a){return this.registerStateListener(this.authStateSubscription,e,t,a)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,a){return this.registerStateListener(this.idTokenSubscription,e,t,a)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(a.tenantId=this.tenantId),await BA(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const a=await this.getOrInitRedirectPersistenceManager(t);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ss(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Ss(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,a,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(m,this,"internal-error"),m.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,a,o);return()=>{d=!0,p()}}else{const p=e.addObserver(t);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&EA(`Error while retrieving App Check token: ${e.error}`),e?.token}}function pi(s){return Pn(s)}class ax{constructor(e){this.auth=e,this.observer=null,this.addObserver=uk(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QA(s){$h=s}function _b(s){return $h.loadJS(s)}function XA(){return $h.recaptchaEnterpriseScript}function ZA(){return $h.gapiScript}function WA(s){return`__${s}${Math.floor(Math.random()*1e6)}`}class JA{constructor(){this.enterprise=new eN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tN="recaptcha-enterprise",bb="NO_RECAPTCHA";class nN{constructor(e){this.type=tN,this.auth=pi(e)}async verify(e="verify",t=!1){async function a(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,m)=>{DA(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new jA(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,d(y.siteKey)}}).catch(p=>{m(p)})})}function o(l,d,m){const p=window.grecaptcha;ex(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{d(y)}).catch(()=>{d(bb)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JA().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{a(this.auth).then(m=>{if(!t&&ex(window.grecaptcha))o(m,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let p=XA();p.length!==0&&(p+=m),_b(p).then(()=>{o(m,l,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function ix(s,e,t,a=!1,o=!1){const l=new nN(s);let d;if(o)d=bb;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return a?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Bm(s,e,t,a,o){if(s._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ix(s,e,t,t==="getOobCode");return a(s,l)}else return a(s,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await ix(s,e,t,t==="getOobCode");return a(s,d)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(s,e){const t=vg(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ci(l,e??{}))return o;kr(o,"already-initialized")}return t.initialize({options:e})}function sN(s,e){const t=e?.persistence||[],a=(Array.isArray(t)?t:[t]).map(Ss);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(a,e?.popupRedirectResolver)}function aN(s,e,t){const a=pi(s);Re(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,l=Tb(e),{host:d,port:m}=iN(e),p=m===null?"":`:${m}`,y={url:`${l}//${d}${p}/`},x=Object.freeze({host:d,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Re(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Re(ci(y,a.config.emulator)&&ci(x,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=y,a.emulatorConfig=x,a.settings.appVerificationDisabledForTesting=!0,Po(d)?(X_(`${l}//${d}${p}`),XS("Auth",!0)):oN()}function Tb(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function iN(s){const e=Tb(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const a=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const l=o[1];return{host:l,port:ox(a.substr(l.length+1))}}else{const[l,d]=a.split(":");return{host:l,port:ox(d)}}}function ox(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function oN(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,t){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function lN(s,e){return Ca(s,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cN(s,e){return Ac(s,"POST","/v1/accounts:signInWithPassword",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(s,e){return Ac(s,"POST","/v1/accounts:signInWithEmailLink",Ra(s,e))}async function hN(s,e){return Ac(s,"POST","/v1/accounts:signInWithEmailLink",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends Eg{constructor(e,t,a,o=null){super("password",a),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new dc(e,t,"password")}static _fromEmailAndCode(e,t,a=null){return new dc(e,t,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,t,"signInWithPassword",cN);case"emailLink":return uN(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const a={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bm(e,a,"signUpPassword",lN);case"emailLink":return hN(e,{idToken:t,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(s,e){return Ac(s,"POST","/v1/accounts:signInWithIdp",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="http://localhost";class hi extends Eg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...l}=t;if(!a||!o)return null;const d=new hi(a,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Eo(e,t)}_linkToIdToken(e,t){const a=this.buildRequest();return a.idToken=t,Eo(e,a)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Eo(e,t)}buildRequest(){const e={requestUri:dN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Sc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fN(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mN(s){const e=Ql(Xl(s)).link,t=e?Ql(Xl(e)).deep_link_id:null,a=Ql(Xl(s)).deep_link_id;return(a?Ql(Xl(a)).link:null)||a||t||e||s}class wg{constructor(e){const t=Ql(Xl(e)),a=t.apiKey??null,o=t.oobCode??null,l=fN(t.mode??null);Re(a&&o&&l,"argument-error"),this.apiKey=a,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=mN(e);try{return new wg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,t){return dc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const a=wg.parseLink(t);return Re(a,"argument-error"),dc._fromEmailAndCode(e,a.code,a.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends Eb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends Nc{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.FACEBOOK_SIGN_IN_METHOD="facebook.com";ha.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends Nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return hi._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:a}=e;if(!t&&!a)return null;try{return da.credential(t,a)}catch{return null}}}da.GOOGLE_SIGN_IN_METHOD="google.com";da.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Nc{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fa.credential(e.oauthAccessToken)}catch{return null}}}fa.GITHUB_SIGN_IN_METHOD="github.com";fa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Nc{constructor(){super("twitter.com")}static credential(e,t){return hi._fromParams({providerId:ma.PROVIDER_ID,signInMethod:ma.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ma.credentialFromTaggedObject(e)}static credentialFromError(e){return ma.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:a}=e;if(!t||!a)return null;try{return ma.credential(t,a)}catch{return null}}}ma.TWITTER_SIGN_IN_METHOD="twitter.com";ma.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(s,e){return Ac(s,"POST","/v1/accounts:signUp",Ra(s,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,a,o=!1){const l=await Tr._fromIdTokenResponse(e,a,o),d=lx(a);return new di({user:l,providerId:d,_tokenResponse:a,operationType:t})}static async _forOperation(e,t,a){await e._updateTokensIfNecessary(a,!0);const o=lx(a);return new di({user:e,providerId:o,_tokenResponse:a,operationType:t})}}function lx(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends Os{constructor(e,t,a,o){super(t.code,t.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,t,a,o){return new Rh(e,t,a,o)}}function wb(s,e,t,a){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(s,l,e,a):l})}async function pN(s,e,t=!1){const a=await hc(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return di._forOperation(s,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(s,e,t=!1){const{auth:a}=s;if(dr(a.app))return Promise.reject(As(a));const o="reauthenticate";try{const l=await hc(s,wb(a,o,e,s),t);Re(l.idToken,a,"internal-error");const d=bg(l.idToken);Re(d,a,"internal-error");const{sub:m}=d;return Re(s.uid===m,a,"user-mismatch"),di._forOperation(s,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&kr(a,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sb(s,e,t=!1){if(dr(s.app))return Promise.reject(As(s));const a="signIn",o=await wb(s,a,e),l=await di._fromIdTokenResponse(s,a,o);return t||await s._updateCurrentUser(l.user),l}async function vN(s,e){return Sb(pi(s),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kb(s){const e=pi(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xN(s,e,t){if(dr(s.app))return Promise.reject(As(s));const a=pi(s),d=await Bm(a,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gN).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&kb(s),p}),m=await di._fromIdTokenResponse(a,"signIn",d);return await a._updateCurrentUser(m.user),m}function _N(s,e,t){return dr(s.app)?Promise.reject(As(s)):vN(Pn(s),zo.credential(e,t)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&kb(s),a})}function bN(s,e,t,a){return Pn(s).onIdTokenChanged(e,t,a)}function TN(s,e,t){return Pn(s).beforeAuthStateChanged(e,t)}function EN(s,e,t,a){return Pn(s).onAuthStateChanged(e,t,a)}function wN(s){return Pn(s).signOut()}const Ch="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ch,"1"),this.storage.removeItem(Ch),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1e3,kN=10;class Nb extends Ab{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const a=this.storage.getItem(t),o=this.localCache[t];a!==o&&e(t,o,a)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,p)=>{this.notifyListeners(d,p)});return}const a=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(a);!t&&this.localCache[a]===d||this.notifyListeners(a,d)},l=this.storage.getItem(a);HA()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,kN):o()}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:a}),!0)})},SN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nb.type="LOCAL";const AN=Nb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb extends Ab{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rb.type="SESSION";const Cb=Rb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const a=new Yh(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:a,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const m=Array.from(d).map(async y=>y(t.origin,l)),p=await NN(m);t.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(s="",e=10){let t="";for(let a=0;a<e;a++)t+=Math.floor(Math.random()*10);return s+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((m,p)=>{const y=Sg("",20);o.port1.start();const x=setTimeout(()=>{p(new Error("unsupported_event"))},a);d={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(x),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(A.data.response);break;default:clearTimeout(x),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(){return window}function CN(s){Kr().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(){return typeof Kr().WorkerGlobalScope<"u"&&typeof Kr().importScripts=="function"}async function IN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jN(){return navigator?.serviceWorker?.controller||null}function DN(){return Ib()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="firebaseLocalStorageDb",MN=1,Ih="firebaseLocalStorage",Db="fbase_key";class Rc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qh(s,e){return s.transaction([Ih],e?"readwrite":"readonly").objectStore(Ih)}function ON(){const s=indexedDB.deleteDatabase(jb);return new Rc(s).toPromise()}function qm(){const s=indexedDB.open(jb,MN);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const a=s.result;try{a.createObjectStore(Ih,{keyPath:Db})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const a=s.result;a.objectStoreNames.contains(Ih)?e(a):(a.close(),await ON(),e(await qm()))})})}async function cx(s,e,t){const a=Qh(s,!0).put({[Db]:e,value:t});return new Rc(a).toPromise()}async function VN(s,e){const t=Qh(s,!1).get(e),a=await new Rc(t).toPromise();return a===void 0?null:a.value}function ux(s,e){const t=Qh(s,!0).delete(e);return new Rc(t).toPromise()}const PN=800,LN=3;class Mb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(t++>LN)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ib()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yh._getInstance(DN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await IN(),!this.activeServiceWorker)return;this.sender=new RN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qm();return await cx(e,Ch,"1"),await ux(e,Ch),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(a=>cx(a,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(a=>VN(a,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ux(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Qh(o,!1).getAll();return new Rc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mb.type="LOCAL";const zN=Mb;new kc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(s,e){return e?Ss(e):(Re(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg extends Eg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Eo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BN(s){return Sb(s.auth,new kg(s),s.bypassAuthState)}function qN(s){const{auth:e,user:t}=s;return Re(t,e,"internal-error"),yN(t,new kg(s),s.bypassAuthState)}async function HN(s){const{auth:e,user:t}=s;return Re(t,e,"internal-error"),pN(t,new kg(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t,a,o,l=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:a,postBody:o,tenantId:l,error:d,type:m}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:t,sessionId:a,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BN;case"linkViaPopup":case"linkViaRedirect":return HN;case"reauthViaPopup":case"reauthViaRedirect":return qN;default:kr(this.auth,"internal-error")}}resolve(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new kc(2e3,1e4);class _o extends Ob{constructor(e,t,a,o,l){super(e,t,o,l),this.provider=a,this.authWindow=null,this.pollId=null,_o.currentPopupAction&&_o.currentPopupAction.cancel(),_o.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){js(this.filter.length===1,"Popup operations only handle one event");const e=Sg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Fr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_o.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GN.get())};e()}}_o.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="pendingRedirect",yh=new Map;class KN extends Ob{constructor(e,t,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,a),this.eventId=null}async execute(){let e=yh.get(this.auth._key());if(!e){try{const a=await $N(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(t){e=()=>Promise.reject(t)}yh.set(this.auth._key(),e)}return this.bypassAuthState||yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function $N(s,e){const t=XN(e),a=QN(s);if(!await a._isAvailable())return!1;const o=await a._get(t)==="true";return await a._remove(t),o}function YN(s,e){yh.set(s._key(),e)}function QN(s){return Ss(s._redirectPersistence)}function XN(s){return ph(FN,s.config.apiKey,s.name)}async function ZN(s,e,t=!1){if(dr(s.app))return Promise.reject(As(s));const a=pi(s),o=UN(a,e),d=await new KN(a,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await a._persistUserIfCurrent(d.user),await a._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=600*1e3;class JN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(t=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!e2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Vb(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Fr(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const a=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WN&&this.cachedEventUids.clear(),this.cachedEventUids.has(hx(e))}saveEventToCache(e){this.cachedEventUids.add(hx(e)),this.lastProcessedEventTime=Date.now()}}function hx(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function Vb({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function e2(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Vb(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(s,e={}){return Ca(s,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r2=/^https?/;async function s2(s){if(s.config.emulator)return;const{authorizedDomains:e}=await t2(s);for(const t of e)try{if(a2(t))return}catch{}kr(s,"unauthorized-domain")}function a2(s){const e=zm(),{protocol:t,hostname:a}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&a===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===a}if(!r2.test(t))return!1;if(n2.test(s))return a===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=new kc(3e4,6e4);function dx(){const s=Kr().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function o2(s){return new Promise((e,t)=>{function a(){dx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dx(),t(Fr(s,"network-request-failed"))},timeout:i2.get()})}if(Kr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Kr().gapi?.load)a();else{const o=WA("iframefcb");return Kr()[o]=()=>{gapi.load?a():t(Fr(s,"network-request-failed"))},_b(`${ZA()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw vh=null,e})}let vh=null;function l2(s){return vh=vh||o2(s),vh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new kc(5e3,15e3),u2="__/auth/iframe",h2="emulator/auth/iframe",d2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},f2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function m2(s){const e=s.config;Re(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?_g(e,h2):`https://${s.config.authDomain}/${u2}`,a={apiKey:e.apiKey,appName:s.name,v:Lo},o=f2.get(s.config.apiHost);o&&(a.eid=o);const l=s._getFrameworks();return l.length&&(a.fw=l.join(",")),`${t}?${Sc(a).slice(1)}`}async function g2(s){const e=await l2(s),t=Kr().gapi;return Re(t,s,"internal-error"),e.open({where:document.body,url:m2(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d2,dontclear:!0},a=>new Promise(async(o,l)=>{await a.restyle({setHideOnLeave:!1});const d=Fr(s,"network-request-failed"),m=Kr().setTimeout(()=>{l(d)},c2.get());function p(){Kr().clearTimeout(m),o(a)}a.ping(p).then(p,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},y2=500,v2=600,x2="_blank",_2="http://localhost";class fx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function b2(s,e,t,a=y2,o=v2){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-a)/2,0).toString();let m="";const p={...p2,width:a.toString(),height:o.toString(),top:l,left:d},y=Cn().toLowerCase();t&&(m=fb(y)?x2:t),hb(y)&&(e=e||_2,p.scrollbars="yes");const x=Object.entries(p).reduce((A,[M,B])=>`${A}${M}=${B},`,"");if(qA(y)&&m!=="_self")return T2(e||"",m),new fx(null);const T=window.open(e||"",m,x);Re(T,s,"popup-blocked");try{T.focus()}catch{}return new fx(T)}function T2(s,e){const t=document.createElement("a");t.href=s,t.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="__/auth/handler",w2="emulator/auth/handler",S2=encodeURIComponent("fac");async function mx(s,e,t,a,o,l){Re(s.config.authDomain,s,"auth-domain-config-required"),Re(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:a,v:Lo,eventId:o};if(e instanceof Eb){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",ck(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,T]of Object.entries({}))d[x]=T}if(e instanceof Nc){const x=e.getScopes().filter(T=>T!=="");x.length>0&&(d.scopes=x.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const x of Object.keys(m))m[x]===void 0&&delete m[x];const p=await s._getAppCheckToken(),y=p?`#${S2}=${encodeURIComponent(p)}`:"";return`${k2(s)}?${Sc(m).slice(1)}${y}`}function k2({config:s}){return s.emulator?_g(s,w2):`https://${s.authDomain}/${E2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="webStorageSupport";class A2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Cb,this._completeRedirectFn=ZN,this._overrideRedirectResult=YN}async _openPopup(e,t,a,o){js(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await mx(e,t,a,zm(),o);return b2(e,l,Sg())}async _openRedirect(e,t,a,o){await this._originValidation(e);const l=await mx(e,t,a,zm(),o);return CN(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(js(l,"If manager is not set, promise should be"),l)}const a=this.initAndGetManager(e);return this.eventManagers[t]={promise:a},a.catch(()=>{delete this.eventManagers[t]}),a}async initAndGetManager(e){const t=await g2(e),a=new JN(e);return t.register("authEvent",o=>(Re(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=t,a}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sm,{type:Sm},o=>{const l=o?.[0]?.[Sm];l!==void 0&&t(!!l),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=s2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vb()||db()||Tg()}}const N2=A2;var gx="@firebase/auth",px="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I2(s){ko(new ui("auth",(e,{options:t})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=a.options;Re(d&&!d.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xb(s)},y=new YA(a,o,l,p);return sN(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,a)=>{e.getProvider("auth-internal").initialize()})),ko(new ui("auth-internal",e=>{const t=pi(e.getProvider("auth").getImmediate());return(a=>new R2(a))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),va(gx,px,C2(s)),va(gx,px,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=300,D2=Q_("authIdTokenMaxAge")||j2;let yx=null;const M2=s=>async e=>{const t=e&&await e.getIdTokenResult(),a=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(a&&a>D2)return;const o=t?.token;yx!==o&&(yx=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function O2(s=eb()){const e=vg(s,"auth");if(e.isInitialized())return e.getImmediate();const t=rN(s,{popupRedirectResolver:N2,persistence:[zN,AN,Cb]}),a=Q_("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(a,location.origin);if(location.origin===l.origin){const d=M2(l.toString());TN(t,d,()=>d(t.currentUser)),bN(t,m=>d(m))}}const o=KS("auth");return o&&aN(t,`http://${o}`),t}function V2(){return document.getElementsByTagName("head")?.[0]??document}QA({loadJS(s){return new Promise((e,t)=>{const a=document.createElement("script");a.setAttribute("src",s),a.onload=e,a.onerror=o=>{const l=Fr("internal-error");l.customData=o,t(l)},a.type="text/javascript",a.charset="UTF-8",V2().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I2("Browser");var P2="firebase",L2="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */va(P2,L2,"app");var vx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xa,Pb;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(V,C){function R(){}R.prototype=C.prototype,V.D=C.prototype,V.prototype=new R,V.prototype.constructor=V,V.C=function(O,P,I){for(var N=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)N[ve-2]=arguments[ve];return C.prototype[P].apply(O,N)}}function t(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(a,t),a.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(V,C,R){R||(R=0);var O=Array(16);if(typeof C=="string")for(var P=0;16>P;++P)O[P]=C.charCodeAt(R++)|C.charCodeAt(R++)<<8|C.charCodeAt(R++)<<16|C.charCodeAt(R++)<<24;else for(P=0;16>P;++P)O[P]=C[R++]|C[R++]<<8|C[R++]<<16|C[R++]<<24;C=V.g[0],R=V.g[1],P=V.g[2];var I=V.g[3],N=C+(I^R&(P^I))+O[0]+3614090360&4294967295;C=R+(N<<7&4294967295|N>>>25),N=I+(P^C&(R^P))+O[1]+3905402710&4294967295,I=C+(N<<12&4294967295|N>>>20),N=P+(R^I&(C^R))+O[2]+606105819&4294967295,P=I+(N<<17&4294967295|N>>>15),N=R+(C^P&(I^C))+O[3]+3250441966&4294967295,R=P+(N<<22&4294967295|N>>>10),N=C+(I^R&(P^I))+O[4]+4118548399&4294967295,C=R+(N<<7&4294967295|N>>>25),N=I+(P^C&(R^P))+O[5]+1200080426&4294967295,I=C+(N<<12&4294967295|N>>>20),N=P+(R^I&(C^R))+O[6]+2821735955&4294967295,P=I+(N<<17&4294967295|N>>>15),N=R+(C^P&(I^C))+O[7]+4249261313&4294967295,R=P+(N<<22&4294967295|N>>>10),N=C+(I^R&(P^I))+O[8]+1770035416&4294967295,C=R+(N<<7&4294967295|N>>>25),N=I+(P^C&(R^P))+O[9]+2336552879&4294967295,I=C+(N<<12&4294967295|N>>>20),N=P+(R^I&(C^R))+O[10]+4294925233&4294967295,P=I+(N<<17&4294967295|N>>>15),N=R+(C^P&(I^C))+O[11]+2304563134&4294967295,R=P+(N<<22&4294967295|N>>>10),N=C+(I^R&(P^I))+O[12]+1804603682&4294967295,C=R+(N<<7&4294967295|N>>>25),N=I+(P^C&(R^P))+O[13]+4254626195&4294967295,I=C+(N<<12&4294967295|N>>>20),N=P+(R^I&(C^R))+O[14]+2792965006&4294967295,P=I+(N<<17&4294967295|N>>>15),N=R+(C^P&(I^C))+O[15]+1236535329&4294967295,R=P+(N<<22&4294967295|N>>>10),N=C+(P^I&(R^P))+O[1]+4129170786&4294967295,C=R+(N<<5&4294967295|N>>>27),N=I+(R^P&(C^R))+O[6]+3225465664&4294967295,I=C+(N<<9&4294967295|N>>>23),N=P+(C^R&(I^C))+O[11]+643717713&4294967295,P=I+(N<<14&4294967295|N>>>18),N=R+(I^C&(P^I))+O[0]+3921069994&4294967295,R=P+(N<<20&4294967295|N>>>12),N=C+(P^I&(R^P))+O[5]+3593408605&4294967295,C=R+(N<<5&4294967295|N>>>27),N=I+(R^P&(C^R))+O[10]+38016083&4294967295,I=C+(N<<9&4294967295|N>>>23),N=P+(C^R&(I^C))+O[15]+3634488961&4294967295,P=I+(N<<14&4294967295|N>>>18),N=R+(I^C&(P^I))+O[4]+3889429448&4294967295,R=P+(N<<20&4294967295|N>>>12),N=C+(P^I&(R^P))+O[9]+568446438&4294967295,C=R+(N<<5&4294967295|N>>>27),N=I+(R^P&(C^R))+O[14]+3275163606&4294967295,I=C+(N<<9&4294967295|N>>>23),N=P+(C^R&(I^C))+O[3]+4107603335&4294967295,P=I+(N<<14&4294967295|N>>>18),N=R+(I^C&(P^I))+O[8]+1163531501&4294967295,R=P+(N<<20&4294967295|N>>>12),N=C+(P^I&(R^P))+O[13]+2850285829&4294967295,C=R+(N<<5&4294967295|N>>>27),N=I+(R^P&(C^R))+O[2]+4243563512&4294967295,I=C+(N<<9&4294967295|N>>>23),N=P+(C^R&(I^C))+O[7]+1735328473&4294967295,P=I+(N<<14&4294967295|N>>>18),N=R+(I^C&(P^I))+O[12]+2368359562&4294967295,R=P+(N<<20&4294967295|N>>>12),N=C+(R^P^I)+O[5]+4294588738&4294967295,C=R+(N<<4&4294967295|N>>>28),N=I+(C^R^P)+O[8]+2272392833&4294967295,I=C+(N<<11&4294967295|N>>>21),N=P+(I^C^R)+O[11]+1839030562&4294967295,P=I+(N<<16&4294967295|N>>>16),N=R+(P^I^C)+O[14]+4259657740&4294967295,R=P+(N<<23&4294967295|N>>>9),N=C+(R^P^I)+O[1]+2763975236&4294967295,C=R+(N<<4&4294967295|N>>>28),N=I+(C^R^P)+O[4]+1272893353&4294967295,I=C+(N<<11&4294967295|N>>>21),N=P+(I^C^R)+O[7]+4139469664&4294967295,P=I+(N<<16&4294967295|N>>>16),N=R+(P^I^C)+O[10]+3200236656&4294967295,R=P+(N<<23&4294967295|N>>>9),N=C+(R^P^I)+O[13]+681279174&4294967295,C=R+(N<<4&4294967295|N>>>28),N=I+(C^R^P)+O[0]+3936430074&4294967295,I=C+(N<<11&4294967295|N>>>21),N=P+(I^C^R)+O[3]+3572445317&4294967295,P=I+(N<<16&4294967295|N>>>16),N=R+(P^I^C)+O[6]+76029189&4294967295,R=P+(N<<23&4294967295|N>>>9),N=C+(R^P^I)+O[9]+3654602809&4294967295,C=R+(N<<4&4294967295|N>>>28),N=I+(C^R^P)+O[12]+3873151461&4294967295,I=C+(N<<11&4294967295|N>>>21),N=P+(I^C^R)+O[15]+530742520&4294967295,P=I+(N<<16&4294967295|N>>>16),N=R+(P^I^C)+O[2]+3299628645&4294967295,R=P+(N<<23&4294967295|N>>>9),N=C+(P^(R|~I))+O[0]+4096336452&4294967295,C=R+(N<<6&4294967295|N>>>26),N=I+(R^(C|~P))+O[7]+1126891415&4294967295,I=C+(N<<10&4294967295|N>>>22),N=P+(C^(I|~R))+O[14]+2878612391&4294967295,P=I+(N<<15&4294967295|N>>>17),N=R+(I^(P|~C))+O[5]+4237533241&4294967295,R=P+(N<<21&4294967295|N>>>11),N=C+(P^(R|~I))+O[12]+1700485571&4294967295,C=R+(N<<6&4294967295|N>>>26),N=I+(R^(C|~P))+O[3]+2399980690&4294967295,I=C+(N<<10&4294967295|N>>>22),N=P+(C^(I|~R))+O[10]+4293915773&4294967295,P=I+(N<<15&4294967295|N>>>17),N=R+(I^(P|~C))+O[1]+2240044497&4294967295,R=P+(N<<21&4294967295|N>>>11),N=C+(P^(R|~I))+O[8]+1873313359&4294967295,C=R+(N<<6&4294967295|N>>>26),N=I+(R^(C|~P))+O[15]+4264355552&4294967295,I=C+(N<<10&4294967295|N>>>22),N=P+(C^(I|~R))+O[6]+2734768916&4294967295,P=I+(N<<15&4294967295|N>>>17),N=R+(I^(P|~C))+O[13]+1309151649&4294967295,R=P+(N<<21&4294967295|N>>>11),N=C+(P^(R|~I))+O[4]+4149444226&4294967295,C=R+(N<<6&4294967295|N>>>26),N=I+(R^(C|~P))+O[11]+3174756917&4294967295,I=C+(N<<10&4294967295|N>>>22),N=P+(C^(I|~R))+O[2]+718787259&4294967295,P=I+(N<<15&4294967295|N>>>17),N=R+(I^(P|~C))+O[9]+3951481745&4294967295,V.g[0]=V.g[0]+C&4294967295,V.g[1]=V.g[1]+(P+(N<<21&4294967295|N>>>11))&4294967295,V.g[2]=V.g[2]+P&4294967295,V.g[3]=V.g[3]+I&4294967295}a.prototype.u=function(V,C){C===void 0&&(C=V.length);for(var R=C-this.blockSize,O=this.B,P=this.h,I=0;I<C;){if(P==0)for(;I<=R;)o(this,V,I),I+=this.blockSize;if(typeof V=="string"){for(;I<C;)if(O[P++]=V.charCodeAt(I++),P==this.blockSize){o(this,O),P=0;break}}else for(;I<C;)if(O[P++]=V[I++],P==this.blockSize){o(this,O),P=0;break}}this.h=P,this.o+=C},a.prototype.v=function(){var V=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);V[0]=128;for(var C=1;C<V.length-8;++C)V[C]=0;var R=8*this.o;for(C=V.length-8;C<V.length;++C)V[C]=R&255,R/=256;for(this.u(V),V=Array(16),C=R=0;4>C;++C)for(var O=0;32>O;O+=8)V[R++]=this.g[C]>>>O&255;return V};function l(V,C){var R=m;return Object.prototype.hasOwnProperty.call(R,V)?R[V]:R[V]=C(V)}function d(V,C){this.h=C;for(var R=[],O=!0,P=V.length-1;0<=P;P--){var I=V[P]|0;O&&I==C||(R[P]=I,O=!1)}this.g=R}var m={};function p(V){return-128<=V&&128>V?l(V,function(C){return new d([C|0],0>C?-1:0)}):new d([V|0],0>V?-1:0)}function y(V){if(isNaN(V)||!isFinite(V))return T;if(0>V)return j(y(-V));for(var C=[],R=1,O=0;V>=R;O++)C[O]=V/R|0,R*=4294967296;return new d(C,0)}function x(V,C){if(V.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(V.charAt(0)=="-")return j(x(V.substring(1),C));if(0<=V.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=y(Math.pow(C,8)),O=T,P=0;P<V.length;P+=8){var I=Math.min(8,V.length-P),N=parseInt(V.substring(P,P+I),C);8>I?(I=y(Math.pow(C,I)),O=O.j(I).add(y(N))):(O=O.j(R),O=O.add(y(N)))}return O}var T=p(0),A=p(1),M=p(16777216);s=d.prototype,s.m=function(){if(L(this))return-j(this).m();for(var V=0,C=1,R=0;R<this.g.length;R++){var O=this.i(R);V+=(0<=O?O:4294967296+O)*C,C*=4294967296}return V},s.toString=function(V){if(V=V||10,2>V||36<V)throw Error("radix out of range: "+V);if(B(this))return"0";if(L(this))return"-"+j(this).toString(V);for(var C=y(Math.pow(V,6)),R=this,O="";;){var P=ue(R,C).g;R=X(R,P.j(C));var I=((0<R.g.length?R.g[0]:R.h)>>>0).toString(V);if(R=P,B(R))return I+O;for(;6>I.length;)I="0"+I;O=I+O}},s.i=function(V){return 0>V?0:V<this.g.length?this.g[V]:this.h};function B(V){if(V.h!=0)return!1;for(var C=0;C<V.g.length;C++)if(V.g[C]!=0)return!1;return!0}function L(V){return V.h==-1}s.l=function(V){return V=X(this,V),L(V)?-1:B(V)?0:1};function j(V){for(var C=V.g.length,R=[],O=0;O<C;O++)R[O]=~V.g[O];return new d(R,~V.h).add(A)}s.abs=function(){return L(this)?j(this):this},s.add=function(V){for(var C=Math.max(this.g.length,V.g.length),R=[],O=0,P=0;P<=C;P++){var I=O+(this.i(P)&65535)+(V.i(P)&65535),N=(I>>>16)+(this.i(P)>>>16)+(V.i(P)>>>16);O=N>>>16,I&=65535,N&=65535,R[P]=N<<16|I}return new d(R,R[R.length-1]&-2147483648?-1:0)};function X(V,C){return V.add(j(C))}s.j=function(V){if(B(this)||B(V))return T;if(L(this))return L(V)?j(this).j(j(V)):j(j(this).j(V));if(L(V))return j(this.j(j(V)));if(0>this.l(M)&&0>V.l(M))return y(this.m()*V.m());for(var C=this.g.length+V.g.length,R=[],O=0;O<2*C;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(var P=0;P<V.g.length;P++){var I=this.i(O)>>>16,N=this.i(O)&65535,ve=V.i(P)>>>16,_e=V.i(P)&65535;R[2*O+2*P]+=N*_e,W(R,2*O+2*P),R[2*O+2*P+1]+=I*_e,W(R,2*O+2*P+1),R[2*O+2*P+1]+=N*ve,W(R,2*O+2*P+1),R[2*O+2*P+2]+=I*ve,W(R,2*O+2*P+2)}for(O=0;O<C;O++)R[O]=R[2*O+1]<<16|R[2*O];for(O=C;O<2*C;O++)R[O]=0;return new d(R,0)};function W(V,C){for(;(V[C]&65535)!=V[C];)V[C+1]+=V[C]>>>16,V[C]&=65535,C++}function he(V,C){this.g=V,this.h=C}function ue(V,C){if(B(C))throw Error("division by zero");if(B(V))return new he(T,T);if(L(V))return C=ue(j(V),C),new he(j(C.g),j(C.h));if(L(C))return C=ue(V,j(C)),new he(j(C.g),C.h);if(30<V.g.length){if(L(V)||L(C))throw Error("slowDivide_ only works with positive integers.");for(var R=A,O=C;0>=O.l(V);)R=le(R),O=le(O);var P=de(R,1),I=de(O,1);for(O=de(O,2),R=de(R,2);!B(O);){var N=I.add(O);0>=N.l(V)&&(P=P.add(R),I=N),O=de(O,1),R=de(R,1)}return C=X(V,P.j(C)),new he(P,C)}for(P=T;0<=V.l(C);){for(R=Math.max(1,Math.floor(V.m()/C.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),I=y(R),N=I.j(C);L(N)||0<N.l(V);)R-=O,I=y(R),N=I.j(C);B(I)&&(I=A),P=P.add(I),V=X(V,N)}return new he(P,V)}s.A=function(V){return ue(this,V).h},s.and=function(V){for(var C=Math.max(this.g.length,V.g.length),R=[],O=0;O<C;O++)R[O]=this.i(O)&V.i(O);return new d(R,this.h&V.h)},s.or=function(V){for(var C=Math.max(this.g.length,V.g.length),R=[],O=0;O<C;O++)R[O]=this.i(O)|V.i(O);return new d(R,this.h|V.h)},s.xor=function(V){for(var C=Math.max(this.g.length,V.g.length),R=[],O=0;O<C;O++)R[O]=this.i(O)^V.i(O);return new d(R,this.h^V.h)};function le(V){for(var C=V.g.length+1,R=[],O=0;O<C;O++)R[O]=V.i(O)<<1|V.i(O-1)>>>31;return new d(R,V.h)}function de(V,C){var R=C>>5;C%=32;for(var O=V.g.length-R,P=[],I=0;I<O;I++)P[I]=0<C?V.i(I+R)>>>C|V.i(I+R+1)<<32-C:V.i(I+R);return new d(P,V.h)}a.prototype.digest=a.prototype.v,a.prototype.reset=a.prototype.s,a.prototype.update=a.prototype.u,Pb=a,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=x,xa=d}).apply(typeof vx<"u"?vx:typeof self<"u"?self:typeof window<"u"?window:{});var oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lb,Zl,zb,xh,Hm,Ub,Bb,qb;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,_){return h==Array.prototype||h==Object.prototype||(h[v]=_.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof oh=="object"&&oh];for(var v=0;v<h.length;++v){var _=h[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=t(this);function o(h,v){if(v)e:{var _=a;h=h.split(".");for(var S=0;S<h.length-1;S++){var q=h[S];if(!(q in _))break e;_=_[q]}h=h[h.length-1],S=_[h],v=v(S),v!=S&&v!=null&&e(_,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var _=0,S=!1,q={next:function(){if(!S&&_<h.length){var ee=_++;return{value:v(ee,h[ee]),done:!1}}return S=!0,{done:!0,value:void 0}}};return q[Symbol.iterator]=function(){return q},q}o("Array.prototype.values",function(h){return h||function(){return l(this,function(v,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function p(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function y(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function x(h,v,_){return h.call.apply(h.bind,arguments)}function T(h,v,_){if(!h)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(q,S),h.apply(v,q)}}return function(){return h.apply(v,arguments)}}function A(h,v,_){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:T,A.apply(null,arguments)}function M(h,v){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),h.apply(this,S)}}function B(h,v){function _(){}_.prototype=v.prototype,h.aa=v.prototype,h.prototype=new _,h.prototype.constructor=h,h.Qb=function(S,q,ee){for(var me=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)me[Je-2]=arguments[Je];return v.prototype[q].apply(S,me)}}function L(h){const v=h.length;if(0<v){const _=Array(v);for(let S=0;S<v;S++)_[S]=h[S];return _}return[]}function j(h,v){for(let _=1;_<arguments.length;_++){const S=arguments[_];if(p(S)){const q=h.length||0,ee=S.length||0;h.length=q+ee;for(let me=0;me<ee;me++)h[q+me]=S[me]}else h.push(S)}}class X{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function W(h){return/^[\s\xa0]*$/.test(h)}function he(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function ue(h){return ue[" "](h),h}ue[" "]=function(){};var le=he().indexOf("Gecko")!=-1&&!(he().toLowerCase().indexOf("webkit")!=-1&&he().indexOf("Edge")==-1)&&!(he().indexOf("Trident")!=-1||he().indexOf("MSIE")!=-1)&&he().indexOf("Edge")==-1;function de(h,v,_){for(const S in h)v.call(_,h[S],S,h)}function V(h,v){for(const _ in h)v.call(void 0,h[_],_,h)}function C(h){const v={};for(const _ in h)v[_]=h[_];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,v){let _,S;for(let q=1;q<arguments.length;q++){S=arguments[q];for(_ in S)h[_]=S[_];for(let ee=0;ee<R.length;ee++)_=R[ee],Object.prototype.hasOwnProperty.call(S,_)&&(h[_]=S[_])}}function P(h){var v=1;h=h.split(":");const _=[];for(;0<v&&h.length;)_.push(h.shift()),v--;return h.length&&_.push(h.join(":")),_}function I(h){m.setTimeout(()=>{throw h},0)}function N(){var h=Y;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class ve{constructor(){this.h=this.g=null}add(v,_){const S=_e.get();S.set(v,_),this.h?this.h.next=S:this.g=S,this.h=S}}var _e=new X(()=>new G,h=>h.reset());class G{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,te=!1,Y=new ve,k=()=>{const h=m.Promise.resolve(void 0);ae=()=>{h.then(J)}};var J=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(_){I(_)}var v=_e;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}te=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var ce=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const _=()=>{};m.addEventListener("test",_,v),m.removeEventListener("test",_,v)}catch{}return h})();function fe(h,v){if(F.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var _=this.type=h.type,S=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(le){e:{try{ue(v.nodeName);var q=!0;break e}catch{}q=!1}q||(v=null)}}else _=="mouseover"?v=h.fromElement:_=="mouseout"&&(v=h.toElement);this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:pe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&fe.aa.h.call(this)}}B(fe,F);var pe={2:"touch",3:"pen",4:"mouse"};fe.prototype.h=function(){fe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function pt(h,v,_,S,q){this.listener=h,this.proxy=null,this.src=v,this.type=_,this.capture=!!S,this.ha=q,this.key=++Ke,this.da=this.fa=!1}function rt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function St(h){this.src=h,this.g={},this.h=0}St.prototype.add=function(h,v,_,S,q){var ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);var me=en(h,v,S,q);return-1<me?(v=h[me],_||(v.fa=!1)):(v=new pt(v,this.src,ee,!!S,q),v.fa=_,h.push(v)),v};function wn(h,v){var _=v.type;if(_ in h.g){var S=h.g[_],q=Array.prototype.indexOf.call(S,v,void 0),ee;(ee=0<=q)&&Array.prototype.splice.call(S,q,1),ee&&(rt(v),h.g[_].length==0&&(delete h.g[_],h.h--))}}function en(h,v,_,S){for(var q=0;q<h.length;++q){var ee=h[q];if(!ee.da&&ee.listener==v&&ee.capture==!!_&&ee.ha==S)return q}return-1}var Hn="closure_lm_"+(1e6*Math.random()|0),Me={};function ye(h,v,_,S,q){if(Array.isArray(v)){for(var ee=0;ee<v.length;ee++)ye(h,v[ee],_,S,q);return null}return _=wi(_),h&&h[Le]?h.K(v,_,y(S)?!!S.capture:!1,q):be(h,v,_,!1,S,q)}function be(h,v,_,S,q,ee){if(!v)throw Error("Invalid event type");var me=y(q)?!!q.capture:!!q,Je=ht(h);if(Je||(h[Hn]=Je=new St(h)),_=Je.add(v,_,S,me,ee),_.proxy)return _;if(S=st(),_.proxy=S,S.src=h,S.listener=_,h.addEventListener)ce||(q=me),q===void 0&&(q=!1),h.addEventListener(v.toString(),S,q);else if(h.attachEvent)h.attachEvent(kt(v.toString()),S);else if(h.addListener&&h.removeListener)h.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function st(){function h(_){return v.call(h.src,h.listener,_)}const v=He;return h}function Vt(h,v,_,S,q){if(Array.isArray(v))for(var ee=0;ee<v.length;ee++)Vt(h,v[ee],_,S,q);else S=y(S)?!!S.capture:!!S,_=wi(_),h&&h[Le]?(h=h.i,v=String(v).toString(),v in h.g&&(ee=h.g[v],_=en(ee,_,S,q),-1<_&&(rt(ee[_]),Array.prototype.splice.call(ee,_,1),ee.length==0&&(delete h.g[v],h.h--)))):h&&(h=ht(h))&&(v=h.g[v.toString()],h=-1,v&&(h=en(v,_,S,q)),(_=-1<h?v[h]:null)&&je(_))}function je(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Le])wn(v.i,h);else{var _=h.type,S=h.proxy;v.removeEventListener?v.removeEventListener(_,S,h.capture):v.detachEvent?v.detachEvent(kt(_),S):v.addListener&&v.removeListener&&v.removeListener(S),(_=ht(v))?(wn(_,h),_.h==0&&(_.src=null,v[Hn]=null)):rt(h)}}}function kt(h){return h in Me?Me[h]:Me[h]="on"+h}function He(h,v){if(h.da)h=!0;else{v=new fe(v,this);var _=h.listener,S=h.ha||h.src;h.fa&&je(h),h=_.call(S,v)}return h}function ht(h){return h=h[Hn],h instanceof St?h:null}var pr="__closure_events_fn_"+(1e9*Math.random()>>>0);function wi(h){return typeof h=="function"?h:(h[pr]||(h[pr]=function(v){return h.handleEvent(v)}),h[pr])}function It(){$.call(this),this.i=new St(this),this.M=this,this.F=null}B(It,$),It.prototype[Le]=!0,It.prototype.removeEventListener=function(h,v,_,S){Vt(this,h,v,_,S)};function at(h,v){var _,S=h.F;if(S)for(_=[];S;S=S.F)_.push(S);if(h=h.M,S=v.type||v,typeof v=="string")v=new F(v,h);else if(v instanceof F)v.target=v.target||h;else{var q=v;v=new F(S,h),O(v,q)}if(q=!0,_)for(var ee=_.length-1;0<=ee;ee--){var me=v.g=_[ee];q=In(me,S,!0,v)&&q}if(me=v.g=h,q=In(me,S,!0,v)&&q,q=In(me,S,!1,v)&&q,_)for(ee=0;ee<_.length;ee++)me=v.g=_[ee],q=In(me,S,!1,v)&&q}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var _=h.g[v],S=0;S<_.length;S++)rt(_[S]);delete h.g[v],h.h--}}this.F=null},It.prototype.K=function(h,v,_,S){return this.i.add(String(h),v,!1,_,S)},It.prototype.L=function(h,v,_,S){return this.i.add(String(h),v,!0,_,S)};function In(h,v,_,S){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var q=!0,ee=0;ee<v.length;++ee){var me=v[ee];if(me&&!me.da&&me.capture==_){var Je=me.listener,nn=me.ha||me.src;me.fa&&wn(h.i,me),q=Je.call(nn,S)!==!1&&q}}return q&&!S.defaultPrevented}function ln(h,v,_){if(typeof h=="function")_&&(h=A(h,_));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(h,v||0)}function Te(h){h.g=ln(()=>{h.g=null,h.i&&(h.i=!1,Te(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class we extends ${constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Te(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ue(h){$.call(this),this.h=h,this.g={}}B(Ue,$);var Be=[];function dt(h){de(h.g,function(v,_){this.g.hasOwnProperty(_)&&je(v)},h),h.g={}}Ue.prototype.N=function(){Ue.aa.N.call(this),dt(this)},Ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jt=m.JSON.stringify,$e=m.JSON.parse,Tt=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function ot(){}ot.prototype.h=null;function cn(h){return h.h||(h.h=h.i())}function ft(){}var Gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yt(){F.call(this,"d")}B(yt,F);function Bt(){F.call(this,"c")}B(Bt,F);var Sn={},Fo=null;function Vs(){return Fo=Fo||new It}Sn.La="serverreachability";function Si(h){F.call(this,Sn.La,h)}B(Si,F);function Ps(h){const v=Vs();at(v,new Si(v))}Sn.STAT_EVENT="statevent";function Lc(h,v){F.call(this,Sn.STAT_EVENT,h),this.stat=v}B(Lc,F);function Dt(h){const v=Vs();at(v,new Lc(v,h))}Sn.Ma="timingevent";function tn(h,v){F.call(this,Sn.Ma,h),this.size=v}B(tn,F);function Kt(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},v)}function Jn(){this.g=!0}Jn.prototype.xa=function(){this.g=!1};function Ko(h,v,_,S,q,ee){h.info(function(){if(h.g)if(ee)for(var me="",Je=ee.split("&"),nn=0;nn<Je.length;nn++){var et=Je[nn].split("=");if(1<et.length){var hn=et[0];et=et[1];var rn=hn.split("_");me=2<=rn.length&&rn[1]=="type"?me+(hn+"="+et+"&"):me+(hn+"=redacted&")}}else me=null;else me=ee;return"XMLHTTP REQ ("+S+") [attempt "+q+"]: "+v+`
`+_+`
`+me})}function fd(h,v,_,S,q,ee,me){h.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+q+"]: "+v+`
`+_+`
`+ee+" "+me})}function Ls(h,v,_,S){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ia(h,_)+(S?" "+S:"")})}function zc(h,v){h.info(function(){return"TIMEOUT: "+v})}Jn.prototype.info=function(){};function Ia(h,v){if(!h.g)return v;if(!v)return null;try{var _=JSON.parse(v);if(_){for(h=0;h<_.length;h++)if(Array.isArray(_[h])){var S=_[h];if(!(2>S.length)){var q=S[1];if(Array.isArray(q)&&!(1>q.length)){var ee=q[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var me=1;me<q.length;me++)q[me]=""}}}}return jt(_)}catch{return v}}var zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ts={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Rr;function Cr(){}B(Cr,ot),Cr.prototype.g=function(){return new XMLHttpRequest},Cr.prototype.i=function(){return{}},Rr=new Cr;function jn(h,v,_,S){this.j=h,this.i=v,this.l=_,this.R=S||1,this.U=new Ue(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qt}function qt(){this.i=null,this.g="",this.h=!1}var $o={},ki={};function yr(h,v,_){h.L=1,h.v=Va(Fn(v)),h.m=_,h.P=!0,ns(h,null)}function ns(h,v){h.F=Date.now(),ja(h),h.A=Fn(h.v);var _=h.A,S=h.R;Array.isArray(S)||(S=[String(S)]),Jo(_.i,"t",S),h.C=0,_=h.j.J,h.h=new qt,h.g=tu(h.j,_?v:null,!h.m),0<h.O&&(h.M=new we(A(h.Y,h,h.g),h.O)),v=h.U,_=h.g,S=h.ca;var q="readystatechange";Array.isArray(q)||(q&&(Be[0]=q.toString()),q=Be);for(var ee=0;ee<q.length;ee++){var me=ye(_,q[ee],S||v.handleEvent,!1,v.h||v);if(!me)break;v.g[me.key]=me}v=h.H?C(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Ps(),Ko(h.i,h.u,h.A,h.l,h.R,h.m)}jn.prototype.ca=function(h){h=h.target;const v=this.M;v&&rr(h)==3?v.j():this.Y(h)},jn.prototype.Y=function(h){try{if(h==this.g)e:{const rn=rr(this.g);var v=this.g.Ba();const us=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||$c(this.g)))){this.J||rn!=4||v==7||(v==8||0>=us?Ps(3):Ps(2)),Us(this);var _=this.g.Z();this.X=_;t:if(Uc(this)){var S=$c(this.g);h="";var q=S.length,ee=rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pn(this),Ir(this);var me="";break t}this.h.i=new m.TextDecoder}for(v=0;v<q;v++)this.h.h=!0,h+=this.h.i.decode(S[v],{stream:!(ee&&v==q-1)});S.length=0,this.h.g+=h,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=_==200,fd(this.i,this.u,this.A,this.l,this.R,rn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,nn=this.g;if((Je=nn.g?nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(Je)){var et=Je;break t}}et=null}if(_=et)Ls(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Da(this,_);else{this.o=!1,this.s=3,Dt(12),pn(this),Ir(this);break e}}if(this.P){_=!0;let yn;for(;!this.J&&this.C<me.length;)if(yn=Bc(this,me),yn==ki){rn==4&&(this.s=4,Dt(14),_=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==$o){this.s=4,Dt(15),Ls(this.i,this.l,me,"[Invalid Chunk]"),_=!1;break}else Ls(this.i,this.l,yn,null),Da(this,yn);if(Uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||me.length!=0||this.h.h||(this.s=1,Dt(16),_=!1),this.o=this.o&&_,!_)Ls(this.i,this.l,me,"[Invalid Chunked Response]"),pn(this),Ir(this);else if(0<me.length&&!this.W){this.W=!0;var hn=this.j;hn.g==this&&hn.ba&&!hn.M&&(hn.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),Ga(hn),hn.M=!0,Dt(11))}}else Ls(this.i,this.l,me,null),Da(this,me);rn==4&&pn(this),this.o&&!this.J&&(rn==4?Wc(this.j,this):(this.o=!1,ja(this)))}else vd(this.g),_==400&&0<me.indexOf("Unknown SID")?(this.s=3,Dt(12)):(this.s=0,Dt(13)),pn(this),Ir(this)}}}catch{}finally{}};function Uc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Bc(h,v){var _=h.C,S=v.indexOf(`
`,_);return S==-1?ki:(_=Number(v.substring(_,S)),isNaN(_)?$o:(S+=1,S+_>v.length?ki:(v=v.slice(S,S+_),h.C=S+_,v)))}jn.prototype.cancel=function(){this.J=!0,pn(this)};function ja(h){h.S=Date.now()+h.I,qc(h,h.I)}function qc(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Kt(A(h.ba,h),v)}function Us(h){h.B&&(m.clearTimeout(h.B),h.B=null)}jn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(zc(this.i,this.A),this.L!=2&&(Ps(),Dt(17)),pn(this),this.s=2,Ir(this)):qc(this,this.S-h)};function Ir(h){h.j.G==0||h.J||Wc(h.j,h)}function pn(h){Us(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,dt(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Da(h,v){try{var _=h.j;if(_.G!=0&&(_.g==h||Yo(_.h,h))){if(!h.K&&Yo(_.h,h)&&_.G==3){try{var S=_.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var q=S;if(q[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<h.F)Li(_),Vi(_);else break e;sl(_),Dt(18)}}else _.za=q[1],0<_.za-_.T&&37500>q[2]&&_.F&&_.v==0&&!_.C&&(_.C=Kt(A(_.Za,_),6e3));if(1>=Ni(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else cs(_,11)}else if((h.K||_.g==h)&&Li(_),!W(v))for(q=_.Da.g.parse(v),v=0;v<q.length;v++){let et=q[v];if(_.T=et[0],et=et[1],_.G==2)if(et[0]=="c"){_.K=et[1],_.ia=et[2];const hn=et[3];hn!=null&&(_.la=hn,_.j.info("VER="+_.la));const rn=et[4];rn!=null&&(_.Aa=rn,_.j.info("SVER="+_.Aa));const us=et[5];us!=null&&typeof us=="number"&&0<us&&(S=1.5*us,_.L=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const yn=h.g;if(yn){const Lr=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lr){var ee=S.h;ee.g||Lr.indexOf("spdy")==-1&&Lr.indexOf("quic")==-1&&Lr.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(Ri(ee,ee.h),ee.h=null))}if(S.D){const il=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;il&&(S.ya=il,vt(S.I,S.D,il))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-h.F,_.j.info("Handshake RTT: "+_.R+"ms")),S=_;var me=h;if(S.qa=eu(S,S.J?S.ia:null,S.W),me.K){Dn(S.h,me);var Je=me,nn=S.L;nn&&(Je.I=nn),Je.B&&(Us(Je),ja(Je)),S.g=me}else Xc(S);0<_.i.length&&Pi(_)}else et[0]!="stop"&&et[0]!="close"||cs(_,7);else _.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?cs(_,7):nl(_):et[0]!="noop"&&_.l&&_.l.ta(et),_.v=0)}}Ps(4)}catch{}}var Hc=class{constructor(h,v){this.g=h,this.map=v}};function rs(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ai(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ni(h){return h.h?1:h.g?h.g.size:0}function Yo(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function Ri(h,v){h.g?h.g.add(v):h.h=v}function Dn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}rs.prototype.cancel=function(){if(this.i=Qo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Qo(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const _ of h.g.values())v=v.concat(_.D);return v}return L(h.i)}function md(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var v=[],_=h.length,S=0;S<_;S++)v.push(h[S]);return v}v=[],_=0;for(S in h)v[_++]=h[S];return v}function Ci(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var v=[];h=h.length;for(var _=0;_<h;_++)v.push(_);return v}v=[],_=0;for(const S in h)v[_++]=S;return v}}}function Xo(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var _=Ci(h),S=md(h),q=S.length,ee=0;ee<q;ee++)v.call(void 0,S[ee],_&&_[ee],h)}var Ma=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gd(h,v){if(h){h=h.split("&");for(var _=0;_<h.length;_++){var S=h[_].indexOf("="),q=null;if(0<=S){var ee=h[_].substring(0,S);q=h[_].substring(S+1)}else ee=h[_];v(ee,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function $t(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof $t){this.h=h.h,Oa(this,h.j),this.o=h.o,this.g=h.g,Bs(this,h.s),this.l=h.l;var v=h.i,_=new as;_.i=v.i,v.g&&(_.g=new Map(v.g),_.h=v.h),ss(this,_),this.m=h.m}else h&&(v=String(h).match(Ma))?(this.h=!1,Oa(this,v[1]||"",!0),this.o=er(v[2]||""),this.g=er(v[3]||"",!0),Bs(this,v[4]),this.l=er(v[5]||"",!0),ss(this,v[6]||"",!0),this.m=er(v[7]||"")):(this.h=!1,this.i=new as(null,this.h))}$t.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Pa(v,Zo,!0),":");var _=this.g;return(_||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Pa(v,Zo,!0),"@"),h.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&h.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&h.push("/"),h.push(Pa(_,_.charAt(0)=="/"?pd:Wo,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.m)&&h.push("#",Pa(_,Ii)),h.join("")};function Fn(h){return new $t(h)}function Oa(h,v,_){h.j=_?er(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Bs(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function ss(h,v,_){v instanceof as?(h.i=v,Fc(h.i,h.h)):(_||(v=Pa(v,yd)),h.i=new as(v,h.h))}function vt(h,v,_){h.i.set(v,_)}function Va(h){return vt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function er(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Pa(h,v,_){return typeof h=="string"?(h=encodeURI(h).replace(v,Gc),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Gc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Zo=/[#\/\?@]/g,Wo=/[#\?:]/g,pd=/[#\?]/g,yd=/[#\?@]/g,Ii=/#/g;function as(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function tr(h){h.g||(h.g=new Map,h.h=0,h.i&&gd(h.i,function(v,_){h.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}s=as.prototype,s.add=function(h,v){tr(this),this.i=null,h=jr(this,h);var _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(v),this.h+=1,this};function is(h,v){tr(h),v=jr(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function os(h,v){return tr(h),v=jr(h,v),h.g.has(v)}s.forEach=function(h,v){tr(this),this.g.forEach(function(_,S){_.forEach(function(q){h.call(v,q,S,this)},this)},this)},s.na=function(){tr(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),_=[];for(let S=0;S<v.length;S++){const q=h[S];for(let ee=0;ee<q.length;ee++)_.push(v[S])}return _},s.V=function(h){tr(this);let v=[];if(typeof h=="string")os(this,h)&&(v=v.concat(this.g.get(jr(this,h))));else{h=Array.from(this.g.values());for(let _=0;_<h.length;_++)v=v.concat(h[_])}return v},s.set=function(h,v){return tr(this),this.i=null,h=jr(this,h),os(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},s.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function Jo(h,v,_){is(h,v),0<_.length&&(h.i=null,h.g.set(jr(h,v),L(_)),h.h+=_.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var _=0;_<v.length;_++){var S=v[_];const ee=encodeURIComponent(String(S)),me=this.V(S);for(S=0;S<me.length;S++){var q=ee;me[S]!==""&&(q+="="+encodeURIComponent(String(me[S]))),h.push(q)}}return this.i=h.join("&")};function jr(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Fc(h,v){v&&!h.j&&(tr(h),h.i=null,h.g.forEach(function(_,S){var q=S.toLowerCase();S!=q&&(is(this,S),Jo(this,q,_))},h)),h.j=v}function La(h,v){const _=new Jn;if(m.Image){const S=new Image;S.onload=M(nr,_,"TestLoadImage: loaded",!0,v,S),S.onerror=M(nr,_,"TestLoadImage: error",!1,v,S),S.onabort=M(nr,_,"TestLoadImage: abort",!1,v,S),S.ontimeout=M(nr,_,"TestLoadImage: timeout",!1,v,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=h}else v(!1)}function vr(h,v){const _=new Jn,S=new AbortController,q=setTimeout(()=>{S.abort(),nr(_,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:S.signal}).then(ee=>{clearTimeout(q),ee.ok?nr(_,"TestPingServer: ok",!0,v):nr(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(q),nr(_,"TestPingServer: error",!1,v)})}function nr(h,v,_,S,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),S(_)}catch{}}function za(){this.g=new Tt}function Dr(h,v,_){const S=_||"";try{Xo(h,function(q,ee){let me=q;y(q)&&(me=jt(q)),v.push(S+ee+"="+encodeURIComponent(me))})}catch(q){throw v.push(S+"type="+encodeURIComponent("_badmap")),q}}function qs(h){this.l=h.Ub||null,this.j=h.eb||!1}B(qs,ot),qs.prototype.g=function(){return new ls(this.l,this.j)},qs.prototype.i=(function(h){return function(){return h}})({});function ls(h,v){It.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}B(ls,It),s=ls.prototype,s.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Or(this)},s.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mr(this)),this.readyState=0},s.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Or(this)),this.g&&(this.readyState=3,Or(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;el(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function el(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}s.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Mr(this):Or(this),this.readyState==3&&el(this)}},s.Ra=function(h){this.g&&(this.response=this.responseText=h,Mr(this))},s.Qa=function(h){this.g&&(this.response=h,Mr(this))},s.ga=function(){this.g&&Mr(this)};function Mr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Or(h)}s.setRequestHeader=function(h,v){this.u.append(h,v)},s.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,h.push(_[0]+": "+_[1]),_=v.next();return h.join(`\r
`)};function Or(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function tl(h){let v="";return de(h,function(_,S){v+=S,v+=":",v+=_,v+=`\r
`}),v}function un(h,v,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=tl(_),typeof h=="string"?_!=null&&encodeURIComponent(String(_)):vt(h,v,_))}function ct(h){It.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}B(ct,It);var ji=/^https?$/i,Ua=["POST","PUT"];s=ct.prototype,s.Ha=function(h){this.J=h},s.ea=function(h,v,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Rr.g(),this.v=this.o?cn(this.o):cn(Rr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ee){Kc(this,ee);return}if(h=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var q in S)_.set(q,S[q]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const ee of S.keys())_.set(ee,S.get(ee));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(ee=>ee.toLowerCase()=="content-type"),q=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Ua,v,void 0))||S||q||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,me]of _)this.g.setRequestHeader(ee,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ba(this),this.u=!0,this.g.send(h),this.u=!1}catch(ee){Kc(this,ee)}};function Kc(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Di(h),Vr(h)}function Di(h){h.A||(h.A=!0,at(h,"complete"),at(h,"error"))}s.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,at(this,"complete"),at(this,"abort"),Vr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vr(this,!0)),ct.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Mi(this):this.bb())},s.bb=function(){Mi(this)};function Mi(h){if(h.h&&typeof d<"u"&&(!h.v[1]||rr(h)!=4||h.Z()!=2)){if(h.u&&rr(h)==4)ln(h.Ea,0,h);else if(at(h,"readystatechange"),rr(h)==4){h.h=!1;try{const me=h.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var S;if(S=me===0){var q=String(h.D).match(Ma)[1]||null;!q&&m.self&&m.self.location&&(q=m.self.location.protocol.slice(0,-1)),S=!ji.test(q?q.toLowerCase():"")}_=S}if(_)at(h,"complete"),at(h,"success");else{h.m=6;try{var ee=2<rr(h)?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.Z()+"]",Di(h)}}finally{Vr(h)}}}}function Vr(h,v){if(h.g){Ba(h);const _=h.g,S=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||at(h,"ready");try{_.onreadystatechange=S}catch{}}}function Ba(h){h.I&&(m.clearTimeout(h.I),h.I=null)}s.isActive=function(){return!!this.g};function rr(h){return h.g?h.g.readyState:0}s.Z=function(){try{return 2<rr(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),$e(v)}};function $c(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function vd(h){const v={};h=(h.g&&2<=rr(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<h.length;S++){if(W(h[S]))continue;var _=P(h[S]);const q=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const ee=v[q]||[];v[q]=ee,ee.push(_)}V(v,function(S){return S.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qa(h,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||v}function Oi(h){this.Aa=0,this.i=[],this.j=new Jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qa("baseRetryDelayMs",5e3,h),this.cb=qa("retryDelaySeedMs",1e4,h),this.Wa=qa("forwardChannelMaxRetries",2,h),this.wa=qa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new rs(h&&h.concurrentRequestLimit),this.Da=new za,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Oi.prototype,s.la=8,s.G=1,s.connect=function(h,v,_,S){Dt(0),this.W=h,this.H=v||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.I=eu(this,null,this.W),Pi(this)};function nl(h){if(Yc(h),h.G==3){var v=h.U++,_=Fn(h.I);if(vt(_,"SID",h.K),vt(_,"RID",v),vt(_,"TYPE","terminate"),Ha(h,_),v=new jn(h,h.j,v),v.L=2,v.v=Va(Fn(_)),_=!1,m.navigator&&m.navigator.sendBeacon)try{_=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!_&&m.Image&&(new Image().src=v.v,_=!0),_||(v.g=tu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),ja(v)}Jc(h)}function Vi(h){h.g&&(Ga(h),h.g.cancel(),h.g=null)}function Yc(h){Vi(h),h.u&&(m.clearTimeout(h.u),h.u=null),Li(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Pi(h){if(!Ai(h.h)&&!h.s){h.s=!0;var v=h.Ga;ae||k(),te||(ae(),te=!0),Y.add(v,h),h.B=0}}function xd(h,v){return Ni(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Kt(A(h.Ga,h,v),al(h,h.B)),h.B++,!0)}s.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const q=new jn(this,this.j,h);let ee=this.o;if(this.S&&(ee?(ee=C(ee),O(ee,this.S)):ee=this.S),this.m!==null||this.O||(q.H=ee,ee=null),this.P)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,4096<v){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=Qc(this,q,v),_=Fn(this.I),vt(_,"RID",h),vt(_,"CVER",22),this.D&&vt(_,"X-HTTP-Session-Id",this.D),Ha(this,_),ee&&(this.O?v="headers="+encodeURIComponent(String(tl(ee)))+"&"+v:this.m&&un(_,this.m,ee)),Ri(this.h,q),this.Ua&&vt(_,"TYPE","init"),this.P?(vt(_,"$req",v),vt(_,"SID","null"),q.T=!0,yr(q,_,null)):yr(q,_,v),this.G=2}}else this.G==3&&(h?rl(this,h):this.i.length==0||Ai(this.h)||rl(this))};function rl(h,v){var _;v?_=v.l:_=h.U++;const S=Fn(h.I);vt(S,"SID",h.K),vt(S,"RID",_),vt(S,"AID",h.T),Ha(h,S),h.m&&h.o&&un(S,h.m,h.o),_=new jn(h,h.j,_,h.B+1),h.m===null&&(_.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Qc(h,_,1e3),_.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ri(h.h,_),yr(_,S,v)}function Ha(h,v){h.H&&de(h.H,function(_,S){vt(v,S,_)}),h.l&&Xo({},function(_,S){vt(v,S,_)})}function Qc(h,v,_){_=Math.min(h.i.length,_);var S=h.l?A(h.l.Na,h.l,h):null;e:{var q=h.i;let ee=-1;for(;;){const me=["count="+_];ee==-1?0<_?(ee=q[0].g,me.push("ofs="+ee)):ee=0:me.push("ofs="+ee);let Je=!0;for(let nn=0;nn<_;nn++){let et=q[nn].g;const hn=q[nn].map;if(et-=ee,0>et)ee=Math.max(0,q[nn].g-100),Je=!1;else try{Dr(hn,me,"req"+et+"_")}catch{S&&S(hn)}}if(Je){S=me.join("&");break e}}}return h=h.i.splice(0,_),v.D=h,S}function Xc(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;ae||k(),te||(ae(),te=!0),Y.add(v,h),h.v=0}}function sl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Kt(A(h.Fa,h),al(h,h.v)),h.v++,!0)}s.Fa=function(){if(this.u=null,Zc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Kt(A(this.ab,this),h)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dt(10),Vi(this),Zc(this))};function Ga(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function Zc(h){h.g=new jn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Fn(h.qa);vt(v,"RID","rpc"),vt(v,"SID",h.K),vt(v,"AID",h.T),vt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&vt(v,"TO",h.ja),vt(v,"TYPE","xmlhttp"),Ha(h,v),h.m&&h.o&&un(v,h.m,h.o),h.L&&(h.g.I=h.L);var _=h.g;h=h.ia,_.L=1,_.v=Va(Fn(v)),_.m=null,_.P=!0,ns(_,h)}s.Za=function(){this.C!=null&&(this.C=null,Vi(this),sl(this),Dt(19))};function Li(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function Wc(h,v){var _=null;if(h.g==v){Li(h),Ga(h),h.g=null;var S=2}else if(Yo(h.h,v))_=v.D,Dn(h.h,v),S=1;else return;if(h.G!=0){if(v.o)if(S==1){_=v.m?v.m.length:0,v=Date.now()-v.F;var q=h.B;S=Vs(),at(S,new tn(S,_)),Pi(h)}else Xc(h);else if(q=v.s,q==3||q==0&&0<v.X||!(S==1&&xd(h,v)||S==2&&sl(h)))switch(_&&0<_.length&&(v=h.h,v.i=v.i.concat(_)),q){case 1:cs(h,5);break;case 4:cs(h,10);break;case 3:cs(h,6);break;default:cs(h,2)}}}function al(h,v){let _=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(_*=2),_*v}function cs(h,v){if(h.j.info("Error code "+v),v==2){var _=A(h.fb,h),S=h.Xa;const q=!S;S=new $t(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Oa(S,"https"),Va(S),q?La(S.toString(),_):vr(S.toString(),_)}else Dt(2);h.G=0,h.l&&h.l.sa(v),Jc(h),Yc(h)}s.fb=function(h){h?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function Jc(h){if(h.G=0,h.ka=[],h.l){const v=Qo(h.h);(v.length!=0||h.i.length!=0)&&(j(h.ka,v),j(h.ka,h.i),h.h.i.length=0,L(h.i),h.i.length=0),h.l.ra()}}function eu(h,v,_){var S=_ instanceof $t?Fn(_):new $t(_);if(S.g!="")v&&(S.g=v+"."+S.g),Bs(S,S.s);else{var q=m.location;S=q.protocol,v=v?v+"."+q.hostname:q.hostname,q=+q.port;var ee=new $t(null);S&&Oa(ee,S),v&&(ee.g=v),q&&Bs(ee,q),_&&(ee.l=_),S=ee}return _=h.D,v=h.ya,_&&v&&vt(S,_,v),vt(S,"VER",h.la),Ha(h,S),S}function tu(h,v,_){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new ct(new qs({eb:_})):new ct(h.pa),v.Ha(h.J),v}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function nu(){}s=nu.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function zi(){}zi.prototype.g=function(h,v){return new Mn(h,v)};function Mn(h,v){It.call(this),this.g=new Oi(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!W(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!W(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Pr(this)}B(Mn,It),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){nl(this.g)},Mn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var _={};_.__data__=h,h=_}else this.u&&(_={},_.__data__=jt(h),h=_);v.i.push(new Hc(v.Ya++,h)),v.G==3&&Pi(v)},Mn.prototype.N=function(){this.g.l=null,delete this.j,nl(this.g),delete this.g,Mn.aa.N.call(this)};function ru(h){yt.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const _ in v){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}B(ru,yt);function su(){Bt.call(this),this.status=1}B(su,Bt);function Pr(h){this.g=h}B(Pr,nu),Pr.prototype.ua=function(){at(this.g,"a")},Pr.prototype.ta=function(h){at(this.g,new ru(h))},Pr.prototype.sa=function(h){at(this.g,new su)},Pr.prototype.ra=function(){at(this.g,"b")},zi.prototype.createWebChannel=zi.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,qb=function(){return new zi},Bb=function(){return Vs()},Ub=Sn,Hm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,xh=zs,ts.COMPLETE="complete",zb=ts,ft.EventType=Gn,Gn.OPEN="a",Gn.CLOSE="b",Gn.ERROR="c",Gn.MESSAGE="d",It.prototype.listen=It.prototype.K,Zl=ft,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,Lb=ct}).apply(typeof oh<"u"?oh:typeof self<"u"?self:typeof window<"u"?window:{});const xx="@firebase/firestore",_x="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new pg("@firebase/firestore");function po(){return fi.logLevel}function xe(s,...e){if(fi.logLevel<=Ye.DEBUG){const t=e.map(Ag);fi.debug(`Firestore (${Uo}): ${s}`,...t)}}function Ds(s,...e){if(fi.logLevel<=Ye.ERROR){const t=e.map(Ag);fi.error(`Firestore (${Uo}): ${s}`,...t)}}function fc(s,...e){if(fi.logLevel<=Ye.WARN){const t=e.map(Ag);fi.warn(`Firestore (${Uo}): ${s}`,...t)}}function Ag(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(s,e,t){let a="Unexpected state";typeof e=="string"?a=e:t=e,Hb(s,a,t)}function Hb(s,e,t){let a=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${s.toString(16)})`;if(t!==void 0)try{a+=" CONTEXT: "+JSON.stringify(t)}catch{a+=" CONTEXT: "+t}throw Ds(a),new Error(a)}function ut(s,e,t,a){let o="Unexpected state";typeof t=="string"?o=t:a=t,s||Hb(e,o,a)}function Oe(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Os{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class U2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Bn.UNAUTHENTICATED)))}shutdown(){}}class B2{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0,42304);let a=this.i;const o=p=>this.i!==a?(a=this.i,t(p)):Promise.resolve();let l=new Ns;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ns,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ns)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((a=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ut(typeof a.accessToken=="string",31837,{l:a}),new z2(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class q2{constructor(e,t,a){this.P=e,this.T=t,this.I=a,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H2{constructor(e,t,a){this.P=e,this.T=t,this.I=a}getToken(){return Promise.resolve(new q2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Bn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ut(this.o===void 0,3512);const a=l=>{l.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,xe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>a(l)))};const o=l=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ut(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let a=0;a<s;a++)t[a]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=F2(40);for(let l=0;l<o.length;++l)a.length<20&&o[l]<t&&(a+=e.charAt(o[l]%62))}return a}}function Qe(s,e){return s<e?-1:s>e?1:0}function Gm(s,e){const t=Math.min(s.length,e.length);for(let a=0;a<t;a++){const o=s.charAt(a),l=e.charAt(a);if(o!==l)return km(o)===km(l)?Qe(o,l):km(o)?1:-1}return Qe(s.length,e.length)}const K2=55296,$2=57343;function km(s){const e=s.charCodeAt(0);return e>=K2&&e<=$2}function Ao(s,e,t){return s.length===e.length&&s.every(((a,o)=>t(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="__name__";class Gr{constructor(e,t,a){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),a===void 0?a=e.length-t:a>e.length-t&&Ce(1746,{length:a,range:e.length-t}),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return Gr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gr?e.forEach((a=>{t.push(a)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let o=0;o<a;o++){const l=Gr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Qe(e.length,t.length)}static compareSegments(e,t){const a=Gr.isNumericId(e),o=Gr.isNumericId(t);return a&&!o?-1:!a&&o?1:a&&o?Gr.extractNumericId(e).compare(Gr.extractNumericId(t)):Gm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xa.fromString(e.substring(4,e.length-2))}}class Nt extends Gr{construct(e,t,a){return new Nt(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new ge(re.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter((o=>o.length>0)))}return new Nt(t)}static emptyPath(){return new Nt([])}}const Y2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tn extends Gr{construct(e,t,a){return new Tn(e,t,a)}static isValidIdentifier(e){return Y2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tx}static keyField(){return new Tn([Tx])}static fromServerFormat(e){const t=[];let a="",o=0;const l=()=>{if(a.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ge(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(a+=m,o++):(l(),o++)}if(l(),d)throw new ge(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tn(t)}static emptyPath(){return new Tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Nt.fromString(e))}static fromName(e){return new ke(Nt.fromString(e).popFirst(5))}static empty(){return new ke(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(s,e,t){if(!t)throw new ge(re.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function Q2(s,e,t,a){if(e===!0&&a===!0)throw new ge(re.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function Ex(s){if(!ke.isDocumentKey(s))throw new ge(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function wx(s){if(ke.isDocumentKey(s))throw new ge(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Fb(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Xh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Ce(12329,{type:typeof s})}function mi(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new ge(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xh(s);throw new ge(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(s,e){const t={typeString:s};return e&&(t.value=e),t}function Cc(s,e){if(!Fb(s))throw new ge(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const a in e)if(e[a]){const o=e[a].typeString,l="value"in e[a]?{value:e[a].value}:void 0;if(!(a in s)){t=`JSON missing required field: '${a}'`;break}const d=s[a];if(o&&typeof d!==o){t=`JSON field '${a}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${a}' field to equal '${l.value}'`;break}}if(t)throw new ge(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=-62135596800,kx=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor((e-1e3*t)*kx);return new wt(t,a)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sx)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kx}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cc(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Wt("string",wt._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new wt(0,0))}static max(){return new De(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;function X2(s,e){const t=s.toTimestamp().seconds,a=s.toTimestamp().nanoseconds+1,o=De.fromTimestamp(a===1e9?new wt(t+1,0):new wt(t,a));return new ba(o,ke.empty(),e)}function Z2(s){return new ba(s.readTime,s.key,mc)}class ba{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ba(De.min(),ke.empty(),mc)}static max(){return new ba(De.max(),ke.empty(),mc)}}function W2(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(s.documentKey,e.documentKey),t!==0?t:Qe(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(s){if(s.code!==re.FAILED_PRECONDITION||s.message!==J2)throw s;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((a,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(a,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(a,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,a)=>{t(e)}))}static reject(e){return new oe(((t,a)=>{a(e)}))}static waitFor(e){return new oe(((t,a)=>{let o=0,l=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++l,d&&l===o&&t()}),(p=>a(p)))})),d=!0,l===o&&t()}))}static or(e){let t=oe.resolve(!1);for(const a of e)t=t.next((o=>o?oe.resolve(o):a()));return t}static forEach(e,t){const a=[];return e.forEach(((o,l)=>{a.push(t.call(this,o,l))})),this.waitFor(a)}static mapArray(e,t){return new oe(((a,o)=>{const l=e.length,d=new Array(l);let m=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((x=>{d[y]=x,++m,m===l&&a(d)}),(x=>o(x)))}}))}static doWhile(e,t){return new oe(((a,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):a()};l()}))}}function tR(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function qo(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>t.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg=-1;function Wh(s){return s==null}function jh(s){return s===0&&1/s==-1/0}function nR(s){return typeof s=="number"&&Number.isInteger(s)&&!jh(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="";function rR(s){let e="";for(let t=0;t<s.length;t++)e.length>0&&(e=Ax(e)),e=sR(s.get(t),e);return Ax(e)}function sR(s,e){let t=e;const a=s.length;for(let o=0;o<a;o++){const l=s.charAt(o);switch(l){case"\0":t+="";break;case Kb:t+="";break;default:t+=l}}return t}function Ax(s){return s+Kb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function yi(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function $b(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){this.comparator=e,this.root=t||bn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(a===0)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return t+a.left.size;o<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,a)=>(e(t,a),!1)))}toString(){const e=[];return this.inorderTraversal(((t,a)=>(e.push(`${t}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new lh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new lh(this.root,e,this.comparator,!1)}getReverseIterator(){return new lh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new lh(this.root,e,this.comparator,!0)}}class lh{constructor(e,t,a,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?a(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bn{constructor(e,t,a,o,l){this.key=e,this.value=t,this.color=a??bn.RED,this.left=o??bn.EMPTY,this.right=l??bn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,o,l){return new bn(e??this.key,t??this.value,a??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let o=this;const l=a(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,a),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return bn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return bn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}bn.EMPTY=null,bn.RED=!0,bn.BLACK=!1;bn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,a,o,l){return this}insert(e,t,a){return new bn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,a)=>(e(t),!1)))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let a;for(a=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rx(this.data.getIterator())}getIteratorFrom(e){return new Rx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((a=>{t=t.add(a)})),t}isEqual(e){if(!(e instanceof on)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=a.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new on(this.comparator);return t.data=e,t}}class Rx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this.fields=e,e.sort(Tn.comparator)}static empty(){return new Er([])}unionWith(e){let t=new on(Tn.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Er(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,((t,a)=>t.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Yb("Invalid base64 string: "+l):l}})(e);return new En(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new En(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const a=new Uint8Array(t.length);for(let o=0;o<t.length;o++)a[o]=t.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}En.EMPTY_BYTE_STRING=new En("");const aR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ta(s){if(ut(!!s,39018),typeof s=="string"){let e=0;const t=aR.exec(s);if(ut(!!t,46558,{timestamp:s}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(s);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:Ft(s.seconds),nanos:Ft(s.nanos)}}function Ft(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ea(s){return typeof s=="string"?En.fromBase64String(s):En.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="server_timestamp",Xb="__type__",Zb="__previous_value__",Wb="__local_write_time__";function Cg(s){return(s?.mapValue?.fields||{})[Xb]?.stringValue===Qb}function Jh(s){const e=s.mapValue.fields[Zb];return Cg(e)?Jh(e):e}function gc(s){const e=Ta(s.mapValue.fields[Wb].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,t,a,o,l,d,m,p,y,x){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=x}}const Dh="(default)";class pc{constructor(e,t){this.projectId=e,this.database=t||Dh}static empty(){return new pc("","")}get isDefaultDatabase(){return this.database===Dh}isEqual(e){return e instanceof pc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="__type__",oR="__max__",ch={mapValue:{}},e1="__vector__",Mh="value";function wa(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Cg(s)?4:cR(s)?9007199254740991:lR(s)?10:11:Ce(28295,{value:s})}function Wr(s,e){if(s===e)return!0;const t=wa(s);if(t!==wa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return gc(s).isEqual(gc(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Ta(o.timestampValue),m=Ta(l.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,l){return Ea(o.bytesValue).isEqual(Ea(l.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,l){return Ft(o.geoPointValue.latitude)===Ft(l.geoPointValue.latitude)&&Ft(o.geoPointValue.longitude)===Ft(l.geoPointValue.longitude)})(s,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Ft(o.integerValue)===Ft(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=Ft(o.doubleValue),m=Ft(l.doubleValue);return d===m?jh(d)===jh(m):isNaN(d)&&isNaN(m)}return!1})(s,e);case 9:return Ao(s.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},m=l.mapValue.fields||{};if(Nx(d)!==Nx(m))return!1;for(const p in d)if(d.hasOwnProperty(p)&&(m[p]===void 0||!Wr(d[p],m[p])))return!1;return!0})(s,e);default:return Ce(52216,{left:s})}}function yc(s,e){return(s.values||[]).find((t=>Wr(t,e)))!==void 0}function No(s,e){if(s===e)return 0;const t=wa(s),a=wa(e);if(t!==a)return Qe(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(s.booleanValue,e.booleanValue);case 2:return(function(l,d){const m=Ft(l.integerValue||l.doubleValue),p=Ft(d.integerValue||d.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(s,e);case 3:return Cx(s.timestampValue,e.timestampValue);case 4:return Cx(gc(s),gc(e));case 5:return Gm(s.stringValue,e.stringValue);case 6:return(function(l,d){const m=Ea(l),p=Ea(d);return m.compareTo(p)})(s.bytesValue,e.bytesValue);case 7:return(function(l,d){const m=l.split("/"),p=d.split("/");for(let y=0;y<m.length&&y<p.length;y++){const x=Qe(m[y],p[y]);if(x!==0)return x}return Qe(m.length,p.length)})(s.referenceValue,e.referenceValue);case 8:return(function(l,d){const m=Qe(Ft(l.latitude),Ft(d.latitude));return m!==0?m:Qe(Ft(l.longitude),Ft(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Ix(s.arrayValue,e.arrayValue);case 10:return(function(l,d){const m=l.fields||{},p=d.fields||{},y=m[Mh]?.arrayValue,x=p[Mh]?.arrayValue,T=Qe(y?.values?.length||0,x?.values?.length||0);return T!==0?T:Ix(y,x)})(s.mapValue,e.mapValue);case 11:return(function(l,d){if(l===ch.mapValue&&d===ch.mapValue)return 0;if(l===ch.mapValue)return 1;if(d===ch.mapValue)return-1;const m=l.fields||{},p=Object.keys(m),y=d.fields||{},x=Object.keys(y);p.sort(),x.sort();for(let T=0;T<p.length&&T<x.length;++T){const A=Gm(p[T],x[T]);if(A!==0)return A;const M=No(m[p[T]],y[x[T]]);if(M!==0)return M}return Qe(p.length,x.length)})(s.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function Cx(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Qe(s,e);const t=Ta(s),a=Ta(e),o=Qe(t.seconds,a.seconds);return o!==0?o:Qe(t.nanos,a.nanos)}function Ix(s,e){const t=s.values||[],a=e.values||[];for(let o=0;o<t.length&&o<a.length;++o){const l=No(t[o],a[o]);if(l)return l}return Qe(t.length,a.length)}function Ro(s){return Fm(s)}function Fm(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const a=Ta(t);return`time(${a.seconds},${a.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ea(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return ke.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let a="[",o=!0;for(const l of t.values||[])o?o=!1:a+=",",a+=Fm(l);return a+"]"})(s.arrayValue):"mapValue"in s?(function(t){const a=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of a)l?l=!1:o+=",",o+=`${d}:${Fm(t.fields[d])}`;return o+"}"})(s.mapValue):Ce(61005,{value:s})}function _h(s){switch(wa(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jh(s);return e?16+_h(e):16;case 5:return 2*s.stringValue.length;case 6:return Ea(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,l)=>o+_h(l)),0)})(s.arrayValue);case 10:case 11:return(function(a){let o=0;return yi(a.fields,((l,d)=>{o+=l.length+_h(d)})),o})(s.mapValue);default:throw Ce(13486,{value:s})}}function jx(s,e){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${e.path.canonicalString()}`}}function Km(s){return!!s&&"integerValue"in s}function Ig(s){return!!s&&"arrayValue"in s}function Dx(s){return!!s&&"nullValue"in s}function Mx(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function bh(s){return!!s&&"mapValue"in s}function lR(s){return(s?.mapValue?.fields||{})[Jb]?.stringValue===e1}function rc(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const e={mapValue:{fields:{}}};return yi(s.mapValue.fields,((t,a)=>e.mapValue.fields[t]=rc(a))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rc(s.arrayValue.values[t]);return e}return{...s}}function cR(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===oR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.value=e}static empty(){return new fr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!bh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(t)}setAll(e){let t=Tn.emptyPath(),a={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,a,o),a={},o=[],t=m.popLast()}d?a[m.lastSegment()]=rc(d):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,a,o)}delete(e){const t=this.field(e.popLast());bh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=t.mapValue.fields[e.get(a)];bh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,a){yi(t,((o,l)=>e[o]=l));for(const o of a)delete e[o]}clone(){return new fr(rc(this.value))}}function t1(s){const e=[];return yi(s.fields,((t,a)=>{const o=new Tn([t]);if(bh(a)){const l=t1(a.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Er(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,t,a,o,l,d,m){this.key=e,this.documentType=t,this.version=a,this.readTime=o,this.createTime=l,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Rn(e,0,De.min(),De.min(),De.min(),fr.empty(),0)}static newFoundDocument(e,t,a,o){return new Rn(e,1,t,De.min(),a,o,0)}static newNoDocument(e,t){return new Rn(e,2,t,De.min(),De.min(),fr.empty(),0)}static newUnknownDocument(e,t){return new Rn(e,3,t,De.min(),De.min(),fr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,t){this.position=e,this.inclusive=t}}function Ox(s,e,t){let a=0;for(let o=0;o<s.position.length;o++){const l=e[o],d=s.position[o];if(l.field.isKeyField()?a=ke.comparator(ke.fromName(d.referenceValue),t.key):a=No(d,t.data.field(l.field)),l.dir==="desc"&&(a*=-1),a!==0)break}return a}function Vx(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Wr(s.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t="asc"){this.field=e,this.dir=t}}function uR(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{}class Zt extends n1{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,a):new dR(e,t,a):t==="array-contains"?new gR(e,a):t==="in"?new pR(e,a):t==="not-in"?new yR(e,a):t==="array-contains-any"?new vR(e,a):new Zt(e,t,a)}static createKeyFieldInFilter(e,t,a){return t==="in"?new fR(e,a):new mR(e,a)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(No(t,this.value)):t!==null&&wa(this.value)===wa(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ar extends n1{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ar(e,t)}matches(e){return r1(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function r1(s){return s.op==="and"}function s1(s){return hR(s)&&r1(s)}function hR(s){for(const e of s.filters)if(e instanceof Ar)return!1;return!0}function $m(s){if(s instanceof Zt)return s.field.canonicalString()+s.op.toString()+Ro(s.value);if(s1(s))return s.filters.map((e=>$m(e))).join(",");{const e=s.filters.map((t=>$m(t))).join(",");return`${s.op}(${e})`}}function a1(s,e){return s instanceof Zt?(function(a,o){return o instanceof Zt&&a.op===o.op&&a.field.isEqual(o.field)&&Wr(a.value,o.value)})(s,e):s instanceof Ar?(function(a,o){return o instanceof Ar&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((l,d,m)=>l&&a1(d,o.filters[m])),!0):!1})(s,e):void Ce(19439)}function i1(s){return s instanceof Zt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ro(t.value)}`})(s):s instanceof Ar?(function(t){return t.op.toString()+" {"+t.getFilters().map(i1).join(" ,")+"}"})(s):"Filter"}class dR extends Zt{constructor(e,t,a){super(e,t,a),this.key=ke.fromName(a.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class fR extends Zt{constructor(e,t){super(e,"in",t),this.keys=o1("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mR extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=o1("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function o1(s,e){return(e.arrayValue?.values||[]).map((t=>ke.fromName(t.referenceValue)))}class gR extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ig(t)&&yc(t.arrayValue,this.value)}}class pR extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&yc(this.value.arrayValue,t)}}class yR extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!yc(this.value.arrayValue,t)}}class vR extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ig(t)||!t.arrayValue.values)&&t.arrayValue.values.some((a=>yc(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,t=null,a=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.Te=null}}function Px(s,e=null,t=[],a=[],o=null,l=null,d=null){return new xR(s,e,t,a,o,l,d)}function jg(s){const e=Oe(s);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((a=>$m(a))).join(","),t+="|ob:",t+=e.orderBy.map((a=>(function(l){return l.field.canonicalString()+l.dir})(a))).join(","),Wh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((a=>Ro(a))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((a=>Ro(a))).join(",")),e.Te=t}return e.Te}function Dg(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!uR(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!a1(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Vx(s.startAt,e.startAt)&&Vx(s.endAt,e.endAt)}function Ym(s){return ke.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t=null,a=[],o=[],l=null,d="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _R(s,e,t,a,o,l,d,m){return new Ho(s,e,t,a,o,l,d,m)}function Mg(s){return new Ho(s)}function Lx(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function l1(s){return s.collectionGroup!==null}function sc(s){const e=Oe(s);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new on(Tn.comparator);return d.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new vc(l,a))})),t.has(Tn.keyField().canonicalString())||e.Ie.push(new vc(Tn.keyField(),a))}return e.Ie}function $r(s){const e=Oe(s);return e.Ee||(e.Ee=bR(e,sc(s))),e.Ee}function bR(s,e){if(s.limitType==="F")return Px(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new vc(o.field,l)}));const t=s.endAt?new Oh(s.endAt.position,s.endAt.inclusive):null,a=s.startAt?new Oh(s.startAt.position,s.startAt.inclusive):null;return Px(s.path,s.collectionGroup,e,s.filters,s.limit,t,a)}}function Qm(s,e){const t=s.filters.concat([e]);return new Ho(s.path,s.collectionGroup,s.explicitOrderBy.slice(),t,s.limit,s.limitType,s.startAt,s.endAt)}function Xm(s,e,t){return new Ho(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function ed(s,e){return Dg($r(s),$r(e))&&s.limitType===e.limitType}function c1(s){return`${jg($r(s))}|lt:${s.limitType}`}function yo(s){return`Query(target=${(function(t){let a=t.path.canonicalString();return t.collectionGroup!==null&&(a+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(a+=`, filters: [${t.filters.map((o=>i1(o))).join(", ")}]`),Wh(t.limit)||(a+=", limit: "+t.limit),t.orderBy.length>0&&(a+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(a+=", startAt: ",a+=t.startAt.inclusive?"b:":"a:",a+=t.startAt.position.map((o=>Ro(o))).join(",")),t.endAt&&(a+=", endAt: ",a+=t.endAt.inclusive?"a:":"b:",a+=t.endAt.position.map((o=>Ro(o))).join(",")),`Target(${a})`})($r(s))}; limitType=${s.limitType})`}function td(s,e){return e.isFoundDocument()&&(function(a,o){const l=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(l):ke.isDocumentKey(a.path)?a.path.isEqual(l):a.path.isImmediateParentOf(l)})(s,e)&&(function(a,o){for(const l of sc(a))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(s,e)&&(function(a,o){for(const l of a.filters)if(!l.matches(o))return!1;return!0})(s,e)&&(function(a,o){return!(a.startAt&&!(function(d,m,p){const y=Ox(d,m,p);return d.inclusive?y<=0:y<0})(a.startAt,sc(a),o)||a.endAt&&!(function(d,m,p){const y=Ox(d,m,p);return d.inclusive?y>=0:y>0})(a.endAt,sc(a),o))})(s,e)}function TR(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function u1(s){return(e,t)=>{let a=!1;for(const o of sc(s)){const l=ER(o,e,t);if(l!==0)return l;a=a||o.field.isKeyField()}return 0}}function ER(s,e,t){const a=s.field.isKeyField()?ke.comparator(e.key,t.key):(function(l,d,m){const p=d.data.field(l),y=m.data.field(l);return p!==null&&y!==null?No(p,y):Ce(42886)})(s.field,e,t);switch(s.dir){case"asc":return a;case"desc":return-1*a;default:return Ce(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a!==void 0){for(const[o,l]of a)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[t]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){yi(this.inner,((t,a)=>{for(const[o,l]of a)e(o,l)}))}isEmpty(){return $b(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new Lt(ke.comparator);function Ms(){return wR}const h1=new Lt(ke.comparator);function Wl(...s){let e=h1;for(const t of s)e=e.insert(t.key,t);return e}function d1(s){let e=h1;return s.forEach(((t,a)=>e=e.insert(t,a.overlayedDocument))),e}function oi(){return ac()}function f1(){return ac()}function ac(){return new vi((s=>s.toString()),((s,e)=>s.isEqual(e)))}const SR=new Lt(ke.comparator),kR=new on(ke.comparator);function Xe(...s){let e=kR;for(const t of s)e=e.add(t);return e}const AR=new on(Qe);function NR(){return AR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function m1(s){return{integerValue:""+s}}function RR(s,e){return nR(e)?m1(e):Og(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(){this._=void 0}}function CR(s,e,t){return s instanceof xc?(function(o,l){const d={fields:{[Xb]:{stringValue:Qb},[Wb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Cg(l)&&(l=Jh(l)),l&&(d.fields[Zb]=l),{mapValue:d}})(t,e):s instanceof _c?p1(s,e):s instanceof bc?y1(s,e):(function(o,l){const d=g1(o,l),m=zx(d)+zx(o.Ae);return Km(d)&&Km(o.Ae)?m1(m):Og(o.serializer,m)})(s,e)}function IR(s,e,t){return s instanceof _c?p1(s,e):s instanceof bc?y1(s,e):t}function g1(s,e){return s instanceof Vh?(function(a){return Km(a)||(function(l){return!!l&&"doubleValue"in l})(a)})(e)?e:{integerValue:0}:null}class xc extends nd{}class _c extends nd{constructor(e){super(),this.elements=e}}function p1(s,e){const t=v1(e);for(const a of s.elements)t.some((o=>Wr(o,a)))||t.push(a);return{arrayValue:{values:t}}}class bc extends nd{constructor(e){super(),this.elements=e}}function y1(s,e){let t=v1(e);for(const a of s.elements)t=t.filter((o=>!Wr(o,a)));return{arrayValue:{values:t}}}class Vh extends nd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function zx(s){return Ft(s.integerValue||s.doubleValue)}function v1(s){return Ig(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,t){this.field=e,this.transform=t}}function DR(s,e){return s.field.isEqual(e.field)&&(function(a,o){return a instanceof _c&&o instanceof _c||a instanceof bc&&o instanceof bc?Ao(a.elements,o.elements,Wr):a instanceof Vh&&o instanceof Vh?Wr(a.Ae,o.Ae):a instanceof xc&&o instanceof xc})(s.transform,e.transform)}class MR{constructor(e,t){this.version=e,this.transformResults=t}}class Yr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Yr}static exists(e){return new Yr(void 0,e)}static updateTime(e){return new Yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class rd{}function x1(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new b1(s.key,Yr.none()):new Ic(s.key,s.data,Yr.none());{const t=s.data,a=fr.empty();let o=new on(Tn.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?a.delete(l):a.set(l,d),o=o.add(l)}return new xi(s.key,a,new Er(o.toArray()),Yr.none())}}function OR(s,e,t){s instanceof Ic?(function(o,l,d){const m=o.value.clone(),p=Bx(o.fieldTransforms,l,d.transformResults);m.setAll(p),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(s,e,t):s instanceof xi?(function(o,l,d){if(!Th(o.precondition,l))return void l.convertToUnknownDocument(d.version);const m=Bx(o.fieldTransforms,l,d.transformResults),p=l.data;p.setAll(_1(o)),p.setAll(m),l.convertToFoundDocument(d.version,p).setHasCommittedMutations()})(s,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function ic(s,e,t,a){return s instanceof Ic?(function(l,d,m,p){if(!Th(l.precondition,d))return m;const y=l.value.clone(),x=qx(l.fieldTransforms,p,d);return y.setAll(x),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(s,e,t,a):s instanceof xi?(function(l,d,m,p){if(!Th(l.precondition,d))return m;const y=qx(l.fieldTransforms,p,d),x=d.data;return x.setAll(_1(l)),x.setAll(y),d.convertToFoundDocument(d.version,x).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(s,e,t,a):(function(l,d,m){return Th(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(s,e,t)}function VR(s,e){let t=null;for(const a of s.fieldTransforms){const o=e.data.field(a.field),l=g1(a.transform,o||null);l!=null&&(t===null&&(t=fr.empty()),t.set(a.field,l))}return t||null}function Ux(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Ao(a,o,((l,d)=>DR(l,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ic extends rd{constructor(e,t,a,o=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class xi extends rd{constructor(e,t,a,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function _1(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const a=s.data.field(t);e.set(t,a)}})),e}function Bx(s,e,t){const a=new Map;ut(s.length===t.length,32656,{Re:t.length,Ve:s.length});for(let o=0;o<t.length;o++){const l=s[o],d=l.transform,m=e.data.field(l.field);a.set(l.field,IR(d,m,t[o]))}return a}function qx(s,e,t){const a=new Map;for(const o of s){const l=o.transform,d=t.data.field(o.field);a.set(o.field,CR(l,d,e))}return a}class b1 extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PR extends rd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,a,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&OR(l,e,a[o])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=ic(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=ic(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=f1();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let m=this.applyToLocalView(d,l.mutatedFields);m=t.has(o.key)?null:m;const p=x1(d,m);p!==null&&a.set(o.key,p),d.isValidDocument()||d.convertToNoDocument(De.min())})),a}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,((t,a)=>Ux(t,a)))&&Ao(this.baseMutations,e.baseMutations,((t,a)=>Ux(t,a)))}}class Vg{constructor(e,t,a,o){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=o}static from(e,t,a){ut(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return SR})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,a[d].version);return new Vg(e,t,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,nt;function BR(s){switch(s){case re.OK:return Ce(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ce(15467,{code:s})}}function T1(s){if(s===void 0)return Ds("GRPC error has no .code"),re.UNKNOWN;switch(s){case Xt.OK:return re.OK;case Xt.CANCELLED:return re.CANCELLED;case Xt.UNKNOWN:return re.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return re.INTERNAL;case Xt.UNAVAILABLE:return re.UNAVAILABLE;case Xt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Xt.NOT_FOUND:return re.NOT_FOUND;case Xt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Xt.ABORTED:return re.ABORTED;case Xt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Xt.DATA_LOSS:return re.DATA_LOSS;default:return Ce(39323,{code:s})}}(nt=Xt||(Xt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HR=new xa([4294967295,4294967295],0);function Hx(s){const e=qR().encode(s),t=new Pb;return t.update(e),new Uint8Array(t.digest())}function Gx(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xa([t,a],0),new xa([o,l],0)]}class Pg{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new Jl(`Invalid padding: ${t}`);if(a<0)throw new Jl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${a}`);if(e.length===0&&t!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xa.fromNumber(this.ge)}ye(e,t,a){let o=e.add(t.multiply(xa.fromNumber(a)));return o.compare(HR)===1&&(o=new xa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Hx(e),[a,o]=Gx(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(a,o,l);if(!this.we(d))return!1}return!0}static create(e,t,a){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new Pg(l,o,t);return a.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=Hx(e),[a,o]=Gx(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(a,o,l);this.Se(d)}}Se(e){const t=Math.floor(e/8),a=e%8;this.bitmap[t]|=1<<a}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,t,a,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const o=new Map;return o.set(e,jc.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new sd(De.min(),o,new Lt(Qe),Ms(),Xe())}}class jc{constructor(e,t,a,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new jc(a,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e,t,a,o){this.be=e,this.removedTargetIds=t,this.key=a,this.De=o}}class E1{constructor(e,t){this.targetId=e,this.Ce=t}}class w1{constructor(e,t,a=En.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=o}}class Fx{constructor(){this.ve=0,this.Fe=Kx(),this.Me=En.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),t=Xe(),a=Xe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:a=a.add(o);break;default:Ce(38017,{changeType:l})}})),new jc(this.Me,this.xe,e,t,a)}qe(){this.Oe=!1,this.Fe=Kx()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class GR{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ms(),this.Je=uh(),this.He=uh(),this.Ye=new Lt(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const a=this.nt(t);switch(e.state){case 0:this.rt(t)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),a.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((a,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,a=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Ym(l))if(a===0){const d=new ke(l.path);this.et(t,d,Rn.newNoDocument(d,De.min()))}else ut(a===1,20013,{expectedCount:a});else{const d=this._t(t);if(d!==a){const m=this.ut(e),p=m?this.ct(m,e,d):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:l=0}=t;let d,m;try{d=Ea(a).toUint8Array()}catch(p){if(p instanceof Yb)return fc("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Pg(d,o,l)}catch(p){return fc(p instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,a){return t.Ce.count===a-this.Pt(e,t.targetId)?0:2}Pt(e,t){const a=this.Ge.getRemoteKeysForTarget(t);let o=0;return a.forEach((l=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const m=this.ot(d);if(m){if(l.current&&Ym(m.target)){const p=new ke(m.target.path);this.It(p).has(d)||this.Et(d,p)||this.et(d,p,Rn.newNoDocument(p,e))}l.Be&&(t.set(d,l.ke()),l.qe())}}));let a=Xe();this.He.forEach(((l,d)=>{let m=!0;d.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(a=a.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const o=new sd(e,t,this.Ye,this.je,a);return this.je=Ms(),this.Je=uh(),this.He=uh(),this.Ye=new Lt(Qe),o}Xe(e,t){if(!this.rt(e))return;const a=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,a),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),a&&(this.je=this.je.insert(t,a))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Fx,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new on(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new on(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||xe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fx),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function uh(){return new Lt(ke.comparator)}function Kx(){return new Lt(ke.comparator)}const FR={asc:"ASCENDING",desc:"DESCENDING"},KR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$R={and:"AND",or:"OR"};class YR{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zm(s,e){return s.useProto3Json||Wh(e)?e:{value:e}}function Ph(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S1(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function QR(s,e){return Ph(s,e.toTimestamp())}function Qr(s){return ut(!!s,49232),De.fromTimestamp((function(t){const a=Ta(t);return new wt(a.seconds,a.nanos)})(s))}function Lg(s,e){return Wm(s,e).canonicalString()}function Wm(s,e){const t=(function(o){return new Nt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function k1(s){const e=Nt.fromString(s);return ut(I1(e),10190,{key:e.toString()}),e}function Jm(s,e){return Lg(s.databaseId,e.path)}function Am(s,e){const t=k1(e);if(t.get(1)!==s.databaseId.projectId)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new ge(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new ke(N1(t))}function A1(s,e){return Lg(s.databaseId,e)}function XR(s){const e=k1(s);return e.length===4?Nt.emptyPath():N1(e)}function eg(s){return new Nt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function N1(s){return ut(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function $x(s,e,t){return{name:Jm(s,e),fields:t.value.mapValue.fields}}function ZR(s,e){let t;if("targetChange"in e){e.targetChange;const a=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,x){return y.useProto3Json?(ut(x===void 0||typeof x=="string",58123),En.fromBase64String(x||"")):(ut(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),En.fromUint8Array(x||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const x=y.code===void 0?re.UNKNOWN:T1(y.code);return new ge(x,y.message||"")})(d);t=new w1(a,o,l,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Am(s,a.document.name),l=Qr(a.document.updateTime),d=a.document.createTime?Qr(a.document.createTime):De.min(),m=new fr({mapValue:{fields:a.document.fields}}),p=Rn.newFoundDocument(o,l,d,m),y=a.targetIds||[],x=a.removedTargetIds||[];t=new Eh(y,x,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Am(s,a.document),l=a.readTime?Qr(a.readTime):De.min(),d=Rn.newNoDocument(o,l),m=a.removedTargetIds||[];t=new Eh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Am(s,a.document),l=a.removedTargetIds||[];t=new Eh([],l,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:l}=a,d=new UR(o,l),m=a.targetId;t=new E1(m,d)}}return t}function WR(s,e){let t;if(e instanceof Ic)t={update:$x(s,e.key,e.value)};else if(e instanceof b1)t={delete:Jm(s,e.key)};else if(e instanceof xi)t={update:$x(s,e.key,e.data),updateMask:oC(e.fieldMask)};else{if(!(e instanceof PR))return Ce(16599,{Vt:e.type});t={verify:Jm(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((a=>(function(l,d){const m=d.transform;if(m instanceof xc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof _c)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof bc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Vh)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Ce(20930,{transform:d.transform})})(0,a)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:QR(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(s,e.precondition)),t}function JR(s,e){return s&&s.length>0?(ut(e!==void 0,14353),s.map((t=>(function(o,l){let d=o.updateTime?Qr(o.updateTime):Qr(l);return d.isEqual(De.min())&&(d=Qr(l)),new MR(d,o.transformResults||[])})(t,e)))):[]}function eC(s,e){return{documents:[A1(s,e.path)]}}function tC(s,e){const t={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),t.structuredQuery.from=[{collectionId:a.lastSegment()}]),t.parent=A1(s,o);const l=(function(y){if(y.length!==0)return C1(Ar.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(y){if(y.length!==0)return y.map((x=>(function(A){return{field:vo(A.field),direction:sC(A.dir)}})(x)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Zm(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function nC(s){let e=XR(s.parent);const t=s.structuredQuery,a=t.from?t.from.length:0;let o=null;if(a>0){ut(a===1,65062);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let l=[];t.where&&(l=(function(T){const A=R1(T);return A instanceof Ar&&s1(A)?A.getFilters():[A]})(t.where));let d=[];t.orderBy&&(d=(function(T){return T.map((A=>(function(B){return new vc(xo(B.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(T){let A;return A=typeof T=="object"?T.value:T,Wh(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(T){const A=!!T.before,M=T.values||[];return new Oh(M,A)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const A=!T.before,M=T.values||[];return new Oh(M,A)})(t.endAt)),_R(e,o,d,l,m,"F",p,y)}function rC(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function R1(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const a=xo(t.unaryFilter.field);return Zt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=xo(t.unaryFilter.field);return Zt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=xo(t.unaryFilter.field);return Zt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=xo(t.unaryFilter.field);return Zt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(s):s.fieldFilter!==void 0?(function(t){return Zt.create(xo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return Ar.create(t.compositeFilter.filters.map((a=>R1(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(s):Ce(30097,{filter:s})}function sC(s){return FR[s]}function aC(s){return KR[s]}function iC(s){return $R[s]}function vo(s){return{fieldPath:s.canonicalString()}}function xo(s){return Tn.fromServerFormat(s.fieldPath)}function C1(s){return s instanceof Zt?(function(t){if(t.op==="=="){if(Mx(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NAN"}};if(Dx(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Mx(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NAN"}};if(Dx(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(t.field),op:aC(t.op),value:t.value}}})(s):s instanceof Ar?(function(t){const a=t.getFilters().map((o=>C1(o)));return a.length===1?a[0]:{compositeFilter:{op:iC(t.op),filters:a}}})(s):Ce(54877,{filter:s})}function oC(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function I1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t,a,o,l=De.min(),d=De.min(),m=En.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new ga(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ga(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.yt=e}}function cC(s){const e=nC({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Xm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.Cn=new hC}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(ba.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(ba.min())}updateCollectionGroup(e,t,a){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class hC{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t]||new on(Nt.comparator),l=!o.has(a);return this.index[t]=o.add(a),l}has(e){const t=e.lastSegment(),a=e.popLast(),o=this.index[t];return o&&o.has(a)}getEntries(e){return(this.index[e]||new on(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},j1=41943040;class qn{static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(j1,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Co(0)}static cr(){return new Co(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="LruGarbageCollector",D1=1048576;function Xx([s,e],[t,a]){const o=Qe(s,t);return o===0?Qe(e,a):o}class dC{constructor(e){this.Ir=e,this.buffer=new on(Xx),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();Xx(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fC{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(Qx,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){qo(t)?xe(Qx,"Ignoring IndexedDB error during garbage collection: ",t):await Bo(t)}await this.Vr(3e5)}))}}class mC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((a=>Math.floor(t/100*a)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Zh.ce);const a=new dC(t);return this.mr.forEachTarget(e,(o=>a.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>a.Ar(o))))).next((()=>a.maxValue))}removeTargets(e,t,a){return this.mr.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Yx)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yx):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let a,o,l,d,m,p,y;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,d=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(a=T,m=Date.now(),this.removeTargets(e,a,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((T=>(y=Date.now(),po()<=Ye.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-x}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${l} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-x}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function gC(s,e){return new mC(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.changes=new vi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return a!==void 0?oe.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t,a,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(a!==null&&ic(a.mutation,o,Er.empty(),wt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.getLocalViewOfDocuments(e,a,Xe()).next((()=>a))))}getLocalViewOfDocuments(e,t,a=Xe()){const o=oi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,a).next((l=>{let d=Wl();return l.forEach(((m,p)=>{d=d.insert(m,p.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const a=oi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,Xe())))}populateOverlays(e,t,a){const o=[];return a.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,a,o){let l=Ms();const d=ac(),m=(function(){return ac()})();return t.forEach(((p,y)=>{const x=a.get(y.key);o.has(y.key)&&(x===void 0||x.mutation instanceof xi)?l=l.insert(y.key,y):x!==void 0?(d.set(y.key,x.mutation.getFieldMask()),ic(x.mutation,y,x.mutation.getFieldMask(),wt.now())):d.set(y.key,Er.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,x)=>d.set(y,x))),t.forEach(((y,x)=>m.set(y,new yC(x,d.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const a=ac();let o=new Lt(((d,m)=>d-m)),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let x=a.get(p)||Er.empty();x=m.applyToLocalView(y,x),a.set(p,x);const T=(o.get(m.batchId)||Xe()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,x=p.value,T=f1();x.forEach((A=>{if(!l.has(A)){const M=x1(t.get(A),a.get(A));M!==null&&T.set(A,M),l=l.add(A)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,T))}return oe.waitFor(d)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,t,a,o){return(function(d){return ke.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):l1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a,o):this.getDocumentsMatchingCollectionQuery(e,t,a,o)}getNextDocuments(e,t,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,o-l.size):oe.resolve(oi());let m=mc,p=l;return d.next((y=>oe.forEach(y,((x,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),l.get(x)?oe.resolve():this.remoteDocumentCache.getEntry(e,x).next((A=>{p=p.insert(x,A)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,Xe()))).next((x=>({batchId:m,changes:d1(x)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((a=>{let o=Wl();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,a,o){const l=t.collectionGroup;let d=Wl();return this.indexManager.getCollectionParents(e,l).next((m=>oe.forEach(m,(p=>{const y=(function(T,A){return new Ho(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,a,o).next((x=>{x.forEach(((T,A)=>{d=d.insert(T,A)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,a,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,l,o)))).next((d=>{l.forEach(((p,y)=>{const x=y.getKey();d.get(x)===null&&(d=d.insert(x,Rn.newInvalidDocument(x)))}));let m=Wl();return d.forEach(((p,y)=>{const x=l.get(p);x!==void 0&&ic(x.mutation,y,Er.empty(),wt.now()),td(t,y)&&(m=m.insert(p,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Qr(o.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:cC(o.bundledQuery),readTime:Qr(o.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.overlays=new Lt(ke.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const a=oi();return oe.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&a.set(o,l)})))).next((()=>a))}saveOverlays(e,t,a){return a.forEach(((o,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,a){const o=this.qr.get(a);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(a)),oe.resolve()}getOverlaysForCollection(e,t,a){const o=oi(),l=t.length+1,d=new ke(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>a&&o.set(p.getKey(),p)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,a,o){let l=new Lt(((y,x)=>y-x));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>a){let x=l.get(y.largestBatchId);x===null&&(x=oi(),l=l.insert(y.largestBatchId,x)),x.set(y.getKey(),y)}}const m=oi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,x)=>m.set(y,x))),!(m.size()>=o)););return oe.resolve(m)}St(e,t,a){const o=this.overlays.get(a.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(a.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(a.key,new zR(t,a));let l=this.qr.get(t);l===void 0&&(l=Xe(),this.qr.set(t,l)),this.qr.set(t,l.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(){this.sessionToken=En.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(){this.Qr=new on(gn.$r),this.Ur=new on(gn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const a=new gn(e,t);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,t){e.forEach((a=>this.addReference(a,t)))}removeReference(e,t){this.Gr(new gn(e,t))}zr(e,t){e.forEach((a=>this.removeReference(a,t)))}jr(e){const t=new ke(new Nt([])),a=new gn(t,e),o=new gn(t,e+1),l=[];return this.Ur.forEachInRange([a,o],(d=>{this.Gr(d),l.push(d.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ke(new Nt([])),a=new gn(t,e),o=new gn(t,e+1);let l=Xe();return this.Ur.forEachInRange([a,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new gn(e,0),a=this.Qr.firstAfterOrEqual(t);return a!==null&&e.isEqual(a.key)}}class gn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ke.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new on(gn.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,a,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new LR(l,t,a,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new gn(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const a=t+1,o=this.ei(a),l=o<0?0:o;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Rg:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new gn(t,0),o=new gn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([a,o],(d=>{const m=this.Xr(d.Yr);l.push(m)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new on(Qe);return t.forEach((o=>{const l=new gn(o,0),d=new gn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,d],(m=>{a=a.add(m.Yr)}))})),oe.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,o=a.length+1;let l=a;ke.isDocumentKey(l)||(l=l.child(""));const d=new gn(new ke(l),0);let m=new on(Qe);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!a.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),d),oe.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((a=>{const o=this.Xr(a);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ut(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return oe.forEach(t.mutations,(o=>{const l=new gn(o.key,t.batchId);return a=a.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,t){const a=new gn(t,0),o=this.Zr.firstAfterOrEqual(a);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.ri=e,this.docs=(function(){return new Lt(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,o=this.docs.get(a),l=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return oe.resolve(a?a.document.mutableCopy():Rn.newInvalidDocument(t))}getEntries(e,t){let a=Ms();return t.forEach((o=>{const l=this.docs.get(o);a=a.insert(o,l?l.document.mutableCopy():Rn.newInvalidDocument(o))})),oe.resolve(a)}getDocumentsMatchingQuery(e,t,a,o){let l=Ms();const d=t.path,m=new ke(d.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:x}}=p.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||W2(Z2(x),a)<=0||(o.has(x.key)||td(t,x))&&(l=l.insert(x.key,x.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,a,o){Ce(9500)}ii(e,t){return oe.forEach(this.docs,(a=>t(a)))}newChangeBuffer(e){return new wC(this)}getSize(e){return oe.resolve(this.size)}}class wC extends pC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(a)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.persistence=e,this.si=new vi((t=>jg(t)),Dg),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new zg,this.targetCount=0,this.ai=Co.ur()}forEachTarget(e,t){return this.si.forEach(((a,o)=>t(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Co(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,a){let o=0;const l=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&a.get(m.targetId)===null&&(this.si.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),oe.waitFor(l).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const a=this.si.get(t)||null;return oe.resolve(a)}addMatchingKeys(e,t,a){return this._i.Wr(t,a),oe.resolve()}removeMatchingKeys(e,t,a){this._i.zr(t,a);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const a=this._i.Hr(t);return oe.resolve(a)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zh(0),this.li=!1,this.li=!0,this.hi=new bC,this.referenceDelegate=e(this),this.Pi=new SC(this),this.indexManager=new uC,this.remoteDocumentCache=(function(o){return new EC(o)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new lC(t),this.Ii=new xC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _C,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.ui[e.toKey()];return a||(a=new TC(t,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,a){xe("MemoryPersistence","Starting transaction:",e);const o=new kC(this.ci.next());return this.referenceDelegate.Ei(),a(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,t))))}}class kC extends eR{constructor(e){super(),this.currentSequenceNumber=e}}class Ug{constructor(e){this.persistence=e,this.Ri=new zg,this.Vi=null}static mi(e){return new Ug(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,a){return this.Ri.addReference(a,t),this.fi.delete(a.toString()),oe.resolve()}removeReference(e,t,a){return this.Ri.removeReference(a,t),this.fi.add(a.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>a.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(a=>{const o=ke.fromPath(a);return this.gi(e,o).next((l=>{l||t.removeEntry(o,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((a=>{a?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Lh{constructor(e,t){this.persistence=e,this.pi=new vi((a=>rR(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=gC(this,t)}static mi(e,t){return new Lh(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>t.next((o=>a+o))))}wr(e){let t=0;return this.pr(e,(a=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((a,o)=>this.br(e,a,o).next((l=>l?oe.resolve():t(o)))))}removeTargets(e,t,a){return this.persistence.getTargetCache().removeTargets(e,t,a)}removeOrphanedDocuments(e,t){let a=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(a++,l.removeEntry(d,De.min()))})))).next((()=>l.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,a){return this.pi.set(a,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_h(e.data.value)),t}br(e,t,a){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return oe.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t,a,o){this.targetId=e,this.fromCache=t,this.Es=a,this.ds=o}static As(e,t){let a=Xe(),o=Xe();for(const l of t.docChanges)switch(l.type){case 0:a=a.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Bg(e,t.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return rk()?8:tR(Cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,a,o){const l={result:null};return this.ys(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ws(e,t,o,a).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new AC;return this.Ss(e,t,d).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>l.result))}bs(e,t,a,o){return a.documentReadCount<this.fs?(po()<=Ye.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",yo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(po()<=Ye.DEBUG&&xe("QueryEngine","Query:",yo(t),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.gs*o?(po()<=Ye.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",yo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):oe.resolve())}ys(e,t){if(Lx(t))return oe.resolve(null);let a=$r(t);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Xm(t,null,"F"),a=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next((l=>{const d=Xe(...l);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,a).next((p=>{const y=this.Ds(t,m);return this.Cs(t,y,d,p.readTime)?this.ys(e,Xm(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,a,o){return Lx(t)||o.isEqual(De.min())?oe.resolve(null):this.ps.getDocuments(e,a).next((l=>{const d=this.Ds(t,l);return this.Cs(t,d,a,o)?oe.resolve(null):(po()<=Ye.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(t)),this.vs(e,d,t,X2(o,mc)).next((m=>m)))}))}Ds(e,t){let a=new on(u1(e));return t.forEach(((o,l)=>{td(e,l)&&(a=a.add(l))})),a}Cs(e,t,a,o){if(e.limit===null)return!1;if(a.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,a){return po()<=Ye.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",yo(t)),this.ps.getDocumentsMatchingQuery(e,t,ba.min(),a)}vs(e,t,a,o){return this.ps.getDocumentsMatchingQuery(e,a,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="LocalStore",RC=3e8;class CC{constructor(e,t,a,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Lt(Qe),this.xs=new vi((l=>jg(l)),Dg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function IC(s,e,t,a){return new CC(s,e,t,a)}async function O1(s,e){const t=Oe(s);return await t.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return t.mutationQueue.getAllMutationBatches(a).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(a)))).next((l=>{const d=[],m=[];let p=Xe();for(const y of o){d.push(y.batchId);for(const x of y.mutations)p=p.add(x.key)}for(const y of l){m.push(y.batchId);for(const x of y.mutations)p=p.add(x.key)}return t.localDocuments.getDocuments(a,p).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function jC(s,e){const t=Oe(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,x){const T=y.batch,A=T.keys();let M=oe.resolve();return A.forEach((B=>{M=M.next((()=>x.getEntry(p,B))).next((L=>{const j=y.docVersions.get(B);ut(j!==null,48541),L.version.compareTo(j)<0&&(T.applyToRemoteDocument(L,y),L.isValidDocument()&&(L.setReadTime(y.commitVersion),x.addEntry(L)))}))})),M.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(t,a,e,l).next((()=>l.apply(a))).next((()=>t.mutationQueue.performConsistencyCheck(a))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(m){let p=Xe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(a,o)))}))}function V1(s){const e=Oe(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function DC(s,e){const t=Oe(s),a=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((x,T)=>{const A=o.get(T);if(!A)return;m.push(t.Pi.removeMatchingKeys(l,x.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,x.addedDocuments,T))));let M=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?M=M.withResumeToken(En.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):x.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(x.resumeToken,a)),o=o.insert(T,M),(function(L,j,X){return L.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=RC?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(A,M,x)&&m.push(t.Pi.updateTargetData(l,M))}));let p=Ms(),y=Xe();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,x))})),m.push(MC(l,d,e.documentUpdates).next((x=>{p=x.ks,y=x.qs}))),!a.isEqual(De.min())){const x=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,a)));m.push(x)}return oe.waitFor(m).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function MC(s,e,t){let a=Xe(),o=Xe();return t.forEach((l=>a=a.add(l))),e.getEntries(s,a).next((l=>{let d=Ms();return t.forEach(((m,p)=>{const y=l.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(De.min())?(e.removeEntry(m,p.readTime),d=d.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),d=d.insert(m,p)):xe(qg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:d,qs:o}}))}function OC(s,e){const t=Oe(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Rg),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function VC(s,e){const t=Oe(s);return t.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return t.Pi.getTargetData(a,e).next((l=>l?(o=l,oe.resolve(o)):t.Pi.allocateTargetId(a).next((d=>(o=new ga(e,d,"TargetPurposeListen",a.currentSequenceNumber),t.Pi.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=t.Ms.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(a.targetId,a),t.xs.set(e,a.targetId)),a}))}async function tg(s,e,t){const a=Oe(s),o=a.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await a.persistence.runTransaction("Release target",l,(d=>a.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!qo(d))throw d;xe(qg,`Failed to update sequence numbers for target ${e}: ${d}`)}a.Ms=a.Ms.remove(e),a.xs.delete(o.target)}function Zx(s,e,t){const a=Oe(s);let o=De.min(),l=Xe();return a.persistence.runTransaction("Execute query","readwrite",(d=>(function(p,y,x){const T=Oe(p),A=T.xs.get(x);return A!==void 0?oe.resolve(T.Ms.get(A)):T.Pi.getTargetData(y,x)})(a,d,$r(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(d,m.targetId).next((p=>{l=p}))})).next((()=>a.Fs.getDocumentsMatchingQuery(d,e,t?o:De.min(),t?l:Xe()))).next((m=>(PC(a,TR(e),m),{documents:m,Qs:l})))))}function PC(s,e,t){let a=s.Os.get(e)||De.min();t.forEach(((o,l)=>{l.readTime.compareTo(a)>0&&(a=l.readTime)})),s.Os.set(e,a)}class Wx{constructor(){this.activeTargetIds=NR()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LC{constructor(){this.Mo=new Wx,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,a){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wx,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="ConnectivityMonitor";class e_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(Jx,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(Jx,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function ng(){return hh===null?hh=(function(){return 268435456+Math.round(2147483648*Math.random())})():hh++,"0x"+hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="RestConnection",UC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class BC{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${a}/databases/${o}`,this.Wo=this.databaseId.database===Dh?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Go(e,t,a,o,l){const d=ng(),m=this.zo(e,t.toUriEncodedString());xe(Nm,`Sending RPC '${e}' ${d}:`,m,a);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:y}=new URL(m),x=Po(y);return this.Jo(e,m,p,a,x).then((T=>(xe(Nm,`Received RPC '${e}' ${d}: `,T),T)),(T=>{throw fc(Nm,`RPC '${e}' ${d} failed with error: `,T,"url: ",m,"request:",a),T}))}Ho(e,t,a,o,l,d){return this.Go(e,t,a,o,l)}jo(e,t,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),a&&a.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const a=UC[e];return`${this.Uo}/v1/${t}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="WebChannelConnection";class HC extends BC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,a,o,l){const d=ng();return new Promise(((m,p)=>{const y=new Lb;y.setWithCredentials(!0),y.listenOnce(zb.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case xh.NO_ERROR:const T=y.getResponseJson();xe(Nn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(T)),m(T);break;case xh.TIMEOUT:xe(Nn,`RPC '${e}' ${d} timed out`),p(new ge(re.DEADLINE_EXCEEDED,"Request time out"));break;case xh.HTTP_ERROR:const A=y.getStatus();if(xe(Nn,`RPC '${e}' ${d} failed with status:`,A,"response text:",y.getResponseText()),A>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const B=M?.error;if(B&&B.status&&B.message){const L=(function(X){const W=X.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(W)>=0?W:re.UNKNOWN})(B.status);p(new ge(L,B.message))}else p(new ge(re.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ge(re.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{xe(Nn,`RPC '${e}' ${d} completed.`)}}));const x=JSON.stringify(o);xe(Nn,`RPC '${e}' ${d} sending request:`,o),y.send(t,"POST",x,a,15)}))}T_(e,t,a){const o=ng(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=qb(),m=Bb(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,a),p.encodeInitMessageHeaders=!0;const x=l.join("");xe(Nn,`Creating RPC '${e}' stream ${o}: ${x}`,p);const T=d.createWebChannel(x,p);this.I_(T);let A=!1,M=!1;const B=new qC({Yo:j=>{M?xe(Nn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(A||(xe(Nn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),xe(Nn,`RPC '${e}' stream ${o} sending:`,j),T.send(j))},Zo:()=>T.close()}),L=(j,X,W)=>{j.listen(X,(he=>{try{W(he)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return L(T,Zl.EventType.OPEN,(()=>{M||(xe(Nn,`RPC '${e}' stream ${o} transport opened.`),B.o_())})),L(T,Zl.EventType.CLOSE,(()=>{M||(M=!0,xe(Nn,`RPC '${e}' stream ${o} transport closed`),B.a_(),this.E_(T))})),L(T,Zl.EventType.ERROR,(j=>{M||(M=!0,fc(Nn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),B.a_(new ge(re.UNAVAILABLE,"The operation could not be completed")))})),L(T,Zl.EventType.MESSAGE,(j=>{if(!M){const X=j.data[0];ut(!!X,16349);const W=X,he=W?.error||W[0]?.error;if(he){xe(Nn,`RPC '${e}' stream ${o} received error:`,he);const ue=he.status;let le=(function(C){const R=Xt[C];if(R!==void 0)return T1(R)})(ue),de=he.message;le===void 0&&(le=re.INTERNAL,de="Unknown error status: "+ue+" with message "+he.message),M=!0,B.a_(new ge(le,de)),T.close()}else xe(Nn,`RPC '${e}' stream ${o} received:`,X),B.u_(X)}})),L(m,Ub.STAT_EVENT,(j=>{j.stat===Hm.PROXY?xe(Nn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===Hm.NOPROXY&&xe(Nn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{B.__()}),0),B}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(s){return new YR(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t,a=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=a,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-a);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="PersistentStream";class L1{constructor(e,t,a,o,l,d,m,p){this.Mi=e,this.S_=a,this.b_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new P1(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Ds(t.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===t&&this.G_(a,o)}),(a=>{e((()=>{const o=new ge(re.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,t){const a=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(t_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(xe(t_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GC extends L1{constructor(e,t,a,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,o,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZR(this.serializer,e),a=(function(l){if(!("targetChange"in l))return De.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?Qr(d.readTime):De.min()})(e);return this.listener.H_(t,a)}Y_(e){const t={};t.database=eg(this.serializer),t.addTarget=(function(l,d){let m;const p=d.target;if(m=Ym(p)?{documents:eC(l,p)}:{query:tC(l,p).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=S1(l,d.resumeToken);const y=Zm(l,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(De.min())>0){m.readTime=Ph(l,d.snapshotVersion.toTimestamp());const y=Zm(l,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const a=rC(this.serializer,e);a&&(t.labels=a),this.q_(t)}Z_(e){const t={};t.database=eg(this.serializer),t.removeTarget=e,this.q_(t)}}class FC extends L1{constructor(e,t,a,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,o,d),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=JR(e.writeResults,e.commitTime),a=Qr(e.commitTime);return this.listener.na(a,t)}ra(){const e={};e.database=eg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((a=>WR(this.serializer,a)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{}class $C extends KC{constructor(e,t,a,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Go(e,Wm(t,a),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(re.UNKNOWN,l.toString())}))}Ho(e,t,a,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,Wm(t,a),o,d,m,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ge(re.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class YC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ds(t),this.aa=!1):xe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="RemoteStore";class QC{constructor(e,t,a,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((d=>{a.enqueueAndForget((async()=>{_i(this)&&(xe(gi,"Restarting streams for network reachability change."),await(async function(p){const y=Oe(p);y.Ea.add(4),await Dc(y),y.Ra.set("Unknown"),y.Ea.delete(4),await id(y)})(this))}))})),this.Ra=new YC(a,o)}}async function id(s){if(_i(s))for(const e of s.da)await e(!0)}async function Dc(s){for(const e of s.da)await e(!1)}function z1(s,e){const t=Oe(s);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kg(t)?Fg(t):Go(t).O_()&&Gg(t,e))}function Hg(s,e){const t=Oe(s),a=Go(t);t.Ia.delete(e),a.O_()&&U1(t,e),t.Ia.size===0&&(a.O_()?a.L_():_i(t)&&t.Ra.set("Unknown"))}function Gg(s,e){if(s.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Go(s).Y_(e)}function U1(s,e){s.Va.Ue(e),Go(s).Z_(e)}function Fg(s){s.Va=new GR({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),At:e=>s.Ia.get(e)||null,ht:()=>s.datastore.serializer.databaseId}),Go(s).start(),s.Ra.ua()}function Kg(s){return _i(s)&&!Go(s).x_()&&s.Ia.size>0}function _i(s){return Oe(s).Ea.size===0}function B1(s){s.Va=void 0}async function XC(s){s.Ra.set("Online")}async function ZC(s){s.Ia.forEach(((e,t)=>{Gg(s,e)}))}async function WC(s,e){B1(s),Kg(s)?(s.Ra.ha(e),Fg(s)):s.Ra.set("Unknown")}async function JC(s,e,t){if(s.Ra.set("Online"),e instanceof w1&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(s,e)}catch(a){xe(gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await zh(s,a)}else if(e instanceof Eh?s.Va.Ze(e):e instanceof E1?s.Va.st(e):s.Va.tt(e),!t.isEqual(De.min()))try{const a=await V1(s.localStore);t.compareTo(a)>=0&&await(function(l,d){const m=l.Va.Tt(d);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const x=l.Ia.get(y);x&&l.Ia.set(y,x.withResumeToken(p.resumeToken,d))}})),m.targetMismatches.forEach(((p,y)=>{const x=l.Ia.get(p);if(!x)return;l.Ia.set(p,x.withResumeToken(En.EMPTY_BYTE_STRING,x.snapshotVersion)),U1(l,p);const T=new ga(x.target,p,y,x.sequenceNumber);Gg(l,T)})),l.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(a){xe(gi,"Failed to raise snapshot:",a),await zh(s,a)}}async function zh(s,e,t){if(!qo(e))throw e;s.Ea.add(1),await Dc(s),s.Ra.set("Offline"),t||(t=()=>V1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{xe(gi,"Retrying IndexedDB access"),await t(),s.Ea.delete(1),await id(s)}))}function q1(s,e){return e().catch((t=>zh(s,t,e)))}async function od(s){const e=Oe(s),t=Sa(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Rg;for(;eI(e);)try{const o=await OC(e.localStore,a);if(o===null){e.Ta.length===0&&t.L_();break}a=o.batchId,tI(e,o)}catch(o){await zh(e,o)}H1(e)&&G1(e)}function eI(s){return _i(s)&&s.Ta.length<10}function tI(s,e){s.Ta.push(e);const t=Sa(s);t.O_()&&t.X_&&t.ea(e.mutations)}function H1(s){return _i(s)&&!Sa(s).x_()&&s.Ta.length>0}function G1(s){Sa(s).start()}async function nI(s){Sa(s).ra()}async function rI(s){const e=Sa(s);for(const t of s.Ta)e.ea(t.mutations)}async function sI(s,e,t){const a=s.Ta.shift(),o=Vg.from(a,e,t);await q1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await od(s)}async function aI(s,e){e&&Sa(s).X_&&await(async function(a,o){if((function(d){return BR(d)&&d!==re.ABORTED})(o.code)){const l=a.Ta.shift();Sa(a).B_(),await q1(a,(()=>a.remoteSyncer.rejectFailedWrite(l.batchId,o))),await od(a)}})(s,e),H1(s)&&G1(s)}async function n_(s,e){const t=Oe(s);t.asyncQueue.verifyOperationInProgress(),xe(gi,"RemoteStore received new credentials");const a=_i(t);t.Ea.add(3),await Dc(t),a&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await id(t)}async function iI(s,e){const t=Oe(s);e?(t.Ea.delete(2),await id(t)):e||(t.Ea.add(2),await Dc(t),t.Ra.set("Unknown"))}function Go(s){return s.ma||(s.ma=(function(t,a,o){const l=Oe(t);return l.sa(),new GC(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(s.datastore,s.asyncQueue,{Xo:XC.bind(null,s),t_:ZC.bind(null,s),r_:WC.bind(null,s),H_:JC.bind(null,s)}),s.da.push((async e=>{e?(s.ma.B_(),Kg(s)?Fg(s):s.Ra.set("Unknown")):(await s.ma.stop(),B1(s))}))),s.ma}function Sa(s){return s.fa||(s.fa=(function(t,a,o){const l=Oe(t);return l.sa(),new FC(a,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:nI.bind(null,s),r_:aI.bind(null,s),ta:rI.bind(null,s),na:sI.bind(null,s)}),s.da.push((async e=>{e?(s.fa.B_(),await od(s)):(await s.fa.stop(),s.Ta.length>0&&(xe(gi,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t,a,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=o,this.removalCallback=l,this.deferred=new Ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,a,o,l){const d=Date.now()+a,m=new $g(e,t,d,o,l);return m.start(a),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yg(s,e){if(Ds("AsyncQueue",`${e}: ${s}`),qo(s))return new ge(re.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{static emptySet(e){return new wo(e.comparator)}constructor(e){this.comparator=e?(t,a)=>e(t,a)||ke.comparator(t.key,a.key):(t,a)=>ke.comparator(t.key,a.key),this.keyedMap=Wl(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,a)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof wo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=a.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const a=new wo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(){this.ga=new Lt(ke.comparator)}track(e){const t=e.doc.key,a=this.ga.get(t);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(t,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(t,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(t):e.type===1&&a.type===2?this.ga=this.ga.insert(t,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,a)=>{e.push(a)})),e}}class Io{constructor(e,t,a,o,l,d,m,p,y){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,a,o,l){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Io(e,t,wo.emptySet(t),d,a,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==a[o].type||!t[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class lI{constructor(){this.queries=s_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,a){const o=Oe(t),l=o.queries;o.queries=s_(),l.forEach(((d,m)=>{for(const p of m.Sa)p.onError(a)}))})(this,new ge(re.ABORTED,"Firestore shutting down"))}}function s_(){return new vi((s=>c1(s)),ed)}async function F1(s,e){const t=Oe(s);let a=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(a=2):(l=new oI,a=e.Da()?0:1);try{switch(a){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Yg(d,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Qg(t)}async function K1(s,e){const t=Oe(s),a=e.query;let o=3;const l=t.queries.get(a);if(l){const d=l.Sa.indexOf(e);d>=0&&(l.Sa.splice(d,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(a),t.onUnlisten(a,!0);case 1:return t.queries.delete(a),t.onUnlisten(a,!1);case 2:return t.onLastRemoteStoreUnlisten(a);default:return}}function cI(s,e){const t=Oe(s);let a=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const m of d.Sa)m.Fa(o)&&(a=!0);d.wa=o}}a&&Qg(t)}function uI(s,e,t){const a=Oe(s),o=a.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);a.queries.delete(e)}function Qg(s){s.Ca.forEach((e=>{e.next()}))}var rg,a_;(a_=rg||(rg={})).Ma="default",a_.Cache="cache";class $1{constructor(e,t,a){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Io(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const a=t!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e){this.key=e}}class Q1{constructor(e){this.key=e}}class hI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=u1(e),this.tu=new wo(this.eu)}get nu(){return this.Ya}ru(e,t){const a=t?t.iu:new r_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((x,T)=>{const A=o.get(x),M=td(this.query,T)?T:null,B=!!A&&this.mutatedKeys.has(A.key),L=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let j=!1;A&&M?A.data.isEqual(M.data)?B!==L&&(a.track({type:3,doc:M}),j=!0):this.su(A,M)||(a.track({type:2,doc:M}),j=!0,(p&&this.eu(M,p)>0||y&&this.eu(M,y)<0)&&(m=!0)):!A&&M?(a.track({type:0,doc:M}),j=!0):A&&!M&&(a.track({type:1,doc:A}),j=!0,(p||y)&&(m=!0)),j&&(M?(d=d.add(M),l=L?l.add(x):l.delete(x)):(d=d.delete(x),l=l.delete(x)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const x=this.query.limitType==="F"?d.last():d.first();d=d.delete(x.key),l=l.delete(x.key),a.track({type:1,doc:x})}return{tu:d,iu:a,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((x,T)=>(function(M,B){const L=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:j})}};return L(M)-L(B)})(x.type,T.type)||this.eu(x.doc,T.doc))),this.ou(a),o=o??!1;const m=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,d.length!==0||y?{snapshot:new Io(this.query,e.tu,l,d,e.mutatedKeys,p===0,y,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Xe(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const t=[];return e.forEach((a=>{this.Xa.has(a)||t.push(new Q1(a))})),this.Xa.forEach((a=>{e.has(a)||t.push(new Y1(a))})),t}cu(e){this.Ya=e.Qs,this.Xa=Xe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Io.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xg="SyncEngine";class dI{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class fI{constructor(e){this.key=e,this.hu=!1}}class mI{constructor(e,t,a,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new vi((m=>c1(m)),ed),this.Iu=new Map,this.Eu=new Set,this.du=new Lt(ke.comparator),this.Au=new Map,this.Ru=new zg,this.Vu={},this.mu=new Map,this.fu=Co.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gI(s,e,t=!0){const a=tT(s);let o;const l=a.Tu.get(e);return l?(a.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await X1(a,e,t,!0),o}async function pI(s,e){const t=tT(s);await X1(t,e,!0,!1)}async function X1(s,e,t,a){const o=await VC(s.localStore,$r(e)),l=o.targetId,d=s.sharedClientState.addLocalQueryTarget(l,t);let m;return a&&(m=await yI(s,e,l,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&z1(s.remoteStore,o),m}async function yI(s,e,t,a,o){s.pu=(T,A,M)=>(async function(L,j,X,W){let he=j.view.ru(X);he.Cs&&(he=await Zx(L.localStore,j.query,!1).then((({documents:V})=>j.view.ru(V,he))));const ue=W&&W.targetChanges.get(j.targetId),le=W&&W.targetMismatches.get(j.targetId)!=null,de=j.view.applyChanges(he,L.isPrimaryClient,ue,le);return o_(L,j.targetId,de.au),de.snapshot})(s,T,A,M);const l=await Zx(s.localStore,e,!0),d=new hI(e,l.Qs),m=d.ru(l.documents),p=jc.createSynthesizedTargetChangeForCurrentChange(t,a&&s.onlineState!=="Offline",o),y=d.applyChanges(m,s.isPrimaryClient,p);o_(s,t,y.au);const x=new dI(e,t,d);return s.Tu.set(e,x),s.Iu.has(t)?s.Iu.get(t).push(e):s.Iu.set(t,[e]),y.snapshot}async function vI(s,e,t){const a=Oe(s),o=a.Tu.get(e),l=a.Iu.get(o.targetId);if(l.length>1)return a.Iu.set(o.targetId,l.filter((d=>!ed(d,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await tg(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),t&&Hg(a.remoteStore,o.targetId),sg(a,o.targetId)})).catch(Bo)):(sg(a,o.targetId),await tg(a.localStore,o.targetId,!0))}async function xI(s,e){const t=Oe(s),a=t.Tu.get(e),o=t.Iu.get(a.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(a.targetId),Hg(t.remoteStore,a.targetId))}async function _I(s,e,t){const a=AI(s);try{const o=await(function(d,m){const p=Oe(d),y=wt.now(),x=m.reduce(((M,B)=>M.add(B.key)),Xe());let T,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let B=Ms(),L=Xe();return p.Ns.getEntries(M,x).next((j=>{B=j,B.forEach(((X,W)=>{W.isValidDocument()||(L=L.add(X))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,B))).next((j=>{T=j;const X=[];for(const W of m){const he=VR(W,T.get(W.key).overlayedDocument);he!=null&&X.push(new xi(W.key,he,t1(he.value.mapValue),Yr.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,X,m)})).next((j=>{A=j;const X=j.applyToLocalDocumentSet(T,L);return p.documentOverlayCache.saveOverlays(M,j.batchId,X)}))})).then((()=>({batchId:A.batchId,changes:d1(T)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(d,m,p){let y=d.Vu[d.currentUser.toKey()];y||(y=new Lt(Qe)),y=y.insert(m,p),d.Vu[d.currentUser.toKey()]=y})(a,o.batchId,t),await Mc(a,o.changes),await od(a.remoteStore)}catch(o){const l=Yg(o,"Failed to persist write");t.reject(l)}}async function Z1(s,e){const t=Oe(s);try{const a=await DC(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Au.get(l);d&&(ut(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?ut(d.hu,14607):o.removedDocuments.size>0&&(ut(d.hu,42227),d.hu=!1))})),await Mc(t,a,e)}catch(a){await Bo(a)}}function i_(s,e,t){const a=Oe(s);if(a.isPrimaryClient&&t===0||!a.isPrimaryClient&&t===1){const o=[];a.Tu.forEach(((l,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const p=Oe(d);p.onlineState=m;let y=!1;p.queries.forEach(((x,T)=>{for(const A of T.Sa)A.va(m)&&(y=!0)})),y&&Qg(p)})(a.eventManager,e),o.length&&a.Pu.H_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function bI(s,e,t){const a=Oe(s);a.sharedClientState.updateQueryState(e,"rejected",t);const o=a.Au.get(e),l=o&&o.key;if(l){let d=new Lt(ke.comparator);d=d.insert(l,Rn.newNoDocument(l,De.min()));const m=Xe().add(l),p=new sd(De.min(),new Map,new Lt(Qe),d,m);await Z1(a,p),a.du=a.du.remove(l),a.Au.delete(e),Zg(a)}else await tg(a.localStore,e,!1).then((()=>sg(a,e,t))).catch(Bo)}async function TI(s,e){const t=Oe(s),a=e.batch.batchId;try{const o=await jC(t.localStore,e);J1(t,a,null),W1(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),await Mc(t,o)}catch(o){await Bo(o)}}async function EI(s,e,t){const a=Oe(s);try{const o=await(function(d,m){const p=Oe(d);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let x;return p.mutationQueue.lookupMutationBatch(y,m).next((T=>(ut(T!==null,37113),x=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,x,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,x))).next((()=>p.localDocuments.getDocuments(y,x)))}))})(a.localStore,e);J1(a,e,t),W1(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),await Mc(a,o)}catch(o){await Bo(o)}}function W1(s,e){(s.mu.get(e)||[]).forEach((t=>{t.resolve()})),s.mu.delete(e)}function J1(s,e,t){const a=Oe(s);let o=a.Vu[a.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),a.Vu[a.currentUser.toKey()]=o}}function sg(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const a of s.Iu.get(e))s.Tu.delete(a),t&&s.Pu.yu(a,t);s.Iu.delete(e),s.isPrimaryClient&&s.Ru.jr(e).forEach((a=>{s.Ru.containsKey(a)||eT(s,a)}))}function eT(s,e){s.Eu.delete(e.path.canonicalString());const t=s.du.get(e);t!==null&&(Hg(s.remoteStore,t),s.du=s.du.remove(e),s.Au.delete(t),Zg(s))}function o_(s,e,t){for(const a of t)a instanceof Y1?(s.Ru.addReference(a.key,e),wI(s,a)):a instanceof Q1?(xe(Xg,"Document no longer in limbo: "+a.key),s.Ru.removeReference(a.key,e),s.Ru.containsKey(a.key)||eT(s,a.key)):Ce(19791,{wu:a})}function wI(s,e){const t=e.key,a=t.path.canonicalString();s.du.get(t)||s.Eu.has(a)||(xe(Xg,"New document in limbo: "+t),s.Eu.add(a),Zg(s))}function Zg(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const e=s.Eu.values().next().value;s.Eu.delete(e);const t=new ke(Nt.fromString(e)),a=s.fu.next();s.Au.set(a,new fI(t)),s.du=s.du.insert(t,a),z1(s.remoteStore,new ga($r(Mg(t.path)),a,"TargetPurposeLimboResolution",Zh.ce))}}async function Mc(s,e,t){const a=Oe(s),o=[],l=[],d=[];a.Tu.isEmpty()||(a.Tu.forEach(((m,p)=>{d.push(a.pu(p,e,t).then((y=>{if((y||t)&&a.isPrimaryClient){const x=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;a.sharedClientState.updateQueryState(p.targetId,x?"current":"not-current")}if(y){o.push(y);const x=Bg.As(p.targetId,y);l.push(x)}})))})),await Promise.all(d),a.Pu.H_(o),await(async function(p,y){const x=Oe(p);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(y,(A=>oe.forEach(A.Es,(M=>x.persistence.referenceDelegate.addReference(T,A.targetId,M))).next((()=>oe.forEach(A.ds,(M=>x.persistence.referenceDelegate.removeReference(T,A.targetId,M)))))))))}catch(T){if(!qo(T))throw T;xe(qg,"Failed to update sequence numbers: "+T)}for(const T of y){const A=T.targetId;if(!T.fromCache){const M=x.Ms.get(A),B=M.snapshotVersion,L=M.withLastLimboFreeSnapshotVersion(B);x.Ms=x.Ms.insert(A,L)}}})(a.localStore,l))}async function SI(s,e){const t=Oe(s);if(!t.currentUser.isEqual(e)){xe(Xg,"User change. New user:",e.toKey());const a=await O1(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((m=>{m.forEach((p=>{p.reject(new ge(re.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Mc(t,a.Ls)}}function kI(s,e){const t=Oe(s),a=t.Au.get(e);if(a&&a.hu)return Xe().add(a.key);{let o=Xe();const l=t.Iu.get(e);if(!l)return o;for(const d of l){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function tT(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Z1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bI.bind(null,e),e.Pu.H_=cI.bind(null,e.eventManager),e.Pu.yu=uI.bind(null,e.eventManager),e}function AI(s){const e=Oe(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=EI.bind(null,e),e}class Uh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ad(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return IC(this.persistence,new NC,e.initialUser,this.serializer)}Cu(e){return new M1(Ug.mi,this.serializer)}Du(e){return new LC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uh.provider={build:()=>new Uh};class NI extends Uh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ut(this.persistence.referenceDelegate instanceof Lh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new fC(a,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new M1((a=>Lh.mi(a,t)),this.serializer)}}class ag{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>i_(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=SI.bind(null,this.syncEngine),await iI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new lI})()}createDatastore(e){const t=ad(e.databaseInfo.databaseId),a=(function(l){return new HC(l)})(e.databaseInfo);return(function(l,d,m,p){return new $C(l,d,m,p)})(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return(function(a,o,l,d,m){return new QC(a,o,l,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>i_(this.syncEngine,t,0)),(function(){return e_.v()?new e_:new zC})())}createSyncEngine(e,t){return(function(o,l,d,m,p,y,x){const T=new mI(o,l,d,m,p,y);return x&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const a=Oe(t);xe(gi,"RemoteStore shutting down."),a.Ea.add(5),await Dc(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ag.provider={build:()=>new ag};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="FirestoreClient";class RI{constructor(e,t,a,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=o,this.user=Bn.UNAUTHENTICATED,this.clientId=Ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(a,(async d=>{xe(ka,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(a,(d=>(xe(ka,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const a=Yg(t,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function Cm(s,e){s.asyncQueue.verifyOperationInProgress(),xe(ka,"Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let a=t.initialUser;s.setCredentialChangeListener((async o=>{a.isEqual(o)||(await O1(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function l_(s,e){s.asyncQueue.verifyOperationInProgress();const t=await CI(s);xe(ka,"Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((a=>n_(e.remoteStore,a))),s.setAppCheckTokenChangeListener(((a,o)=>n_(e.remoteStore,o))),s._onlineComponents=e}async function CI(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){xe(ka,"Using user provided OfflineComponentProvider");try{await Cm(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;fc("Error using user provided cache. Falling back to memory cache: "+t),await Cm(s,new Uh)}}else xe(ka,"Using default OfflineComponentProvider"),await Cm(s,new NI(void 0));return s._offlineComponents}async function rT(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(xe(ka,"Using user provided OnlineComponentProvider"),await l_(s,s._uninitializedComponentsProvider._online)):(xe(ka,"Using default OnlineComponentProvider"),await l_(s,new ag))),s._onlineComponents}function II(s){return rT(s).then((e=>e.syncEngine))}async function sT(s){const e=await rT(s),t=e.eventManager;return t.onListen=gI.bind(null,e.syncEngine),t.onUnlisten=vI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=xI.bind(null,e.syncEngine),t}function jI(s,e,t={}){const a=new Ns;return s.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,p,y){const x=new nT({next:A=>{x.Nu(),d.enqueueAndForget((()=>K1(l,T)));const M=A.docs.has(m);!M&&A.fromCache?y.reject(new ge(re.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&A.fromCache&&p&&p.source==="server"?y.reject(new ge(re.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),T=new $1(Mg(m.path),x,{includeMetadataChanges:!0,qa:!0});return F1(l,T)})(await sT(s),s.asyncQueue,e,t,a))),a.promise}function DI(s,e,t={}){const a=new Ns;return s.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,p,y){const x=new nT({next:A=>{x.Nu(),d.enqueueAndForget((()=>K1(l,T))),A.fromCache&&p.source==="server"?y.reject(new ge(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),T=new $1(m,x,{includeMetadataChanges:!0,qa:!0});return F1(l,T)})(await sT(s),s.asyncQueue,e,t,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="firestore.googleapis.com",u_=!0;class h_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MI,this.ssl=u_}else this.host=e.host,this.ssl=e.ssl??u_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=j1;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D1)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aT(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ge(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wg{constructor(e,t,a,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new h_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new h_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new U2;switch(a.type){case"firstParty":return new H2(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new ge(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const a=c_.get(t);a&&(xe("ComponentProvider","Removing Datastore"),c_.delete(t),a.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new bi(this.firestore,e,this._query)}}class Jt{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}toJSON(){return{type:Jt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,a){if(Cc(t,Jt._jsonSchema))return new Jt(e,a||null,new ke(Nt.fromString(t.referencePath)))}}Jt._jsonSchemaVersion="firestore/documentReference/1.0",Jt._jsonSchema={type:Wt("string",Jt._jsonSchemaVersion),referencePath:Wt("string")};class _a extends bi{constructor(e,t,a){super(e,t,Mg(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new ke(e))}withConverter(e){return new _a(this.firestore,e,this._path)}}function Oc(s,e,...t){if(s=Pn(s),Gb("collection","path",e),s instanceof Wg){const a=Nt.fromString(e,...t);return wx(a),new _a(s,null,a)}{if(!(s instanceof Jt||s instanceof _a))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Nt.fromString(e,...t));return wx(a),new _a(s.firestore,null,a)}}function Jg(s,e,...t){if(s=Pn(s),arguments.length===1&&(e=Ng.newId()),Gb("doc","path",e),s instanceof Wg){const a=Nt.fromString(e,...t);return Ex(a),new Jt(s,null,new ke(a))}{if(!(s instanceof Jt||s instanceof _a))throw new ge(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=s._path.child(Nt.fromString(e,...t));return Ex(a),new Jt(s.firestore,s instanceof _a?s.converter:null,new ke(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="AsyncQueue";class f_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new P1(this,"async_queue_retry"),this._c=()=>{const a=Rm();a&&xe(d_,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const t=Rm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ns;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!qo(e))throw e;xe(d_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,Ds("INTERNAL UNHANDLED ERROR: ",m_(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=t,t}enqueueAfterDelay(e,t,a){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=$g.createAndSchedule(this,e,t,a,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:m_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,a)=>t.targetTimeMs-a.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function m_(s){let e=s.message||"";return s.stack&&(e=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),e}class Vc extends Wg{constructor(e,t,a,o){super(e,t,a,o),this.type="firestore",this._queue=new f_,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new f_(e),this._firestoreClient=void 0,await e}}}function OI(s,e,t){t||(t=Dh);const a=vg(s,"firestore");if(a.isInitialized(t)){const o=a.getImmediate({identifier:t}),l=a.getOptions(t);if(ci(l,e))return o;throw new ge(re.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ge(re.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<D1)throw new ge(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Po(e.host)&&X_(e.host),a.initialize({options:e,instanceIdentifier:t})}function ep(s){if(s._terminated)throw new ge(re.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||VI(s),s._firestoreClient}function VI(s){const e=s._freezeSettings(),t=(function(o,l,d,m){return new iR(o,l,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,aT(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,e);s._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),s._firestoreClient=new RI(s._authCredentials,s._appCheckCredentials,s._queue,t,s._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mr(En.fromBase64String(e))}catch(t){throw new ge(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new mr(En.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cc(e,mr._jsonSchema))return mr.fromBase64String(e.bytes)}}mr._jsonSchemaVersion="firestore/bytes/1.0",mr._jsonSchema={type:Wt("string",mr._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Xr._jsonSchemaVersion}}static fromJSON(e){if(Cc(e,Xr._jsonSchema))return new Xr(e.latitude,e.longitude)}}Xr._jsonSchemaVersion="firestore/geoPoint/1.0",Xr._jsonSchema={type:Wt("string",Xr._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let l=0;l<a.length;++l)if(a[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cc(e,Zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Zr(e.vectorValues);throw new ge(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Zr._jsonSchemaVersion="firestore/vectorValue/1.0",Zr._jsonSchema={type:Wt("string",Zr._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=/^__.*__$/;class LI{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ic(e,this.data,t,this.fieldTransforms)}}function iT(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:s})}}class rp{constructor(e,t,a,o,l,d){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new rp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.gc(e),a}yc(e){const t=this.path?.child(e),a=this.Vc({path:t,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iT(this.Ac)&&PI.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class zI{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||ad(e)}Cc(e,t,a,o=!1){return new rp({Ac:e,methodName:t,Dc:a,path:Tn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sp(s){const e=s._freezeSettings(),t=ad(s._databaseId);return new zI(s._databaseId,!!e.ignoreUndefinedProperties,t)}function oT(s,e,t,a,o,l={}){const d=s.Cc(l.merge||l.mergeFields?2:0,e,t,o);uT("Data must be an object, but it was:",d,a);const m=lT(a,d);let p,y;if(l.merge)p=new Er(d.fieldMask),y=d.fieldTransforms;else if(l.mergeFields){const x=[];for(const T of l.mergeFields){const A=BI(e,T,t);if(!d.contains(A))throw new ge(re.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);HI(x,A)||x.push(A)}p=new Er(x),y=d.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=d.fieldTransforms;return new LI(new fr(m),p,y)}class ap extends np{_toFieldTransform(e){return new jR(e.path,new xc)}isEqual(e){return e instanceof ap}}function UI(s,e,t,a=!1){return ip(t,s.Cc(a?4:3,e))}function ip(s,e){if(cT(s=Pn(s)))return uT("Unsupported field value:",e,s),lT(s,e);if(s instanceof np)return(function(a,o){if(!iT(o.Ac))throw o.Sc(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${a._methodName}() is not currently supported inside arrays`);const l=a._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,o){const l=[];let d=0;for(const m of a){let p=ip(m,o.wc(d));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),d++}return{arrayValue:{values:l}}})(s,e)}return(function(a,o){if((a=Pn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return RR(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const l=wt.fromDate(a);return{timestampValue:Ph(o.serializer,l)}}if(a instanceof wt){const l=new wt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Ph(o.serializer,l)}}if(a instanceof Xr)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof mr)return{bytesValue:S1(o.serializer,a._byteString)};if(a instanceof Jt){const l=o.databaseId,d=a.firestore._databaseId;if(!d.isEqual(l))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Lg(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof Zr)return(function(d,m){return{mapValue:{fields:{[Jb]:{stringValue:e1},[Mh]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Og(m.serializer,y)}))}}}}}})(a,o);throw o.Sc(`Unsupported field value: ${Xh(a)}`)})(s,e)}function lT(s,e){const t={};return $b(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yi(s,((a,o)=>{const l=ip(o,e.mc(a));l!=null&&(t[a]=l)})),{mapValue:{fields:t}}}function cT(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof wt||s instanceof Xr||s instanceof mr||s instanceof Jt||s instanceof np||s instanceof Zr)}function uT(s,e,t){if(!cT(t)||!Fb(t)){const a=Xh(t);throw a==="an object"?e.Sc(s+" a custom object"):e.Sc(s+" "+a)}}function BI(s,e,t){if((e=Pn(e))instanceof tp)return e._internalPath;if(typeof e=="string")return hT(s,e);throw Bh("Field path arguments must be of type string or ",s,!1,void 0,t)}const qI=new RegExp("[~\\*/\\[\\]]");function hT(s,e,t){if(e.search(qI)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new tp(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Bh(s,e,t,a,o){const l=a&&!a.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(l||d)&&(p+=" (found",l&&(p+=` in field ${a}`),d&&(p+=` in document ${o}`),p+=")"),new ge(re.INVALID_ARGUMENT,m+s+p)}function HI(s,e){return s.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,t,a,o,l){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ld("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class GI extends dT{data(){return super.data()}}function ld(s,e){return typeof e=="string"?hT(s,e):e instanceof tp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new ge(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class fT extends op{}function lp(s,e,...t){let a=[];e instanceof op&&a.push(e),a=a.concat(t),(function(l){const d=l.filter((p=>p instanceof up)).length,m=l.filter((p=>p instanceof cd)).length;if(d>1||d>0&&m>0)throw new ge(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)s=o._apply(s);return s}class cd extends fT{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new cd(e,t,a)}_apply(e){const t=this._parse(e);return gT(e._query,t),new bi(e.firestore,e.converter,Qm(e._query,t))}_parse(e){const t=sp(e.firestore);return(function(l,d,m,p,y,x,T){let A;if(y.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new ge(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){p_(T,x);const B=[];for(const L of T)B.push(g_(p,l,L));A={arrayValue:{values:B}}}else A=g_(p,l,T)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||p_(T,x),A=UI(m,d,T,x==="in"||x==="not-in");return Zt.create(y,x,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cp(s,e,t){const a=e,o=ld("where",s);return cd._create(o,a,t)}class up extends op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new up(e,t)}_parse(e){const t=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return t.length===1?t[0]:Ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let d=o;const m=l.getFlattenedFilters();for(const p of m)gT(d,p),d=Qm(d,p)})(e._query,t),new bi(e.firestore,e.converter,Qm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hp extends fT{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hp(e,t)}_apply(e){const t=(function(o,l,d){if(o.startAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(l,d)})(e._query,this._field,this._direction);return new bi(e.firestore,e.converter,(function(o,l){const d=o.explicitOrderBy.concat([l]);return new Ho(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function mT(s,e="asc"){const t=e,a=ld("orderBy",s);return hp._create(a,t)}function g_(s,e,t){if(typeof(t=Pn(t))=="string"){if(t==="")throw new ge(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!l1(e)&&t.indexOf("/")!==-1)throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child(Nt.fromString(t));if(!ke.isDocumentKey(a))throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return jx(s,new ke(a))}if(t instanceof Jt)return jx(s,t._key);throw new ge(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(t)}.`)}function p_(s,e){if(!Array.isArray(s)||s.length===0)throw new ge(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gT(s,e){const t=(function(o,l){for(const d of o)for(const m of d.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KI{convertValue(e,t="none"){switch(wa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ea(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return yi(e,((o,l)=>{a[o]=this.convertValue(l,t)})),a}convertVectorValue(e){const t=e.fields?.[Mh].arrayValue?.values?.map((a=>Ft(a.doubleValue)));return new Zr(t)}convertGeoPoint(e){return new Xr(Ft(e.latitude),Ft(e.longitude))}convertArray(e,t){return(e.values||[]).map((a=>this.convertValue(a,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const a=Jh(e);return a==null?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){const t=Ta(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=Nt.fromString(e);ut(I1(a),9688,{name:e});const o=new pc(a.get(1),a.get(3)),l=new ke(a.popFirst(5));return o.isEqual(t)||Ds(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(s,e,t){let a;return a=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,a}class ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class li extends dT{constructor(e,t,a,o,l,d){super(e,t,a,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(ld("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=li._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}li._jsonSchemaVersion="firestore/documentSnapshot/1.0",li._jsonSchema={type:Wt("string",li._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class wh extends li{data(e={}){return super.data(e)}}class So{constructor(e,t,a,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ec(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((a=>{e.call(t,new wh(this._firestore,this._userDataWriter,a.key,a,new ec(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const p=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ec(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const p=new wh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ec(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,x=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),x=d.indexOf(m.doc.key)),{type:$I(m.type),doc:p,oldIndex:y,newIndex:x}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=So._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],a=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),a.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $I(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(s){s=mi(s,Jt);const e=mi(s.firestore,Vc);return jI(ep(e),s._key).then((t=>QI(e,s,t)))}So._jsonSchemaVersion="firestore/querySnapshot/1.0",So._jsonSchema={type:Wt("string",So._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class vT extends KI{constructor(e){super(),this.firestore=e}convertBytes(e){return new mr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,t)}}function dp(s){s=mi(s,bi);const e=mi(s.firestore,Vc),t=ep(e),a=new vT(e);return FI(s._query),DI(t,s._query).then((o=>new So(e,a,s,o)))}function YI(s,e,t){s=mi(s,Jt);const a=mi(s.firestore,Vc),o=pT(s.converter,e,t);return _T(a,[oT(sp(a),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,Yr.none())])}function xT(s,e){const t=mi(s.firestore,Vc),a=Jg(s),o=pT(s.converter,e);return _T(t,[oT(sp(s.firestore),"addDoc",a._key,o,s.converter!==null,{}).toMutation(a._key,Yr.exists(!1))]).then((()=>a))}function _T(s,e){return(function(a,o){const l=new Ns;return a.asyncQueue.enqueueAndForget((async()=>_I(await II(a),o,l))),l.promise})(ep(s),e)}function QI(s,e,t){const a=t.docs.get(e._key),o=new vT(s);return new li(s,o,e._key,a,new ec(t.hasPendingWrites,t.fromCache),e.converter)}function XI(){return new ap("serverTimestamp")}(function(e,t=!0){(function(o){Uo=o})(Lo),ko(new ui("firestore",((a,{instanceIdentifier:o,options:l})=>{const d=a.getProvider("app").getImmediate(),m=new Vc(new B2(a.getProvider("auth-internal")),new G2(d,a.getProvider("app-check-internal")),(function(y,x){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ge(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(y.options.projectId,x)})(d,o),d);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),va(xx,_x,e),va(xx,_x,"esm2020")})();const ZI={apiKey:"AIzaSyBj5D2l-lSzekgRUF6w164G5xawAbqKV58",authDomain:"neurolearn-c8df8.firebaseapp.com",projectId:"neurolearn-c8df8",storageBucket:"neurolearn-c8df8.firebasestorage.app",messagingSenderId:"1060414258301",appId:"1:1060414258301:web:86a11e8b84e7d05de10514",measurementId:"G-ZBX8RCHB1X"},bT=hA().length?eb():J_(ZI),dh=O2(bT),WI={experimentalForceLongPolling:!0,experimentalLongPollingOptions:{timeoutSeconds:10}},Ti=globalThis.__FIREBASE_DB__??(globalThis.__FIREBASE_DB__=OI(bT,WI)),JI=async(s,e)=>{if(!s)throw new Error("UID boş geldi");const t=Jg(Ti,"users",s);return await YI(t,{uid:s,...e,createdAt:XI()},{merge:!0}),(await yT(t)).data()},ej=async s=>{const e=Jg(Ti,"users",s),t=await yT(e);return t.exists()?{id:t.id,...t.data(),createdAt:t.data().createdAt.toDate()}:null},tj=async s=>{const e=lp(Oc(Ti,"students"),cp("teacherId","==",s),mT("createdAt","desc"));return(await dp(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt.toDate()}))},nj=async s=>(await xT(Oc(Ti,"activities"),{...s,createdAt:wt.now()})).id,rj=async s=>{const e=lp(Oc(Ti,"ai_insights"),cp("studentId","==",s),mT("createdAt","desc"));return(await dp(e)).docs.map(a=>({id:a.id,...a.data(),createdAt:a.data().createdAt.toDate()}))},sj=async s=>{try{const e=await xT(Oc(Ti,"story_attention_games"),{...s,createdAt:wt.now()});return await nj({studentId:s.studentId,type:"story-attention",score:s.score,duration:s.duration,metadata:{theme:s.storyTheme,attentionScores:{selective:s.attentionData.selectiveAttention,sustained:s.attentionData.sustainedAttention,divided:s.attentionData.dividedAttention,impulseControl:s.attentionData.impulseControl},performance:{accuracy:s.attentionData.accuracy,avgReactionTime:s.attentionData.avgReactionTime,distractorClicks:s.attentionData.distractorClicks}}}),console.log("Story attention game data saved successfully:",e.id),e.id}catch(e){throw console.error("Error saving story attention game data:",e),e}},TT=w.createContext(void 0),es=()=>{const s=w.useContext(TT);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},aj=({children:s})=>{const[e,t]=w.useState(null),[a,o]=w.useState(!0);w.useEffect(()=>EN(dh,async x=>{if(x){const T=await ej(x.uid);t(T||{id:x.uid,name:x.displayName||"",email:x.email||"",role:"teacher",createdAt:new Date})}else t(null);o(!1)}),[]);const p={currentUser:e,loading:a,login:async(y,x)=>{await _N(dh,y,x)},register:async(y,x,T,A="teacher",M,B)=>{const L=await xN(dh,y,x),j=L.user?.uid;if(!j)throw new Error("Kullanıcı UID alınamadı");const X={email:L.user.email??y,name:T,role:A,...M&&{age:M},...B&&{teacherId:B}};await JI(j,X),t({id:j,name:T,email:y,role:A,...M&&{age:M},...B&&{teacherId:B},createdAt:new Date})},logout:async()=>{await wN(dh),t(null)}};return u.jsx(TT.Provider,{value:p,children:s})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oj=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),y_=s=>{const e=oj(s);return e.charAt(0).toUpperCase()+e.slice(1)},ET=(...s)=>s.filter((e,t,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===t).join(" ").trim(),lj=s=>{for(const e in s)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=w.forwardRef(({color:s="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:d,...m},p)=>w.createElement("svg",{ref:p,...cj,width:e,height:e,stroke:s,strokeWidth:a?Number(t)*24/Number(e):t,className:ET("lucide",o),...!l&&!lj(m)&&{"aria-hidden":"true"},...m},[...d.map(([y,x])=>w.createElement(y,x)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=(s,e)=>{const t=w.forwardRef(({className:a,...o},l)=>w.createElement(uj,{ref:l,iconNode:e,className:ET(`lucide-${ij(y_(s))}`,`lucide-${s}`,a),...o}));return t.displayName=y_(s),t};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],dj=Pe("arrow-left",hj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],v_=Pe("award",fj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],wT=Pe("book-open",mj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],Rt=Pe("brain",gj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yj=Pe("calendar",pj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ud=Pe("circle-alert",vj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ST=Pe("circle-check-big",xj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],bj=Pe("circle-x",_j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],gr=Pe("clock",Tj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ig=Pe("eye",Ej);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],kT=Pe("hash",wj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],x_=Pe("info",Sj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],og=Pe("lightbulb",kj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jo=Pe("lock",Aj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],AT=Pe("log-in",Nj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],NT=Pe("log-out",Rj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],hd=Pe("mail",Cj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],jj=Pe("mic-off",Ij);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Mj=Pe("mic",Dj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oj=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],Vj=Pe("mouse-pointer",Oj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pj=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],fp=Pe("palette",Pj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],__=Pe("pause",Lj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],mp=Pe("play",zj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],b_=Pe("plus",Uj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ei=Pe("rotate-ccw",Bj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],RT=Pe("sparkles",qj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Gj=Pe("square-pen",Hj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Aa=Pe("star",Fj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Vn=Pe("target",Kj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $j=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Yj=Pe("trash-2",$j);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],CT=Pe("trending-up",Qj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],T_=Pe("triangle-alert",Xj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Im=Pe("trophy",Zj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],IT=Pe("user-plus",Wj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],dd=Pe("user",Jj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jT=Pe("users",eD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],nD=Pe("volume-2",tD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],sD=Pe("wifi-off",rD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],E_=Pe("wifi",aD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Do=Pe("zap",iD),oD=({onToggleMode:s})=>{const[e,t]=w.useState(""),[a,o]=w.useState(""),[l,d]=w.useState(""),[m,p]=w.useState(!1),{login:y}=es(),x=async T=>{T.preventDefault(),d(""),p(!0);try{await y(e,a)}catch(A){d(A.message||"Giriş yaparken bir hata oluştu")}p(!1)};return u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:u.jsx(AT,{className:"h-8 w-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Öğretmen Girişi"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"NeuroLearn AI Platformuna hoş geldiniz"})]}),l&&u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[u.jsx(ud,{className:"h-5 w-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700 text-sm",children:l})]}),u.jsxs("form",{onSubmit:x,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"email",value:e,onChange:T=>t(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ogretmen@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:a,onChange:T=>o(T.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:m,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Giriş yapılıyor...":"Giriş Yap"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600",children:["Hesabınız yok mu?"," ",u.jsx("button",{onClick:s,className:"text-primary font-medium hover:text-blue-700",children:"Kayıt olun"})]})})]})},lD=({onToggleMode:s})=>{const[e,t]=w.useState(""),[a,o]=w.useState(""),[l,d]=w.useState(""),[m,p]=w.useState(""),[y,x]=w.useState(""),[T,A]=w.useState(!1),{register:M}=es(),B=async L=>{if(L.preventDefault(),x(""),l!==m){x("Şifreler eşleşmiyor");return}if(l.length<6){x("Şifre en az 6 karakter olmalıdır");return}A(!0);try{await M(a,l,e)}catch(j){x(j.message||"Kayıt olurken bir hata oluştu")}A(!1)};return u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-secondary rounded-full flex items-center justify-center mb-4",children:u.jsx(IT,{className:"h-8 w-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Öğretmen Kaydı"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"Yeni hesap oluşturun"})]}),y&&u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[u.jsx(ud,{className:"h-5 w-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700 text-sm",children:y})]}),u.jsxs("form",{onSubmit:B,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),u.jsxs("div",{className:"relative",children:[u.jsx(dd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"text",value:e,onChange:L=>t(L.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"Ahmet Yılmaz",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"email",value:a,onChange:L=>o(L.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"ogretmen@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:l,onChange:L=>d(L.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre Tekrar"}),u.jsxs("div",{className:"relative",children:[u.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:m,onChange:L=>p(L.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-secondary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:T,className:"w-full bg-secondary text-white py-3 rounded-lg font-medium hover:bg-purple-700 focus:ring-2 focus:ring-secondary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:T?"Kayıt oluşturuluyor...":"Kayıt Ol"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600",children:["Zaten hesabınız var mı?"," ",u.jsx("button",{onClick:s,className:"text-secondary font-medium hover:text-purple-700",children:"Giriş yapın"})]})})]})},cD=({onToggleMode:s,onToggleRole:e})=>{const[t,a]=w.useState(""),[o,l]=w.useState(""),[d,m]=w.useState(""),[p,y]=w.useState(!1),{login:x}=es(),T=async A=>{A.preventDefault(),m(""),y(!0);try{await x(t,o)}catch(M){m(M.message||"Giriş yapılırken bir hata oluştu")}y(!1)};return u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:u.jsx(AT,{className:"h-8 w-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Öğrenci Girişi"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"Hesabınıza giriş yapın"})]}),d&&u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[u.jsx(ud,{className:"h-5 w-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700 text-sm",children:d})]}),u.jsxs("form",{onSubmit:T,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"email",value:t,onChange:A=>a(A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ogrenci@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:o,onChange:A=>l(A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:p,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Giriş yapılıyor...":"Giriş Yap"})]}),u.jsxs("div",{className:"mt-6 text-center space-y-2",children:[u.jsxs("p",{className:"text-gray-600",children:["Henüz hesabınız yok mu?"," ",u.jsx("button",{onClick:s,className:"text-primary font-medium hover:text-blue-700",children:"Kayıt olun"})]}),u.jsxs("p",{className:"text-gray-600",children:["Öğretmen misiniz?"," ",u.jsx("button",{onClick:e,className:"text-secondary font-medium hover:text-purple-700",children:"Öğretmen girişi"})]})]})]})},uD=({onToggleMode:s,onToggleRole:e})=>{const[t,a]=w.useState(""),[o,l]=w.useState(""),[d,m]=w.useState(""),[p,y]=w.useState(""),[x,T]=w.useState(""),[A,M]=w.useState(""),[B,L]=w.useState([]),[j,X]=w.useState(""),[W,he]=w.useState(!1),{register:ue}=es();w.useEffect(()=>{(async()=>{try{const V=lp(Oc(Ti,"users"),cp("role","==","teacher")),C=await dp(V),R=[];C.forEach(O=>{const P=O.data();R.push({id:O.id,name:P.name,email:P.email})}),L(R)}catch(V){console.error("Öğretmenler yüklenirken hata:",V)}})()},[]);const le=async de=>{if(de.preventDefault(),X(""),d!==p){X("Şifreler eşleşmiyor");return}if(d.length<6){X("Şifre en az 6 karakter olmalıdır");return}if(!A){X("Lütfen bir öğretmen seçin");return}const V=parseInt(x);if(isNaN(V)||V<3||V>18){X("Yaş 3-18 arasında olmalıdır");return}he(!0);try{await ue(o,d,t,"student",V,A)}catch(C){X(C.message||"Kayıt olurken bir hata oluştu")}he(!1)};return u.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"mx-auto w-16 h-16 bg-primary rounded-full flex items-center justify-center mb-4",children:u.jsx(IT,{className:"h-8 w-8 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Öğrenci Kaydı"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"Yeni öğrenci hesabı oluşturun"})]}),j&&u.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-center",children:[u.jsx(ud,{className:"h-5 w-5 text-red-500 mr-2"}),u.jsx("span",{className:"text-red-700 text-sm",children:j})]}),u.jsxs("form",{onSubmit:le,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ad Soyad"}),u.jsxs("div",{className:"relative",children:[u.jsx(dd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"text",value:t,onChange:de=>a(de.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Öğrenci Adı",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Yaş"}),u.jsxs("div",{className:"relative",children:[u.jsx(yj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"number",min:"3",max:"18",value:x,onChange:de=>T(de.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Yaş",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Öğretmen Seçin"}),u.jsxs("div",{className:"relative",children:[u.jsx(jT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsxs("select",{value:A,onChange:de=>M(de.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent appearance-none bg-white",required:!0,children:[u.jsx("option",{value:"",children:"Öğretmen seçin..."}),B.map(de=>u.jsxs("option",{value:de.id,children:[de.name," (",de.email,")"]},de.id))]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx(hd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"email",value:o,onChange:de=>l(de.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"ogrenci@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:d,onChange:de=>m(de.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Şifre Tekrar"}),u.jsxs("div",{className:"relative",children:[u.jsx(jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),u.jsx("input",{type:"password",value:p,onChange:de=>y(de.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"••••••••",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:W,className:"w-full bg-primary text-white py-3 rounded-lg font-medium hover:bg-blue-700 focus:ring-2 focus:ring-primary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:W?"Kayıt oluşturuluyor...":"Öğrenci Kaydı Oluştur"})]}),u.jsxs("div",{className:"mt-6 text-center space-y-2",children:[u.jsxs("p",{className:"text-gray-600",children:["Zaten hesabınız var mı?"," ",u.jsx("button",{onClick:s,className:"text-primary font-medium hover:text-blue-700",children:"Giriş yapın"})]}),u.jsxs("p",{className:"text-gray-600",children:["Öğretmen misiniz?"," ",u.jsx("button",{onClick:e,className:"text-secondary font-medium hover:text-purple-700",children:"Öğretmen kaydı"})]})]})]})},hD=()=>{const[s,e]=w.useState(!0),[t,a]=w.useState("teacher");return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-6xl mx-auto flex items-center justify-center gap-12",children:[u.jsxs("div",{className:"hidden lg:block flex-1 max-w-lg",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-gradient-to-r from-primary to-secondary rounded-full mb-6",children:u.jsx(Rt,{className:"h-12 w-12 text-white"})}),u.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:"NeuroLearn AI"}),u.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Otizmli öğrenciler için yapay zeka destekli eğitim platformu"})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsx(RT,{className:"h-6 w-6 text-primary mr-3"}),u.jsx("h3",{className:"font-semibold text-gray-800",children:"AI Destekli İçerik"})]}),u.jsx("p",{className:"text-gray-600",children:"Yapay zeka ile öğrenciye özel sorular ve aktiviteler üretilir"})]}),u.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsx("div",{className:"w-6 h-6 bg-success rounded-full mr-3"}),u.jsx("h3",{className:"font-semibold text-gray-800",children:"Duygu Analizi"})]}),u.jsx("p",{className:"text-gray-600",children:"Gerçek zamanlı duygu tanıma ile öğrencinin durumu takip edilir"})]}),u.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[u.jsxs("div",{className:"flex items-center mb-3",children:[u.jsx("div",{className:"w-6 h-6 bg-warning rounded-full mr-3"}),u.jsx("h3",{className:"font-semibold text-gray-800",children:"Akıllı Raporlama"})]}),u.jsx("p",{className:"text-gray-600",children:"Detaylı analitik ve öğrenci gelişim raporları"})]})]})]}),u.jsxs("div",{className:"flex-1 max-w-md",children:[u.jsxs("div",{className:"bg-white p-1 rounded-lg shadow-sm mb-6 flex",children:[u.jsx("button",{onClick:()=>a("teacher"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="teacher"?"bg-secondary text-white":"text-gray-600 hover:text-gray-800"}`,children:"Öğretmen"}),u.jsx("button",{onClick:()=>a("student"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ${t==="student"?"bg-primary text-white":"text-gray-600 hover:text-gray-800"}`,children:"Öğrenci"})]}),t==="teacher"?s?u.jsx(oD,{onToggleMode:()=>e(!1)}):u.jsx(lD,{onToggleMode:()=>e(!0)}):s?u.jsx(cD,{onToggleMode:()=>e(!1),onToggleRole:()=>a("teacher")}):u.jsx(uD,{onToggleMode:()=>e(!0),onToggleRole:()=>a("teacher")})]})]})})};function DT(s){var e,t,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var o=s.length;for(e=0;e<o;e++)s[e]&&(t=DT(s[e]))&&(a&&(a+=" "),a+=t)}else for(t in s)s[t]&&(a&&(a+=" "),a+=t);return a}function dD(){for(var s,e,t=0,a="",o=arguments.length;t<o;t++)(s=arguments[t])&&(e=DT(s))&&(a&&(a+=" "),a+=e);return a}function Pc(...s){return dD(s)}const Ct=({variant:s="primary",size:e="md",loading:t=!1,className:a,disabled:o,children:l,...d})=>{const m="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",p={primary:"bg-primary text-white hover:bg-blue-700 focus:ring-primary",secondary:"bg-secondary text-white hover:bg-purple-700 focus:ring-secondary",danger:"bg-danger text-white hover:bg-red-700 focus:ring-danger",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-primary",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-primary"},y={sm:"px-3 py-2 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return u.jsxs("button",{className:Pc(m,p[s],y[e],a),disabled:o||t,...d,children:[t&&u.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l]})},fD=({aiStatus:s="connected"})=>{const{currentUser:e,logout:t}=es(),a=()=>{switch(s){case"connected":return u.jsx(E_,{className:"h-4 w-4 text-success"});case"disconnected":return u.jsx(sD,{className:"h-4 w-4 text-danger"});case"processing":return u.jsx("div",{className:"h-4 w-4 border-2 border-warning border-t-transparent rounded-full animate-spin"});default:return u.jsx(E_,{className:"h-4 w-4 text-success"})}},o=()=>{switch(s){case"connected":return"AI Bağlı";case"disconnected":return"AI Bağlantısı Yok";case"processing":return"AI İşlemde";default:return"AI Bağlı"}};return u.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("div",{className:"flex items-center space-x-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:u.jsx(Rt,{className:"h-6 w-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"NeuroLearn AI"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Öğretmen Paneli"})]})]})}),u.jsxs("div",{className:"flex items-center space-x-6",children:[u.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 rounded-lg",children:[a(),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:o()})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-sm font-medium text-gray-800",children:e?.name||"Öğretmen"}),u.jsx("p",{className:"text-xs text-gray-600",children:e?.email})]}),u.jsx("div",{className:"w-10 h-10 bg-primary rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-white font-medium text-sm",children:e?.name?.charAt(0)||"Ö"})}),u.jsxs(Ct,{variant:"outline",size:"sm",onClick:t,className:"border-gray-300 text-gray-700 hover:bg-red-50 hover:text-red-700 hover:border-red-300",children:[u.jsx(NT,{className:"h-4 w-4 mr-2"}),"Çıkış"]})]})]})]})})},Ze=({className:s,children:e})=>u.jsx("div",{className:Pc("bg-white rounded-lg shadow-sm border border-gray-200 p-6",s),children:e}),qh=({className:s,children:e})=>u.jsx("div",{className:Pc("mb-4",s),children:e}),Hh=({className:s,children:e})=>u.jsx("h3",{className:Pc("text-lg font-semibold text-gray-800",s),children:e}),We=({className:s,children:e})=>u.jsx("div",{className:Pc(s),children:e}),mD=({stats:s,loading:e=!1})=>{const t=[{title:"Haftalık İlerleme",value:`%${s.weeklyProgress}`,icon:CT,color:"bg-blue-500",change:"+12%",changeType:"positive"},{title:"Tamamlanan Aktivite",value:s.completedActivities.toString(),icon:Vn,color:"bg-green-500",change:"+8",changeType:"positive"},{title:"Ortalama Başarı",value:`%${s.averageSuccess}`,icon:jT,color:"bg-purple-500",change:"+5%",changeType:"positive"},{title:"AI Önerileri",value:s.aiRecommendations.toString(),icon:og,color:"bg-yellow-500",change:"+3",changeType:"positive"}];return e?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(a=>u.jsx(Ze,{className:"animate-pulse",children:u.jsxs(We,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),u.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"})]}),u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"})]}),u.jsx("div",{className:"mt-4",children:u.jsx("div",{className:"h-3 bg-gray-200 rounded w-16"})})]})},a))}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((a,o)=>{const l=a.icon;return u.jsx(Ze,{className:"hover:shadow-md transition-shadow",children:u.jsxs(We,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:a.title}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.value})]}),u.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${a.color}`,children:u.jsx(l,{className:"h-6 w-6 text-white"})})]}),u.jsxs("div",{className:"mt-4 flex items-center",children:[u.jsx("span",{className:`text-sm font-medium ${a.changeType==="positive"?"text-green-600":"text-red-600"}`,children:a.change}),u.jsx("span",{className:"text-sm text-gray-600 ml-2",children:"son 7 günde"})]})]})},o)})})},gD=({students:s,loading:e=!1,onAddStudent:t,onViewStudent:a,onEditStudent:o,onDeleteStudent:l,getStudentLastEmotion:d})=>{const m=y=>({happy:"bg-green-100 text-green-800",sad:"bg-blue-100 text-blue-800",angry:"bg-red-100 text-red-800",neutral:"bg-gray-100 text-gray-800",focused:"bg-purple-100 text-purple-800",confused:"bg-yellow-100 text-yellow-800"})[y]||"bg-gray-100 text-gray-800",p=y=>({happy:"😊",sad:"😢",angry:"😠",neutral:"😐",focused:"🧐",confused:"😕"})[y]||"😐";return e?u.jsxs(Ze,{children:[u.jsx(qh,{children:u.jsx(Hh,{children:"Öğrenciler"})}),u.jsx(We,{children:u.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>u.jsxs("div",{className:"animate-pulse flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-20"})]}),u.jsx("div",{className:"w-20 h-6 bg-gray-200 rounded"})]},y))})})]}):u.jsxs(Ze,{children:[u.jsx(qh,{children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs(Hh,{children:["Öğrenciler (",s.length,")"]}),u.jsxs(Ct,{onClick:t,size:"sm",children:[u.jsx(b_,{className:"h-4 w-4 mr-2"}),"Yeni Öğrenci"]})]})}),u.jsx(We,{children:s.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(dd,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Henüz öğrenci eklenmemiş"}),u.jsxs(Ct,{onClick:t,variant:"outline",children:[u.jsx(b_,{className:"h-4 w-4 mr-2"}),"İlk öğrenciyi ekle"]})]}):u.jsx("div",{className:"space-y-4",children:s.map(y=>{const x=d?.(y.id);return u.jsxs("div",{className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[u.jsx("div",{className:"w-12 h-12 bg-primary rounded-full flex items-center justify-center",children:u.jsx("span",{className:"text-white font-medium text-sm",children:y.name.charAt(0).toUpperCase()})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-medium text-gray-900",children:y.name}),u.jsxs("p",{className:"text-sm text-gray-600",children:[y.age," yaş",y.notes&&` • ${y.notes.slice(0,30)}${y.notes.length>30?"...":""}`]})]}),x&&u.jsxs("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${m(x.emotion)}`,children:[u.jsx("span",{className:"mr-1",children:p(x.emotion)}),x.emotion]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Ct,{variant:"ghost",size:"sm",onClick:()=>a(y),className:"text-gray-600 hover:text-primary",children:u.jsx(ig,{className:"h-4 w-4"})}),u.jsx(Ct,{variant:"ghost",size:"sm",onClick:()=>o(y),className:"text-gray-600 hover:text-secondary",children:u.jsx(Gj,{className:"h-4 w-4"})}),u.jsx(Ct,{variant:"ghost",size:"sm",onClick:()=>l(y.id),className:"text-gray-600 hover:text-danger",children:u.jsx(Yj,{className:"h-4 w-4"})})]})]},y.id)})})})]})},pD=({insights:s,loading:e=!1})=>{const t=d=>({progress:ST,attention:T_,recommendation:og,warning:T_})[d]||x_,a=(d,m)=>m==="warning"||d==="high"?"bg-red-50 border-red-200 text-red-800":m==="attention"||d==="medium"?"bg-yellow-50 border-yellow-200 text-yellow-800":m==="progress"?"bg-green-50 border-green-200 text-green-800":"bg-blue-50 border-blue-200 text-blue-800",o=d=>({progress:"İlerleme",attention:"Dikkat",recommendation:"Öneri",warning:"Uyarı"})[d]||"Bilgi",l=d=>{const p=new Date().getTime()-d.getTime(),y=Math.floor(p/6e4),x=Math.floor(p/36e5),T=Math.floor(p/864e5);return T>0?`${T} gün önce`:x>0?`${x} saat önce`:y>0?`${y} dakika önce`:"Az önce"};return e?u.jsxs(Ze,{children:[u.jsx(qh,{children:u.jsx(Hh,{children:"AI Öngörüleri"})}),u.jsx(We,{children:u.jsx("div",{className:"space-y-4",children:[1,2,3].map(d=>u.jsx("div",{className:"animate-pulse border border-gray-200 rounded-lg p-4",children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full"}),u.jsxs("div",{className:"flex-1",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-full mb-1"}),u.jsx("div",{className:"h-3 bg-gray-200 rounded w-3/4"})]})]})},d))})})]}):u.jsxs(Ze,{children:[u.jsx(qh,{children:u.jsxs(Hh,{className:"flex items-center",children:[u.jsx(og,{className:"h-5 w-5 mr-2 text-primary"}),"AI Öngörüleri (",s.length,")"]})}),u.jsx(We,{children:s.length===0?u.jsxs("div",{className:"text-center py-8",children:[u.jsx(x_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600 mb-2",children:"Henüz AI öngörüsü yok"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Öğrenciler aktivite yaptıkça AI öngörüleri burada görünecek"})]}):u.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:s.map(d=>{const m=t(d.type);return u.jsx("div",{className:`border rounded-lg p-4 ${a(d.priority,d.type)}`,children:u.jsxs("div",{className:"flex items-start space-x-3",children:[u.jsx(m,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),u.jsxs("div",{className:"flex-1 min-w-0",children:[u.jsxs("div",{className:"flex items-center justify-between mb-1",children:[u.jsx("h4",{className:"font-medium text-sm",children:o(d.type)}),u.jsxs("div",{className:"flex items-center text-xs opacity-75",children:[u.jsx(gr,{className:"h-3 w-3 mr-1"}),l(d.createdAt)]})]}),u.jsx("p",{className:"text-sm opacity-90",children:d.message})]})]})},d.id)})})})]})},yD=()=>{const{currentUser:s}=es(),[e,t]=w.useState([]),[a,o]=w.useState([]),[l,d]=w.useState(!0),[m]=w.useState("connected"),[p]=w.useState({weeklyProgress:85,completedActivities:24,averageSuccess:78,aiRecommendations:5}),y=w.useCallback(async()=>{if(s)try{d(!0);const L=await tj(s.id);t(L);const j=[];for(const X of L){const W=await rj(X.id);j.push(...W)}j.sort((X,W)=>W.createdAt.getTime()-X.createdAt.getTime()),o(j.slice(0,10))}catch(L){console.error("Error loading data:",L)}finally{d(!1)}},[s]);w.useEffect(()=>{s&&y()},[s,y]);const x=()=>{console.log("Add student clicked")},T=L=>{console.log("View student:",L)},A=L=>{console.log("Edit student:",L)},M=L=>{console.log("Delete student:",L)},B=L=>({emotion:"happy",confidence:.95,timestamp:new Date});return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx(fD,{aiStatus:m}),u.jsx("main",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-gradient-to-r from-primary to-secondary rounded-lg p-6 text-white",children:[u.jsxs("h2",{className:"text-2xl font-bold mb-2",children:["Hoş geldiniz, ",s?.name,"! 👋"]}),u.jsx("p",{className:"text-blue-100",children:"NeuroLearn AI ile öğrencilerinizin gelişimini takip edin ve yapay zeka destekli öğrenme deneyimi sunun."})]}),u.jsx(mD,{stats:p,loading:l}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsx("div",{className:"lg:col-span-2",children:u.jsx(gD,{students:e,loading:l,onAddStudent:x,onViewStudent:T,onEditStudent:A,onDeleteStudent:M,getStudentLastEmotion:B})}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(pD,{insights:a,loading:l})})]}),u.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Hızlı İşlemler"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[u.jsx("div",{className:"text-primary font-medium mb-1",children:"🎮 Yeni Oyun Başlat"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Öğrenciler için eğitim oyunu başlatın"})]}),u.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[u.jsx("div",{className:"text-secondary font-medium mb-1",children:"📊 Detaylı Rapor"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Öğrenci gelişim raporlarını inceleyin"})]}),u.jsxs("button",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[u.jsx("div",{className:"text-success font-medium mb-1",children:"🤖 AI Önerileri"}),u.jsx("div",{className:"text-sm text-gray-600",children:"Yapay zeka önerilerini görüntüleyin"})]})]})]})]})})]})};class vD{constructor(){this.performanceData=new Map}initializePlayer(e,t){this.performanceData.has(e)||this.performanceData.set(e,{recentScores:[],averageResponseTime:0,recentEmotions:[],strugglingTopics:[],strengths:[],currentDifficulty:this.getDifficultyByAge(t)})}getDifficultyByAge(e){return e<=5?"easy":e<=8?"medium":"hard"}recordGameResult(e,t,a,o,l,d){const m=this.performanceData.get(e);if(!m)return;const p=t/a;m.recentScores.push(p),m.recentScores.length>10&&m.recentScores.shift(),m.averageResponseTime=(m.averageResponseTime+o)/2,m.recentEmotions.push(...d),m.recentEmotions.length>20&&(m.recentEmotions=m.recentEmotions.slice(-20)),this.analyzeAndAdjustDifficulty(e,l),this.performanceData.set(e,m)}analyzeAndAdjustDifficulty(e,t){const a=this.performanceData.get(e);if(!a||a.recentScores.length<3)return;const o=a.recentScores.slice(-5).reduce((d,m)=>d+m,0)/Math.min(5,a.recentScores.length),l=this.getDominantEmotion(a.recentEmotions.slice(-10));o>=.8&&l==="happy"?(a.currentDifficulty==="easy"?a.currentDifficulty="medium":a.currentDifficulty==="medium"&&(a.currentDifficulty="hard"),a.strengths.push(t)):(o<=.4||l==="confused"||l==="sad")&&(a.currentDifficulty==="hard"?a.currentDifficulty="medium":a.currentDifficulty==="medium"&&(a.currentDifficulty="easy"),a.strugglingTopics.includes(t)||a.strugglingTopics.push(t)),a.strengths=Array.from(new Set(a.strengths)).slice(-5),a.strugglingTopics=Array.from(new Set(a.strugglingTopics)).slice(-5)}getDominantEmotion(e){if(e.length===0)return"neutral";const t={};return e.forEach(a=>{t[a.emotion]=(t[a.emotion]||0)+1}),Object.keys(t).reduce((a,o)=>t[a]>t[o]?a:o)}getPerformance(e){return this.performanceData.get(e)||null}shouldAdaptQuestion(e){const t=this.performanceData.get(e);return t?t.recentScores.length>=3:!1}getAdaptationStrategy(e){const t=this.performanceData.get(e);if(!t)return"neutral";const a=t.recentScores.slice(-3).reduce((l,d)=>l+d,0)/Math.min(3,t.recentScores.length),o=this.getDominantEmotion(t.recentEmotions.slice(-6));return a>=.7&&(o==="happy"||o==="focused")?"success":a<=.4||o==="sad"?"struggle":o==="confused"?"confusion":"neutral"}getInsights(e){const t=this.performanceData.get(e);if(!t)return[];const a=[],o=t.recentScores.length>0?t.recentScores.reduce((d,m)=>d+m,0)/t.recentScores.length:0;o>=.8?a.push("Öğrenci çok başarılı, daha zor sorularla meydan okuyun"):o<=.4&&a.push("Öğrenci zorlanıyor, daha basit sorularla motivasyonu artırın"),t.strugglingTopics.length>0&&a.push(`Zorlandığı konular: ${t.strugglingTopics.join(", ")}`),t.strengths.length>0&&a.push(`Güçlü olduğu konular: ${t.strengths.join(", ")}`);const l=this.getDominantEmotion(t.recentEmotions);return l==="confused"?a.push("Öğrenci karışık görünüyor, açıklamaları basitleştirin"):l==="happy"&&a.push("Öğrenci mutlu ve motive, bu tempoyu koruyun"),a}resetPerformance(e){this.performanceData.delete(e)}exportPerformanceData(e){return this.performanceData.get(e)||null}}const wr=new vD;class xD{constructor(){this.modelName="hf.co/umutkkgz/Kaira-Turkish-Gemma-9B-T1-GGUF:Q3_K_M"}async generateQuestion(e){const{subject:t,difficulty:a,questionType:o="çoktan seçmeli"}=e;console.log("🤖 [OLLAMA DEBUG] Soru üretimi başlıyor:",{subject:t,difficulty:a,questionType:o,timestamp:new Date().toISOString(),stack:new Error().stack?.split(`
`).slice(1,5).join(`
`)});const l=this.buildPrompt(t,a,o);try{const d=await this.callOllama(l),m=this.parseOllamaResponse(d);return console.log("✅ [OLLAMA DEBUG] Soru başarıyla üretildi:",m.question),{id:`ollama_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,question:m.question,options:m.options,correctAnswer:m.correctIndex,confidence:.9,gameType:"word-image",difficulty:this.mapDifficultyToEnglish(a),source:"ollama"}}catch(d){throw console.error("❌ [OLLAMA DEBUG] Soru üretme hatası:",d),new Error(`Ollama servisi ile soru üretilemedi: ${d}`)}}buildPrompt(e,t,a){return`Aşağıdaki talimatları tamamen uygula ve yalnızca istenen biçimde yanıt ver.

Profil (hedef kitle)
Yaş: 12 (ortaokul 5–6. sınıf).
Dikkat süresi için: tek görev, tek cümle, somut/giriş düzeyi soyut kavramlar.
Kelime dağarcığı: B1 düzeyi; günlük ve dersle ilişkili sözcükler.

Dil ve karakterler
Yanıt yalnızca Türkçe olmalıdır.
Çin/Japon tipi karakter ve noktalama kullanma (örn. ： ， ︿ ＜ ＞).
ASCII soru işareti ? kullan.

Çıktı formatı (zorunlu)
Sadece tek bir JSON nesnesi döndür; açıklama/ek metin yok.
Şema: {"question": string, "options": [string,string,string,string], "correctIndex": number}

Kurallar:
question: 6–8 kelime, kısa ve net.
options: tam 4 seçenek, Türkçe ve emoji ile görsel zengin.
Seçenekler benzersiz, benzer uzunlukta; sadece 1 doğru.
correctIndex: 0–3 arası tamsayı.

ADHD'ye uygun tasarım
Olumsuz kalıp kullanma ("hangisi değildir" yok).
Belirsiz/iki anlamlı ifadeler yok.
Aynı veya çok benzer emojiler kullanma (karışıklık oluşturma).
Gereksiz süsleme ve uzun cümleler yok.

Zorluk haritalaması (12 yaş):
kolay: doğrudan tanıma/isimlendirme; açık farklar; 1 adım.
orta: temel sınıflama/özdeşlik; yakın ama ayrılabilir çeldiriciler.
zor: kısa bağlam ipucu veya 2 adımlı basit akıl yürütme (yine kısa).

Kalite kontrolleri
Soru "hangi / ne / kim / nerede / nedir / nasıl" kalıbı içersin.
Seçenekler dilbilgisel olarak tutarlı (hepsi kısa söz öbekleri).
Soruda cevabı açık etmeyin (ipucu sızıntısı yok).
Doğru cevabın konumu rastgele olsun; sabit pozisyon kullanma.

Konu: ${e}
Zorluk: ${t}

DOĞRU örnek
{"question":"🐶 hangi ses çıkarır?","options":["Hav hav","Miyav","Möö","Cik cik"],"correctIndex":0}

YANLIŞ örnekler (yapma)
Ek açıklama/metin döndürmek.
Çin tipi noktalama: ： ， ︿ ＜ ＞
Uzun/iki görevli sorular.
Birden çok doğru cevap.`}getADHDGuidelines(e){switch(e){case"kolay":return`
- Çok basit, günlük yaşamdan konular
- Büyük, kontrastlı emojiler kullan
- Sadece bir odak noktası
- Pozitif, eğlenceli dil`;case"orta":return`
- Bilinen konulardan biraz farklı örnekler
- Rengarenk emojiler
- Hafif düşündürücü ama yorucu değil
- Teşvik edici ifadeler`;case"zor":return`
- Dikkat gerektiren detaylar
- Çoklu görsel ipuçları
- Problem çözme odaklı
- Başarı hissi verecek zorlukta`;default:return"- Temel ADHD uyumlu tasarım prensiplerine uygun"}}async callOllama(e){const t="http://localhost:11434/api/generate";console.log("📡 [OLLAMA DEBUG] API çağrısı başlıyor...");const a={model:this.modelName,prompt:e,format:"json",stream:!1,options:{temperature:.6,top_p:.9,num_predict:300}};try{const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw new Error(`Ollama API hatası: ${o.status} ${o.statusText}`);const l=await o.json();if(!l.response)throw new Error("Ollama boş yanıt döndürdü");return console.log("📨 [OLLAMA DEBUG] API yanıtı alındı"),l.response.trim()}catch(o){throw o instanceof Error?new Error(`Ollama API hatası: ${o.message}`):o}}parseOllamaResponse(e){console.log("🔍 [OLLAMA DEBUG] Parse edilecek yanıt:",e);try{let t;try{t=JSON.parse(e.trim())}catch{const l=e.match(/\{[\s\S]*\}/);if(!l)throw new Error(`JSON bulunamadı. Ham yanıt: ${e}`);const d=l[0];t=JSON.parse(d)}if(!t?.question||typeof t.question!="string")throw new Error(`Geçersiz question: ${t?.question}`);const a=/[\u4e00-\u9fff\uff00-\uffef：，＞︿＜]/;if(a.test(t.question))throw new Error(`Soru Çince karakter içeriyor: ${t.question}`);if(!Array.isArray(t?.options))throw new Error(`Options array değil: ${t?.options}`);if(t.options.length!==4)throw new Error(`4 seçenek gerekli, ${t.options.length} bulundu: ${JSON.stringify(t.options)}`);for(const o of t.options){if(typeof o!="string")throw new Error(`Seçenek string değil: ${o}`);if(a.test(o))throw new Error(`Seçenek Çince karakter içeriyor: ${o}`)}if(typeof t?.correctIndex!="number")throw new Error(`correctIndex sayı değil: ${t?.correctIndex}`);if(t.correctIndex<0||t.correctIndex>3)throw new Error(`correctIndex 0-3 arasında olmalı: ${t.correctIndex}`);return console.log("✅ [OLLAMA DEBUG] JSON başarıyla parse edildi"),t}catch(t){throw console.error("❌ [OLLAMA DEBUG] JSON parse hatası:",t),console.error("🔍 [OLLAMA DEBUG] Ham yanıt:",e),new Error(`Model JSON döndürmedi veya format hatalı: ${t}`)}}mapDifficultyToEnglish(e){return{kolay:"easy",orta:"medium",zor:"hard"}[e]||"medium"}setModel(e){this.modelName=e}getCurrentModel(){return this.modelName}async checkOllamaStatus(){try{const e=await fetch("http://localhost:11434/api/tags",{method:"GET",headers:{"Content-Type":"application/json"}});return e.ok?((await e.json()).models||[]).some(o=>o.name.includes(this.modelName.split(":")[0])):!1}catch(e){return console.error("Ollama status kontrolü hatası:",e),!1}}async generateMultipleQuestions(e,t=5){const a=[];for(let o=0;o<t;o++)try{const l=await this.generateQuestion(e);a.push(l),await new Promise(d=>setTimeout(d,1e3))}catch(l){console.error(`${o+1}. soru üretme hatası:`,l)}if(a.length===0)throw new Error("Hiç soru üretilemedi");return a}}const Rs=new xD;class _D{async generateAdaptiveQuestion(e){console.log("🧠 [ADAPTIVE DEBUG] generateAdaptiveQuestion çağrıldı:",{gameType:e.gameType,studentAge:e.studentAge,timestamp:new Date().toISOString(),stack:new Error().stack?.split(`
`).slice(1,5).join(`
`)});const{performance:t,currentEmotion:a,gameType:o,studentAge:l}=e,d=this.determineAdaptationStrategy(t,a);switch(o){case"word-image":return this.generateAdaptiveWordImageQuestion(e,d);case"number":return this.generateAdaptiveNumberQuestion(e,d);case"color":return this.generateAdaptiveColorQuestion(e,d);case"attention-sprint":throw new Error("Attention sprint oyunu AttentionSprintGenerator kullanır");default:throw new Error(`Unsupported game type: ${o}`)}}determineAdaptationStrategy(e,t){const a=e.recentScores.length>0?e.recentScores.slice(-3).reduce((o,l)=>o+l,0)/Math.min(3,e.recentScores.length):.5;return a>=.8&&t?.emotion==="happy"?"challenge":a>=.6&&a<.8?"energize":a<=.4||t?.emotion==="sad"?"simplify":t?.emotion==="confused"?"refocus":"encourage"}async generateAdaptiveWordImageQuestion(e,t){const{performance:a,studentAge:o}=e,l=this.getSubjectForWordImage(o,t),d=this.mapDifficultyToTurkish(a.currentDifficulty);try{const m={subject:l,difficulty:d,questionType:"çoktan seçmeli"};return{...await Rs.generateQuestion(m),difficulty:a.currentDifficulty,adaptedFor:t==="challenge"?"success":t==="simplify"?"struggle":"confusion",gameType:"word-image"}}catch(m){console.error("Ollama question generation failed, using adaptive fallback:",m)}return this.generateAdaptiveFallbackWordImage(t,a.currentDifficulty,o)}buildWordImagePrompt(e,t,a){const o={easy:"very simple",medium:"moderately challenging",hard:"challenging"},l={encourage:"Create an encouraging and positive question",challenge:"Create a more challenging question to push the student",simplify:"Create a very simple and confidence-building question",refocus:"Create a clear, focused question without distractions"};return`Generate a ${o[t]} word-image matching question for a ${a}-year-old child. ${l[e]}.

Format the response as:
Question: [question text]
Options: [option1, option2, option3, option4]
Correct: [index of correct answer 0-3]

Example:
Question: Which animal says "woof woof"?
Options: 🐶, 🐱, 🐸, 🦋
Correct: 0

Topic should be about animals, fruits, or vehicles. Use simple emojis as options.`}parseAIQuestionResponse(e,t){try{const a=e.split(`
`).filter(m=>m.trim());let o="",l=[],d=0;for(const m of a)m.startsWith("Question:")?o=m.replace("Question:","").trim():m.startsWith("Options:")?l=m.replace("Options:","").trim().split(",").map(p=>p.trim()):m.startsWith("Correct:")&&(d=parseInt(m.replace("Correct:","").trim())||0);if(o&&l.length>=4)return{id:`ai_${t}_${Date.now()}`,question:o,options:l.slice(0,4),correctAnswer:Math.max(0,Math.min(3,d)),confidence:.9,gameType:t}}catch(a){console.error("Error parsing AI response:",a)}return null}generateAdaptiveFallbackWordImage(e,t,a){const l={animals:{easy:[{question:"Hangi hayvan köpek?",options:["🐶","🐱","🐸","🦋"],correct:0},{question:"Hangi hayvan kedi?",options:["🐱","🐶","🐸","🦋"],correct:0}],medium:[{question:"Hangi hayvan çiftlikte yaşar?",options:["🐄","🐧","🦁","🐙"],correct:0},{question:"Hangi hayvan denizde yaşar?",options:["🐠","🐶","🐱","🐸"],correct:0}],hard:[{question:"Hangi hayvan gece aktiftir?",options:["🦉","🐶","🐸","🦋"],correct:0},{question:"Hangi hayvan soğuk bölgelerde yaşar?",options:["🐧","🦁","🐴","🐄"],correct:0}]}}.animals[t],d=l[Math.floor(Math.random()*l.length)];let m=d.question;return e==="encourage"?m=`Harika! ${m}`:e==="simplify"?m=`Kolay soru: ${m}`:e==="challenge"&&(m=`Zor soru: ${m}`),{id:`adaptive_word_${Date.now()}`,question:m,options:d.options,correctAnswer:d.correct,confidence:.85,gameType:"word-image",difficulty:t,adaptedFor:e==="challenge"?"success":e==="simplify"?"struggle":"confusion"}}async generateAdaptiveNumberQuestion(e,t){const{performance:a,studentAge:o}=e,d={easy:{min:1,max:5},medium:{min:1,max:10},hard:{min:5,max:15}}[a.currentDifficulty],m=Math.floor(Math.random()*(d.max-d.min+1))+d.min,p=[];for(;p.length<3;){let A;t==="simplify"?A=Math.random()<.5?Math.max(1,m-Math.floor(Math.random()*3)-1):Math.min(d.max,m+Math.floor(Math.random()*3)+1):A=Math.floor(Math.random()*(d.max-d.min+1))+d.min,A!==m&&!p.includes(A)&&p.push(A)}const y=[m,...p].sort(()=>Math.random()-.5),x=y.indexOf(m);let T="Kaç tane 🐶 var?";return t==="encourage"?T=`Harika! ${T}`:t==="challenge"?T=`Dikkatlice say: ${T}`:t==="simplify"&&(T=`Kolay soru: ${T}`),{id:`adaptive_number_${Date.now()}`,question:T,options:y.map(String),correctAnswer:x,confidence:.9,gameType:"number",difficulty:a.currentDifficulty,adaptedFor:t==="challenge"?"success":t==="simplify"?"struggle":"confusion"}}async generateAdaptiveColorQuestion(e,t){const{performance:a}=e,o=[{name:"kırmızı",emoji:"🔴"},{name:"mavi",emoji:"🔵"},{name:"yeşil",emoji:"🟢"},{name:"sarı",emoji:"🟡"},{name:"mor",emoji:"🟣"},{name:"turuncu",emoji:"🟠"}];let l=o;a.currentDifficulty==="easy"?l=o.slice(0,4):t==="simplify"&&(l=o.slice(0,3));const d=l[Math.floor(Math.random()*l.length)],m=l.filter(T=>T.name!==d.name).slice(0,3),p=[d,...m].sort(()=>Math.random()-.5),y=p.findIndex(T=>T.name===d.name);let x=`Hangi renk ${d.name}?`;return t==="encourage"?x=`Çok güzel! ${x}`:t==="challenge"?x=`Dikkat et: ${x}`:t==="simplify"&&(x=`Basit soru: ${x}`),{id:`adaptive_color_${Date.now()}`,question:x,options:p.map(T=>T.emoji),correctAnswer:y,confidence:.9,gameType:"color",difficulty:a.currentDifficulty,adaptedFor:t==="challenge"?"success":t==="simplify"?"struggle":"confusion"}}async generateQuestionWithContext(e,t,a,o){console.log("🎯 [ADAPTIVE DEBUG] generateQuestionWithContext çağrıldı:",{studentId:e,gameType:t,studentAge:a,timestamp:new Date().toISOString(),stack:new Error().stack?.split(`
`).slice(1,5).join(`
`)}),wr.initializePlayer(e,a);const l=wr.getPerformance(e);if(!l)throw new Error("Could not retrieve student performance data");const d={performance:l,currentEmotion:o,gameType:t,previousQuestions:[],studentAge:a,adaptiveMode:!0};return this.generateAdaptiveQuestion(d)}getSubjectForWordImage(e,t){const a={easy:["Sevimli Hayvanlar","Parlak Renkler","Lezzetli Meyveler","Eğlenceli Oyuncaklar"],medium:["Hızlı Hayvanlar","Cool Taşıtlar","Maceralı Doğa","Süper Kahramanlar"],hard:["Uzay ve Gezegenler","Dinozorlar","Harika Icatlar","Büyülü Bilim"]};let o;switch(e<=6?o=a.easy:e<=10?o=a.medium:o=a.hard,t){case"simplify":o=a.easy;break;case"energize":o=["Süper Hızlı Hayvanlar","Çılgın Renkler","Aksiyon Arabalar"];break;case"challenge":e>7&&(o=a.hard);break;case"refocus":o=["Sakin Hayvanlar","Yumuşak Renkler","Huzurlu Doğa"];break}return o[Math.floor(Math.random()*o.length)]}mapDifficultyToTurkish(e){return{easy:"kolay",medium:"orta",hard:"zor"}[e]||"orta"}async generateOllamaMathQuestion(e="Temel Matematik",t="orta",a=8){const o=["Eğlenceli sayma (oyuncaklar, hayvanlar ile)","Görsel toplama (emojiler ile)","Kolay çıkarma (çizgi film karakterleri ile)","Renkli şekiller tanıma","Günlük yaşamdan sayılar (yaş, saat, para)"],l=o[Math.floor(Math.random()*o.length)];try{const d={subject:`${l} (${a} yaş için uygun)`,difficulty:t,questionType:"çoktan seçmeli"};return{...await Rs.generateQuestion(d),gameType:"number"}}catch(d){throw console.error("Ollama matematik sorusu üretme hatası:",d),d}}async generateOllamaScienceQuestion(e="orta",t=10){const a=["Sevimli hayvanların yaşam alanları","Gökyüzündeki renkli olaylar (gökkuşağı, bulutlar)","Eğlenceli deneyimler (mıknatıs, su-yağ)","Uzaydaki parlak gezegen ve yıldızlar","Bitkilerin büyümesi ve çiçek açması","Mevsim değişimleri ve doğadaki renkler"],o=a[Math.floor(Math.random()*a.length)];try{const l={subject:`${o} (${t} yaş çocuk için basit)`,difficulty:e,questionType:"çoktan seçmeli"};return await Rs.generateQuestion(l)}catch(l){throw console.error("Ollama fen bilgisi sorusu üretme hatası:",l),l}}}const gp=new _D,bD=({studentId:s,studentAge:e=6,onGameComplete:t,onEmotionDetected:a,useAdaptiveAI:o=!0})=>{const[l,d]=w.useState(null),[m,p]=w.useState(null),[y,x]=w.useState(0),[T,A]=w.useState(1),[M,B]=w.useState(30),[L,j]=w.useState("loading"),[X,W]=w.useState([]),[he,ue]=w.useState(""),[le]=w.useState(Date.now()),[de,V]=w.useState(!1),[C,R]=w.useState(""),[O,P]=w.useState(!1),I=w.useRef(!1),N=5,ve=w.useCallback(async()=>{if(!de){j("loading"),V(!0);try{let F;if(o){const ce=X.length>0?X[X.length-1]:void 0;F=await gp.generateQuestionWithContext(s,"word-image",e,ce);const fe=wr.getInsights(s);fe.length>0&&R(fe[0])}else{const ce=["Hayvanlar","Meyveler","Taşıtlar"],fe=ce[Math.floor(Math.random()*ce.length)];F=await Rs.generateQuestion({subject:fe,difficulty:"kolay",questionType:"çoktan seçmeli"})}d(F),p(null),B(30),j("playing")}catch(F){console.error("Error generating question:",F);try{const ce=await Rs.generateQuestion({subject:"Hayvanlar",difficulty:"kolay",questionType:"çoktan seçmeli"});d(ce)}catch(ce){console.error("Ollama fallback failed:",ce);const fe={id:`static_fallback_${Date.now()}`,question:"Hangi hayvan köpek?",options:["🐶","🐱","🐸","🦋"],correctAnswer:0,confidence:1,gameType:"word-image",difficulty:"easy"};d(fe)}p(null),B(30),j("playing")}finally{V(!1)}}},[s,e,o]);w.useEffect(()=>{I.current||O||(I.current=!0,P(!0),ve())},[ve,O]),w.useEffect(()=>{let F;return L==="playing"&&M>0?F=setTimeout(()=>{B(M-1)},1e3):M===0&&L==="playing"&&_e(),()=>clearTimeout(F)},[M,L]);const _e=()=>{p(-1);const F=["Zaman bitti! 🕐 Ama sorun yok, devam edelim!","Hop, zaman doldu! ⏰ Hızlı olmaya çalışalım!","Süre bitti! 🏃‍♂️ Bir sonrakinde daha hızlı!","Zaman tamamlandı! 🎯 Sen yaparsın!"];ue(F[Math.floor(Math.random()*F.length)]),j("answered");const ce={emotion:"neutral",confidence:.6,timestamp:new Date};W(fe=>[...fe,ce]),a?.(ce),setTimeout(()=>{ae()},1500)},G=F=>{if(L!=="playing")return;if(p(F),j("answered"),F===l?.correctAnswer){x(y+1);const fe=["SÜPER! ⭐ Harika bir seçim!","MÜTHİŞ! 🌟 Çok akıllısın!","WOW! 🎉 Perfect!","BRAVO! 🏆 Harikasın!","YESSss! 🚀 Devam et!"];ue(fe[Math.floor(Math.random()*fe.length)]);const pe={emotion:"happy",confidence:.9,timestamp:new Date};W(Le=>[...Le,pe]),a?.(pe)}else{const fe=["Hey, yaklaştın! 💪 Bir daha dene!","Hiç sorun değil! 😊 Sen harikasın!","Önemli değil! 🌈 Denemeye devam!","Bu sefer olmadı ama 🎯 bir sonrakinde!","Gayet iyi! 🤗 Devam ediyoruz!"];ue(fe[Math.floor(Math.random()*fe.length)]);const pe={emotion:"neutral",confidence:.7,timestamp:new Date};W(Le=>[...Le,pe]),a?.(pe)}setTimeout(()=>{ae()},2e3)},ae=()=>{T>=N?te():(A(T+1),ve())},te=()=>{j("completed");const F=Math.floor((Date.now()-le)/1e3);o&&wr.recordGameResult(s,y,N,F,"word-image",X),t(y,F,X)},Y=()=>{x(0),A(1),W([]),R(""),o&&wr.initializePlayer(s,e),ve()},k=F=>{if("speechSynthesis"in window){const ce=new SpeechSynthesisUtterance(F);ce.lang="tr-TR",ce.rate=.8,speechSynthesis.speak(ce)}},J=()=>{const F=y/N*100;return F>=80?"text-green-600":F>=60?"text-yellow-600":"text-red-600"},$=()=>{const F=y/N*100;return F===100?"WAOW! MÜKEMMEL! 🏆✨ Sen bir şampiyon!":F>=80?"SÜPER! 🌟🚀 Çok akıllısın!":F>=60?"HARİKA! 👏🎉 Çok iyi gidiyorsun!":F>=40?"GÜZEL! 💪🌈 Devam et!":"HEY! 🤗⭐ Sen harikasın, tekrar deneyelim!"};return L==="completed"?u.jsx(Ze,{className:"max-w-2xl mx-auto",children:u.jsxs(We,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:u.jsx(Aa,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Oyun Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Harika bir performans sergiledi!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:`text-3xl font-bold ${J()}`,children:[y,"/",N]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Doğru Cevap"})]}),u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-3xl font-bold text-primary",children:["%",Math.round(y/N*100)]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"text-3xl font-bold text-secondary",children:X.length}),u.jsx("div",{className:"text-sm text-gray-600",children:"Duygusal Tepki"})]})]})}),u.jsx("div",{className:"mb-6",children:u.jsx("p",{className:"text-lg font-medium text-gray-800",children:$()})}),u.jsxs(Ct,{onClick:Y,size:"lg",className:"mr-4",children:[u.jsx(Ei,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):L==="loading"||!l?u.jsx(Ze,{className:"max-w-2xl mx-auto",children:u.jsxs(We,{className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),de&&o?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(Rt,{className:"h-5 w-5 text-primary animate-pulse"}),u.jsx("p",{className:"text-gray-600 font-medium",children:"🤖 Senin için özel soru hazırlıyorum!"})]}),u.jsx("p",{className:"text-sm text-gray-500",children:"✨ ADHD dostum için en iyi soruyu seçiyorum..."})]}):u.jsx("p",{className:"text-gray-600 font-medium",children:"🎯 Yeni macera yükleniyor..."})]})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx(Ze,{children:u.jsxs(We,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Soru ",T,"/",N]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",y,"/",T-1]}),o&&l?.difficulty&&u.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${l.difficulty==="easy"?"bg-green-100 text-green-700":l.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:l.difficulty==="easy"?"Kolay":l.difficulty==="medium"?"Orta":"Zor"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[o&&u.jsx("div",{title:"AI Powered",children:u.jsx(Rt,{className:"h-4 w-4 text-primary"})}),u.jsx(gr,{className:"h-4 w-4 text-gray-600"}),u.jsxs("span",{className:`font-medium ${M<=10?"text-red-600":"text-gray-800"}`,children:[M,"s"]})]})]}),u.jsx("div",{className:"mt-4",children:u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${T/N*100}%`}})})}),o&&C&&u.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rt,{className:"h-4 w-4 text-blue-600"}),u.jsx("p",{className:"text-sm text-blue-700",children:C})]})})]})}),u.jsx(Ze,{children:u.jsxs(We,{className:"text-center py-8",children:[u.jsxs("div",{className:"mb-6",children:[u.jsxs(Ct,{variant:"ghost",onClick:()=>k(l.question),className:"mb-4",children:[u.jsx(nD,{className:"h-5 w-5 mr-2"}),"Soruyu Dinle"]}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:l.question})]}),u.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto",children:l.options.map((F,ce)=>{let fe="h-24 text-4xl hover:scale-105 transition-transform";return L==="answered"&&(ce===l.correctAnswer?fe+=" bg-green-100 border-green-500 text-green-700":ce===m&&ce!==l.correctAnswer?fe+=" bg-red-100 border-red-500 text-red-700":fe+=" opacity-50"),u.jsx("button",{className:`border-2 border-gray-300 rounded-lg ${fe}`,onClick:()=>G(ce),disabled:L!=="playing",children:F},ce)})}),L==="answered"&&he&&u.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-2",children:[m===l.correctAnswer?u.jsx(ST,{className:"h-6 w-6 text-green-600"}):u.jsx(bj,{className:"h-6 w-6 text-red-600"}),u.jsx("p",{className:"text-lg font-medium text-gray-800",children:he})]})]})})]})},TD=({studentId:s,studentAge:e=6,onGameComplete:t,onEmotionDetected:a,useAdaptiveAI:o=!0})=>{const[l,d]=w.useState(null),[m,p]=w.useState(null),[y,x]=w.useState(0),[T,A]=w.useState(1),[M,B]=w.useState(45),[L,j]=w.useState("loading"),[X,W]=w.useState([]),[he,ue]=w.useState(!1),[le]=w.useState(Date.now()),[de,V]=w.useState(!1),[C,R]=w.useState(""),[O,P]=w.useState(!1),I=w.useRef(!1),N=5,ve=w.useCallback(async()=>{if(!de){j("loading"),V(!0);try{let $;if(o){const F=X.length>0?X[X.length-1]:void 0;$=await gp.generateQuestionWithContext(s,"number",e,F);const ce=wr.getInsights(s);ce.length>0&&R(ce[0])}else $=await Rs.generateQuestion({subject:"Sayma ve temel matematik",difficulty:"kolay",questionType:"çoktan seçmeli"}),$.gameType="number";d($),p(null),B(45),j("playing")}catch($){console.error("Error generating question:",$);try{const F=await Rs.generateQuestion({subject:"Basit sayma",difficulty:"kolay",questionType:"çoktan seçmeli"});F.gameType="number",d(F)}catch(F){console.error("Ollama fallback failed:",F);const ce={id:`static_number_${Date.now()}`,question:"Kaç tane 🍎 var?",options:["2","3","4","5"],correctAnswer:1,confidence:1,gameType:"number",difficulty:"easy"};d(ce)}p(null),B(45),j("playing")}finally{V(!1)}}},[s,e,o]);w.useEffect(()=>{I.current||O||(I.current=!0,P(!0),ve())},[ve,O]),w.useEffect(()=>{let $;return L==="playing"&&M>0?$=setTimeout(()=>{B(M-1)},1e3):M===0&&L==="playing"&&_e(),()=>clearTimeout($)},[M,L]);const _e=()=>{p(-1),j("answered");const $={emotion:"confused",confidence:.8,timestamp:new Date};W(F=>[...F,$]),a?.($),setTimeout(()=>{te()},2e3)},G=$=>{if(L!=="playing")return;if(p($),j("answered"),$===l?.correctAnswer){x(y+1);const ce={emotion:"happy",confidence:.9,timestamp:new Date};W(fe=>[...fe,ce]),a?.(ce)}else{const ce={emotion:"sad",confidence:.7,timestamp:new Date};W(fe=>[...fe,ce]),a?.(ce)}setTimeout(()=>{te()},2e3)},ae=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Tarayıcınız ses tanımayı desteklemiyor");return}if(he){ue(!1);return}ue(!0);const $=new(window.webkitSpeechRecognition||window.SpeechRecognition);$.lang="tr-TR",$.interimResults=!1,$.maxAlternatives=1,$.onresult=F=>{const ce=F.results[0][0].transcript,fe=parseInt(ce);if(!isNaN(fe)&&l){const pe=l.options.findIndex(Le=>parseInt(Le)===fe);pe!==-1&&G(pe)}ue(!1)},$.onerror=()=>{ue(!1)},$.onend=()=>{ue(!1)},$.start()},te=()=>{T>=N?Y():(A(T+1),ve())},Y=()=>{j("completed");const $=Math.floor((Date.now()-le)/1e3);o&&wr.recordGameResult(s,y,N,$,"number",X),t(y,$,X)},k=()=>{x(0),A(1),W([]),R(""),o&&wr.initializePlayer(s,e),ve()};if(L==="completed")return u.jsx(Ze,{className:"max-w-2xl mx-auto",children:u.jsxs(We,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:u.jsx(Aa,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Sayı Oyunu Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Matematik becerilerin gelişiyor!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-4xl font-bold text-green-600 mb-2",children:[y,"/",N]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Doğru Sayı"})]})}),u.jsxs(Ct,{onClick:k,size:"lg",children:[u.jsx(Ei,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})});if(L==="loading"||!l)return u.jsx(Ze,{className:"max-w-2xl mx-auto",children:u.jsxs(We,{className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),de&&o?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(Rt,{className:"h-5 w-5 text-green-600"}),u.jsx("p",{className:"text-gray-600",children:"AI sayı sorusu üretiyor..."})]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Performansına göre uyarlanıyor"})]}):u.jsx("p",{className:"text-gray-600",children:"Sayı sorusu hazırlanıyor..."})]})});const J=()=>{if(!l)return null;const $=parseInt(l.options[l.correctAnswer]),F="🐶".repeat($);return u.jsx("div",{className:"text-6xl mb-6 leading-relaxed",children:F})};return u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx(Ze,{children:u.jsxs(We,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Soru ",T,"/",N]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",y]}),o&&l?.difficulty&&u.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${l.difficulty==="easy"?"bg-green-100 text-green-700":l.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:l.difficulty==="easy"?"Kolay":l.difficulty==="medium"?"Orta":"Zor"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[o&&u.jsx("div",{title:"AI Powered",children:u.jsx(Rt,{className:"h-4 w-4 text-green-600"})}),u.jsx(gr,{className:"h-4 w-4 text-gray-600"}),u.jsxs("span",{className:`font-medium ${M<=15?"text-red-600":"text-gray-800"}`,children:[M,"s"]})]})]}),o&&C&&u.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rt,{className:"h-4 w-4 text-blue-600"}),u.jsx("p",{className:"text-sm text-blue-700",children:C})]})})]})}),u.jsx(Ze,{children:u.jsxs(We,{className:"text-center py-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-6",children:l.question}),u.jsx("div",{className:"mb-8",children:J()}),u.jsxs("div",{className:"mb-6",children:[u.jsxs(Ct,{onClick:ae,variant:he?"danger":"secondary",size:"lg",className:"mb-4",children:[he?u.jsx(jj,{className:"h-5 w-5 mr-2"}):u.jsx(Mj,{className:"h-5 w-5 mr-2"}),he?"Dinlemeyi Durdur":"Sesli Cevap Ver"]}),he&&u.jsx("p",{className:"text-sm text-gray-600",children:"Cevabınızı söyleyin..."})]}),u.jsx("div",{className:"grid grid-cols-5 gap-3 max-w-lg mx-auto",children:l.options.map(($,F)=>{let ce="h-16 text-xl font-bold hover:scale-105 transition-transform";return L==="answered"&&(F===l.correctAnswer?ce+=" bg-green-100 border-green-500 text-green-700":F===m&&F!==l.correctAnswer?ce+=" bg-red-100 border-red-500 text-red-700":ce+=" opacity-50"),u.jsx("button",{className:`border-2 border-gray-300 rounded-lg ${ce}`,onClick:()=>G(F),disabled:L!=="playing",children:$},F)})})]})})]})},ED=({studentId:s,studentAge:e=6,onGameComplete:t,onEmotionDetected:a,useAdaptiveAI:o=!0})=>{const[l,d]=w.useState(null),[m,p]=w.useState(null),[y,x]=w.useState(0),[T,A]=w.useState(1),[M,B]=w.useState(25),[L,j]=w.useState("loading"),[X,W]=w.useState([]),[he]=w.useState(Date.now()),[ue,le]=w.useState(!1),[de,V]=w.useState(""),[C,R]=w.useState(!1),O=w.useRef(!1),P=5,I=w.useCallback(async()=>{if(console.log("🔍 [DEBUG] generateQuestion çağrıldı",{isAIGenerating:ue,gameState:L,questionNumber:T,timestamp:new Date().toISOString()}),ue){console.log("⚠️ [DEBUG] Zaten soru üretiliyor, çıkılıyor...");return}console.log("🚀 [DEBUG] Soru üretimi başlıyor..."),j("loading"),le(!0);try{let te;if(o){const Y=X.length>0?X[X.length-1]:void 0;te=await gp.generateQuestionWithContext(s,"color",e,Y);const k=wr.getInsights(s);k.length>0&&V(k[0])}else te=await Rs.generateQuestion({subject:"Renkler ve renk tanıma",difficulty:"kolay",questionType:"çoktan seçmeli"}),te.gameType="color";console.log("✅ [DEBUG] Soru başarıyla üretildi:",te.question),d(te),p(null),B(25),j("playing")}catch(te){console.error("Error generating question:",te);try{const Y=await Rs.generateQuestion({subject:"Temel renkler",difficulty:"kolay",questionType:"çoktan seçmeli"});Y.gameType="color",d(Y)}catch(Y){console.error("Ollama fallback failed:",Y);const k={id:`static_color_${Date.now()}`,question:"Hangi renk kırmızı?",options:["🔴","🔵","🟢","🟡"],correctAnswer:0,confidence:1,gameType:"color",difficulty:"easy"};d(k)}p(null),B(25),j("playing")}finally{console.log("🏁 [DEBUG] Soru üretimi tamamlandı, isAIGenerating = false"),le(!1)}},[s,e,o]);w.useEffect(()=>{if(console.log("🔄 [DEBUG] useEffect çalıştı",{isInitialized:C,initStarted:O.current}),O.current){console.log("🛡️ [DEBUG] StrictMode guard - çıkılıyor");return}C||(console.log("🎯 [DEBUG] İlk kez başlatılıyor, generateQuestion çağrılıyor"),O.current=!0,R(!0),I())},[I,C]),w.useEffect(()=>{let te;return L==="playing"&&M>0?te=setTimeout(()=>{B(M-1)},1e3):M===0&&L==="playing"&&N(),()=>clearTimeout(te)},[M,L]);const N=()=>{p(-1),j("answered");const te={emotion:"confused",confidence:.8,timestamp:new Date};W(Y=>[...Y,te]),a?.(te),setTimeout(()=>{_e()},2e3)},ve=te=>{if(L!=="playing")return;if(p(te),j("answered"),te===l?.correctAnswer){x(y+1);const k={emotion:"happy",confidence:.9,timestamp:new Date};W(J=>[...J,k]),a?.(k)}else{const k={emotion:"sad",confidence:.7,timestamp:new Date};W(J=>[...J,k]),a?.(k)}setTimeout(()=>{_e()},2e3)},_e=w.useCallback(()=>{console.log("➡️ [DEBUG] nextQuestion çağrıldı",{questionNumber:T,totalQuestions:P}),T>=P?(console.log("🏆 [DEBUG] Oyun tamamlandı"),G()):(console.log("🔢 [DEBUG] Sonraki soruya geçiliyor:",T+1),A(T+1),I())},[T,P,I]),G=()=>{j("completed");const te=Math.floor((Date.now()-he)/1e3);o&&wr.recordGameResult(s,y,P,te,"color",X),t(y,te,X)},ae=()=>{x(0),A(1),W([]),V(""),R(!1),o&&wr.initializePlayer(s,e),I()};return L==="completed"?u.jsx(Ze,{className:"max-w-2xl mx-auto",children:u.jsxs(We,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:u.jsx(fp,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Renk Oyunu Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Renkler konusunda çok başarılısın!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"text-center",children:[u.jsxs("div",{className:"text-4xl font-bold text-purple-600 mb-2",children:[y,"/",P]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Doğru Renk"})]})}),u.jsxs(Ct,{onClick:ae,size:"lg",children:[u.jsx(Ei,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):L==="loading"||!l?u.jsx(Ze,{className:"max-w-2xl mx-auto",children:u.jsxs(We,{className:"text-center py-12",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),ue&&o?u.jsxs("div",{className:"space-y-2",children:[u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(Rt,{className:"h-5 w-5 text-purple-600"}),u.jsx("p",{className:"text-gray-600",children:"AI renk sorusu üretiyor..."})]}),u.jsx("p",{className:"text-sm text-gray-500",children:"Performansına göre uyarlanıyor"})]}):u.jsx("p",{className:"text-gray-600",children:"Renk sorusu hazırlanıyor..."})]})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx(Ze,{children:u.jsxs(We,{children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Soru ",T,"/",P]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",y]}),o&&l?.difficulty&&u.jsx("div",{className:`text-xs px-2 py-1 rounded-full ${l.difficulty==="easy"?"bg-green-100 text-green-700":l.difficulty==="medium"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:l.difficulty==="easy"?"Kolay":l.difficulty==="medium"?"Orta":"Zor"})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[o&&u.jsx("div",{title:"AI Powered",children:u.jsx(Rt,{className:"h-4 w-4 text-purple-600"})}),u.jsx(gr,{className:"h-4 w-4 text-gray-600"}),u.jsxs("span",{className:`font-medium ${M<=10?"text-red-600":"text-gray-800"}`,children:[M,"s"]})]})]}),o&&de&&u.jsx("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rt,{className:"h-4 w-4 text-blue-600"}),u.jsx("p",{className:"text-sm text-blue-700",children:de})]})})]})}),u.jsx(Ze,{children:u.jsxs(We,{className:"text-center py-8",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-8",children:l.question}),u.jsx("div",{className:"grid grid-cols-2 gap-6 max-w-md mx-auto",children:l.options.map((te,Y)=>{let k="w-24 h-24 text-6xl hover:scale-110 transition-transform rounded-full border-4";return L==="answered"?Y===l.correctAnswer?k+=" border-green-500 shadow-lg shadow-green-200":Y===m&&Y!==l.correctAnswer?k+=" border-red-500 shadow-lg shadow-red-200":k+=" opacity-50 border-gray-300":k+=" border-gray-300 hover:border-gray-400",u.jsx("button",{className:k,onClick:()=>ve(Y),disabled:L!=="playing",children:te},Y)})}),L==="answered"&&u.jsx("div",{className:"mt-8",children:m===l.correctAnswer?u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-green-600",children:[u.jsx(Aa,{className:"h-6 w-6"}),u.jsx("p",{className:"text-lg font-medium",children:"Harika! Doğru renk! 🌈"})]}):u.jsx("p",{className:"text-lg font-medium text-red-600",children:"Yanlış renk. Tekrar deneyelim! 🎨"})})]})})]})};class wD{async generateAttentionSprint(e){const{performansOzeti:t,studentAge:a,sonGorevler:o=[],forcedDifficulty:l}=e,d=l||this.determineDifficulty(t);l&&console.log("👤 [USER CHOICE] Kullanıcının seçtiği zorluk kullanılıyor:",l);const m=this.determineTaskVariety(o),p=this.buildAttentionSprintPrompt(t,a,d,m);try{console.log("🎯 [ATTENTION SPRINT] Görev üretiliyor:",{difficulty:d,performansOzeti:t});const y=await this.callOllama(p),x=this.parseSprintResponse(y,d);return console.log("✅ [ATTENTION SPRINT] Görev üretildi:",x.gorev),x}catch(y){return console.error("❌ [ATTENTION SPRINT] Görev üretme hatası:",y),this.getFallbackTask(d,a)}}determineDifficulty(e){const{basariOrani:t,odaklanmaDurumu:a,ortalamaReaksiyonSuresi:o,son3Tur:l,sayiGorevPerformansi:d,zamanlamaPerformansi:m}=e,p=l.filter(M=>M.hizliCozum).length,y=l.some(M=>M.hedefTipi==="sayi"),x=l.some(M=>M.hedefZaman!==null),T=m?.ortalamaSapma||0,A=m?.idealZamanlamaOrani||0;if(console.log("📊 [ADAPTIVE DIFFICULTY]",{basariOrani:t,ortalamaReaksiyonSuresi:o,hizliCozumSayisi:p,sayiGoreviVarMi:y,zamanlamaGoreviVarMi:x,ortalamaSapma:T,idealZamanlamaOrani:A,sayiGorevPerformansi:d,zamanlamaPerformansi:m}),p>=2&&t>=.8&&o<2)return console.log("🚀 [DIFFICULTY] Süper hızlı - 2x atlama!"),"zor";if(d&&y){const M=this.evaluateNumberTaskPerformance(d,l);if(M.zorlukArtisi>1)return console.log(`🔢 [DIFFICULTY] Sayı görevi adaptasyonu: +${M.zorlukArtisi}`),M.onerilen}if(x&&m){if(A>=.8&&T<=.5)return console.log("🎯 [DIFFICULTY] Mükemmel zamanlama (sapma ≤0.5s) - ZOR seviye!"),"zor";if(A>=.6&&T<=1.5)return console.log("⏱️ [DIFFICULTY] İyi zamanlama (sapma ≤1.5s) - ORTA seviye!"),"orta";if(A>=.4&&T<=3)return console.log("⏰ [DIFFICULTY] Orta zamanlama (sapma ≤3s) - KOLAY/ORTA seviye!"),t>=.7?"orta":"kolay";if(T>3)return console.log("❌ [DIFFICULTY] Kötü zamanlama (sapma >3s) - KOLAY seviye!"),"kolay"}return t>=.8&&(p>=2||o<2.5)?(console.log("🔥 [DIFFICULTY] Süper performans - ZOR seviye!"),"zor"):t>=.7&&(p>=1||o<4)?(console.log("⬆️ [DIFFICULTY] İyi performans - ORTA seviye!"),"orta"):t>=.8&&o<6?(console.log("🐌 [DIFFICULTY] Yavaş ama başarılı - ORTA seviye!"),"orta"):t<.5||o>8?(console.log("📉 [DIFFICULTY] Zayıf performans - KOLAY seviye!"),"kolay"):(console.log("🎯 [DIFFICULTY] Varsayılan - ORTA seviye!"),"orta")}determineTaskVariety(e){if(e.length===1){const m=e[0];if(m==="sayma")return console.log("🎨 [VARIETY] Özel istek: Sayma oyunu"),"sayma";if(m==="dinamik-tıklama")return console.log("🎨 [VARIETY] Özel istek: Dinamik tıklama oyunu"),"dinamik-tıklama";if(m==="tıklama")return console.log("🎨 [VARIETY] Özel istek: Normal tıklama oyunu"),"renk-tıklama"}const t=e.map(m=>this.analyzeTaskType(m)),o=["renk-tıklama","şekil-tıklama","sayma","bekleme","kombinasyon","dinamik-sayma","dinamik-tıklama","sayı-tıklama"].map(m=>({tip:m,sayi:t.filter(p=>p===m).length})),l=o.filter(m=>m.sayi===Math.min(...o.map(p=>p.sayi))),d=l[Math.floor(Math.random()*l.length)];return console.log("🎨 [VARIETY] Son görevler:",t,"→ Önerilen tip:",d.tip),d.tip}analyzeTaskType(e){const t=e.toLowerCase();if(t.includes("say")||t.includes("count")||t.includes("adet"))return t.includes("tüm")||t.includes("saniye içinde")?"dinamik-sayma":"sayma";if(t.includes("tüm")&&t.includes("tıkla")&&(t.includes("saniye")||t.includes("dakika")))return"dinamik-tıklama";if(t.includes("bekle")||t.includes("wait")||t.includes("sessiz")||t.includes("dur"))return"bekleme";if(["1","2","3","4","5","6","7","8","9"].some(y=>t.includes(y)&&t.includes("tıkla")))return"sayı-tıklama";const l=["kırmızı","mavi","yeşil","sarı","mor","turuncu"],d=["daire","kare","üçgen","yıldız","kalp","elmas"],m=l.some(y=>t.includes(y)),p=d.some(y=>t.includes(y));return m&&p?"kombinasyon":m?"renk-tıklama":p?"şekil-tıklama":"renk-tıklama"}getTaskExamplesForType(e,t){const a={"renk-tıklama":{kolay:['"🔴 Kırmızı butona 2 saniye sonra bas"','"🔵 Mavi daire görünce hemen tıkla"','"🟢 Yeşil rengi gördüğünde bas"'],orta:['"🔴 3 saniye bekle, sonra kırmızı daire tıkla"','"🔵 Mavi renk çıktığında hızlıca bas"','"🟡 Sarı butonu gördüğün anda tıkla"'],zor:['"🔴 Kırmızı hedef çıktığında 1 saniye içinde bas"','"🔵 Mavi objesi belirdiğinde çok hızlı tıkla"','"🟢 Yeşil hedef görünür görünmez bas"']},"şekil-tıklama":{kolay:['"⭐ Yıldızı gördüğünde tıkla"','"🔺 Üçgen çıktığında bas"','"⭕ Daire görünce hemen tıkla"'],orta:['"⭐ Yıldız belirdiğinde 2 saniye içinde bas"','"🔺 Üçgen hedefe odaklan ve tıkla"','"💎 Elmas şeklini gördüğünde bas"'],zor:['"⭐ Yıldız çıktığında anında tıkla"','"🔺 Üçgen hedefini çok hızlı yakala"','"💎 Elmas görünür görünmez bas"']},sayma:{kolay:['"🔵 Mavi karelerin sayısını bul"','"⭐ Yıldızları say"','"🔴 Kırmızı daireleri hesapla"'],orta:['"🟢 Yeşil üçgenleri dikkatli say"','"🔵 Mavi şekillerin toplam sayısını bul"','"⭐ Sarı yıldızları say ve say"'],zor:['"🔺 Hızlı çıkan kırmızı üçgenleri say"','"🟦 Mavi kareleri çabuk hesapla"','"⭐ Parlayan yıldızları hızla say"']},bekleme:{kolay:['"⏰ 3 saniye sessizce bekle"','"🤫 5 saniye hareketsiz dur"','"⏳ 4 saniye sakin ol"'],orta:['"⏰ 6 saniye bekle, sonra başla"','"🧘 8 saniye nefes al ve bekle"','"⏳ 7 saniye odaklan ve dur"'],zor:['"⏰ 10 saniye tam konsantre bekle"','"🧘 12 saniye hiç hareket etme"','"⏳ 15 saniye mükemmel bekleme"']},kombinasyon:{kolay:['"🔴 Kırmızı daireyi tıkla"','"🔵 Mavi üçgeni bul ve bas"','"🟢 Yeşil kareyi hedefle"'],orta:['"🔴 Kırmızı yıldızı 3 saniye sonra tıkla"','"🔵 Mavi kalbi gördüğünde bas"','"🟡 Sarı elmasını yakala"'],zor:['"🔴 Kırmızı üçgeni çok hızlı yakala"','"🔵 Mavi kareyi anında tıkla"','"🟢 Yeşil yıldızı 1 saniyede bas"']},"dinamik-sayma":{kolay:['"15 saniye içinde çıkan mavi daireleri say"','"20 saniye boyunca gelen yıldızları hesapla"','"12 saniye içinde beliren şekilleri say"'],orta:['"25 saniye içinde gelen kırmızı üçgenleri say"','"30 saniye boyunca çıkan mavi kareleri hesapla"','"20 saniye içinde beliren yeşil daireleri say"'],zor:['"35 saniye içinde hızlı çıkan hedefleri say"','"40 saniye boyunca değişken objeleri hesapla"','"30 saniye içinde karışık şekilleri say"']},"dinamik-tıklama":{kolay:['"20 saniye içinde tüm mavi daireleri tıkla"','"25 saniye boyunca çıkan yıldızları yakala"','"15 saniye içinde beliren hedefleri tıkla"'],orta:['"35 saniye içinde tüm kırmızı üçgenleri tıkla"','"40 saniye boyunca gelen mavi kareleri yakala"','"30 saniye içinde çıkan yeşil daireleri tıkla"'],zor:['"50 saniye içinde tüm hızlı hedefleri yakala"','"60 saniye boyunca değişken objeleri tıkla"','"45 saniye içinde karışık hedefleri yakala"']},"sayı-tıklama":{kolay:['"3️⃣ 3 sayısını gördüğünde tıkla"','"5️⃣ 5 rakamına bas"','"2️⃣ 2 sayısını yakala"'],orta:['"7️⃣ 7 rakamını 2 saniye sonra tıkla"','"4️⃣ 4 sayısını hızlıca yakala"','"6️⃣ 6 rakamını gördüğünde bas"'],zor:['"9️⃣ 9 sayısını çok hızlı yakala"','"8️⃣ 8 rakamını anında tıkla"','"1️⃣ 1 sayısını görür görmez bas"']}};return(a[e]?.[t]||a["renk-tıklama"][t]).join(`
`)}buildAttentionSprintPrompt(e,t,a,o){const l=this.formatPerformanceForPrompt(e),d=this.getTaskExamplesForType(o,a);return`ADHD'li 12 yaş çocuk için Dikkat Sprintleri görevi üret. SADECE JSON döndür.

ÖNERİLEN GÖREV TİPİ: ${o} (çeşitlilik için)

TİP BAZLI ÖRNEKLER:
${d}

HEDEF KITLE:
- Yaş: 12 (ortaokul seviyesi)
- ADHD özellik: Kısa dikkat süresi, hiperaktivite, impulse kontrol zorluğu
- Motivasyon: Görsel ödüller, hızlı geri bildirim, başarı hissi

GÖREV KURALLARI:
- Süre: 30-60 saniye (ADHD için kısa)
- Tek odak: Sadece 1 şey yap (çoklu görev yok)
- Net talimat: Basit, anlaşılır komutlar
- Görsel zengin: Renkler, şekiller, emojiler kullan
- Olumlu dil: "Yapma" yerine "Yap" kalıbı
${o==="sayma"?'- ÖNEMLİ: SADECE SAYMA GÖREVİ ÜRETİN! "tıkla", "bas", "yakala" gibi eylemler YOK. Sadece "say", "hesapla", "bul" kullanın.':""}

ZORLUK SEVİYESİ: ${a}

PERFORMANS ÖZETİ:
${l}

ÇIKTI ŞEMASI:
{
  "gorev": string, // ÖRNERİLEN TİPE GÖRE: ${o==="sayma"?'"🔴 Kırmızı daireleri say"':'"3 saniye bekle, sonra 🔴 kırmızı daire tıkla"'}
  "sure_saniye": number, // 30-60 arası
  "ipuclari": [string], // Max 2 ipucu, kısa ve net
  "hedefRenk": string, // Varsa: "kırmızı", "mavi" vs
  "hedefSayi": number, // Varsa: sayma görevi için
  "hedefSekil": string, // Varsa: "daire", "kare" vs
  "dikkatDagitici": number // 0-1 arası (0=yok, 1=maksimum)
}

12 YAŞ İÇİN GÖREV ÖRNEKLERİ (ÖNERİLEN TİP: ${o}):
${o==="sayma"?`- "🔴 Kırmızı daireleri say"
- "🟢 Yeşil kareleri hesapla"
- "⭐ Yıldızların sayısını bul"
- "🔵 Mavi şekilleri say"
- "🟡 Sarı objeleri hesapla"`:`- "🔴 Kırmızı butona 2 saniye sonra bas"
- "🟢 Yeşil kareler sayısını bul"
- "👀 Mavi ⭐ yıldızları takip et"
- "⏰ 5 saniye sessizce bekle"
- "🎯 Ortadaki hedefe odaklan"`}

YAPMA:
- Uzun açıklamalar
- Karmaşık çoklu adımlar
- Olumsuz kelimeler
- Soyut kavramlar`}formatPerformanceForPrompt(e){const{son3Tur:t,basariOrani:a,ortalamaReaksiyonSuresi:o,odaklanmaDurumu:l}=e;return`Son 3 Tur:
${t.map((m,p)=>`Tur ${p+1}: ${m.basari?"Başarılı":"Başarısız"} - ${m.sure}s - ${m.zorluk}`).join(`
`)}

Genel Durum:
- Başarı Oranı: ${Math.round(a*100)}%
- Ortalama Reaksiyon: ${o.toFixed(1)}s
- Odaklanma: ${l}`}async callOllama(e){const o=await fetch("http://localhost:11434/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"hf.co/umutkkgz/Kaira-Turkish-Gemma-9B-T1-GGUF:Q3_K_M",prompt:e,format:"json",stream:!1,options:{temperature:.7,top_p:.9,num_predict:250}})});if(!o.ok)throw new Error(`Ollama API hatası: ${o.status}`);return(await o.json()).response?.trim()||""}parseSprintResponse(e,t){try{const a=JSON.parse(e);if(!a.gorev||typeof a.gorev!="string")throw new Error("Geçersiz görev");const o={id:`sprint_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,gorev:a.gorev,sure_saniye:Math.max(30,Math.min(60,a.sure_saniye||45)),ipuclari:Array.isArray(a.ipuclari)?a.ipuclari.slice(0,2):[],hedefRenk:a.hedefRenk||void 0,hedefSayi:a.hedefSayi||void 0,hedefSekil:a.hedefSekil||void 0,dikkatDagitici:Math.max(0,Math.min(1,a.dikkatDagitici||0)),difficulty:t,hedefTipi:this.determineTargetType(a)},l=this.validateAndCorrectTask(o);return console.log("🔍 [AI TASK] Orijinal görev:",a),console.log("✅ [AI TASK] Düzeltilmiş görev:",l),l}catch(a){throw console.error("Sprint response parse hatası:",a),new Error(`JSON parse hatası: ${a}`)}}getFallbackTask(e,t){const o={kolay:[{gorev:"🔴 Kırmızı butona bas",sure_saniye:30,ipuclari:["Kırmızı rengi ara","Büyük buton olacak"],hedefRenk:"kırmızı",dikkatDagitici:0},{gorev:"⭐ Yıldızları say",sure_saniye:35,ipuclari:["Sarı yıldızları bul","Parmakla işaret et"],hedefSekil:"yıldız",dikkatDagitici:0}],orta:[{gorev:"🟢 Yeşil kareler sayısını bul",sure_saniye:45,ipuclari:["Sadece yeşil olanlar","Sessizce say"],hedefRenk:"yeşil",hedefSekil:"kare",dikkatDagitici:.3},{gorev:"🎯 Ortadaki hedefe 3 saniye odaklan",sure_saniye:40,ipuclari:["Gözlerini hedeften ayırma","Nefes al"],dikkatDagitici:.5}],zor:[{gorev:"🔵 Mavi daireler gözükünce hızla tıkla",sure_saniye:50,ipuclari:["Hazır ol","Hızlı reaksiyon göster"],hedefRenk:"mavi",hedefSekil:"daire",dikkatDagitici:.7},{gorev:"🟡⭐ Sarı yıldızları takip et ve say",sure_saniye:55,ipuclari:["Hareket eden yıldızları takip et","Sayıyı unutma"],hedefRenk:"sarı",hedefSekil:"yıldız",dikkatDagitici:.8}]}[e],l=o[Math.floor(Math.random()*o.length)];return{id:`fallback_sprint_${Date.now()}`,...l,difficulty:e,hedefTipi:l.hedefRenk?"renk":l.hedefSekil?"sekil":l.hedefSayi?"sayi":"genel"}}determineTargetType(e){return e.hedefRenk&&e.hedefSekil||e.hedefRenk?"renk":e.hedefSekil?"sekil":e.hedefSayi?"sayi":"genel"}validateAndCorrectTask(e){const t=e.gorev.toLowerCase(),a=["kırmızı","mavi","yeşil","sarı","mor","turuncu"].find(m=>t.includes(m)),o=["yıldız","daire","kare","üçgen","kalp","elmas"].find(m=>t.includes(m));let l=null;if(t.includes("tane")||t.includes("adet")||t.includes("say")){const m=t.match(/(\d+)\s*(tane|adet|say)/);l=m?parseInt(m[1]):null}else if(t.includes("numar")||t.includes("rakam")){const m=t.match(/(\d+)\s*(numar|rakam)/);l=m?parseInt(m[1]):null}console.log("🔍 [TEXT ANALYSIS]",{görev:e.gorev,detectedColors:a,detectedShapes:o,detectedNumbers:l,originalTask:{hedefRenk:e.hedefRenk,hedefSekil:e.hedefSekil,hedefSayi:e.hedefSayi}});const d={...e};return a&&o?(console.log(`🔧 [TASK FIX] Karma hedef: ${a} ${o}`),d.hedefRenk=a,d.hedefSekil=o,d.hedefSayi=void 0,d.gorev=d.gorev.replace(/\d+/g,"").replace(/\s+/g," ").trim()):a&&!o?(console.log(`🔧 [TASK FIX] Sadece renk: ${a}`),d.hedefRenk=a,d.hedefSekil=void 0,d.hedefSayi=void 0,d.gorev=d.gorev.replace(/\d+/g,"").replace(/\s+/g," ").trim()):o&&!a&&(console.log(`🔧 [TASK FIX] Sadece şekil: ${o}`),d.hedefSekil=o,d.hedefRenk=void 0,d.hedefSayi=void 0,d.gorev=d.gorev.replace(/\d+/g,"").replace(/\s+/g," ").trim()),l&&(!e.hedefSayi||e.hedefSayi!==l)?(console.log(`🔧 [TASK FIX] Sayı düzeltmesi: ${e.hedefSayi} → ${l}`),d.hedefSayi=l,d.hedefRenk=void 0,d.hedefSekil=void 0):e.hedefSayi&&!l&&(a||o)&&(console.log(`🔧 [TASK FIX] Yanlış sayı temizleme: hedefSayi ${e.hedefSayi} silindi`),d.hedefSayi=void 0,d.gorev=d.gorev.replace(/\d+/g,"").replace(/\s+/g," ").trim()),d}evaluateNumberTaskPerformance(e,t){const{ortalamaSayiZorlugu:a,sayiBasariOrani:o,ortalamaReaksiyonSuresiSayi:l,hizliCozumSayisi:d}=e,m=t.filter(x=>x.hedefTipi==="sayi");m[m.length-1];let p=0,y="orta";return d>=2&&l<2?(p=3,y="zor"):o>=.8&&l<4?(p=2,y=a<5?"orta":"zor"):o>=.6&&l<6?(p=1,y="orta"):(o<.5||l>8)&&(p=-1,y="kolay"),{zorlukArtisi:p,onerilen:y}}determineNumberDifficulty(e,t,a){const l=Math.max(1,Math.min(3,(e==="kolay"?1:e==="orta"?2:3)+a)),d={1:{min:1,max:3},2:{min:2,max:5},3:{min:3,max:7},4:{min:5,max:9}};return d[Math.min(4,l)]||d[2]}}const pp=new wD,SD=({studentId:s,studentAge:e=12,difficulty:t,onGameComplete:a,onEmotionDetected:o})=>{console.log("🎯 [AttentionClickGame] Component initialized with props:",{studentId:s,studentAge:e,difficulty:t});const[l,d]=w.useState(null),[m,p]=w.useState("ready"),[y,x]=w.useState(0),[T,A]=w.useState([]),[M,B]=w.useState(0),[L,j]=w.useState(0),[X,W]=w.useState([]),[he]=w.useState(Date.now()),[ue,le]=w.useState(3),[de,V]=w.useState(!1),[C,R]=w.useState(!1),[O,P]=w.useState(!1),[I,N]=w.useState({x:50,y:50}),[ve,_e]=w.useState([]),G=w.useRef(0),ae=w.useRef(!1),te=w.useRef(!1),Y=w.useRef(!1),k=w.useRef(null),J=5;w.useEffect(()=>(!ae.current&&!O&&(ae.current=!0,$()),()=>{k.current&&(clearInterval(k.current),k.current=null)}),[]);const $=w.useCallback(async()=>{if(te.current)return;te.current=!0,P(!0);const ye={son3Tur:[],ortalamaReaksiyonSuresi:2.5,basariOrani:.7,odaklanmaDurumu:"orta"};try{const be=await pp.generateAttentionSprint({performansOzeti:ye,studentAge:e,sonGorevler:["tıklama"]}),st={...be,difficulty:t,gorev:F(be.gorev)};d(st),x(st.sure_saniye)}catch(be){console.error("İlk görev üretme hatası:",be),d(ce())}finally{te.current=!1,P(!1)}},[e,t]),F=ye=>{const be=ye.toLowerCase();if(!be.includes("say")&&!be.includes("count")&&!be.includes("adet")&&!be.includes("tüm")&&!be.includes("hepsi"))return ye;const st=["🔴 Kırmızı","🔵 Mavi","🟢 Yeşil","🟡 Sarı"],Vt=["daire","kare","üçgen","yıldız"],je=st[Math.floor(Math.random()*st.length)],kt=Vt[Math.floor(Math.random()*Vt.length)];return`${je} ${kt}i tıkla`},ce=()=>{const be={kolay:[{gorev:"🔴 Kırmızı daire tıkla",hedefRenk:"kırmızı",hedefSekil:"daire"},{gorev:"🔵 Mavi kare tıkla",hedefRenk:"mavi",hedefSekil:"kare"},{gorev:"🟢 Yeşil yıldız tıkla",hedefRenk:"yeşil",hedefSekil:"yıldız"}],orta:[{gorev:"🔴 Kırmızı üçgen 2 saniye sonra tıkla",hedefRenk:"kırmızı",hedefSekil:"üçgen"},{gorev:"🔵 Mavi daire belirdiğinde tıkla",hedefRenk:"mavi",hedefSekil:"daire"},{gorev:"🟡 Sarı kare gördüğünde bas",hedefRenk:"sarı",hedefSekil:"kare"}],zor:[{gorev:"🔴 Kırmızı yıldız çıktığında hemen tıkla",hedefRenk:"kırmızı",hedefSekil:"yıldız"},{gorev:"🔵 Mavi üçgen görünür görünmez bas",hedefRenk:"mavi",hedefSekil:"üçgen"},{gorev:"🟢 Yeşil daire belirdiğinde anında tıkla",hedefRenk:"yeşil",hedefSekil:"daire"}]}[t],st=be[Math.floor(Math.random()*be.length)];return{id:`click_fallback_${Date.now()}`,...st,sure_saniye:t==="kolay"?30:t==="orta"?40:50,ipuclari:["Hedefe odaklan","Hızlı reaksiyon göster"],dikkatDagitici:t==="kolay"?0:t==="orta"?.3:.5,difficulty:t,hedefTipi:"renk"}},fe=()=>{if(!l)return;p("countdown"),le(3),V(!1),R(!1);const ye=setInterval(()=>{le(be=>be<=1?(clearInterval(ye),pt(),0):be-1)},1e3)},pe=()=>{k.current&&(clearInterval(k.current),k.current=null),G.current=Date.now(),k.current=setInterval(()=>{x(ye=>ye<=1?(k.current&&(clearInterval(k.current),k.current=null),en(!1),0):ye-1)},1e3)},Le=()=>({x:Math.random()*70+15,y:Math.random()*60+20}),Ke=()=>{if(!l)return[];const ye=Math.floor(l.dikkatDagitici*5),be=[];for(let st=0;st<ye;st++){const Vt=Le();let je="shape",kt="⚫";if(l.hedefRenk&&l.hedefSekil){je="combo";const He=l.hedefRenk;let ht=[];He==="mavi"?ht=["🔴","🟢","🟡","🟠","🟣"]:He==="kırmızı"?ht=["🔵","🟢","🟡","🟠","🟣"]:He==="yeşil"?ht=["🔴","🔵","🟡","🟠","🟣"]:He==="sarı"&&(ht=["🔴","🔵","🟢","🟠","🟣"]),kt=ht[Math.floor(Math.random()*ht.length)]||"⚫"}be.push({id:`distractor-${st}`,x:Vt.x,y:Vt.y,type:je,value:kt})}return be},pt=()=>{if(!l)return;p("active"),x(l.sure_saniye),N(Le()),_e(Ke());const ye=Math.random()*2e3+1e3;setTimeout(()=>{V(!0),pe()},ye)},rt=ye=>{if(ye.stopPropagation(),m!=="active"||!de||C)return;R(!0);const be=(Date.now()-G.current)/1e3;en(!0,be)},St=ye=>{if(ye.stopPropagation(),m!=="active"||C)return;const be=(Date.now()-G.current)/1e3;en(!1,be)},wn=()=>{if(m!=="active"||!de||C)return;const ye=(Date.now()-G.current)/1e3;en(!1,ye)},en=(ye,be)=>{if(!l||Y.current)return;Y.current=!0,k.current&&(clearInterval(k.current),k.current=null);const st=be||(Date.now()-G.current)/1e3,Vt={task:l,startTime:G.current,endTime:Date.now(),success:ye,reactionTime:st};if(A(je=>[...je,Vt]),ye){j(kt=>kt+1);const je={emotion:"happy",confidence:.9,timestamp:new Date};W(kt=>[...kt,je]),o?.(je)}else{const je={emotion:"confused",confidence:.7,timestamp:new Date};W(kt=>[...kt,je]),o?.(je)}p("waiting"),setTimeout(()=>{M+1>=J?Hn():(B(je=>je+1),V(!1),R(!1),_e([]),$(),p("ready")),Y.current=!1},2e3)},Hn=()=>{p("completed");const ye=Math.floor((Date.now()-he)/1e3);a(L,ye,X)},Me=()=>{k.current&&(clearInterval(k.current),k.current=null),A([]),B(0),j(0),W([]),p("ready"),V(!1),R(!1),N({x:50,y:50}),_e([]),ae.current=!1,te.current=!1,Y.current=!1,$()};return m==="completed"?u.jsx(Ze,{className:"max-w-2xl mx-auto",children:u.jsxs(We,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:u.jsx(Vn,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dikkat Tıklama Oyunu Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Hızlı reaksiyon becerin gelişiyor!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[L,"/",J]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarılı Tıklama"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(L/J*100),"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[T.length>0?(T.reduce((ye,be)=>ye+be.reactionTime,0)/T.length).toFixed(1):"0.0","s"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Reaksiyon"})]})]})}),u.jsxs(Ct,{onClick:Me,size:"lg",children:[u.jsx(Ei,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx(Ze,{children:u.jsx(We,{children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Tur ",M+1,"/",J]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",L]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rt,{className:"h-4 w-4 text-purple-600"}),u.jsxs("span",{className:"text-xs text-purple-600",children:["Zorluk: ",t]})]})]})})})}),u.jsx(Ze,{children:u.jsx(We,{className:"text-center py-12",children:O?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto"}),u.jsx("p",{className:"text-gray-600",children:"Senin için özel görev hazırlanıyor..."})]}):m==="ready"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:u.jsx(mp,{className:"h-10 w-10 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dikkat Tıklama"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Hızlıca doğru hedefe tıkla ve reaksiyon sürenı geliştir!"}),l&&u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[u.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:"Görevin:"}),u.jsx("p",{className:"text-blue-700",children:l.gorev}),l.ipuclari.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs text-blue-600 font-medium mb-1",children:"İpuçları:"}),l.ipuclari.map((ye,be)=>u.jsxs("p",{className:"text-xs text-blue-600",children:["• ",ye]},be))]})]}),u.jsxs(Ct,{onClick:fe,size:"lg",disabled:!l,children:[u.jsx(Do,{className:"h-5 w-5 mr-2"}),"Başla"]})]}):m==="countdown"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-800",children:"Hazırlan!"}),u.jsx("div",{className:"text-6xl font-bold text-blue-600 animate-bounce",children:ue})]}):m==="active"?u.jsxs("div",{className:"space-y-6 cursor-crosshair",onClick:wn,children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?.gorev}),de&&l&&u.jsxs("div",{className:"relative w-full h-96",children:[ve.map(ye=>u.jsx("button",{onClick:St,className:"absolute w-12 h-12 rounded-full bg-white hover:bg-red-100 transition-colors duration-200 flex items-center justify-center text-2xl shadow-lg border-2 border-gray-300",style:{left:`${ye.x}%`,top:`${ye.y}%`,transform:"translate(-50%, -50%)"},children:ye.value},ye.id)),u.jsxs("button",{onClick:rt,disabled:C,className:`
                      absolute w-12 h-12 rounded-full transition-colors duration-200 flex items-center justify-center text-2xl shadow-lg border-2
                      ${C?"bg-green-100 border-green-400 scale-110":"bg-white hover:bg-green-50 border-blue-400 hover:border-green-400"}
                    `,style:{left:`${I.x}%`,top:`${I.y}%`,transform:"translate(-50%, -50%)"},children:[l.hedefRenk==="kırmızı"&&l.hedefSekil==="daire"&&"🔴",l.hedefRenk==="mavi"&&l.hedefSekil==="daire"&&"🔵",l.hedefRenk==="yeşil"&&l.hedefSekil==="daire"&&"🟢",l.hedefRenk==="sarı"&&l.hedefSekil==="daire"&&"🟡",l.hedefRenk==="kırmızı"&&l.hedefSekil==="kare"&&"🟥",l.hedefRenk==="mavi"&&l.hedefSekil==="kare"&&"🟦",l.hedefRenk==="yeşil"&&l.hedefSekil==="kare"&&"🟩",l.hedefRenk==="sarı"&&l.hedefSekil==="kare"&&"🟨",l.hedefRenk==="kırmızı"&&l.hedefSekil==="üçgen"&&"🔺",l.hedefRenk==="mavi"&&l.hedefSekil==="üçgen"&&"🔹",!l.hedefRenk&&l.hedefSekil==="yıldız"&&"⭐",!l.hedefRenk&&l.hedefSekil==="daire"&&"⭕",!l.hedefSekil&&l.hedefRenk==="kırmızı"&&"🔴",!l.hedefSekil&&l.hedefRenk==="mavi"&&"🔵",!l.hedefSekil&&l.hedefRenk==="yeşil"&&"🟢",!l.hedefSekil&&l.hedefRenk==="sarı"&&"🟡",!l.hedefSekil&&!l.hedefRenk&&!l.hedefSayi&&"🎯"]})]}),!de&&u.jsxs("div",{className:"text-gray-600",children:[u.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-2"}),"Hazırlan..."]}),u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-lg",children:[u.jsx(gr,{className:"h-5 w-5 text-blue-600"}),u.jsxs("span",{className:"font-mono font-bold text-blue-600",children:[y,"s"]})]})]}):m==="waiting"?u.jsxs("div",{className:"space-y-4",children:[T.length>0&&T[T.length-1].success?u.jsxs("div",{className:"text-green-600",children:[u.jsx(Aa,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Harika!"}),u.jsxs("p",{children:["Reaksiyon süresi: ",T[T.length-1].reactionTime.toFixed(2),"s"]})]}):u.jsxs("div",{className:"text-orange-600",children:[u.jsx(Vn,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Bir daha deneyelim!"}),u.jsx("p",{children:"Daha hızlı olmaya çalış"})]}),u.jsx("p",{className:"text-sm text-gray-600",children:"Sonraki görev hazırlanıyor..."})]}):null})})]})},kD=({studentId:s,studentAge:e=12,difficulty:t,onGameComplete:a,onEmotionDetected:o})=>{const[l,d]=w.useState(null),[m,p]=w.useState("ready"),[y,x]=w.useState(0),[T,A]=w.useState([]),[M,B]=w.useState(0),[L,j]=w.useState(0),[X,W]=w.useState([]),[he]=w.useState(Date.now()),[ue,le]=w.useState(3),[de,V]=w.useState(!1),[C,R]=w.useState([]),[O,P]=w.useState(""),[I,N]=w.useState(0),[ve,_e]=w.useState(0),[G,ae]=w.useState(!1),[te,Y]=w.useState(t),[k,J]=w.useState(1),[$,F]=w.useState(()=>t==="kolay"?2:t==="orta"?3:5),[ce,fe]=w.useState([]),pe=w.useRef(0),Le=w.useRef(!1),Ke=w.useRef(!1),pt=w.useRef(!1),rt=w.useRef(null),St=w.useRef(null),wn=5,en=w.useCallback(async()=>{if(Ke.current){console.log("🚫 [DUPLICATE CALL] generateFirstTask already running, skipping");return}console.log("🎬 [TASK GENERATION] Starting task generation"),Ke.current=!0,V(!0);const Te={son3Tur:[],ortalamaReaksiyonSuresi:2.5,basariOrani:.7,odaklanmaDurumu:"orta"};try{const we=await pp.generateAttentionSprint({performansOzeti:Te,studentAge:e,sonGorevler:["sayma"],forcedDifficulty:t}),Ue={...we,difficulty:t,gorev:Hn(we.gorev),hedefRenk:Me(we.gorev)||we.hedefRenk,hedefSekil:ye(we.gorev)||we.hedefSekil,hedefSayi:void 0};console.log("🔢 [COUNT GAME] Generated counting task:",Ue.gorev),d(Ue),x(Ue.sure_saniye)}catch(we){console.error("İlk görev üretme hatası:",we),d(be())}finally{Ke.current=!1,V(!1)}},[e,t]);w.useEffect(()=>(!Le.current&&!de&&(Le.current=!0,en()),()=>{rt.current&&(clearInterval(rt.current),rt.current=null),St.current&&(clearInterval(St.current),St.current=null)}),[en]);const Hn=Te=>{const we=Te.toLowerCase();if(we.includes("say")||we.includes("count")||we.includes("adet")||we.includes("hesapla"))return Te;const Ue=[{turkish:"mavi",emoji:"🔵"},{turkish:"kırmızı",emoji:"🔴"},{turkish:"yeşil",emoji:"🟢"},{turkish:"sarı",emoji:"🟡"}],Be=[{turkish:"daire",emoji:"⭕"},{turkish:"kare",emoji:"⬜"},{turkish:"üçgen",emoji:"🔺"},{turkish:"yıldız",emoji:"⭐"}],dt=Ue[Math.floor(Math.random()*Ue.length)],jt=Be[Math.floor(Math.random()*Be.length)];return`${dt.emoji} ${dt.turkish} ${jt.turkish}leri say`},Me=Te=>["kırmızı","mavi","yeşil","sarı","mor","turuncu"].find(Ue=>Te.toLowerCase().includes(Ue)),ye=Te=>["yıldız","daire","kare","üçgen","kalp","elmas"].find(Ue=>Te.toLowerCase().includes(Ue)),be=()=>{const we={kolay:[{gorev:"🔵 Mavi daireleri say",hedefRenk:"mavi",hedefSekil:"daire"},{gorev:"🟢 Yeşil kareleri say",hedefRenk:"yeşil",hedefSekil:"kare"},{gorev:"⭐ Yıldızları say",hedefSekil:"yıldız"}],orta:[{gorev:"🔴 Kırmızı üçgenleri dikkatli say",hedefRenk:"kırmızı",hedefSekil:"üçgen"},{gorev:"🟡 Sarı daireleri hesapla",hedefRenk:"sarı",hedefSekil:"daire"},{gorev:"🔵 Mavi kareleri hızla say",hedefRenk:"mavi",hedefSekil:"kare"}],zor:[{gorev:"🟢 Hızlı çıkan yeşil yıldızları say",hedefRenk:"yeşil",hedefSekil:"yıldız"},{gorev:"🔴 Karışık kırmızı daireleri hesapla",hedefRenk:"kırmızı",hedefSekil:"daire"},{gorev:"🔵 Parlayan mavi üçgenleri say",hedefRenk:"mavi",hedefSekil:"üçgen"}]}[t],Ue=we[Math.floor(Math.random()*we.length)];return{id:`count_fallback_${Date.now()}`,...Ue,sure_saniye:t==="kolay"?20:t==="orta"?25:30,ipuclari:["Dikkatli say","Unutma sayıları"],dikkatDagitici:t==="kolay"?.2:t==="orta"?.4:.6,difficulty:t,hedefTipi:"renk"}},st=Te=>{if(ce.length<1)return Te;const we=ce.slice(-3),Ue=we.filter($e=>$e.correct).length,Be=we.reduce(($e,Tt)=>$e+Tt.accuracy,0)/we.length;let dt=k;console.log("⏱️ [GAME DURATION] Analiz:",{recent3Count:we.length,correctCount:Ue,avgAccuracy:Be.toFixed(2),currentMultiplier:k.toFixed(2),baseDuration:Te}),we.length<2?console.log("⏸️ [DURATION] Henüz yeterli veri yok - süre sabit kalıyor"):Be>.9?(dt=Math.min(1.5,k+.2),console.log("⬆️ [DURATION] Mükemmel performans - oyunu uzatıyorum!")):Be>.8?(dt=Math.min(1.3,k+.1),console.log("↗️ [DURATION] İyi performans - hafif uzatıyorum")):Be>.6?console.log("➡️ [DURATION] Dengeli performans - süre sabit"):Be<.5?(dt=Math.max(.7,k-.1),console.log("⬇️ [DURATION] Zayıf performans - oyunu kısaltıyorum")):Be<.3&&(dt=Math.max(.6,k-.2),console.log("↘️ [DURATION] Çok kötü performans - fazla kısaltıyorum")),J(dt);const jt=Math.round(Te*dt);if(we.length>=2){const $e={kolay:2,orta:3,zor:5};let Tt=$;Be>.9?(Tt=Math.min($e[t]+2,t==="zor"?6:4),console.log("⬆️ [MAX OBJECTS] Mükemmel performans - daha fazla obje!")):Be>.8?(Tt=Math.min($e[t]+1,t==="zor"?6:4),console.log("↗️ [MAX OBJECTS] İyi performans - obje sayısı artırıldı")):Be<.5?(Tt=Math.max($e[t]-1,2),console.log("⬇️ [MAX OBJECTS] Zayıf performans - obje sayısı azaltıldı")):(Tt=$e[t],console.log("➡️ [MAX OBJECTS] Normal performans - varsayılan obje sayısı")),Tt!==$&&(console.log("🎯 [MAX OBJECTS] Ayarlandı:",{difficulty:t,oldMax:$,newMax:Tt,avgAccuracy:Be.toFixed(2)}),F(Tt))}return console.log("🎯 [DURATION] Süre ayarlandı:",{baseDuration:Te,multiplier:dt.toFixed(2),adjustedDuration:jt}),jt},Vt=(Te,we)=>{const Ue=st(we),dt=Math.max((Ue-5)*1e3,1e4),jt={kolay:{totalObjectsRatio:4,targetCountRatio:8,spawnInterval:3e3,objectLifespan:6e3,persistanceChance:0},orta:{totalObjectsRatio:3,targetCountRatio:6,spawnInterval:2500,objectLifespan:5e3,persistanceChance:.35},zor:{totalObjectsRatio:2,targetCountRatio:4,spawnInterval:2e3,objectLifespan:4e3,persistanceChance:.7}},$e=jt[Te]||jt.orta,Tt={totalObjects:Math.ceil(Ue/$e.totalObjectsRatio),targetCount:Math.ceil(Ue/$e.targetCountRatio),spawnInterval:$e.spawnInterval,objectLifespan:$e.objectLifespan,spawnDuration:dt,persistanceChance:$e.persistanceChance,adjustedGameDuration:Ue};return console.log("🎮 [PARAMS] Süre bazlı parametreler:",{baseParams:$e,baseDurationSeconds:we,adjustedGameDuration:Ue,durationMultiplier:k.toFixed(2),adjustedParams:Tt}),Tt},je=()=>{if(!l)return;p("countdown"),le(3);const Te=setInterval(()=>{le(we=>we<=1?(clearInterval(Te),pr(),0):we-1)},1e3)},kt=()=>{rt.current&&(clearInterval(rt.current),rt.current=null),pe.current=Date.now(),rt.current=setInterval(()=>{x(Te=>Te<=1?(rt.current&&(clearInterval(rt.current),rt.current=null),at(!1),0):(Te===6&&(ae(!0),console.log("⏰ [COUNTING] Son 5 saniye! Cevabını hazırla.")),Te-1))},1e3)},He=()=>({x:Math.random()*70+15,y:Math.random()*60+20}),ht=()=>{if(!l)return;St.current&&(console.log("🚫 [DUPLICATE SPAWN] Spawn already running, clearing previous"),clearInterval(St.current),St.current=null),console.log("🎬 [SPAWN START] Starting counting spawn");const Te=Vt(t,l.sure_saniye);let we=0,Ue=0;console.log("🔢 [COUNTING SPAWN] Parametreler:",{gameDuration:l.sure_saniye,totalObjects:Te.totalObjects,targetCount:Te.targetCount,spawnDuration:Te.spawnDuration,spawnInterval:Te.spawnInterval,persistanceChance:Te.persistanceChance,answerTime:"5 saniye (son kısım)"}),N(0),_e(Date.now()),St.current=setInterval(()=>{if(we>=Te.totalObjects){clearInterval(St.current),St.current=null;return}R($e=>{let Tt=$e,ot=0;return t==="kolay"?(Tt=$e.filter(cn=>{const ft=Math.random()<.3;return!ft&&cn.isTarget&&ot++,ft}),ot>0&&console.log("🔄 [KOLAY MOD] Bazı eski objeler kaldırılıyor:",ot,"(sayım değişmiyor)")):(Tt=$e.filter(cn=>{const ft=Math.random()<Te.persistanceChance;return!ft&&cn.isTarget&&ot++,ft}),ot>0&&console.log(`🔄 [${t.toUpperCase()} MOD] Rastgele objeler kaldırılıyor:`,ot,"(sayım değişmiyor)")),Tt});let Be=1;if(t==="orta")Math.random()<.2&&(Be=2,console.log("🎲 [ORTA MOD] Çoklu spawn! 2 obje birden"));else if(t==="zor"){const $e=Math.random();$e<.05?(Be=3,console.log("🎲 [ZOR MOD] Süper spawn! 3 obje birden")):$e<.2&&(Be=2,console.log("🎲 [ZOR MOD] Çoklu spawn! 2 obje birden"))}const dt=C.length,jt=$-dt;if(Be=Math.min(Be,jt),Be<=0){console.log("🚫 [MAX LIMIT] Maksimum obje sayısına ulaşıldı:",$,"spawn bekliyor");return}console.log(`🎯 [SPAWN COUNT] ${Be} obje spawn edilecek (maks: ${$}, mevcut: ${dt})`);for(let $e=0;$e<Be;$e++){const ot=Ue<Te.targetCount&&(Math.random()<.4||we>=Te.totalObjects-(Te.targetCount-Ue));ot&&(Ue++,N(yt=>yt+1));const cn=He();let ft="";if(l?.hedefRenk&&l?.hedefSekil)if(ot)l.hedefRenk==="yeşil"&&l.hedefSekil==="daire"?ft="🟢":l.hedefRenk==="yeşil"&&l.hedefSekil==="kare"?ft="🟩":l.hedefRenk==="sarı"&&l.hedefSekil==="daire"?ft="🟡":l.hedefRenk==="sarı"&&l.hedefSekil==="kare"?ft="🟨":l.hedefRenk==="mavi"&&l.hedefSekil==="üçgen"?ft="🔹":l.hedefRenk==="kırmızı"&&l.hedefSekil==="daire"?ft="🔴":l.hedefRenk==="kırmızı"&&l.hedefSekil==="kare"?ft="🟥":l.hedefRenk==="mavi"&&l.hedefSekil==="daire"?ft="🔵":l.hedefRenk==="mavi"&&l.hedefSekil==="kare"?ft="🟦":ft="🔴";else{const yt=l.hedefRenk;let Bt=[];yt==="mavi"?Bt=["🔴","🟢","🟡","🟣","🟠"]:yt==="kırmızı"?Bt=["🔵","🟢","🟡","🟣","🟠"]:yt==="yeşil"?Bt=["🔴","🔵","🟡","🟣","🟠"]:yt==="sarı"?Bt=["🔴","🔵","🟢","🟣","🟠"]:Bt=["🔴","🔵","🟢","🟡"],ft=Bt[Math.floor(Math.random()*Bt.length)]}else if(l?.hedefRenk){const yt={kırmızı:"🔴",mavi:"🔵",yeşil:"🟢",sarı:"🟡",mor:"🟣",turuncu:"🟠"};if(ot)ft=yt[l.hedefRenk]||"🟢";else{const Bt=Object.values(yt).filter(Sn=>Sn!==yt[l.hedefRenk]);ft=Bt[Math.floor(Math.random()*Bt.length)]}}else if(l?.hedefSekil){const yt={yıldız:"⭐",daire:"⭕",kare:"⬜",üçgen:"🔺",kalp:"❤️",elmas:"💎"};if(ot)ft=yt[l.hedefSekil]||"🔺";else{const Bt=Object.values(yt).filter(Sn=>Sn!==yt[l.hedefSekil]);ft=Bt[Math.floor(Math.random()*Bt.length)]}}const Gn={id:`counting-${Date.now()}-${Math.random()}-${$e}`,x:cn.x,y:cn.y,value:ft,isTarget:ot,createdAt:Date.now(),lifespan:Te.objectLifespan};R(yt=>[...yt,Gn]),console.log("➕ [SPAWN]",{spawnIndex:$e+1,spawnTotal:Be,isTarget:ot,value:ft,targetSpawnedCount:Ue,totalTargetCountCurrent:I,spawnedCount:we+1,totalObjects:Te.totalObjects}),setTimeout(()=>{R(yt=>{const Bt=yt.filter(Sn=>Sn.id!==Gn.id);return Gn.isTarget&&console.log("⏱️ [LIFESPAN END] Hedef obje yaşam süresi bitti, ekrandan kaldırılıyor (sayım değişmiyor)"),Bt})},Te.objectLifespan)}we+=Be},Te.spawnInterval),setTimeout(()=>{St.current&&(clearInterval(St.current),St.current=null,console.log("⏹️ [SPAWN END] Spawn duration ended, clearing interval"))},Te.spawnDuration)},pr=()=>{if(!l)return;const we=Vt(t,l.sure_saniye).adjustedGameDuration;p("active"),x(we),P(""),ae(!1),console.log("🚀 [GAME START] Oyun başlıyor:",{originalDuration:l.sure_saniye,adjustedDuration:we,answerTime:5}),ht(),kt()},wi=Te=>{if(Te.preventDefault(),O.trim()==="")return;const we=parseInt(O),Ue=we===I,Be=(Date.now()-pe.current)/1e3;console.log("🔢 [COUNTING RESULT]",{userAnswer:we,correctAnswer:I,isCorrect:Ue,reactionTime:Be,currentObjectsOnScreen:C.length,targetObjectsOnScreen:C.filter(dt=>dt.isTarget).length}),at(Ue,Be,we)},It=Te=>{const we=Te.target.value;(we===""||/^\d+$/.test(we))&&P(we)},at=(Te,we,Ue)=>{if(!l||pt.current)return;pt.current=!0,rt.current&&(clearInterval(rt.current),rt.current=null);const Be=we||(Date.now()-pe.current)/1e3,dt=Ue||parseInt(O)||0,jt=I>0?Math.max(0,1-Math.abs(dt-I)/I):0,$e={correct:Te,accuracy:jt,round:M+1};fe(ot=>[...ot.slice(-4),$e]),console.log("📈 [PERFORMANCE] Yeni kayıt:",{round:M+1,correct:Te,accuracy:jt.toFixed(2),userAnswer:dt,correctAnswer:I,currentDurationMultiplier:k.toFixed(2)});const Tt={task:l,startTime:pe.current,endTime:Date.now(),success:Te,reactionTime:Be,userAnswer:dt,correctAnswer:I};if(A(ot=>[...ot,Tt]),Te){j(cn=>cn+1);const ot={emotion:"happy",confidence:.9,timestamp:new Date};W(cn=>[...cn,ot]),o?.(ot)}else{const ot={emotion:"confused",confidence:.7,timestamp:new Date};W(cn=>[...cn,ot]),o?.(ot)}p("waiting"),setTimeout(()=>{M+1>=wn?In():(B(ot=>ot+1),R([]),P(""),N(0),_e(0),en(),p("ready")),pt.current=!1},2e3)},In=()=>{p("completed");const Te=Math.floor((Date.now()-he)/1e3);a(L,Te,X)},ln=()=>{rt.current&&(clearInterval(rt.current),rt.current=null),A([]),B(0),j(0),W([]),p("ready"),R([]),P(""),N(0),_e(0),Y(t),J(1),fe([]),Le.current=!1,Ke.current=!1,pt.current=!1,en()};return m==="completed"?u.jsx(Ze,{className:"max-w-2xl mx-auto",children:u.jsxs(We,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:u.jsx(Vn,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dikkat Sayma Oyunu Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Sayma becerin gelişiyor!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[L,"/",wn]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Doğru Sayım"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(L/wn*100),"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[T.length>0?(T.reduce((Te,we)=>Te+we.reactionTime,0)/T.length).toFixed(1):"0.0","s"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Süre"})]})]})}),u.jsxs(Ct,{onClick:ln,size:"lg",children:[u.jsx(Ei,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx(Ze,{children:u.jsx(We,{children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Tur ",M+1,"/",wn]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",L]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rt,{className:"h-4 w-4 text-purple-600"}),u.jsxs("span",{className:"text-xs text-purple-600",children:["Zorluk: ",t,k!==1&&u.jsxs("span",{className:"ml-1 text-xs bg-purple-100 px-1 rounded",children:["⏱️ ",k>1?"⬆️":"⬇️"," ",k.toFixed(1),"x"]})]})]})]})})})}),u.jsx(Ze,{children:u.jsx(We,{className:"text-center py-12",children:de?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-green-500 border-t-transparent rounded-full animate-spin mx-auto"}),u.jsx("p",{className:"text-gray-600",children:"Senin için özel sayma görevi hazırlanıyor..."})]}):m==="ready"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center",children:u.jsx(mp,{className:"h-10 w-10 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dikkat Sayma"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Beliren objeleri dikkatli şekilde say ve konsantrasyonunu geliştir!"}),l&&u.jsxs("div",{className:"bg-green-50 rounded-lg p-4 mb-6",children:[u.jsx("h3",{className:"font-medium text-green-800 mb-2",children:"Görevin:"}),u.jsx("p",{className:"text-green-700",children:l.gorev}),l.ipuclari.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs text-green-600 font-medium mb-1",children:"İpuçları:"}),l.ipuclari.map((Te,we)=>u.jsxs("p",{className:"text-xs text-green-600",children:["• ",Te]},we))]})]}),u.jsxs(Ct,{onClick:je,size:"lg",disabled:!l,children:[u.jsx(Do,{className:"h-5 w-5 mr-2"}),"Başla"]})]}):m==="countdown"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-800",children:"Hazırlan!"}),u.jsx("div",{className:"text-6xl font-bold text-green-600 animate-bounce",children:ue})]}):m==="active"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?.gorev}),u.jsx("div",{className:"relative w-full h-96 bg-gray-50 rounded-lg overflow-hidden",children:C.map(Te=>u.jsx("div",{className:"absolute w-8 h-8 text-2xl animate-bounce transition-all duration-500",style:{left:`${Te.x}%`,top:`${Te.y}%`,transform:"translate(-50%, -50%)",animationDuration:`${1+Math.random()}s`},children:Te.value},Te.id))}),u.jsx("form",{onSubmit:wi,className:"space-y-4",children:u.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[u.jsx("label",{className:"text-lg font-medium",children:"Toplam:"}),u.jsx("input",{type:"text",value:O,onChange:It,className:"w-20 h-12 text-center text-xl font-bold border-2 border-green-400 rounded-lg focus:outline-none focus:border-green-600",placeholder:"0",maxLength:2}),u.jsx("button",{type:"submit",disabled:O.trim()==="",className:"px-6 py-2 bg-green-500 text-white rounded-lg font-medium hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Gönder"})]})}),u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-lg",children:[u.jsx(gr,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"font-mono font-bold text-green-600",children:[y,"s"]})]}),G&&u.jsxs("div",{className:"bg-orange-100 border-2 border-orange-300 rounded-lg p-4 animate-pulse",children:[u.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[u.jsx(gr,{className:"h-5 w-5 text-orange-600 animate-spin"}),u.jsxs("p",{className:"text-orange-700 font-bold text-lg",children:["⏰ Son ",y," saniye! Cevabını yaz ve gönder!"]})]}),u.jsx("p",{className:"text-orange-600 text-sm mt-2",children:"Objeler artık çıkmıyor, şimdi sayını gir"})]})]}):m==="waiting"?u.jsxs("div",{className:"space-y-4",children:[T.length>0&&T[T.length-1].success?u.jsxs("div",{className:"text-green-600",children:[u.jsx(Aa,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Mükemmel!"}),u.jsxs("p",{children:["Doğru cevap: ",T[T.length-1].correctAnswer]}),u.jsxs("p",{children:["Senin cevabın: ",T[T.length-1].userAnswer]})]}):u.jsxs("div",{className:"text-orange-600",children:[u.jsx(Vn,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Bir daha deneyelim!"}),T.length>0&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Doğru cevap: ",T[T.length-1].correctAnswer]}),u.jsxs("p",{children:["Senin cevabın: ",T[T.length-1].userAnswer]})]})]}),u.jsx("p",{className:"text-sm text-gray-600",children:"Sonraki görev hazırlanıyor..."})]}):null})})]})},AD=()=>u.jsx("span",{children:"❌"}),ND=({studentId:s,studentAge:e=12,difficulty:t,onGameComplete:a,onEmotionDetected:o})=>{const[l,d]=w.useState(null),[m,p]=w.useState("ready"),[y,x]=w.useState(0),[T,A]=w.useState([]),[M,B]=w.useState(0),[L,j]=w.useState(0),[X,W]=w.useState([]),[he]=w.useState(Date.now()),[ue,le]=w.useState(3),[de,V]=w.useState(!1),[C,R]=w.useState([]),[O,P]=w.useState(0),[I,N]=w.useState(0),[ve,_e]=w.useState(0),G=w.useRef(0),ae=w.useRef(!1),te=w.useRef(!1),Y=w.useRef(!1),k=w.useRef(null),J=5;w.useEffect(()=>(!ae.current&&!de&&(ae.current=!0,$()),()=>{k.current&&(clearInterval(k.current),k.current=null)}),[]);const $=w.useCallback(async()=>{if(te.current)return;te.current=!0,V(!0);const Me={son3Tur:[],ortalamaReaksiyonSuresi:2.5,basariOrani:.7,odaklanmaDurumu:"orta"};try{const ye=await pp.generateAttentionSprint({performansOzeti:Me,studentAge:e,sonGorevler:["dinamik-tıklama"]}),be={...ye,difficulty:t,gorev:F(ye.gorev),sure_saniye:t==="kolay"?20:t==="orta"?30:40};d(be),x(be.sure_saniye)}catch(ye){console.error("İlk görev üretme hatası:",ye),d(ce())}finally{te.current=!1,V(!1)}},[e,t]),F=Me=>{const ye=Me.toLowerCase();if(ye.includes("tüm")&&ye.includes("tıkla")||ye.includes("hepsi")&&ye.includes("tıkla")||ye.includes("içinde")&&ye.includes("tıkla")&&ye.includes("saniye"))return Me;const be=[{turkish:"mavi",emoji:"🔵"},{turkish:"kırmızı",emoji:"🔴"},{turkish:"yeşil",emoji:"🟢"},{turkish:"sarı",emoji:"🟡"}],st=[{turkish:"daire",emoji:"⭕"},{turkish:"kare",emoji:"⬜"},{turkish:"üçgen",emoji:"🔺"},{turkish:"yıldız",emoji:"⭐"}],Vt=be[Math.floor(Math.random()*be.length)],je=st[Math.floor(Math.random()*st.length)];return`${t==="kolay"?"20 saniye":t==="orta"?"30 saniye":"40 saniye"} içinde tüm ${Vt.emoji} ${Vt.turkish} ${je.turkish}leri tıkla`},ce=()=>{const ye={kolay:[{gorev:"20 saniye içinde tüm mavi daireleri tıkla",hedefRenk:"mavi",hedefSekil:"daire",sure:20},{gorev:"20 saniye içinde tüm yeşil kareleri yakala",hedefRenk:"yeşil",hedefSekil:"kare",sure:20},{gorev:"20 saniye içinde tüm sarı yıldızları tıkla",hedefRenk:"sarı",hedefSekil:"yıldız",sure:20}],orta:[{gorev:"30 saniye içinde tüm kırmızı üçgenleri tıkla",hedefRenk:"kırmızı",hedefSekil:"üçgen",sure:30},{gorev:"30 saniye içinde tüm mavi kareleri yakala",hedefRenk:"mavi",hedefSekil:"kare",sure:30},{gorev:"30 saniye içinde tüm yeşil daireleri tıkla",hedefRenk:"yeşil",hedefSekil:"daire",sure:30}],zor:[{gorev:"40 saniye içinde tüm hızlı hedefleri yakala",hedefRenk:"kırmızı",hedefSekil:"yıldız",sure:40},{gorev:"40 saniye içinde tüm mavi üçgenleri tıkla",hedefRenk:"mavi",hedefSekil:"üçgen",sure:40},{gorev:"40 saniye içinde tüm karışık hedefleri yakala",hedefRenk:"yeşil",hedefSekil:"kare",sure:40}]}[t],be=ye[Math.floor(Math.random()*ye.length)];return{id:`dynamic_fallback_${Date.now()}`,...be,sure_saniye:be.sure,ipuclari:["Hızlı ol","Doğru hedefleri seç"],dikkatDagitici:t==="kolay"?.3:t==="orta"?.5:.7,difficulty:t,hedefTipi:"renk"}},fe=Me=>{switch(Me){case"kolay":return{spawnInterval:3e3,objectLifespan:6e3,targetRatio:.7};case"orta":return{spawnInterval:2500,objectLifespan:5e3,targetRatio:.6};case"zor":return{spawnInterval:2e3,objectLifespan:4e3,targetRatio:.5};default:return{spawnInterval:2500,objectLifespan:5e3,targetRatio:.6}}},pe=()=>{if(!l)return;p("countdown"),le(3);const Me=setInterval(()=>{le(ye=>ye<=1?(clearInterval(Me),rt(),0):ye-1)},1e3)},Le=()=>{k.current&&(clearInterval(k.current),k.current=null),G.current=Date.now(),k.current=setInterval(()=>{x(Me=>Me<=1?(k.current&&(clearInterval(k.current),k.current=null),wn(),0):Me-1)},1e3)},Ke=()=>({x:Math.random()*70+15,y:Math.random()*60+20}),pt=()=>{const Me=fe(t);let ye;P(0),N(0),_e(0);const be=()=>{const st=Math.random()<Me.targetRatio,Vt=Ke();let je="";if(l?.hedefRenk&&l?.hedefSekil)if(st)l.hedefRenk==="mavi"&&l.hedefSekil==="üçgen"?je="🔹":l.hedefRenk==="yeşil"&&l.hedefSekil==="daire"?je="🟢":l.hedefRenk==="kırmızı"&&l.hedefSekil==="daire"?je="🔴":l.hedefRenk==="mavi"&&l.hedefSekil==="daire"?je="🔵":l.hedefRenk==="sarı"&&l.hedefSekil==="daire"?je="🟡":l.hedefRenk==="kırmızı"&&l.hedefSekil==="üçgen"?je="🔺":l.hedefRenk==="kırmızı"&&l.hedefSekil==="kare"?je="🟥":l.hedefRenk==="mavi"&&l.hedefSekil==="kare"?je="🟦":l.hedefRenk==="yeşil"&&l.hedefSekil==="kare"?je="🟩":l.hedefRenk==="sarı"&&l.hedefSekil==="yıldız"?je="⭐":je="🔴";else{const He=["🔴","🔵","🟢","🟡","🟣","🟠","⭐","⭕","⬜","🔺","💎"];je=He[Math.floor(Math.random()*He.length)]}else if(l?.hedefRenk){const He={kırmızı:"🔴",mavi:"🔵",yeşil:"🟢",sarı:"🟡",mor:"🟣",turuncu:"🟠"};if(st)je=He[l.hedefRenk]||"🔵";else{const ht=Object.values(He).filter(pr=>pr!==He[l.hedefRenk]);je=ht[Math.floor(Math.random()*ht.length)]}}else if(l?.hedefSekil){const He={yıldız:"⭐",daire:"⭕",kare:"⬜",üçgen:"🔺",kalp:"❤️",elmas:"💎"};if(st)je=He[l.hedefSekil]||"🔺";else{const ht=Object.values(He).filter(pr=>pr!==He[l.hedefSekil]);je=ht[Math.floor(Math.random()*ht.length)]}}const kt={id:`clicking-${Date.now()}-${Math.random()}`,x:Vt.x,y:Vt.y,value:je,isTarget:st,createdAt:Date.now(),lifespan:Me.objectLifespan};R(He=>[...He,kt]),_e(He=>He+1),setTimeout(()=>{R(He=>He.filter(ht=>ht.id!==kt.id))},Me.objectLifespan)};be(),ye=setInterval(be,Me.spawnInterval),setTimeout(()=>{clearInterval(ye)},(l?.sure_saniye||30)*1e3)},rt=()=>{l&&(p("active"),x(l.sure_saniye),P(0),N(0),_e(0),pt(),Le())},St=(Me,ye)=>{R(be=>be.filter(st=>st.id!==Me)),ye?(P(be=>be+1),console.log("✅ [CLICKING] Doğru tıklama!")):(N(be=>be+1),console.log("❌ [CLICKING] Yanlış tıklama!"))},wn=(Me,ye)=>{if(!l||Y.current)return;Y.current=!0,k.current&&(clearInterval(k.current),k.current=null);const be=(Date.now()-G.current)/1e3,st=O+I,je=(st>0?O/st:0)>=.5&&st>=3,kt={task:l,startTime:G.current,endTime:Date.now(),success:je,reactionTime:be,correctClicks:O,wrongClicks:I,totalSpawned:ve};if(A(He=>[...He,kt]),je){j(ht=>ht+1);const He={emotion:"happy",confidence:.9,timestamp:new Date};W(ht=>[...ht,He]),o?.(He)}else{const He={emotion:"confused",confidence:.7,timestamp:new Date};W(ht=>[...ht,He]),o?.(He)}p("waiting"),setTimeout(()=>{M+1>=J?en():(B(He=>He+1),R([]),P(0),N(0),_e(0),$(),p("ready")),Y.current=!1},2e3)},en=()=>{p("completed");const Me=Math.floor((Date.now()-he)/1e3);a(L,Me,X)},Hn=()=>{k.current&&(clearInterval(k.current),k.current=null),A([]),B(0),j(0),W([]),p("ready"),R([]),P(0),N(0),_e(0),ae.current=!1,te.current=!1,Y.current=!1,$()};return m==="completed"?u.jsx(Ze,{className:"max-w-2xl mx-auto",children:u.jsxs(We,{className:"text-center py-12",children:[u.jsxs("div",{className:"mb-6",children:[u.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:u.jsx(Vn,{className:"h-12 w-12 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Dinamik Dikkat Oyunu Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Hızlı karar verme becerin gelişiyor!"})]}),u.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:u.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[L,"/",J]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarılı Tur"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Math.round(L/J*100),"%"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Başarı Oranı"})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:T.length>0?Math.round(T.reduce((Me,ye)=>Me+ye.correctClicks,0)/T.length):0}),u.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Doğru Tıklama"})]})]})}),u.jsxs(Ct,{onClick:Hn,size:"lg",children:[u.jsx(Ei,{className:"h-5 w-5 mr-2"}),"Tekrar Oyna"]})]})}):u.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[u.jsx(Ze,{children:u.jsx(We,{children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Tur ",M+1,"/",J]}),u.jsxs("div",{className:"text-sm font-medium text-gray-800",children:["Skor: ",L]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rt,{className:"h-4 w-4 text-purple-600"}),u.jsxs("span",{className:"text-xs text-purple-600",children:["Zorluk: ",t]})]})]})})})}),u.jsx(Ze,{children:u.jsx(We,{className:"text-center py-12",children:de?u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto"}),u.jsx("p",{className:"text-gray-600",children:"Senin için özel dinamik görev hazırlanıyor..."})]}):m==="ready"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:u.jsx(mp,{className:"h-10 w-10 text-white"})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dinamik Dikkat"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Sürekli çıkan hedefleri hızlıca yakala ve reflexlerini geliştir!"}),l&&u.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 mb-6",children:[u.jsx("h3",{className:"font-medium text-purple-800 mb-2",children:"Görevin:"}),u.jsx("p",{className:"text-purple-700",children:l.gorev}),l.ipuclari.length>0&&u.jsxs("div",{className:"mt-3",children:[u.jsx("p",{className:"text-xs text-purple-600 font-medium mb-1",children:"İpuçları:"}),l.ipuclari.map((Me,ye)=>u.jsxs("p",{className:"text-xs text-purple-600",children:["• ",Me]},ye))]})]}),u.jsxs(Ct,{onClick:pe,size:"lg",disabled:!l,children:[u.jsx(Do,{className:"h-5 w-5 mr-2"}),"Başla"]})]}):m==="countdown"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-4xl font-bold text-gray-800",children:"Hazırlan!"}),u.jsx("div",{className:"text-6xl font-bold text-purple-600 animate-bounce",children:ue})]}):m==="active"?u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:l?.gorev}),u.jsx("div",{className:"relative w-full h-96 bg-gray-50 rounded-lg overflow-hidden",children:C.map(Me=>u.jsx("button",{onClick:()=>St(Me.id,Me.isTarget),className:`
                      absolute w-12 h-12 rounded-full transition-all duration-300 flex items-center justify-center text-2xl shadow-lg border-2
                      ${Me.isTarget?"bg-green-50 border-green-300 hover:bg-green-100 hover:scale-110":"bg-red-50 border-red-300 hover:bg-red-100"}
                      animate-bounce
                    `,style:{left:`${Me.x}%`,top:`${Me.y}%`,transform:"translate(-50%, -50%)",animationDuration:`${.8+Math.random()*.4}s`},children:Me.value},Me.id))}),u.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-green-600",children:[u.jsx(Aa,{className:"h-5 w-5"}),u.jsxs("span",{className:"text-lg font-bold",children:["Doğru: ",O]})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-red-600",children:[u.jsx(AD,{className:"h-5 w-5"}),u.jsxs("span",{className:"text-lg font-bold",children:["Yanlış: ",I]})]}),u.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[u.jsx(Vn,{className:"h-5 w-5"}),u.jsxs("span",{className:"text-lg font-bold",children:["Toplam Çıkan: ",ve]})]})]}),u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-lg",children:[u.jsx(gr,{className:"h-5 w-5 text-purple-600"}),u.jsxs("span",{className:"font-mono font-bold text-purple-600",children:[y,"s"]})]})]}):m==="waiting"?u.jsxs("div",{className:"space-y-4",children:[T.length>0&&T[T.length-1].success?u.jsxs("div",{className:"text-green-600",children:[u.jsx(Aa,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Mükemmel!"}),u.jsxs("p",{children:["Doğru: ",T[T.length-1].correctClicks,", Yanlış: ",T[T.length-1].wrongClicks]}),u.jsxs("p",{children:["Doğruluk: ",Math.round(T[T.length-1].correctClicks/Math.max(1,T[T.length-1].correctClicks+T[T.length-1].wrongClicks)*100),"%"]})]}):u.jsxs("div",{className:"text-orange-600",children:[u.jsx(Vn,{className:"h-12 w-12 mx-auto mb-2"}),u.jsx("h3",{className:"text-xl font-bold",children:"Daha iyi yapabilirsin!"}),T.length>0&&u.jsxs(u.Fragment,{children:[u.jsxs("p",{children:["Doğru: ",T[T.length-1].correctClicks,", Yanlış: ",T[T.length-1].wrongClicks]}),u.jsx("p",{children:"Daha dikkatli olmaya çalış"})]})]}),u.jsx("p",{className:"text-sm text-gray-600",children:"Sonraki görev hazırlanıyor..."})]}):null})})]})};class RD{constructor(){this.modelName="hf.co/umutkkgz/Kaira-Turkish-Gemma-9B-T1-GGUF:Q3_K_M"}async getAdaptiveDifficulty(e){const t=this.buildDifficultyPrompt(e);try{const a=await this.callOllama(t),o=this.parseAIResponse(a);return console.log("🤖 AI Zorluk Önerisi:",o),o}catch(a){return console.error("❌ AI Zorluk Analizi hatası:",a),this.getFallbackDifficulty(e)}}buildDifficultyPrompt(e){const t=e.totalAttempts>0?e.correctAttempts/e.totalAttempts*100:0,a=this.analyzeErrorPatterns(e.recentErrors);return`Sen ADHD çocukları için uzmanlaşmış bir eğitim oyunu AI'ısın. Çatışma (Stroop) oyununda bir öğrencinin performansını analiz edip, ona en uygun zorluk seviyesini belirlemen gerekiyor.

ÖĞRENCİ PERFORMANS VERİLERİ:
- Doğruluk oranı: %${t.toFixed(1)}
- Toplam deneme: ${e.totalAttempts}
- Doğru cevap: ${e.correctAttempts}
- Ortalama reaksiyon süresi: ${e.averageReactionTime}ms
- Güncel seri: ${e.streakCounter} doğru
- En iyi seri: ${e.bestStreak} doğru
- Oyun süresi: ${Math.floor(e.timeSpent/1e3)} saniye
- Mevcut zorluk seviyesi: ${e.difficultyLevel}/10
- Son hata pattern'leri: ${a}

PERFORMANS ANALİZ KURALLARI (ADHD ÇOCUKLARİ İÇİN OPTİMİZE):
1. REAKSİYON SÜRESİ ANALİZİ (ADHD'li çocuklar için):
   • 0-700ms: Çok hızlı - İMPULSİF DAVRANIS RİSKİ (muhtemelen rastgele tıklama)
   • 700-1200ms: Hızlı - İyi kontrol ve hızlı karar verme (çok iyi performans)
   • 1200-1800ms: Normal - ADHD için ideal reaksiyon süresi (dikkatli ve kontrollü)
   • 1800-2800ms: Yavaş - Çok dikkatli yaklaşım (iyi şey, acele etmiyor)
   • 2800ms+: Çok yavaş - Zorlanıyor olabilir VEYA çok dikkatli

2. DOĞRULUK + REAKSİYON KOMBİNASYONU ANALİZİ (ADHD için):
   • Yüksek doğruluk (70%+) + 1200-2800ms reaksiyon = MÜKEMMEL ADHD PERFORMANSI (dikkatli ve başarılı)
   • Yüksek doğruluk (70%+) + 700-1200ms reaksiyon = ÇOK İYİ PERFORMANS (kontrollü hız)
   • Orta doğruluk (50-70%) + 1200-1800ms reaksiyon = NORMAL ADHD PERFORMANSI (iyi gidiyor)
   • Düşük doğruluk (50%-) + 0-700ms reaksiyon = İMPULSİF DAVRANIS (yavaşlatılmalı, dikkat çekilmeli)
   • Düşük doğruluk (50%-) + 2800ms+ reaksiyon = AŞIRI ZORLANIYOR (kolaylaştırılmalı)

3. SEN KARAR VER: Bu veriler ışığında çocuğun durumunu analiz et ve uygun zorluk ayarı yap.
   • Eğer dikkatli ve başarılıysa → Mevcut seviyeyi koru veya hafif artır
   • Eğer aceleciysε → Sakinleştirici ayarlar (daha fazla zaman, daha az kutu)
   • Eğer zorlanıyorsa → Kolaylaştırıcı ayarlar (daha az çatışma, daha basit)
   • Eğer çok başarılıysa → Zorluk artırıcı ayarlar

4. MOTİVASYONEL YAKLAŞIM:
   • Başarılı performans için övgü ve teşvik
   • Zorlanıyorsa sabırlı ve destekleyici
   • Aceleci davranıyorsa yönlendirici ve sakinleştirici

ADHD ÖZEL KONSIDERASYON KURALLARI:
1. Dikkat süresi kısıtlı - çok fazla kutu dikkat dağıtır
2. Görsel karmaşıklık stres yaratır - minimalist yaklaşım
3. Başarı hissi motivasyonu artırır - küçük kazanımlar önemli
4. Çok hızlı değişiklik konfüze eder - kademeli geçişler
5. Pozitif reinforcement esastır

ZORLUK PARAMETRELERİ (1-10 arası değerler):
- boxCount: Ekrandaki kutu sayısı (2-10)
- commandVisibilityDuration: Komut görme süresi ms (1500-4000)
- conflictRate: Çatışma oranı 0-1 (0.2-0.9)
- distractorCount: Dikkat dağıtıcı sayısı (0-3)
- distractorTypes: Hangi tip dikkat dağıtıcılar ["emoji", "text", "shape", "none"]
- pauseTime: Turlar arası mola ms (200-1200)

ÇIKTI FORMATI (sadece JSON döndür):
{
  "newSettings": {
    "boxCount": sayı,
    "commandVisibilityDuration": sayı,
    "conflictRate": ondalık,
    "distractorCount": sayı,
    "distractorTypes": string array,
    "pauseTime": sayı
  },
  "reasoning": "Neden bu ayarları seçtiğin kısa açıklama",
  "encouragement": "Öğrenciyi motive edecek pozitif mesaj",
  "tips": ["ipucu1", "ipucu2", "ipucu3"]
}

ÖNEMLI: Sadece JSON döndür, başka açıklama yazma. ADHD'li çocuklar için optimize et.`}analyzeErrorPatterns(e){if(!e.length)return"Henüz hata analizi için yeterli veri yok";const t={colorCommand:0,textCommand:0,quickClicks:0,slowClicks:0};e.forEach(l=>{l.includes("color")&&t.colorCommand++,l.includes("text")&&t.textCommand++,l.includes("quick")&&t.quickClicks++,l.includes("slow")&&t.slowClicks++});const a=Object.entries(t).reduce((l,d)=>t[l[0]]>t[d[0]]?l:d);return{colorCommand:"Renk komutlarında zorluk",textCommand:"Kelime komutlarında zorluk",quickClicks:"Çok hızlı tıklama eğilimi",slowClicks:"Yavaş reaksiyon gösterme"}[a[0]]||"Karma hata türleri"}async callOllama(e){const t="http://localhost:11434/api/generate",a={model:this.modelName,prompt:e,format:"json",stream:!1,options:{temperature:.4,top_p:.85,num_predict:400}};try{const o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!o.ok)throw new Error(`Ollama API hatası: ${o.status}`);return(await o.json()).response.trim()}catch(o){throw new Error(`Ollama bağlantı hatası: ${o}`)}}parseAIResponse(e){try{let t;try{t=JSON.parse(e.trim())}catch{const l=e.match(/\{[\s\S]*\}/);if(!l)throw new Error("JSON bulunamadı");t=JSON.parse(l[0])}if(!t.newSettings)throw new Error("newSettings eksik");const a=t.newSettings;a.boxCount=Math.max(2,Math.min(10,a.boxCount||4)),a.commandVisibilityDuration=Math.max(1500,Math.min(4e3,a.commandVisibilityDuration||2500)),a.conflictRate=Math.max(.2,Math.min(.9,a.conflictRate||.5)),a.distractorCount=Math.max(0,Math.min(3,a.distractorCount||0)),a.pauseTime=Math.max(200,Math.min(1200,a.pauseTime||600));const o=["emoji","text","shape","none"];return Array.isArray(a.distractorTypes)?(a.distractorTypes=a.distractorTypes.filter(l=>o.includes(l)),a.distractorTypes.length===0&&(a.distractorTypes=["none"])):a.distractorTypes=["none"],{newSettings:a,reasoning:t.reasoning||"AI tarafından optimize edildi",encouragement:t.encouragement||"Harika gidiyorsun! Devam et!",tips:Array.isArray(t.tips)?t.tips:["Odaklan ve sakin ol","Her cevap öğrenme fırsatı"]}}catch(t){throw console.error("AI response parse hatası:",t),new Error(`AI yanıtı parse edilemedi: ${t}`)}}getFallbackDifficulty(e){const t=e.totalAttempts>0?e.correctAttempts/e.totalAttempts:0;let a=5,o=2500,l=.5,d=0,m=600;return t>.8?(a=6,l=.6,d=1):t<.5&&(a=4,l=.3,o=3e3,m=800),{newSettings:{boxCount:a,commandVisibilityDuration:o,conflictRate:l,distractorCount:d,distractorTypes:d>0?["emoji"]:["none"],pauseTime:m},reasoning:"AI mevcut değil, basit algoritma kullanıldı",encouragement:t>.7?"Harika devam ediyorsun!":"Güzel, pratik yapmaya devam et!",tips:["Komutları dikkatli oku","Acele etme, doğruluğa odaklan","Her seferinde biraz daha iyi oluyorsun"]}}setModel(e){this.modelName=e}}const CD=new RD,hr=["KIRMIZI","MAVİ","YEŞİL","SARI","TURUNCU","PEMBE"],ID={KIRMIZI:"#DC2626",MAVİ:"#2563EB",YEŞİL:"#16A34A",SARI:"#CA8A04",TURUNCU:"#EA580C",PEMBE:"#DB2777"},w_=["🎯","⚠️","?","⭐","🔥","💎","🎪","⚡"],jD=({studentId:s,studentAge:e=12,difficulty:t="orta",onGameComplete:a,onEmotionDetected:o})=>{const l=w.useRef(null),d=w.useRef([]),m=w.useRef(0),[p,y]=w.useState({boxCount:6,commandVisibilityDuration:2500,conflictRate:.5,distractorCount:0,distractorTypes:["none"],pauseTime:600}),[x,T]=w.useState({correctAttempts:0,totalAttempts:0,averageReactionTime:0,streakCounter:0,bestStreak:0,timeSpent:0,difficultyLevel:5,recentErrors:[]}),[A,M]=w.useState(""),[B,L]=w.useState([]);w.useMemo(()=>({kolay:p,orta:p,zor:p}),[p]);const[j,X]=w.useState({boxes:[],command:"",commandType:"color",targetColor:"KIRMIZI",score:0,timeRemaining:60,gameStarted:!1,gameEnded:!1,currentLevel:1,consecutiveCorrect:0,consecutiveWrong:0,commandVisible:!0,commandTimeLeft:p.commandVisibilityDuration,boxesVisible:!1,totalAttempts:0,correctAttempts:0,streakCounter:0,bestStreak:0,aiAnalyzing:!1,feedback:{show:!1,type:"correct",message:""}}),W=w.useRef([]),he=w.useRef(0),ue=w.useCallback(I=>{const N=l.current;if(!N)return console.log("⚠️ [DEBUG] Container not found, using default position"),{x:50+Math.random()*400,y:50+Math.random()*300};const ve=N.getBoundingClientRect(),_e=100,G=20;if(ve.width===0||ve.height===0)return console.log("⚠️ [DEBUG] Container has no dimensions, using fallback"),{x:50+Math.random()*400,y:50+Math.random()*300};let ae=0,te;do te={x:Math.random()*(ve.width-_e-2*G)+G,y:Math.random()*(ve.height-_e-2*G)+G},ae++;while(ae<50&&I.some(Y=>Math.abs(Y.x-te.x)<_e+10&&Math.abs(Y.y-te.y)<_e+10));return ae>10&&console.log("📍 [DEBUG] Position generation took",ae,"attempts"),te},[]),le=w.useCallback((I,N)=>{const ve=p,_e=[],G=[];console.log("🎯 [DEBUG] Generating boxes for:",{targetColor:I,commandType:N,settings:ve});const ae=ue(G);G.push(ae);const te={id:0,textLabel:I,textColor:I,position:ae,isCorrect:!0};if(N==="text"){te.textLabel=I;const $=hr.filter(F=>F!==I);te.textColor=$[Math.floor(Math.random()*$.length)]}else{te.textColor=I;const $=hr.filter(F=>F!==I);te.textLabel=$[Math.floor(Math.random()*$.length)]}console.log("✅ [DEBUG] Correct box created:",te),_e.push(te);const Y=Math.max(2,ve.boxCount-1-(ve.distractorCount||0));console.log("📊 [DEBUG] Generating",Y,"normal boxes + 1 correct box =",Y+1,"total");for(let $=1;$<=Y;$++){const F=ue(G);G.push(F);const ce=Math.random()<ve.conflictRate;let fe,pe,Le=0;do{if(Le++,ce){fe=hr[Math.floor(Math.random()*hr.length)];do pe=hr[Math.floor(Math.random()*hr.length)];while(pe===fe)}else{const pt=hr[Math.floor(Math.random()*hr.length)];fe=pt,pe=pt}if(!(N==="color"?pe===I:fe===I))break;if(Le>=10){if(N==="color"){const pt=hr.filter(rt=>rt!==I);pe=pt[Math.floor(Math.random()*pt.length)]}else{const pt=hr.filter(rt=>rt!==I);fe=pt[Math.floor(Math.random()*pt.length)]}break}}while(Le<20);_e.push({id:$,textLabel:fe,textColor:pe,position:F,isCorrect:!1})}const k=ve.distractorCount;if(k>0&&!ve.distractorTypes.includes("none"))for(let $=Y+1;$<=Y+k;$++){const F=ue(G);G.push(F);let ce;const fe=ve.distractorTypes[Math.floor(Math.random()*ve.distractorTypes.length)];switch(fe){case"emoji":ce=w_[Math.floor(Math.random()*w_.length)];break;case"text":ce="?";break;case"shape":ce="●";break;default:continue}_e.push({id:$,textLabel:ce,textColor:"KIRMIZI",position:F,isCorrect:!1,isDistractor:!0}),console.log(`🎭 [DEBUG] Distractor box ${$} created with type ${fe}`)}const J=_e.filter($=>$.isCorrect);return console.log("🔍 [DEBUG] Final boxes check:",{totalBoxes:_e.length,correctBoxes:J.length,normalBoxes:_e.filter($=>!$.isCorrect&&!$.isDistractor).length,distractorBoxes:_e.filter($=>$.isDistractor).length}),J.length===0&&(console.error("❌ [ERROR] No correct boxes found! This should not happen."),_e.length>0&&(_e[0].isCorrect=!0,N==="text"?_e[0].textLabel=I:_e[0].textColor=I)),_e},[p,ue]),de=w.useCallback(()=>{if(!l.current){setTimeout(()=>de(),100);return}const I=Math.random()>.5?"color":"text",N=hr[Math.floor(Math.random()*hr.length)],ve=I==="color"?`${N} renkli yazana tıkla`:`${N} yazısını seç`,_e=le(N,I);X(G=>({...G,boxes:_e,command:ve,commandType:I,targetColor:N,commandVisible:!0,commandTimeLeft:p.commandVisibilityDuration,boxesVisible:!1,feedback:{show:!1,type:"correct",message:""}})),setTimeout(()=>{X(G=>({...G,commandVisible:!1,boxesVisible:!0})),he.current=Date.now()},p.commandVisibilityDuration)},[le,p]),V=w.useCallback(I=>{const N=j.boxes.find(te=>te.id===I);if(!N||j.gameEnded||j.aiAnalyzing||!j.boxesVisible)return;const ve=N.isCorrect,G=Date.now()-he.current;W.current.push(G),X(te=>{const Y={...te};if(Y.totalAttempts+=1,ve){Y.correctAttempts+=1,Y.streakCounter+=1,Y.bestStreak=Math.max(Y.bestStreak,Y.streakCounter);const k=Math.max(0,Math.floor(te.commandTimeLeft/100*10));Y.score+=100+k,Y.consecutiveCorrect+=1,Y.consecutiveWrong=0,Y.feedback={show:!0,type:"correct",message:`Doğru! +${100+k} puan`}}else{Y.streakCounter=0,Y.score=Math.max(0,Y.score-50),Y.timeRemaining=Math.max(0,Y.timeRemaining-2),Y.consecutiveWrong+=1,Y.consecutiveCorrect=0;const k=`${te.commandType}_error_${G<1e3?"quick":"slow"}`;Y.feedback={show:!0,type:"incorrect",message:"Yanlış! -50 puan, -2 saniye"},T(J=>({...J,recentErrors:[...J.recentErrors.slice(-4),k]}))}return Y}),T(te=>({...te,correctAttempts:ve?te.correctAttempts+1:te.correctAttempts,totalAttempts:te.totalAttempts+1,averageReactionTime:W.current.length>0?W.current.reduce((k,J)=>k+J,0)/W.current.length:0,streakCounter:ve?te.streakCounter+1:0,bestStreak:Math.max(te.bestStreak,ve?te.streakCounter+1:0),timeSpent:Date.now()-m.current,difficultyLevel:Math.round(((p.boxCount-2)/8+p.conflictRate)*5)}));const ae=j.totalAttempts+1;ae>=5&&ae%3===0?(console.log("🚀 AI Tetikleniyor! Deneme sayısı:",ae),X(te=>({...te,aiAnalyzing:!0,boxesVisible:!0})),C().then(()=>{X(te=>({...te,aiAnalyzing:!1,boxesVisible:!1})),setTimeout(()=>{de()},p.pauseTime)})):(ae<5&&console.log("📊 Veri toplaniyor... Deneme:",ae,"/5"),setTimeout(()=>{de()},p.pauseTime))},[j.boxes,j.gameEnded,j.boxesVisible,j.aiAnalyzing,j.totalAttempts,p,de]),C=w.useCallback(async()=>{if(x.totalAttempts<3){console.log("⚠️ Yetersiz veri, AI analizi atlanıyor. Deneme:",x.totalAttempts),M("Daha fazla veri toplanıyor... 📊"),setTimeout(()=>M(""),2e3);return}try{console.log("🤖 AI Adaptasyon kontrolü başlıyor...",x),M("AI analiz ediyor... 🤖");const I=await CD.getAdaptiveDifficulty(x);y(I.newSettings),M(I.encouragement),L(I.tips),console.log("✅ AI Adaptasyon tamamlandı:",{newSettings:I.newSettings,reasoning:I.reasoning,oldSettings:p}),setTimeout(()=>{M("")},5e3)}catch(I){console.error("❌ AI Adaptasyon hatası:",I);const N=x.totalAttempts>0?x.correctAttempts/x.totalAttempts:0;N>.8?(y(ve=>({...ve,boxCount:Math.min(8,ve.boxCount+1),conflictRate:Math.min(.9,ve.conflictRate+.1)})),M("Harika performans! Zorluk artırıldı 🚀")):N<.5?(y(ve=>({...ve,boxCount:Math.max(3,ve.boxCount-1),conflictRate:Math.max(.3,ve.conflictRate-.1)})),M("Kolaylaştırdım, sen yapabilirsin! 💪")):M("Güzel devam ediyorsun! 👍"),setTimeout(()=>{M("")},4e3)}},[x,p]),R=w.useCallback(()=>{T({correctAttempts:0,totalAttempts:0,averageReactionTime:0,streakCounter:0,bestStreak:0,timeSpent:0,difficultyLevel:5,recentErrors:[]}),W.current=[],X(I=>({...I,gameStarted:!0,gameEnded:!1,score:0,timeRemaining:60,currentLevel:1,consecutiveCorrect:0,consecutiveWrong:0,totalAttempts:0,correctAttempts:0,streakCounter:0,bestStreak:0,boxesVisible:!1})),m.current=Date.now(),d.current=[],de()},[de]),O=w.useCallback(()=>{X(N=>({...N,gameEnded:!0}));const I=Date.now()-m.current;a(j.score,I,d.current)},[j.score,a]),P=w.useCallback(()=>{y({boxCount:6,commandVisibilityDuration:2500,conflictRate:.5,distractorCount:0,distractorTypes:["none"],pauseTime:600}),M(""),L([]),X(I=>({...I,gameStarted:!1,gameEnded:!1,score:0,timeRemaining:60,currentLevel:1,consecutiveCorrect:0,consecutiveWrong:0,totalAttempts:0,correctAttempts:0,streakCounter:0,bestStreak:0,aiAnalyzing:!1,boxesVisible:!1,boxes:[]}))},[]);return w.useEffect(()=>{if(!j.gameStarted||j.gameEnded||j.aiAnalyzing)return;const I=setInterval(()=>{X(N=>N.timeRemaining<=1?{...N,timeRemaining:0}:{...N,timeRemaining:N.timeRemaining-1})},1e3);return()=>clearInterval(I)},[j.gameStarted,j.gameEnded,j.aiAnalyzing]),w.useEffect(()=>{j.gameStarted&&j.timeRemaining===0&&!j.gameEnded&&O()},[j.gameStarted,j.timeRemaining,j.gameEnded,O]),w.useEffect(()=>{if(j.feedback.show){const I=setTimeout(()=>{X(N=>({...N,feedback:{...N.feedback,show:!1}}))},1500);return()=>clearTimeout(I)}},[j.feedback.show]),j.gameStarted?j.gameEnded?u.jsx("div",{className:"max-w-2xl mx-auto space-y-6",children:u.jsx(Ze,{children:u.jsxs(We,{className:"text-center py-8",children:[u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-green-500 to-blue-500 rounded-full flex items-center justify-center",children:u.jsx(v_,{className:"h-10 w-10 text-white"})})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Oyun Tamamlandı!"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto mb-6",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.score}),u.jsx("div",{className:"text-sm text-blue-800",children:"Toplam Puan"})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["%",j.totalAttempts>0?Math.round(j.correctAttempts/j.totalAttempts*100):0]}),u.jsx("div",{className:"text-sm text-green-800",children:"Doğruluk"})]}),u.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[u.jsx("div",{className:"text-2xl font-bold text-purple-600",children:j.bestStreak}),u.jsx("div",{className:"text-sm text-purple-800",children:"En İyi Seri"})]}),u.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[u.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[x.averageReactionTime>0?Math.round(x.averageReactionTime):0,"ms"]}),u.jsx("div",{className:"text-sm text-orange-800",children:"Ort. Reaksiyon"})]})]}),B.length>0&&u.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg max-w-md mx-auto mb-6",children:[u.jsxs("div",{className:"flex items-center mb-2",children:[u.jsx(Rt,{className:"h-5 w-5 text-blue-600 mr-2"}),u.jsx("span",{className:"font-semibold text-blue-800",children:"AI Analizi"})]}),u.jsx("div",{className:"space-y-1",children:B.map((I,N)=>u.jsxs("div",{className:"text-sm text-blue-700",children:["• ",I]},N))})]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsxs(Ct,{onClick:P,className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white",children:[u.jsx(Ei,{className:"h-4 w-4 mr-2"}),"Tekrar Oyna"]}),u.jsx(Ct,{onClick:()=>a(j.score,Date.now()-m.current,d.current),variant:"outline",children:"Bitir"})]})]})})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 p-4",children:[u.jsx("div",{className:"max-w-6xl mx-auto mb-6",children:u.jsx(Ze,{children:u.jsx(We,{className:"py-4",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{className:"flex items-center space-x-6",children:[j.commandVisible&&u.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-8 py-4 rounded-xl shadow-lg",children:[u.jsx("div",{className:"font-bold text-2xl text-center",children:j.command}),u.jsx("div",{className:"text-sm text-center mt-2 opacity-90",children:"Komutu oku ve hatırla!"})]}),!j.commandVisible&&!j.boxesVisible&&u.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-lg",children:u.jsx("div",{className:"font-bold text-lg text-center",children:"Kutular hazırlanıyor..."})}),!j.commandVisible&&j.boxesVisible&&u.jsx("div",{className:"text-gray-600 italic text-lg font-semibold",children:"Komutu hatırla ve doğru kutuyu seç!"})]}),u.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(gr,{className:"h-4 w-4 text-blue-600"}),u.jsxs("span",{className:"font-semibold",children:[j.timeRemaining,"s"]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(v_,{className:"h-4 w-4 text-green-600"}),u.jsx("span",{className:"font-semibold",children:j.score})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Vn,{className:"h-4 w-4 text-purple-600"}),u.jsxs("span",{className:"font-semibold",children:[j.totalAttempts>0?Math.round(j.correctAttempts/j.totalAttempts*100):0,"% Doğru"]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(CT,{className:"h-4 w-4 text-orange-600"}),u.jsxs("span",{className:"font-semibold",children:["Seri: ",j.streakCounter]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rt,{className:"h-4 w-4 text-indigo-600"}),u.jsxs("span",{className:"font-semibold text-xs",children:["AI: ",p.boxCount," kutu, %",Math.round(p.conflictRate*100)," çatışma"]})]})]})]})})})}),u.jsx("div",{className:"max-w-6xl mx-auto",children:u.jsx("div",{ref:l,className:"relative w-full h-[600px] bg-white rounded-xl shadow-lg overflow-hidden",style:{position:"relative"},children:j.boxesVisible&&j.boxes.map(I=>u.jsx("div",{className:"absolute cursor-pointer transform hover:scale-105 transition-transform duration-150",style:{left:I.position.x,top:I.position.y,width:"100px",height:"100px"},onClick:()=>V(I.id),children:u.jsx("div",{className:"w-full h-full bg-white rounded-lg shadow-md border-2 border-gray-200 flex items-center justify-center hover:shadow-lg",children:I.isDistractor?u.jsx("div",{className:"text-4xl",children:I.textLabel}):u.jsx("div",{className:"text-xl font-bold",style:{color:ID[I.textColor]},children:I.textLabel})})},I.id))})}),j.aiAnalyzing&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-8 py-6 rounded-xl shadow-lg",children:[u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full animate-spin"}),u.jsx(Rt,{className:"h-6 w-6"}),u.jsx("span",{className:"font-semibold text-lg",children:"AI performansını analiz ediyor..."})]}),u.jsx("div",{className:"text-center mt-2 text-blue-100 text-sm",children:"Oyun kısa sürede devam edecek"})]})}),A&&!j.aiAnalyzing&&u.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-40 pointer-events-none",children:u.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white px-6 py-3 rounded-xl shadow-lg",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rt,{className:"h-5 w-5"}),u.jsx("span",{className:"font-semibold",children:A})]})})}),j.feedback.show&&u.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 pointer-events-none",children:u.jsx("div",{className:`
            px-8 py-4 rounded-xl text-white text-xl font-bold shadow-lg
            ${j.feedback.type==="correct"?"bg-gradient-to-r from-green-500 to-emerald-500":"bg-gradient-to-r from-red-500 to-pink-500"}
          `,children:j.feedback.message})})]}):u.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:u.jsx(Ze,{children:u.jsxs(We,{className:"text-center py-8",children:[u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-red-500 to-orange-500 rounded-full flex items-center justify-center",children:u.jsx(Rt,{className:"h-10 w-10 text-white"})})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Çatışma Oyunu"}),u.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"Stroop etkisiyle dikkatini geliştir! Yazan kelimeyle renk farklı olabilir."}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-2xl mx-auto mb-6",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsx(Vn,{className:"h-6 w-6 text-blue-600 mx-auto mb-2"}),u.jsx("h3",{className:"font-semibold text-blue-800 mb-1",children:"Renk Odaklı"}),u.jsx("p",{className:"text-sm text-blue-600",children:"Belirtilen renkteki yazıyı bul"})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsx(Rt,{className:"h-6 w-6 text-green-600 mx-auto mb-2"}),u.jsx("h3",{className:"font-semibold text-green-800 mb-1",children:"Kelime Odaklı"}),u.jsx("p",{className:"text-sm text-green-600",children:"Belirtilen kelimeyi bul"})]}),u.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[u.jsx(gr,{className:"h-6 w-6 text-purple-600 mx-auto mb-2"}),u.jsx("h3",{className:"font-semibold text-purple-800 mb-1",children:"Zamana Karşı"}),u.jsx("p",{className:"text-sm text-purple-600",children:"60 saniyede en yüksek skoru yap"})]})]}),u.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 rounded-lg max-w-md mx-auto",children:[u.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"Nasıl Oynanır?"}),u.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[u.jsx("li",{children:"• Ekranda çıkan komutu oku"}),u.jsx("li",{children:"• Komuta uygun kutuyu tıkla"}),u.jsx("li",{children:"• Dikkat: Kelime ve renk farklı olabilir!"}),u.jsx("li",{children:"• Doğru: +100 puan, Yanlış: -50 puan"})]})]}),u.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[u.jsxs(Ct,{onClick:R,size:"lg",className:"bg-gradient-to-r from-red-500 to-orange-500 hover:from-red-600 hover:to-orange-600 text-white px-8 py-3",children:[u.jsx(Vn,{className:"h-5 w-5 mr-2"}),"Oyunu Başlat - ",t==="kolay"?"Kolay":t==="orta"?"Orta":"Zor"]}),u.jsxs(Ct,{onClick:()=>C(),variant:"outline",size:"sm",className:"text-blue-600 border-blue-600 hover:bg-blue-50",children:[u.jsx(Rt,{className:"h-4 w-4 mr-2"}),"AI Test Et"]})]})]})})})},DD=({studentId:s,studentAge:e=12,onGameComplete:t,onEmotionDetected:a})=>{const[o,l]=w.useState(null),[d,m]=w.useState("orta"),[p,y]=w.useState(!1),x=w.useRef({studentId:s,studentAge:e,onGameComplete:t,onEmotionDetected:a}),T=w.useRef(0);T.current+=1;const A=x.current.studentId!==s||x.current.studentAge!==e||x.current.onGameComplete!==t||x.current.onEmotionDetected!==a;console.log("🔄 [RENDER] AttentionGameSelector render edildi:",{renderCount:T.current,selectedGame:o,selectedDifficulty:d,gameStarted:p,propsChanged:A,changedProps:A?{studentId:x.current.studentId!==s,studentAge:x.current.studentAge!==e,onGameComplete:x.current.onGameComplete!==t,onEmotionDetected:x.current.onEmotionDetected!==a}:"none",timestamp:new Date().toISOString()}),x.current={studentId:s,studentAge:e,onGameComplete:t,onEmotionDetected:a};const M=[{id:"click",name:"Dikkat Tıklama",description:"Hızlı reaksiyon gerektiren tek hedef tıklama oyunu",icon:u.jsx(Vj,{className:"h-8 w-8"}),color:"blue",bgGradient:"from-blue-500 to-purple-500",features:["Tek hedef odaklanma","Hızlı reaksiyon geliştirme","Dikkat dağıtıcılarla mücadele","Zamanlama becerileri"]},{id:"count",name:"Dikkat Sayma",description:"Beliren objeleri sayarak konsantrasyon geliştirme",icon:u.jsx(kT,{className:"h-8 w-8"}),color:"green",bgGradient:"from-green-500 to-emerald-500",features:["Sayısal dikkat","Görsel takip","Konsantrasyon geliştirme","Bellek destekleme"]},{id:"dynamic",name:"Dinamik Dikkat",description:"Sürekli çıkan hedefleri hızla yakalama",icon:u.jsx(Do,{className:"h-8 w-8"}),color:"purple",bgGradient:"from-purple-500 to-pink-500",features:["Çoklu hedef takibi","Hızlı karar verme","Reflexleri geliştirme","Sürekli dikkat"]},{id:"conflict",name:"Çatışma Oyunu",description:"Stroop etkisi ile dikkat geliştirme",icon:u.jsx(fp,{className:"h-8 w-8"}),color:"red",bgGradient:"from-red-500 to-orange-500",features:["Stroop etkisi deneyimi","Renk-kelime çatışması","Dikkat odaklanma","Bilişsel esneklik"]}],B=[{id:"kolay",name:"Kolay",description:"Yeni başlayanlar için",color:"green",features:["Az dikkat dağıtıcı","Uzun süre limiti","Basit hedefler"]},{id:"orta",name:"Orta",description:"Deneyimliler için",color:"yellow",features:["Orta dikkat dağıtıcı","Normal süre","Karmaşık hedefler"]},{id:"zor",name:"Zor",description:"Uzmanlar için",color:"red",features:["Çok dikkat dağıtıcı","Kısa süre","Karışık hedefler"]}],L=ue=>{console.log("🎮 [DEBUG] Game selected:",ue),l(ue)},j=ue=>{console.log("🎯 [DEBUG] Difficulty selected:",ue),m(ue),console.log("🎯 [DEBUG] Selected difficulty updated to:",ue)},X=()=>{console.log("🎮 [DEBUG] Starting game:",o,"difficulty:",d),y(!0)},W=()=>{l(null),m("orta"),y(!1)},he=(ue,le,de)=>{t(ue,le,de),y(!1)};if(p&&o){console.log("🚀 [DEBUG] Rendering game:",o,"with props:",{studentId:s,studentAge:e,difficulty:d});const ue={studentId:s,studentAge:e,difficulty:d,onGameComplete:he,onEmotionDetected:a};try{switch(o){case"click":return console.log("🎯 [DEBUG] Loading AttentionClickGame"),u.jsx(SD,{...ue});case"count":return console.log("🔢 [DEBUG] Loading AttentionCountGame"),u.jsx(kD,{...ue});case"dynamic":return console.log("⚡ [DEBUG] Loading AttentionDynamicGame"),u.jsx(ND,{...ue});case"conflict":return console.log("🎨 [DEBUG] Loading ConflictGame"),u.jsx(jD,{...ue});default:return console.error("❌ [DEBUG] Unknown game type:",o),null}}catch(le){return console.error("❌ [DEBUG] Error rendering game:",le),u.jsxs("div",{className:"max-w-2xl mx-auto p-8 text-center",children:[u.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"Oyun Yüklenirken Hata Oluştu"}),u.jsxs("p",{className:"text-gray-600 mb-4",children:["Hata: ",le.message]}),u.jsx(Ct,{onClick:W,children:"Geri Dön"})]})}}if(o){const ue=M.find(le=>le.id===o);return console.log("🎯 [DEBUG] Zorluk seçim ekranı açıldı. Oyun:",o,"Mevcut zorluk:",d),u.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[u.jsx(Ze,{children:u.jsxs(We,{className:"flex items-center justify-between py-4",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs(Ct,{variant:"ghost",size:"sm",onClick:W,className:"text-gray-600 hover:text-gray-800",children:[u.jsx(dj,{className:"h-4 w-4 mr-2"}),"Geri Dön"]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsx("div",{className:`w-10 h-10 rounded-full bg-gradient-to-r ${ue.bgGradient} flex items-center justify-center text-white`,children:ue.icon}),u.jsxs("div",{children:[u.jsx("h2",{className:"text-xl font-bold text-gray-800",children:ue.name}),u.jsx("p",{className:"text-sm text-gray-600",children:"Zorluk seviyesi seç"})]})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Rt,{className:"h-5 w-5 text-purple-600"}),u.jsx("span",{className:"text-sm text-purple-600",children:"Adaptif AI"})]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:B.map(le=>u.jsx(Ze,{className:`
                cursor-pointer transition-all duration-200 hover:scale-105 pointer-events-auto
                ${d===le.id?"ring-2 ring-blue-500 shadow-lg":"hover:shadow-md"}
              `,onClick:de=>{de.preventDefault(),de.stopPropagation(),console.log("🖱️ [DEBUG] Card clicked for difficulty:",le.id,"Game:",o),j(le.id)},onMouseDown:de=>{de.preventDefault(),console.log("🖱️ [DEBUG] MouseDown for difficulty:",le.id),j(le.id)},style:{zIndex:1},children:u.jsxs(We,{className:"text-center py-8 pointer-events-none",children:[u.jsx("div",{className:"mb-4",children:u.jsx("div",{className:`
                    w-16 h-16 mx-auto rounded-full flex items-center justify-center text-2xl font-bold
                    ${le.color==="green"?"bg-green-100 text-green-600":le.color==="yellow"?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"}
                  `,children:le.id==="kolay"?"1":le.id==="orta"?"2":"3"})}),u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:le.name}),u.jsx("p",{className:"text-gray-600 text-sm mb-4",children:le.description}),u.jsx("div",{className:"space-y-2",children:le.features.map((de,V)=>u.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-700",children:[u.jsx(Aa,{className:"h-3 w-3 text-gray-400"}),u.jsx("span",{children:de})]},V))}),d===le.id&&u.jsx("div",{className:"mt-4",children:u.jsx("div",{className:"w-6 h-6 mx-auto bg-blue-500 rounded-full flex items-center justify-center",children:u.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})}),u.jsx("div",{className:"mt-4 pointer-events-auto",children:u.jsx("button",{className:"w-full py-2 px-4 text-sm bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",onClick:de=>{de.preventDefault(),de.stopPropagation(),console.log("🔘 [DEBUG] Button clicked for difficulty:",le.id),j(le.id)},children:d===le.id?"✓ Seçili":"Seç"})})]})},le.id))}),u.jsx("div",{className:"text-center",children:u.jsxs(Ct,{onClick:X,size:"lg",className:"bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white px-8 py-3",children:[u.jsx(Vn,{className:"h-5 w-5 mr-2"}),ue.name," - ",B.find(le=>le.id===d)?.name," Başlat"]})})]})}return u.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[u.jsx(Ze,{children:u.jsxs(We,{className:"text-center py-8",children:[u.jsx("div",{className:"mb-4",children:u.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center",children:u.jsx(Rt,{className:"h-10 w-10 text-white"})})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Dikkat Oyunları"}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Dikkat dağınıklığıyla başa çıkmak için özel olarak tasarlanmış oyunlar"}),u.jsxs("div",{className:"mt-4 flex items-center justify-center space-x-2 text-sm text-purple-600",children:[u.jsx(gr,{className:"h-4 w-4"}),u.jsx("span",{children:"AI destekli adaptif zorluk sistemi"})]})]})}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:M.map(ue=>u.jsx(Ze,{className:"cursor-pointer transition-all duration-200 hover:scale-105 hover:shadow-lg",onClick:()=>L(ue.id),children:u.jsxs(We,{className:"text-center py-8",children:[u.jsx("div",{className:"mb-6",children:u.jsx("div",{className:`w-16 h-16 mx-auto rounded-full bg-gradient-to-r ${ue.bgGradient} flex items-center justify-center text-white`,children:ue.icon})}),u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:ue.name}),u.jsx("p",{className:"text-gray-600 text-sm mb-6",children:ue.description}),u.jsx("div",{className:"space-y-3",children:ue.features.map((le,de)=>u.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-700",children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${ue.color==="blue"?"bg-blue-400":ue.color==="green"?"bg-green-400":ue.color==="purple"?"bg-purple-400":"bg-red-400"}`}),u.jsx("span",{children:le})]},de))}),u.jsx("div",{className:"mt-6",children:u.jsx(Ct,{onClick:()=>L(ue.id),className:`w-full ${ue.color==="blue"?"bg-blue-500 hover:bg-blue-600":ue.color==="green"?"bg-green-500 hover:bg-green-600":ue.color==="purple"?"bg-purple-500 hover:bg-purple-600":"bg-red-500 hover:bg-red-600"} text-white`,children:"Oyna"})})]})},ue.id))}),u.jsx(Ze,{className:"bg-gradient-to-r from-blue-50 to-purple-50",children:u.jsx(We,{className:"py-6",children:u.jsxs("div",{className:"flex items-start space-x-4",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(Rt,{className:"h-6 w-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"AI Destekli Adaptif Sistem"}),u.jsx("p",{className:"text-gray-700 text-sm",children:"Her oyun, performansına göre otomatik olarak zorluk seviyesini ayarlar. Başarı oranına, reaksiyon süresine ve odaklanma durumuna göre kişiselleştirilmiş görevler üretir. Bu sayede her zaman en uygun zorluk seviyesinde oynayarak dikkat becerilerini geliştirebilirsin."})]})]})})})]})};var S_={};class MD{constructor(){this.apiEndpoint=S_.REACT_APP_AI_STORY_API||"http://localhost:3001/api/story",this.fallbackScenes=[{id:1,story:"Ali büyülü bir ormana girdi. Önünde iki kapı belirdi.",question:"Ali hangi kapıyı seçmeli?",choices:[{id:"a",text:"🟢 Yeşil Kapı",color:"#10B981",isCorrect:!0},{id:"b",text:"🔴 Kırmızı Kapı",color:"#EF4444",isCorrect:!1},{id:"c",text:"🎁 Parlak Kutu",color:"#F59E0B",isCorrect:!1,isDistractor:!0}]},{id:2,story:"Ali doğru renge sahip kapıdan geçmeli.",question:"Hangi seçenek doğru RENGE sahip?",choices:[{id:"a",text:"MAVİ",color:"#EF4444",isCorrect:!1,stroopConflict:!0},{id:"b",text:"KIRMIZI",color:"#3B82F6",isCorrect:!1,stroopConflict:!0},{id:"c",text:"YEŞİL",color:"#10B981",isCorrect:!0},{id:"d",text:"💎 Elmas",color:"#8B5CF6",isCorrect:!1,isDistractor:!0}]},{id:3,story:"Ali köprüden geçerken dikkatli olmalı. Tehlikeli yaratıklar var!",question:"Ali hangi köprüyü seçmeli?",choices:[{id:"a",text:"🌉 Güvenli Köprü",isCorrect:!0},{id:"b",text:"⚡ Yıldırım Köprü",isCorrect:!1},{id:"c",text:"🍭 Şeker Köprü",isCorrect:!1,isDistractor:!0}],backgroundTask:{targetSymbol:"🐍",instruction:"Yılan göründüğünde DOKUNMA!"}},{id:4,story:"Ejderha aniden ortaya çıktı! Hızla kaçmak gerekiyor!",question:"Acil durum! Ne yapmalı?",choices:[{id:"a",text:"🏃‍♂️ KAÇ",isCorrect:!0},{id:"b",text:"⚔️ SAVAŞ",isCorrect:!1},{id:"c",text:"🎪 DANS ET",isCorrect:!1,isDistractor:!0}],emergencyTask:{symbol:"🚨",duration:2e3,instruction:"HIZLA KAÇ butonuna bas!"}},{id:5,story:"Ali hazine odasına ulaştı. Doğru renkteki sandığı seçmeli.",question:"Hangi renk yazısı doğru renkte yazılmış?",choices:[{id:"a",text:"SARI",color:"#10B981",isCorrect:!1,stroopConflict:!0},{id:"b",text:"PEMBE",color:"#EC4899",isCorrect:!0},{id:"c",text:"TURUNCU",color:"#3B82F6",isCorrect:!1,stroopConflict:!0},{id:"d",text:"🌟 Yıldız",color:"#F59E0B",isCorrect:!1,isDistractor:!0}]},{id:6,story:"Ali büyücünün testine girdi. Aynı anda iki işi yapması gerekiyor!",question:"Ali hangi büyüyü seçmeli?",choices:[{id:"a",text:"✨ İyileştirme Büyüsü",isCorrect:!0},{id:"b",text:"💥 Patlama Büyüsü",isCorrect:!1},{id:"c",text:"🎭 Yanılsama Büyüsü",isCorrect:!1,isDistractor:!0}],backgroundTask:{targetSymbol:"🦉",instruction:"Baykuş göründüğünde DOKUNMA!"}}]}async generateStory(e){try{const t=await this.callAIService(e);return t.scenes&&t.scenes.length>0?t:this.generateFallbackStory(e)}catch(t){return console.warn("AI Story Service failed, using fallback:",t),this.generateFallbackStory(e)}}async callAIService(e){const t=this.constructPrompt(e),a=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S_.REACT_APP_AI_API_KEY}`},body:JSON.stringify({prompt:t,max_tokens:2e3,temperature:.7})});if(!a.ok)throw new Error(`AI Service responded with status: ${a.status}`);const o=await a.json();return this.parseAIResponse(o,e)}constructPrompt(e){return`
Create an ADHD attention measurement story game for a ${e.studentAge} year old child in ${e.language}.

Requirements:
1. Create ${e.sceneCount||4} story scenes
2. Each scene should test different types of attention:
   - Selective Attention: Include distractor choices that look appealing but are wrong
   - Sustained Attention: Maintain engagement throughout
   - Divided Attention: Some scenes should include background tasks
   - Impulse Control: Include emergency tasks requiring quick but controlled responses

3. Story theme: ${e.theme||"Adventure with character named Ali"}

4. Each scene should have:
   - A short story text (1-2 sentences)
   - A clear question
   - 2-4 choice options with:
     * One correct answer
     * One or more wrong answers
     * At least one distractor (attractive but irrelevant option)
     * Some scenes should include Stroop-like conflicts (color name vs color display)

5. Optional elements:
   - Emergency tasks (appear suddenly, require quick response)
   - Background tasks (symbols that appear and disappear, child should NOT click them)

6. Make it engaging and age-appropriate with emojis and simple language.

Return JSON format with scenes array containing: id, story, question, choices (with id, text, color, isCorrect, isDistractor, stroopConflict flags), and optional emergencyTask/backgroundTask objects.
    `}parseAIResponse(e,t){try{return{scenes:(e.scenes||e.content?.scenes||[]).map((o,l)=>({id:o.id||l+1,story:o.story||"",question:o.question||"",choices:o.choices?.map((d,m)=>({id:d.id||String.fromCharCode(97+m),text:d.text||"",color:d.color,isCorrect:d.isCorrect||!1,isDistractor:d.isDistractor||!1,stroopConflict:d.stroopConflict||!1}))||[],emergencyTask:o.emergencyTask,backgroundTask:o.backgroundTask})),difficulty:this.calculateDifficulty(t.attentionLevel),estimatedDuration:(t.sceneCount||4)*90,theme:t.theme||"Adventure"}}catch(a){throw console.error("Failed to parse AI response:",a),a}}generateFallbackStory(e){let t=this.fallbackScenes;return e.sceneCount&&e.sceneCount<this.fallbackScenes.length&&(t=this.fallbackScenes.slice(0,e.sceneCount)),e.studentAge<6&&(t=t.map(a=>({...a,choices:a.choices.filter(o=>!o.stroopConflict||o.isCorrect),emergencyTask:void 0}))),{scenes:t,difficulty:this.calculateDifficulty(e.attentionLevel),estimatedDuration:t.length*90,theme:e.theme||"Macera"}}calculateDifficulty(e){switch(e){case"beginner":return"Kolay";case"intermediate":return"Orta";case"advanced":return"Zor";default:return"Orta"}}generateTemplate(e,t){const a={adventure:{theme:"Ali'nin büyülü orman macerası",sceneCount:t<6?3:t<8?4:6},space:{theme:"Uzay kahramanı Aylin'in gezegen keşfi",sceneCount:t<6?3:t<8?4:6},underwater:{theme:"Denizaltı kaşifi Cem'in okyanus yolculuğu",sceneCount:t<6?3:t<8?4:6}};return a[e]||a.adventure}}const k_=new MD,OD=({studentId:s,studentAge:e,onGameComplete:t})=>{const[a,o]=w.useState([]),[l,d]=w.useState(!1),[m,p]=w.useState("adventure"),[y,x]=w.useState(0),[T,A]=w.useState(!1),[M,B]=w.useState(!1),[L,j]=w.useState({selectiveAttention:0,sustainedAttention:0,dividedAttention:0,impulseControl:0,reactionTime:[],distractorClicks:0,correctChoices:0,totalChoices:0}),[X,W]=w.useState(0),[he,ue]=w.useState(!1),[le,de]=w.useState(!1),[V,C]=w.useState(!1),R=a[y],O=async Y=>{d(!0);try{const k=k_.generateTemplate(Y,e),J={studentAge:e,attentionLevel:e<6?"beginner":e<9?"intermediate":"advanced",language:"Turkish",theme:k.theme,sceneCount:k.sceneCount},$=await k_.generateStory(J);o($.scenes)}catch(k){console.error("Story generation failed:",k)}finally{d(!1)}};w.useEffect(()=>{if(T&&!M&&R){if(W(Date.now()),R.backgroundTask){const Y=setInterval(()=>{ue(!0),setTimeout(()=>ue(!1),1500)},3e3+Math.random()*2e3);return()=>clearInterval(Y)}if(R.emergencyTask){const Y=setTimeout(()=>{de(!0),setTimeout(()=>{de(!1),ve()},R.emergencyTask.duration)},2e3+Math.random()*3e3);return()=>clearTimeout(Y)}}},[y,T,M,R]);const P=w.useCallback(Y=>{if(!R||le)return;const k=Date.now()-X,J=R.choices.find($=>$.id===Y);J&&(j($=>{const F={...$,reactionTime:[...$.reactionTime,k],totalChoices:$.totalChoices+1};return J.isCorrect&&F.correctChoices++,J.isDistractor&&F.distractorClicks++,k<500&&(F.impulseControl+=1),F}),ve())},[R,X,le]),I=w.useCallback(()=>{j(Y=>({...Y,distractorClicks:Y.distractorClicks+1})),ue(!1)},[]),N=w.useCallback(()=>{const Y=Date.now()-X;j(k=>({...k,reactionTime:[...k.reactionTime,Y]})),de(!1),ve()},[X]),ve=w.useCallback(()=>{y<a.length-1?x(Y=>Y+1):G()},[y,a.length]),_e=w.useCallback(Y=>{const k=Y.reactionTime.length>0?Y.reactionTime.reduce((pe,Le)=>pe+Le,0)/Y.reactionTime.length:0,J=Y.totalChoices>0?Y.correctChoices/Y.totalChoices*100:0,$=Math.max(0,100-Y.distractorClicks*20),F=Math.max(0,100-(Y.reactionTime.length-Y.correctChoices)*10),ce=Math.max(0,100-Y.distractorClicks*15),fe=Math.max(0,100-Y.impulseControl*25);return{...Y,selectiveAttention:$,sustainedAttention:F,dividedAttention:ce,impulseControl:fe,avgReactionTime:k,accuracy:J}},[]),G=w.useCallback(async()=>{const Y=_e(L),k=(Y.accuracy+Y.selectiveAttention+Y.sustainedAttention+Y.dividedAttention+Y.impulseControl)/5;j(Y),B(!0),C(!0);const J={studentId:s,studentAge:e,gameType:"story-attention",score:Math.round(k),duration:Date.now()-X,storyTheme:m,attentionData:{selectiveAttention:Y.selectiveAttention,sustainedAttention:Y.sustainedAttention,dividedAttention:Y.dividedAttention,impulseControl:Y.impulseControl,avgReactionTime:Y.avgReactionTime||0,accuracy:Y.accuracy||0,distractorClicks:Y.distractorClicks,correctChoices:Y.correctChoices,totalChoices:Y.totalChoices},timestamp:new Date().toISOString()};try{await sj(J),console.log("Story Attention Game Results saved successfully:",J)}catch($){console.error("Failed to save story attention game data:",$)}},[L,_e,s,e,X,m]),ae=async(Y="adventure")=>{p(Y),await O(Y),A(!0),W(Date.now())},te=()=>{A(!1),B(!1),x(0),C(!1),o([]),d(!1),j({selectiveAttention:0,sustainedAttention:0,dividedAttention:0,impulseControl:0,reactionTime:[],distractorClicks:0,correctChoices:0,totalChoices:0})};return V?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:u.jsx("div",{className:"max-w-4xl mx-auto",children:u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Hikaye Tamamlandı!"}),u.jsx("p",{className:"text-gray-600",children:"Dikkat becerilerinin analizi"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-lg text-white",children:[u.jsx(ig,{className:"h-8 w-8 mb-4"}),u.jsx("h3",{className:"text-lg font-bold",children:"Seçici Dikkat"}),u.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(L.selectiveAttention),"%"]}),u.jsx("p",{className:"text-blue-100 text-sm",children:"Çeldiricileri görmezden gelme"})]}),u.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-lg text-white",children:[u.jsx(Vn,{className:"h-8 w-8 mb-4"}),u.jsx("h3",{className:"text-lg font-bold",children:"Sürekli Dikkat"}),u.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(L.sustainedAttention),"%"]}),u.jsx("p",{className:"text-green-100 text-sm",children:"Dikkatin devamlılığı"})]}),u.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-6 rounded-lg text-white",children:[u.jsx(Do,{className:"h-8 w-8 mb-4"}),u.jsx("h3",{className:"text-lg font-bold",children:"Bölünmüş Dikkat"}),u.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(L.dividedAttention),"%"]}),u.jsx("p",{className:"text-purple-100 text-sm",children:"Çoklu görev yetisi"})]}),u.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 p-6 rounded-lg text-white",children:[u.jsx(__,{className:"h-8 w-8 mb-4"}),u.jsx("h3",{className:"text-lg font-bold",children:"Dürtü Kontrolü"}),u.jsxs("p",{className:"text-2xl font-bold",children:[Math.round(L.impulseControl),"%"]}),u.jsx("p",{className:"text-orange-100 text-sm",children:"Hızlı karar verme kontrolü"})]})]}),u.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Detaylı Analiz"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium",children:"Toplam Doğru Cevap:"})," ",L.correctChoices,"/",L.totalChoices]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium",children:"Başarı Oranı:"})," ",Math.round(L.correctChoices/L.totalChoices*100),"%"]})]}),u.jsxs("div",{children:[u.jsxs("p",{children:[u.jsx("span",{className:"font-medium",children:"Çeldirici Tıklama:"})," ",L.distractorClicks]}),u.jsxs("p",{children:[u.jsx("span",{className:"font-medium",children:"Ortalama Tepki Süresi:"})," ",Math.round(L.reactionTime.reduce((Y,k)=>Y+k,0)/L.reactionTime.length),"ms"]})]})]})]}),u.jsxs("div",{className:"flex gap-4 justify-center",children:[u.jsx("button",{onClick:te,className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Tekrar Oyna"}),u.jsx("button",{onClick:()=>t(Math.round((L.selectiveAttention+L.sustainedAttention+L.dividedAttention+L.impulseControl)/4),Date.now()-X,L),className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Ana Menüye Dön"})]})]})})}):T?u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:[he&&R?.backgroundTask&&u.jsx("div",{className:"fixed top-20 right-20 text-4xl cursor-pointer animate-bounce z-10",onClick:I,children:R.backgroundTask.targetSymbol}),le&&R?.emergencyTask&&u.jsx("div",{className:"fixed inset-0 bg-red-500/80 flex items-center justify-center z-50",children:u.jsxs("div",{className:"bg-white rounded-lg p-8 text-center animate-pulse",children:[u.jsx("div",{className:"text-6xl mb-4",children:R.emergencyTask.symbol}),u.jsx("h3",{className:"text-2xl font-bold text-red-600 mb-4",children:R.emergencyTask.instruction}),u.jsx("button",{onClick:N,className:"bg-red-500 hover:bg-red-600 text-white px-8 py-4 rounded-lg font-bold text-lg animate-pulse",children:"🏃‍♂️ KAÇ!"})]})}),u.jsxs("div",{className:"max-w-4xl mx-auto",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Sahne ",y+1," / ",a.length]}),u.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round((y+1)/a.length*100),"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:u.jsx("div",{className:"bg-purple-600 h-3 rounded-full transition-all duration-500",style:{width:`${(y+1)/a.length*100}%`}})})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"text-4xl mb-4",children:"📚"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:R?.story}),u.jsx("p",{className:"text-lg text-gray-600 mb-6",children:R?.question})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R?.choices.map(Y=>u.jsx("button",{onClick:()=>P(Y.id),className:`p-6 rounded-lg border-2 transition-all duration-200 hover:shadow-lg ${Y.isDistractor?"border-yellow-300 bg-yellow-50 hover:bg-yellow-100":Y.stroopConflict?"border-red-300 bg-red-50 hover:bg-red-100":"border-purple-300 bg-purple-50 hover:bg-purple-100"}`,style:Y.color?{borderColor:Y.color,backgroundColor:Y.color+"20"}:{},disabled:le,children:u.jsx("span",{className:"text-lg font-bold",style:Y.color&&Y.stroopConflict?{color:Y.color}:{},children:Y.text})},Y.id))}),R?.backgroundTask&&u.jsx("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:u.jsxs("p",{className:"text-center text-yellow-800 font-medium",children:["⚠️ ",R.backgroundTask.instruction]})})]})]})]}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 p-4",children:u.jsx("div",{className:"max-w-2xl mx-auto",children:u.jsx("div",{className:"bg-white rounded-lg shadow-lg p-8",children:u.jsxs("div",{className:"text-center",children:[u.jsx(wT,{className:"h-16 w-16 text-purple-600 mx-auto mb-6"}),u.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Hikaye Tabanlı Dikkat Oyunu"}),u.jsx("p",{className:"text-gray-600 mb-8",children:"Ali'nin macerasında ona yardım et! Bu oyun dikkat becerilerini ölçer:"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 text-left",children:[u.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[u.jsx(ig,{className:"h-6 w-6 text-blue-600 mb-2"}),u.jsx("h3",{className:"font-bold text-blue-800",children:"Seçici Dikkat"}),u.jsx("p",{className:"text-blue-700 text-sm",children:"Çeldiricileri görmezden gel"})]}),u.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[u.jsx(Vn,{className:"h-6 w-6 text-green-600 mb-2"}),u.jsx("h3",{className:"font-bold text-green-800",children:"Sürekli Dikkat"}),u.jsx("p",{className:"text-green-700 text-sm",children:"Dikkati uzun süre koru"})]}),u.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[u.jsx(Do,{className:"h-6 w-6 text-purple-600 mb-2"}),u.jsx("h3",{className:"font-bold text-purple-800",children:"Bölünmüş Dikkat"}),u.jsx("p",{className:"text-purple-700 text-sm",children:"Aynı anda iki işi yap"})]}),u.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[u.jsx(__,{className:"h-6 w-6 text-orange-600 mb-2"}),u.jsx("h3",{className:"font-bold text-orange-800",children:"Dürtü Kontrolü"}),u.jsx("p",{className:"text-orange-700 text-sm",children:"Düşünmeden hareket etme"})]})]}),u.jsxs("div",{className:"space-y-6",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 text-center mb-4",children:"Hangi hikayeyi oynamak istiyorsun?"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("button",{onClick:()=>ae("adventure"),disabled:l,className:"bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"text-3xl mb-2",children:"🌲"}),u.jsx("h4",{className:"font-bold",children:"Orman Macerası"}),u.jsx("p",{className:"text-sm text-green-100",children:"Ali'nin büyülü orman yolculuğu"})]}),u.jsxs("button",{onClick:()=>ae("space"),disabled:l,className:"bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"text-3xl mb-2",children:"🚀"}),u.jsx("h4",{className:"font-bold",children:"Uzay Keşfi"}),u.jsx("p",{className:"text-sm text-blue-100",children:"Aylin'in gezegen maceraları"})]}),u.jsxs("button",{onClick:()=>ae("underwater"),disabled:l,className:"bg-teal-500 hover:bg-teal-600 text-white p-4 rounded-lg font-medium transition-colors disabled:opacity-50",children:[u.jsx("div",{className:"text-3xl mb-2",children:"🐠"}),u.jsx("h4",{className:"font-bold",children:"Deniz Altı"}),u.jsx("p",{className:"text-sm text-teal-100",children:"Cem'in okyanus keşfi"})]})]}),l&&u.jsxs("div",{className:"text-center py-4",children:[u.jsx("div",{className:"w-8 h-8 border-4 border-purple-600 border-t-transparent rounded-full animate-spin mx-auto mb-2"}),u.jsx("p",{className:"text-gray-600",children:"Hikaye hazırlanıyor..."})]})]})]})})})})},VD=()=>{const{currentUser:s,logout:e}=es(),[t,a]=w.useState(null),[o]=w.useState({gamesPlayed:12,totalScore:850,averageScore:71,timeSpent:145}),l=async()=>{try{await e()}catch(p){console.error("Çıkış yapılırken hata:",p)}},d=(p,y,x)=>{a(null),p!==void 0&&console.log("Oyun tamamlandı:",{score:p,duration:y,emotions:x})},m=()=>{if(!s?.id)return null;switch(t){case"word-image":return u.jsx(bD,{studentId:s.id,studentAge:s.age||6,onGameComplete:d});case"number":return u.jsx(TD,{studentId:s.id,studentAge:s.age||6,onGameComplete:d});case"color":return u.jsx(ED,{studentId:s.id,studentAge:s.age||6,onGameComplete:d});case"attention-sprint":return u.jsx(DD,{studentId:s.id,studentAge:s.age||12,onGameComplete:d});case"story-attention":return u.jsx(OD,{studentId:s.id,studentAge:s.age||8,onGameComplete:d});default:return null}};return t?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsx("button",{onClick:()=>a(null),className:"mb-4 bg-white text-gray-700 px-4 py-2 rounded-lg shadow hover:shadow-md transition-shadow",children:"← Geri Dön"}),m()]})}):u.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",children:[u.jsx("div",{className:"bg-white shadow-sm border-b",children:u.jsx("div",{className:"container mx-auto px-4 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-primary to-secondary rounded-full flex items-center justify-center",children:u.jsx(Rt,{className:"h-6 w-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"NeuroLearn AI"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Öğrenci Paneli"})]})]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[u.jsx(dd,{className:"h-5 w-5"}),u.jsx("span",{className:"hidden sm:inline",children:s?.name})]}),u.jsxs("button",{onClick:l,className:"flex items-center space-x-2 bg-gray-100 hover:bg-gray-200 px-4 py-2 rounded-lg transition-colors",children:[u.jsx(NT,{className:"h-4 w-4"}),u.jsx("span",{className:"hidden sm:inline",children:"Çıkış"})]})]})]})})}),u.jsxs("div",{className:"container mx-auto px-4 py-8",children:[u.jsxs("div",{className:"mb-8 text-center",children:[u.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:["Hoş Geldin, ",s?.name,"! 🌟"]}),u.jsx("p",{className:"text-gray-600 text-lg",children:"Hangi oyunu oynamak istiyorsun?"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[u.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Oynanan Oyun"}),u.jsx("p",{className:"text-2xl font-bold text-primary",children:o.gamesPlayed})]}),u.jsx(Im,{className:"h-8 w-8 text-primary"})]})}),u.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Toplam Puan"}),u.jsx("p",{className:"text-2xl font-bold text-success",children:o.totalScore})]}),u.jsx(Im,{className:"h-8 w-8 text-success"})]})}),u.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Ortalama Puan"}),u.jsx("p",{className:"text-2xl font-bold text-warning",children:o.averageScore})]}),u.jsx(Im,{className:"h-8 w-8 text-warning"})]})}),u.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Geçirilen Süre"}),u.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[o.timeSpent,"dk"]})]}),u.jsx(gr,{className:"h-8 w-8 text-purple-600"})]})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 p-6 text-white",children:[u.jsx(wT,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Kelime-Resim Eşleştirme"}),u.jsx("p",{className:"text-blue-100",children:"Kelimeler ve resimler arasında bağlantı kur"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Son Puan"}),u.jsx("span",{children:"85/100"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"85%"}})})]}),u.jsx("button",{onClick:()=>a("word-image"),className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Başlat"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-green-600 p-6 text-white",children:[u.jsx(kT,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Sayı Öğrenme"}),u.jsx("p",{className:"text-green-100",children:"Sayıları sayarak matematik öğren"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Son Puan"}),u.jsx("span",{children:"72/100"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:"72%"}})})]}),u.jsx("button",{onClick:()=>a("number"),className:"w-full bg-green-500 hover:bg-green-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Başlat"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-purple-600 p-6 text-white",children:[u.jsx(fp,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Renk Eşleştirme"}),u.jsx("p",{className:"text-purple-100",children:"Renkleri eşleştirerek öğren"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Son Puan"}),u.jsx("span",{children:"91/100"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:"91%"}})})]}),u.jsx("button",{onClick:()=>a("color"),className:"w-full bg-purple-500 hover:bg-purple-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunu Başlat"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 p-6 text-white",children:[u.jsx(Vn,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Dikkat Oyunları"}),u.jsx("p",{className:"text-orange-100",children:"3 farklı dikkat geliştirici oyun seçeneği"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Oyun Çeşidi"}),u.jsx("span",{children:"3 Tür"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:"100%"}})}),u.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Tıklama • Sayma • Dinamik"})]}),u.jsx("button",{onClick:()=>a("attention-sprint"),className:"w-full bg-orange-500 hover:bg-orange-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Oyunları Keşfet"})]})]}),u.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 p-6 text-white",children:[u.jsx(RT,{className:"h-12 w-12 mb-4"}),u.jsx("h3",{className:"text-xl font-bold mb-2",children:"Hikaye Dikkat Oyunu"}),u.jsx("p",{className:"text-pink-100",children:"Ali'nin macerasında dikkat becerilerini test et"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Dikkat Türü"}),u.jsx("span",{children:"4 Boyut"})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-pink-500 h-2 rounded-full",style:{width:"100%"}})}),u.jsx("div",{className:"mt-2 text-xs text-gray-600",children:"Seçici • Sürekli • Bölünmüş • Dürtü Kontrolü"})]}),u.jsx("button",{onClick:()=>a("story-attention"),className:"w-full bg-pink-500 hover:bg-pink-600 text-white py-3 px-4 rounded-lg font-medium transition-colors",children:"Hikayeyi Başlat"})]})]})]}),u.jsxs("div",{className:"mt-12 text-center bg-white rounded-lg p-8 shadow-sm",children:[u.jsx("div",{className:"text-6xl mb-4",children:"🎯"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Harika İş Çıkarıyorsun!"}),u.jsx("p",{className:"text-gray-600",children:"Her oyun oynayışında daha da iyi oluyorsun. Böyle devam et! 🌟"})]})]})]})},A_=({children:s})=>{const{currentUser:e,loading:t}=es();return t?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Yükleniyor..."})]})}):e?u.jsx(u.Fragment,{children:s}):u.jsx(lc,{to:"/auth",replace:!0})},PD=({children:s})=>{const{currentUser:e,loading:t}=es();return t?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Yükleniyor..."})]})}):e?u.jsx(lc,{to:"/dashboard",replace:!0}):u.jsx(u.Fragment,{children:s})},LD=()=>{const{currentUser:s,loading:e}=es();if(e)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("div",{className:"w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Yükleniyor..."})]})});if(!s)return u.jsx(lc,{to:"/auth",replace:!0});const t=s.role==="teacher"?"/dashboard/teacher":"/dashboard/student";return u.jsx(lc,{to:t,replace:!0})};function zD(){return u.jsx(aj,{children:u.jsx(NS,{children:u.jsx("div",{className:"App",children:u.jsxs(aS,{children:[u.jsx(go,{path:"/auth",element:u.jsx(PD,{children:u.jsx(hD,{})})}),u.jsx(go,{path:"/dashboard/teacher",element:u.jsx(A_,{children:u.jsx(yD,{})})}),u.jsx(go,{path:"/dashboard/student",element:u.jsx(A_,{children:u.jsx(VD,{})})}),u.jsx(go,{path:"/dashboard",element:u.jsx(LD,{})}),u.jsx(go,{path:"/",element:u.jsx(lc,{to:"/dashboard",replace:!0})})]})})})})}gw.createRoot(document.getElementById("root")).render(u.jsx(zD,{}));
